<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Admin Guide</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll Wiki Publisher" name="generator"/>
    <link rel="stylesheet" href="css/content-style.css" type="text/css"/>
</head>
<body>
    <div class="container">
        <div id="title" class="prepend-top">
              <img src="spacelogo.png" />        
            <h1>WildFly 8</h1>
              <h1>Admin Guide</h1>
            <p>Exported from <a href="https://docs.jboss.org/author/display/WFLY8">JBoss Community Documentation Editor</a> at 2014-12-31 08:54:11 EST.</p>
            <p>Copyright 2014 JBoss Community contributors.</p>
            <br/><br/>
        </div>
        
        <div id="66322684" class="content prepend-top">
<ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Targetaudience">Target audience</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Prerequisites">Prerequisites</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Examplesinthisguide">Examples in this guide</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Managementclients">Management clients</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-WebManagementInterface">Web Management Interface</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-HTTPManagementEndpoint">HTTP Management Endpoint</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Accessingthewebconsole">Accessing the web console</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DefaultHTTPManagementInterfaceSecurity">Default HTTP Management Interface Security</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-CommandLineInterface">Command Line Interface</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-NativeManagementEndpoint">Native Management Endpoint</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-RunningtheCLI">Running the CLI</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-NoninteractiveMode">Non-interactive Mode</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-OperationRequests">Operation Requests</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Addressingresources">Addressing resources</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AvailableOperationTypesandDescriptions">Available Operation Types and Descriptions</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-CommandHistory">Command History</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-BatchProcessing">Batch Processing</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DefaultNativeManagementInterfaceSecurity">Default Native Management Interface Security</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ConfigurationFiles">Configuration Files</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Coremanagementconcepts">Core management concepts</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Operatingmodes">Operating modes</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-StandaloneServer">Standalone Server</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedDomain">Managed Domain</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Host">Host</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-HostController">Host Controller</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DomainController">Domain Controller</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ServerGroup">Server Group</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Server">Server</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-">     <span style="color: #333333;">
Deciding between running standalone servers or a managed domain    </span>
</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Generalconfigurationconcepts">General configuration concepts</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Extensions">Extensions</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ProfilesandSubsystems">Profiles and Subsystems</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Paths">Paths</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Interfaces">Interfaces</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SocketBindingsandSocketBindingGroups">Socket Bindings and Socket Binding Groups</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SystemProperties">System Properties</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Managementresources">Management resources</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Address"> Address</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Operations">Operations</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Attributes">Attributes</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Children">Children</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Descriptions"> Descriptions</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ComparisontoJMXMBeans">Comparison to JMX MBeans</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Basicstructureofthemanagementresourcetrees">Basic structure of the management resource trees</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Standaloneserver">Standalone server</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Manageddomain">Managed domain</a>            </p>
    </li></ul></li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Managementtasks">Management tasks</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Interfacesandports">Interfaces and ports</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Interfacedeclarations">Interface declarations</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SocketBindingGroups">Socket Binding Groups</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-IPv4versusIPv6">IPv4 versus IPv6</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Stackandaddresspreference">Stack and address preference</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-IPaddressliterals">IP address literals</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ConfigureSecurityRealms">Configure Security Realms</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-GeneralStructure">General Structure</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-EnablingaRealm">Enabling a Realm</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-InboundConnections">Inbound Connections</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagementInterfaces">Management Interfaces</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-RemotingSubsystem">Remoting Subsystem</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-OutboundConnections">Outbound Connections</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-RemotingSubsystem">Remoting Subsystem</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SlaveHostController">Slave Host Controller</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Authentication">Authentication</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Authorization">Authorization</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-OutOfTheBoxConfiguration">Out Of The Box Configuration</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagementRealm">Management Realm</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ApplicationRealm">Application Realm</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Authentication">Authentication</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Authorization">Authorization</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-othersecuritydomain">other security domain</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-adduser.sh">add-user.sh</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AddingaUser">Adding a User</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AManagementUser">A Management User</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-InteractiveMode">Interactive Mode</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-NonInteractiveMode">Non-Interactive Mode</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AnApplicationUser">An Application User</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-InteractiveMode">Interactive Mode</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-NonInteractiveMode">Non-Interactive Mode</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-UpdatingaUser">Updating a User</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AManagementUser">A Management User</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-InteractiveMode">Interactive Mode</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-NonInteractiveMode">Non-Interactive Mode</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AnApplicationUser">An Application User</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-InteractiveMode">Interactive Mode</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-NonInteractiveMode">Non-Interactive Mode</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-CommunityContributions">Community Contributions</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JMX">JMX</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DetailedConfiguration">Detailed Configuration</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cserveridentities%2F%3E%7D%7D"> <tt class=" ">&lt;server-identities /&gt;</tt></a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cssl%2F%3E%7D%7D"> <tt class=" ">&lt;ssl /&gt;</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Csecret%2F%3E%7D%7D"> <tt class=" ">&lt;secret /&gt;</tt></a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cauthentication%2F%3E%7D%7D"> <tt class=" ">&lt;authentication /&gt;</tt></a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Ctruststore%2F%3E%7D%7D"> <tt class=" ">&lt;truststore /&gt;</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Clocal%2F%3E%7D%7D"> <tt class=" ">&lt;local /&gt;</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cjaas%2F%3E%7D%7D"> <tt class=" ">&lt;jaas /&gt;</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cldap%2F%3E%7D%7D"> <tt class=" ">&lt;ldap /&gt;</tt></a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cusernamefilter%2F%3E%7D%7D"> <tt class=" ">&lt;username-filter /&gt;</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cadvancedfilter%2F%3E%7D%7D"> <tt class=" ">&lt;advanced-filter /&gt;</tt></a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cproperties%2F%3E%7D%7D"> <tt class=" ">&lt;properties /&gt;</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cusers%2F%3E%7D%7D"> <tt class=" ">&lt;users /&gt;</tt></a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cauthorization%2F%3E%7D%7D"> <tt class=" ">&lt;authorization /&gt;</tt></a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cproperties%2F%3E%7D%7D"> <tt class=" ">&lt;properties /&gt;</tt></a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Coutboundconnection%2F%3E%7D%7D"> <tt class=" ">&lt;outbound-connection /&gt;</tt></a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7B%3Cldap%2F%3E%7D%7D"> <tt class=" ">&lt;ldap /&gt;</tt></a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-PlugIns">Plug Ins</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AuthenticationPlugIn">AuthenticationPlugIn</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-PasswordCredential">PasswordCredential</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DigestCredential">DigestCredential</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ValidatePasswordCredential">ValidatePasswordCredential</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AuthorizationPlugIn">AuthorizationPlugIn</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-PlugInConfigurationSupport">PlugInConfigurationSupport</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-InstallingandConfiguringaPlugIn">Installing and Configuring a Plug-In</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-PlugInProvider">PlugInProvider</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-PackageasaModule">Package as a Module</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-TheAuthenticationPlugIn">The AuthenticationPlugIn</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-TheAuthorizationPlugIn">The AuthorizationPlugIn</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ForcingPlainTextAuthentication">Forcing Plain Text Authentication</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ExampleConfigurations">Example Configurations</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-LDAPAuthentication">LDAP Authentication</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-EnableSSL">Enable SSL</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AddClientCerttoSSL">Add Client-Cert to SSL</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JVMsettings">JVM settings</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedDomain">Managed Domain</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-StandaloneServer">Standalone Server</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Commandlineparameters">Command line parameters</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Systemproperties">System properties</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Standalone">Standalone</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedDomain">Managed Domain</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Othercommandlineparameters">Other command line parameters</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Standalone">Standalone</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedDomain">Managed Domain</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Commonparameters">Common parameters</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ControllingtheBindAddresswith%5Cb">Controlling the Bind Address with -b</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ControllingtheDefaultMulticastAddresswith%5Cu">Controlling the Default Multicast Address with -u</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Auditlogging">Audit logging</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JSONFormatter">JSON Formatter</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Handlers">Handlers</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Filehandler">File handler</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Sysloghandler">Syslog handler</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-UDP">UDP</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-TCP">TCP</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-TLS">TLS</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-TLSwithClientcertificateauthentication.">TLS with Client certificate authentication.</a>            </p>
    </li></ul></li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Loggerconfiguration">Logger configuration</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DomainMode%28hostspecificconfiguration%29">Domain Mode (host specific configuration)</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Subsystemconfiguration">Subsystem configuration</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-EESubsystemConfiguration">EE Subsystem Configuration</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Overview">Overview</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JavaEEApplicationDeployment">Java EE Application Deployment</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-GlobalModules">Global Modules</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-EARSubdeploymentsIsolation">EAR Subdeployments Isolation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-PropertyReplacement">Property Replacement</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SpecDescriptorPropertyReplacement">Spec Descriptor Property Replacement</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JBossDescriptorPropertyReplacement">JBoss Descriptor Property Replacement</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AnnotationPropertyReplacement">Annotation Property Replacement</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-EEConcurrencyUtilities">EE Concurrency Utilities</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ContextServices">Context Services</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedThreadFactories">Managed Thread Factories</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedExecutorServices">Managed Executor Services</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedScheduledExecutorServices">Managed Scheduled Executor Services</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DefaultEEBindings">Default EE Bindings</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Datasources">Data sources</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JDBCDriverInstallation">JDBC Driver Installation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DatasourceDefinitions">Datasource Definitions</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Usingsecuritydomains">Using security domains</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Deploymentof%5Cds.xmlfiles">Deployment of -ds.xml files</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ComponentReference">Component Reference</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Messaging">Messaging</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Connectors">Connectors</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JMSConnectionFactories">JMS Connection Factories</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JMSQueuesandTopics">JMS Queues and Topics</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DeadLetter%26Redelivery">Dead Letter &amp; Redelivery</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SecuritySettingsforHornetQaddressesandJMSdestinations">Security Settings for HornetQ addresses and JMS destinations</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SecurityDomainforUsers">Security Domain for Users</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ClusterAuthentication">Cluster Authentication</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Deploymentof%5Cjms.xmlfiles">Deployment of -jms.xml files</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JMSBridge">JMS Bridge</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Modulesforothermessagingbrokers">Modules for other messaging brokers</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Configuration">Configuration</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Managementcommands">Management commands</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ComponentReference">Component Reference</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Web">Web</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Webservices">Web services</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Domainmanagement">Domain management</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Structureofthewebservicessubsystem">Structure of the webservices subsystem</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Publishedendpointaddress">Published endpoint address</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Predefinedendpointconfigurations">Predefined endpoint configurations</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Endpointconfigs">Endpoint configs</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Handlerchains">Handler chains</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Handlers">Handlers</a>            </p>
    </li></ul></li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Runtimeinformation">Runtime information</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ComponentReference">Component Reference</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Logging">Logging</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Overview">Overview</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Attributes">Attributes</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7Baddloggingapidependencies%7D%7D"> <tt class=" ">add-logging-api-dependencies</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7Busedeploymentloggingconfig%7D%7D"> <tt class=" ">use-deployment-logging-config</tt></a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-PerdeploymentLogging">Per-deployment Logging</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-LoggingProfiles">Logging Profiles</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DefaultLogFileLocations">Default Log File Locations</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedDomain">Managed Domain</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-StandaloneServer">Standalone Server</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-FilterExpressions">Filter Expressions</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ListLogFilesandReadingLogFiles">List Log Files and Reading Log Files</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ListLogFiles">List Log Files</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ReadLogFile">Read Log File</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-FAQ">FAQ</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Whyistherea%7B%7Blogging.properties%7D%7Dfile%3F">Why is there a <tt class=" ">logging.properties</tt> file?</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JMX">JMX</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Auditlogging">Audit logging</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JSONFormatter">JSON Formatter</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-OSGi">OSGi</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DeploymentScanner">Deployment Scanner</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Threadssubsystemconfiguration">Threads subsystem configuration</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Definingthreadpools">Defining thread pools</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Operationrequestexamples">Operation request examples</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Simpleconfigurationsubsystems">Simple configuration subsystems</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Configurationfilehistory">Configuration file history</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Snapshots">Snapshots</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SubsequentStarts">Subsequent Starts</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Starting%26stoppingServersinaManagedDomain">Starting &amp; stopping Servers in a Managed Domain</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Applicationdeployment">Application deployment</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedDomain">Managed Domain</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DeploymentCommands">Deployment Commands</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ContentRepository">Content Repository</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-StandaloneServer">Standalone Server</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DeploymentCommands">Deployment Commands</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-FileSystemDeployments">File System Deployments</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DeploymentModes">Deployment Modes</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-MarkerFiles">Marker Files</a>            </p>
    </li></ul></li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-GettingServerspecificMetricsinaManagedDomain">Getting Server-specific Metrics in a Managed Domain</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Standalonemode">Standalone mode</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Domainmode">Domain mode</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Domainsetup">Domain setup</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DomainControllerConfiguration">Domain Controller Configuration</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-HostControllerConfiguration">Host Controller Configuration</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Servergroups">Server groups</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Servers">Servers</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JVM">JVM</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagementAPIreference">Management API reference</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Globaloperations">Global operations</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Breadresource%7D%7Doperation"> The <tt class=" ">read-resource</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Breadattribute%7D%7Doperation"> The <tt class=" ">read-attribute</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Bwriteattribute%7D%7Doperation"> The <tt class=" ">write-attribute</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Bunsetattribute%7D%7Doperation"> The <tt class=" ">unset-attribute</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Breadresourcedescription%7D%7Doperation"> The <tt class=" ">read-resource-description</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Breadoperationnames%7D%7Doperation"> The <tt class=" ">read-operation-names</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Breadoperationdescription%7D%7Doperation"> The <tt class=" ">read-operation-description</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Breadchildrentypes%7D%7Doperation"> The <tt class=" ">read-children-types</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Breadchildrennames%7D%7Doperation"> The <tt class=" ">read-children-names</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Breadchildrenresources%7D%7Doperation"> The <tt class=" ">read-children-resources</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-StandardOperations">Standard Operations</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Badd%7D%7Doperation">The <tt class=" ">add</tt> operation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-The%7B%7Bremove%7D%7Doperation">The <tt class=" ">remove</tt> operation</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Detypedmanagementandthejbossdmrlibrary">Detyped management and the jboss-dmr library</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ModelNodeandModelType">ModelNode and ModelType</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Basic%7B%7BModelNode%7D%7Dmanipulation">Basic <tt class=" ">ModelNode</tt> manipulation</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Lists">Lists</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Properties">Properties</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ModelType.OBJECT">ModelType.OBJECT</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ModelType.EXPRESSION">ModelType.EXPRESSION</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ModelType.TYPE">ModelType.TYPE</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Fulllistof%7B%7BModelNode%7D%7Dtypes">Full list of <tt class=" ">ModelNode</tt> types</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Textrepresentationofa%7B%7BModelNode%7D%7D">Text representation of a <tt class=" ">ModelNode</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JSONrepresentationofa%7B%7BModelNode%7D%7D">JSON representation of a <tt class=" ">ModelNode</tt></a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DescriptionoftheManagementModel">Description of the Management Model</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DescriptionoftheWildFlyManagedResources">Description of the WildFly Managed Resources</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DescriptionofanAttribute">Description of an Attribute</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DescriptionofanOperation">Description of an Operation</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DescriptionofanOperationParameterorReturnValue">Description of an Operation Parameter or Return Value</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ArbitraryDescriptors">Arbitrary Descriptors</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DescriptionofParent%2FChildRelationships">Description of Parent/Child Relationships</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ApplyingUpdatestoRuntimeServices">Applying Updates to Runtime Services</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ThenativemanagementAPI">The native management API</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-NativeManagementClientDependencies">Native Management Client Dependencies</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Workingwitha%7B%7BModelControllerClient%7D%7D">Working with a <tt class=" ">ModelControllerClient</tt></a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Creatingthe%7B%7BModelControllerClient%7D%7D">Creating the <tt class=" ">ModelControllerClient</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Creatinganoperationrequestobject">Creating an operation request object</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Executetheoperationandmanipulatetheresult%3A">Execute the operation and manipulate the result:</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Closethe%7B%7BModelControllerClient%7D%7D">Close the <tt class=" ">ModelControllerClient</tt></a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-FormatofaDetypedOperationRequest">Format of a Detyped Operation Request</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SimpleOperations">Simple Operations</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-OperationHeaders">Operation Headers</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-CompositeOperations">Composite Operations</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-OperationswithaRolloutPlan">Operations with a Rollout Plan</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DefaultRolloutPlan">Default Rollout Plan</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-FormatofaDetypedOperationResponse">Format of a Detyped Operation Response</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SimpleResponses">Simple Responses</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ResponseHeaders">Response Headers</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-BasicCompositeOperationResponses">Basic Composite Operation Responses</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-MultiServerResponses">Multi-Server Responses</a>            </p>
    </li></ul></li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-CLIRecipes">CLI Recipes</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Properties">Properties</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Adding%2CreadingandremovingsystempropertyusingCLI">Adding, reading and removing system property using CLI</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Overviewofallsystemproperties">Overview of all system properties</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Configuration">Configuration</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ListSubsystems">List Subsystems</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Listdescriptionofavailableattributesandchilds">List description of available attributes and childs</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ViewconfigurationasXMLfordomainmodelorhostmodel">View configuration as XML for domain model or host model</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Takeasnapshotofwhatthecurrentdomainis">Take a snapshot of what the current domain is</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Takethelatestsnapshotofthehost.xmlforaparticularhost">Take the latest snapshot of the host.xml for a particular host</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Howtogetinterfaceaddress">How to get interface address</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Runtime">Runtime</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-GetallconfigurationandruntimedetailsfromCLI">Get all configuration and runtime details from CLI</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Scripting">Scripting</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Windowsand%22Pressanykeytocontinue...%22issue">Windows and &quot;Press any key to continue ...&quot; issue</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Statistics">Statistics</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Readstatisticsofactivedatasources">Read statistics of active datasources</a>            </p>
    </li></ul></li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-AllWildFly8documentation">All WildFly 8 documentation</a>            </p>
    </li></ul>    <div class="section-2"  id="66322684_AdminGuide-Targetaudience"  >
        <h2>Target audience</h2>
    
            <p>
    This document is a guide to the setup, administration, and configuration of WildFly 8.            </p>
        <div class="section-3"  id="66322684_AdminGuide-Prerequisites"  >
        <h3>Prerequisites</h3>
    
            <p>
    Before continuing, you should know how to download, install and run WildFly 8. For more information on these steps, refer here: <a href="https://docs.jboss.org/author/display/WFLY8/Getting+Started+Guide">Getting Started Guide</a>.            </p>
        </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Examplesinthisguide"  >
        <h3>Examples in this guide</h3>
    
            <p>
    The examples in this guide are largely expressed as XML configuration file excerpts, or by&nbsp;using a representation of the de-typed management model.            </p>
        </div>
    
    </div>
    
    <div class="section-2"  id="66322684_AdminGuide-Managementclients"  >
        <h2>Management clients</h2>
    
            <p>
    WildFly 8 offers three different approaches to configure and manage servers: a web interface, a command line client and a set of XML configuration files. Regardless of the approach you choose, the configuration is always synchronized across the different views and finally persisted to the XML files.            </p>
        <div class="section-3"  id="66322684_AdminGuide-WebManagementInterface"  >
        <h3>Web Management Interface</h3>
    
            <p>
    The web interface is a GWT application that uses the HTTP management API to configure a management domain or standalone server.            </p>
        <div class="section-4"  id="66322684_AdminGuide-HTTPManagementEndpoint"  >
        <h4>HTTP Management Endpoint</h4>
    
            <p>
    The HTTP API endpoint is the entry point for management clients that rely on the HTTP protocol to integrate with the management layer. It uses a JSON encoded protocol and a de-typed, RPC style API to describe and execute management operations against a managed domain or standalone server. It's used by the web console, but offers integration capabilities for a wide range of other clients too.            </p>
                <p>
    The HTTP API endpoint is co-located with either the domain controller or a standalone server. By default, it runs on port 9990:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;management-interfaces&gt;
 [...]
 &lt;http-interface security-realm=&quot;ManagementRealm&quot;&gt;
  &lt;socket-binding http=&quot;management-http&quot;/&gt;
 &lt;/http-interface&gt;
&lt;management-interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone.xml or domain/configuration/host.xml)</sub>            </p>
                <p>
    The HTTP API Endpoint serves two different contexts. One for executing management operations and another one that allows you to access the web interface:            </p>
    <ul class=" "><li class=" ">            <p>
    Domain API: http://&lt;host&gt;:9990/management            </p>
    </li><li class=" ">            <p>
    Web Console: http://&lt;host&gt;:9990/console            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Accessingthewebconsole"  >
        <h4>Accessing the web console</h4>
    
            <p>
    The web console is served through the same port as the HTTP management API. It can be accessed by pointing your browser to:            </p>
    <ul class=" "><li class=" ">            <p>
    http://&lt;host&gt;:9990/console&nbsp;            </p>
    </li></ul>    <div class="confbox admonition admonition-tip">
            <div class="title">Default URL</div>
        
            <p>
    By default the web interface can be accessed here: <a href="http://localhost:9990/console">http://localhost:9990/console</a>.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-DefaultHTTPManagementInterfaceSecurity"  >
        <h4>Default HTTP Management Interface Security</h4>
    
            <p>
    WildFly 8 is now distributed secured by default, the default security mechanism is username / password based making use of HTTP Digest for the authentication process.            </p>
                <p>
    The reason for securing the server by default is so that if the management interfaces are accidentally exposed on a public IP address authentication is required to connect - for this reason there is no default user in the distribution.            </p>
                <p>
    If you attempt to connect to the admin console before you have added a user to the server you will be presented with the following screen.            </p>
                <p>
        <img src="images/author/download/attachments/66322688/799364968.png" alt="images/author/download/attachments/66322688/799364968.png" />
    <br/>The user are stored in a properties file called mgmt-users.properties under standalone/configuration and domain/configuration depending on the running mode of the server, these files contain the users username along with a pre-prepared hash of the username along with the name of the realm and the users password.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    Although the properties files do not contain the plain text passwords they should still be guarded as the pre-prepared hashes could be used to gain access to any server with the same realm if the same user has used the same password.            </p>
        </div>
    
            <p>
    To manipulate the files and add users we provide a utility add-user.sh and add-user.bat to add the users and generate the hashes, to add a user you should execute the script and follow the guided process.     <img src="images/author/download/attachments/66322688/-1281961609.png" alt="images/author/download/attachments/66322688/-1281961609.png" />
<br/>The full details of the add-user utility are described later but for the purpose of accessing the management interface you need to enter the following values: -            </p>
    <ul class=" "><li class=" ">            <p>
    Type of user - This will be a 'Management User' to selection option a.            </p>
    </li><li class=" ">            <p>
    Realm - This MUST match the realm name used in the configuration so unless you have changed the configuration to use a different realm name leave this set as 'ManagementRealm'.            </p>
    </li><li class=" ">            <p>
    Username - The username of the user you are adding.            </p>
    </li><li class=" ">            <p>
    Password - The users password.            </p>
    </li></ul>            <p>
    Provided the validation passes you will then be asked to confirm you want to add the user and the properties files will be updated.            </p>
                <p>
    For the final question, as this is a user that is going to be accessing the admin console just answer 'n' - this option will be described later for adding slave host controllers that authenticate against a master domain controller but that is a later topic.            </p>
                <p>
    Updates to the properties file are picked up in real time so either click 'Try Again' on the error page that was displayed in the browser or navigate to the console again and you should then be prompted to enter the username and password to connect to the server.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-CommandLineInterface"  >
        <h3>Command Line Interface</h3>
    
            <p>
    The Command Line Interface (CLI) is a management tool for a managed domain or standalone server. It allows a user to connect to the domain controller or a standalone server and execute management operations available through the de-typed management model.&nbsp;            </p>
        <div class="section-4"  id="66322684_AdminGuide-NativeManagementEndpoint"  >
        <h4>Native Management Endpoint</h4>
    
            <p>
    The native API endpoint is the entry point for management clients that  rely on the AS's native protocol to integrate with the management layer. It  uses an open binary protocol and an RPC style API based on a very small number of Java types to describe  and execute management operations against a managed domain or standalone  server. It's used by the CLI management tool, but offers integration  capabilities for a wide range of other clients too.            </p>
                <p>
    The native API endpoint is co-located with either the a host controller or a standalone server. To use the CLI it must be enabled. By default, it runs on port 9999:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;management-interfaces&gt;
 &lt;native-interface security-realm=&quot;ManagementRealm&quot;&gt;
  &lt;socket-binding native=&quot;management-native&quot;/&gt;
 &lt;/native-interface&gt;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/native-interf  [...]
&lt;management-interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone.xml or domain/configuration/host.xml)</sub>            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-RunningtheCLI"  >
        <h4>Running the CLI</h4>
    
            <p>
    Depending on the operating system, the CLI is launched using <tt class=" ">jboss-cli.sh</tt> or <tt class=" ">jboss-cli.bat</tt> located in the WildFly 8&nbsp;<tt class=" ">bin</tt> directory. For further information on the default directory structure, please consult the &quot;<a href="https://docs.jboss.org/author/display/WFLY8/Getting+Started+Guide">Getting Started Guide</a>&quot;.            </p>
                <p>
    The first thing to do after the CLI has started is to connect to a managed WildFly 8&nbsp;instance. This is done using the command&nbsp;<i class=" ">connect</i>, e.g.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>./bin/jboss-cli.sh
You are disconnected at the moment. Type 'connect' to connect to the server
or 'help' for the list of supported commands.
[disconnected /]

[disconnected /] connect
[domain@localhost:9999 /]

[domain@localhost:9999 /] quit
Closed connection to localhost:9999</code></pre>
        </div>
    </div>
            <p>
    <tt class=" ">localhost:9999</tt> is the default host and port combination for the WildFly 8 domain controller client.            </p>
                <p>
    The host and the port of the server can be provided as an optional parameter, if the server is not listening on localhost:9999.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>./bin/jboss-cli.sh
You are disconnected at the moment. Type 'connect' to connect to the server
[disconnected /] connect 192.168.0.10:9999
Connected to standalone controller at 192.168.0.1:9999</code></pre>
        </div>
    </div>
            <p>
    The :9999 is not required as the CLI will use port 9999 by default. The port needs to be provided if the server is listening on some other port.            </p>
                <p>
    &nbsp;To terminate the session type&nbsp;<i class=" ">quit</i>.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    The jboss-cli script accepts a --connect parameter: ./jboss-cli.sh --connect            </p>
                <p>
    The --controller parameter can be used to specify the host and port of the server: ./jboss-cli.sh --connect --controller=192.168.0.1:9999            </p>
        </div>
    
            <p>
    Help is also available:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] help
Supported commands:

cn (or cd)             - change the current node path to the argument;
connect                - connect to the specified host and port;
deploy                 - deploy an application;
help (or h)            - print this message;
history                - print or disable/enable/clear the history expansion.
ls                     - list the contents of the node path;
pwn (or pwd)           - prints the current working node;
quit (or q)            - quit the command line interface;
undeploy               - undeploy an application;
version                - prints the version and environment information.

add-jms-queue          - creates a new JMS queue
remove-jms-queue       - removes an existing JMS queue
add-jms-topic          - creates a new JMS topic
remove-jms-topic       - removes an existing JMS topic
add-jms-cf             - creates a new JMS connection factory
remove-jms-cf          - removes an existing JMS connection factory

data-source            - allows to add new, modify and remove existing data sources
xa-data-source         - allows to add new, modify and remove existing XA data sources


For a more detailed description of a specific command,
execute the command with '--help' as the argument.</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-NoninteractiveMode"  >
        <h4>interactive Mode</h4>
    
            <p>
    The CLI can also be run in non-interactive mode to support scripts and other types of command line or batch processing. The --command and --commands arguments can be used to pass a command or a list of commands to execute. Additionally a --file argument is supported which enables CLI commands to be provided from a text file.            </p>
                <p>
    For example the following command can be used to list all the current deployments            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$ ./bin/jboss-cli.sh --connect --commands=ls\ deployment
sample.war
osgi-bundle.jar</code></pre>
        </div>
    </div>
            <p>
    The output can be combined with other shell commands for further processing, for example to find out what .war files are deployed:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$ ./bin/jboss-cli.sh --connect --commands=ls\ deployment | grep war
sample.war</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-OperationRequests"  >
        <h4>Operation Requests</h4>
    
            <p>
    Operation requests allow for low level interaction with the management model. They are different from the high level commands (i.e. <i class=" ">create-jms-queue</i>) in that they allow you to read and modify the server configuration as if you were editing the XML configuration files directly. The configuration is represented as a tree of addressable resources, where each node in the tree (aka resource) offers a set of operations to execute.            </p>
                <p>
    An operation request basically consists of three parts: The <i class=" ">address</i>, an <i class=" ">operation name</i> and an optional set of <i class=" ">parameters</i>.            </p>
                <p>
    The formal specification for an operation request is:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[/node-type=node-name (/node-type=node-name)*] : operation-name [( [parameter-name=parameter-value (,parameter-name=parameter-value)*] )]</code></pre>
        </div>
    </div>
            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/profile=production/subsystem=threads/bounded-queue-thread-pool=pool1:write-core-threads (count=0, per-cpu=20)</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
            <div class="title">Tab Completion</div>
        
            <p>
    Tab-completion is supported for all commands and options, i.e. node-types and node-names, operation names and parameter names. We are also considering adding aliases that are less verbose for the user, and will translate into the corresponding operation requests in the background.            </p>
        </div>
    
            <p>
    Whitespaces between the separators in the operation request strings are not significant.            </p>
        <div class="section-5"  id="66322684_AdminGuide-Addressingresources"  >
        <h5>Addressing resources</h5>
    
            <p>
    Operation requests might not always have the address part or the parameters. E.g.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>:read-resource</code></pre>
        </div>
    </div>
            <p>
    which will list all the node types for the current node.            </p>
                <p>
    To syntactically disambiguate between the commands and operations, operations require one of the following prefixes:            </p>
                <p>
    To execute an operation against the current node, e.g.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>cd subsystem=web
:read-resource(recursive=&quot;true&quot;)</code></pre>
        </div>
    </div>
            <p>
    To execute an operation against a child node of the current node, e.g.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>cd subsystem=web
./connector=http:read-resource</code></pre>
        </div>
    </div>
            <p>
    To execute an operation against the root node, e.g.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=threads:read-resource</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-AvailableOperationTypesandDescriptions"  >
        <h5>Available Operation Types and Descriptions</h5>
    
            <p>
    The operation types can be distinguished between common operations that exist on any node and specific operations that belong to a particular configuration resource (i.e. subsystem). The common operations are:            </p>
    <ul class=" "><li class=" ">            <p>
    add            </p>
    </li><li class=" ">            <p>
    read-attribute            </p>
    </li><li class=" ">            <p>
    read-children-names            </p>
    </li><li class=" ">            <p>
    read-children-resources            </p>
    </li><li class=" ">            <p>
    read-children-types            </p>
    </li><li class=" ">            <p>
    read-operation-description            </p>
    </li><li class=" ">            <p>
    read-operation-names            </p>
    </li><li class=" ">            <p>
    read-resource            </p>
    </li><li class=" ">            <p>
    read-resource-description            </p>
    </li><li class=" ">            <p>
    remove            </p>
    </li><li class=" ">            <p>
    validate-address            </p>
    </li><li class=" ">            <p>
    write-attribute            </p>
    </li></ul>            <p>
    For a list of specific operations (e.g. operations that relate to the logging subsystem) you can always query the model itself. For example, to read the operations supported by the logging subsystem resource on a standalone server:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[[standalone@localhost:9999 /] /subsystem=logging:read-operation-names
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [
       &quot;add&quot;,
       &quot;change-root-log-level&quot;,
       &quot;read-attribute&quot;,
       &quot;read-children-names&quot;,
       &quot;read-children-resources&quot;,
       &quot;read-children-types&quot;,
       &quot;read-operation-description&quot;,
       &quot;read-operation-names&quot;,
       &quot;read-resource&quot;,
       &quot;read-resource-description&quot;,
       &quot;remove-root-logger&quot;,
       &quot;root-logger-assign-handler&quot;,
       &quot;root-logger-unassign-handler&quot;,
       &quot;set-root-logger&quot;,
       &quot;validate-address&quot;,
       &quot;write-attribute&quot;
   ]
}</code></pre>
        </div>
    </div>
            <p>
    As you can see, the logging resource offers four additional operations, namely <i class=" ">root-logger-assign-handler, root-logger-unassign-handler</i>&nbsp;, <i class=" ">set-root-logger</i> and <i class=" ">remove-root-logger</i>.            </p>
                <p>
    Further documentation about a resource or operation can be retrieved through the description:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=logging:read-operation-description(name=change-root-log-level)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; {
       &quot;operation-name&quot; =&gt; &quot;change-root-log-level&quot;,
       &quot;description&quot; =&gt; &quot;Change the root logger level.&quot;,
       &quot;request-properties&quot; =&gt; {&quot;level&quot; =&gt; {
           &quot;type&quot; =&gt; STRING,
           &quot;description&quot; =&gt; &quot;The log level specifying which message levels will be logged by this logger.
                            Message levels lower than this value will be discarded.&quot;,
           &quot;required&quot; =&gt; true
       }}
   }
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
            <div class="title">Full model</div>
        
            <p>
    To see the full model enter <tt class=" ">:read-resource(recursive=true)</tt>.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-CommandHistory"  >
        <h4>Command History</h4>
    
            <p>
    Command (and operation request) history is enabled by default. The history is kept both in-memory and in a file on the disk, i.e. it is preserved between the command line sessions. The history file name is .jboss-cli-history and is automatically created in the user's home directory. When the command line interface is launched this file is read and the in-memory history is initialized with its content.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    While in the command line session, you can use the arrow keys to go back and forth in the history of commands and operations.            </p>
        </div>
    
            <p>
    To manipulate the history you can use <i class=" ">history</i> command. If executed without any arguments, it will print all the recorded commands and operations (up to the configured maximum, which defaults to 500) from the in-memory history.            </p>
                <p>
    <i class=" ">history</i>&nbsp;supports three optional arguments:            </p>
    <ul class=" "><li class=" ">            <p>
    <i class=" ">disable</i> - will disable history expansion (but will not clear the previously recorded history);            </p>
    </li><li class=" ">            <p>
    <i class=" ">enabled</i> - will re-enable history expansion (starting from the last recorded command before the history expansion was disabled);            </p>
    </li><li class=" ">            <p>
    <i class=" ">clear</i> - will clear the in-memory history (but not the file one).            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-BatchProcessing"  >
        <h4>Batch Processing</h4>
    
            <p>
    The batch mode allows one to group commands and operations and execute them together as an atomic unit. If at least one of the commands or operations fails, all the other successfully executed commands and operations in the batch are rolled back.            </p>
                <p>
    Not all of the commands are allowed in the batch. For example, commands like <i class=" ">cd</i>, <i class=" ">ls</i>, <i class=" ">help</i>, etc. are not allowed in the batch since they don't translate into operation requests. Only the commands that translate into operation requests are allowed in the batch. The batch, actually, is executed as a composite operation request.            </p>
                <p>
    The batch mode is entered by executing command&nbsp;<i class=" ">batch</i>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] batch
[standalone@localhost:9999 / #] /subsystem=datasources/data-source=&quot;java\:\/H2DS&quot;:enable
[standalone@localhost:9999 / #] /subsystem=messaging/jms-queue=&quot;newQueue&quot;:add</code></pre>
        </div>
    </div>
            <p>
    You can execute a batch using the <i class=" ">run-batch</i> command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 / #] run-batch
The batch executed successfully.</code></pre>
        </div>
    </div>
            <p>
    Exit the batch edit mode without losing your changes:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 / #] holdback-batch
[standalone@localhost:9999 /]</code></pre>
        </div>
    </div>
            <p>
    Then activate it later on again:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] batch
Re-activated batch
#1 /subsystem=datasources/data-source=java:/H2DS:\/H2DS:enable</code></pre>
        </div>
    </div>
            <p>
    There are several other notable batch commands available as well (tab complete to see the list):            </p>
    <ul class=" "><li class=" ">            <p>
    <i class=" ">clear-batch</i>            </p>
    </li><li class=" ">            <p>
    <i class=" ">edit-batch-line</i> (e.g. <i class=" ">edit-batch line 3 create-jms-topic name=mytopic</i>)            </p>
    </li><li class=" ">            <p>
    <i class=" ">remove-batch-line</i> (e.g. <i class=" ">remove-batch-line 3</i>)            </p>
    </li><li class=" ">            <p>
    <i class=" ">move-batch-line</i> (e.g. <i class=" ">move-batch-line 3 1</i>)            </p>
    </li><li class=" ">            <p>
    <i class=" ">discard-batch</i>            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-DefaultNativeManagementInterfaceSecurity"  >
        <h4>Default Native Management Interface Security</h4>
    
            <p>
    The native interface shares the same security configuration as the http interface, however we also support a local authentication mechanism which means that the CLI can authenticate against the local WildFly instance without prompting the user for a username and password. &nbsp;This mechanism only works if the user running the CLI has read access to the standalone/tmp/auth folder or domain/tmp/auth folder under the respective WildFly installation - if the local mechanism fails then the CLI will fallback to prompting for a username and password for a user configured as in&nbsp;<a href="https://docs.jboss.org/author/display/AS71/Default+HTTP+Interface+Security">Default HTTP Interface Security</a>.            </p>
                <p>
    Establishing a CLI connection to a remote server will require a username and password by default.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-ConfigurationFiles"  >
        <h3>Configuration Files</h3>
    
            <p>
    The XML configuration for a management domain and a standalone server can be found in the <tt class=" ">configuration</tt> subdirectory:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">domain/configuration/domain.xml</tt>            </p>
    </li><li class=" ">            <p>
    <tt class=" ">domain/configuration/host.xml</tt>            </p>
    </li><li class=" ">            <p>
    <tt class=" ">standalone/configuration/standalone.xml</tt>            </p>
    </li></ul>            <p>
    A managed domain actually ships with two different configuration types: One for the domain as a whole (<tt class=" ">domain.xml</tt>) and and another for each host that joins the domain (<tt class=" ">host.xml</tt>). A detailed explanation how to setup a domain topology can be found in the chapter &quot;Domain Setup&quot;.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    The XML configuration files act as a central, authoritative source of configuration. Any configuration changes made via the web interface or the CLI are persisted back to the XML configuration files. If a domain or standalone server is offline, the XML configuration files can be hand edited as well, and any changes will be picked up when the domain or standalone server is next started. However, users are encouraged to use the web interface or the CLI in preference to making offline edits to the configuration files. External changes made to the configuration files while processes are running will not be detected, and may be overwritten.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322684_AdminGuide-Coremanagementconcepts"  >
        <h2>Core management concepts</h2>
    
    <div class="section-3"  id="66322684_AdminGuide-Operatingmodes"  >
        <h3>Operating modes</h3>
    
            <p>
    WildFly 8 can be booted in two different modes. A <i class=" ">managed domain</i> allows you to run and manage a multi-server topology. Alternatively, you can run a <i class=" ">standalone server</i> instance.            </p>
        <div class="section-4"  id="66322684_AdminGuide-StandaloneServer"  >
        <h4>Standalone Server</h4>
    
            <p>
    For many use cases, the centralized management capability available via a managed domain is not necessary. For these use cases, a WildFly 8 instance can be run as a &quot;standalone server&quot;. A standalone server instance is an independent process, much like an JBoss Application Server 3, 4, 5, or 6 instance is. Standalone instances can be launched via the <tt class=" ">standalone.sh</tt> or <tt class=" ">standalone.bat</tt> launch scripts.            </p>
                <p>
    If more than one standalone instance is launched and multi-server management is desired, it is the user's responsibility to coordinate management across the servers. For example, to deploy an application across all of the standalone servers, the user would need to individually deploy the application on each server.            </p>
                <p>
    It is perfectly possible to launch multiple standalone server instances and have them form an HA cluster, just like it was possible with JBoss Application Server 3, 4, 5 and 6.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ManagedDomain"  >
        <h4>Managed Domain</h4>
    
            <p>
    One of the primary new features of WildFly 8 is the ability to manage multiple WildFly instances from a single control point. A collection of such servers is referred to as the members of a &quot;domain&quot; with a single Domain Controller process acting as the central management control point. All of the WildFly 8 instances in the domain share a common management policy, with the Domain Controller acting to ensure that each server is configured according to that policy. Domains can span multiple physical (or virtual) machines, with all WildFly 8 instances on a given host under the control of a special Host Controller process. One Host Controller instance is configured to act as the central Domain Controller. The Host Controller on each host interacts with the Domain Controller to control the lifecycle of the application server instances running on its host and to assist the Domain Controller in managing them.            </p>
                <p>
    When you launch a WildFly 8 managed domain on a host (via the <tt class=" ">domain.sh</tt> or <tt class=" ">domain.bat</tt> launch scripts) your intent is to launch a Host Controller and usually at least one WildFly instance. On one of the hosts the Host Controller should be configured to act as the Domain Controller. See <span class=" error">[WLFY8:Domain Setup]</span> for details.            </p>
                <p>
    The following is an example managed domain topology:            </p>
                <p>
        <img src="images/author/download/attachments/66322691/-1224665945.png" alt="images/author/download/attachments/66322691/-1224665945.png" />
                </p>
        <div class="section-5"  id="66322684_AdminGuide-Host"  >
        <h5>Host</h5>
    
            <p>
    Each &quot;Host&quot; box in the above diagram represents a physical or virtual host. A physical host can contain zero, one or more server instances.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-HostController"  >
        <h5>Host Controller</h5>
    
            <p>
    When the domain.sh or domain.bat script is run on a host, a process known as a Host Controller is launched. The Host Controller is solely concerned with server management; it does not itself handle application server workloads. The Host Controller is responsible for starting and stopping the individual application server processes that run on its host, and interacts with the Domain Controller to help manage them.            </p>
                <p>
    Each Host Controller by default reads its configuration from the <tt class=" ">domain/configuration/host.xml</tt> file located in the unzipped WildFly 8 installation on its host's filesystem. The <tt class=" ">host.xml</tt> file contains configuration information that is specific to the particular host. Primarily:            </p>
    <ul class=" "><li class=" ">            <p>
    the listing of the names of the actual WildFly 8 instances that are meant to run off of this installation.            </p>
    </li><li class=" ">            <p>
    configuration of how the Host Controller is to contact the Domain Controller to register itself and access the domain configuration. This may either be configuration of how to find and contact a remote Domain Controller, or a configuration telling the Host Controller to itself act as the Domain Controller.            </p>
    </li><li class=" ">            <p>
    configuration of items that are specific to the local physical installation. For example, named interface definitions declared in <tt class=" ">domain.xml</tt> (see below) can be mapped to an actual machine-specific IP address in <tt class=" ">host.xml</tt>. Abstract path names in <tt class=" ">domain.xml</tt> can be mapped to actual filesystem paths in <tt class=" ">host.xml</tt>.            </p>
    </li></ul>    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-DomainController"  >
        <h5>Domain Controller</h5>
    
            <p>
    One Host Controller instance is configured to act as the central management point for the entire domain, i.e. to be the Domain Controller. The primary responsibility of the Domain Controller is to maintain the domain's central management policy, to ensure all Host Controllers are aware of its current contents, and to assist the Host Controllers in ensuring any running application server instances are configured in accordance with this policy. This central management policy is stored by default in the <tt class=" ">domain/configuration/domain.xml</tt> file in the unzipped WildFly 8 installation on Domain Controller's host's filesystem.            </p>
                <p>
    A <tt class=" ">domain.xml</tt> file must be located in the <tt class=" ">domain/configuration</tt> directory of an installation that's meant to run the Domain Controller. It does not need to be present in installations that are not meant to run a Domain Controller; i.e. those whose Host Controller is configured to contact a remote Domain Controller. The presence of a <tt class=" ">domain.xml</tt> file on such a server does no harm.            </p>
                <p>
    The <tt class=" ">domain.xml</tt> file includes, among other things, the configuration of the various &quot;profiles&quot; that WildFly 8 instances in the domain can be configured to run. A profile configuration includes the detailed configuration of the various subsystems that comprise that profile (e.g. an embedded JBoss Web instance is a subsystem; a JBoss TS transaction manager is a subsystem, etc). The domain configuration also includes the definition of groups of sockets that those subsystems may open. The domain configuration also includes the definition of &quot;server groups&quot;:            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ServerGroup"  >
        <h5>Server Group</h5>
    
            <p>
    A server group is set of server instances that will be managed and configured as one. In a managed domain each application server instance is a member of a server group. (Even if the group only has a single server, the server is still a member of a group.) It is the responsibility of the Domain Controller and the Host Controllers to ensure that all servers in a server group have a consistent configuration. They should all be configured with the same profile and they should have the same deployment content deployed.            </p>
                <p>
    The domain can have multiple server groups. The above diagram shows two server groups, &quot;ServerGroupA&quot; and &quot;ServerGroupB&quot;. Different server groups can be configured with different profiles and deployments; for example in a domain with different tiers of servers &#65279;providing different services. Different server groups can also run the same profile and have the same deployments; for example to support rolling application upgrade scenarios where a complete service outage is avoided by first upgrading the application on one server group and then upgrading a second server group.            </p>
                <p>
    An example server group definition is as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;server-group name=&quot;main-server-group&quot; profile=&quot;default&quot;&gt;
&nbsp;&nbsp;&nbsp; &lt;socket-binding-group ref=&quot;standard-sockets&quot;/&gt;
&nbsp;&nbsp;&nbsp; &lt;deployments&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;deployment name=&quot;foo.war_v1&quot; runtime-name=&quot;foo.war&quot; /&gt;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;deployment name=&quot;bar.ear&quot; runtime-name=&quot;bar.ear&quot; /&gt;
&nbsp;&nbsp;&nbsp; &lt;/deployments&gt;
&lt;/server-group&gt;</code></pre>
        </div>
    </div>
            <p>
    A server-group configuration includes the following required attributes:            </p>
    <ul class=" "><li class=" ">            <p>
    name -- the name of the server group            </p>
    </li><li class=" ">            <p>
    profile -- the name of the profile the servers in the group should run            </p>
    </li></ul>            <p>
    In addition, the following optional elements are available:            </p>
    <ul class=" "><li class=" ">            <p>
    socket-binding-group  -- specifies the name of the default socket binding group to use on  servers in the group. Can be overridden on a per-server basis in <tt class=" ">host.xml</tt>. If not provided in the <tt class=" ">server-group</tt> element, it must be  provided for each server in <tt class=" ">host.xml</tt>.            </p>
    </li><li class=" ">            <p>
    deployments -- the deployment content that should be deployed on the servers in the group.            </p>
    </li><li class=" ">            <p>
    system-properties -- system properties that should be set on all servers in the group            </p>
    </li><li class=" ">            <p>
    jvm  -- default jvm settings for all servers in the group. The Host  Controller will merge these settings with any provided in <tt class=" ">host.xml</tt> to  derive the settings to use to launch the server's JVM. See <a href="https://docs.jboss.org/author/display/AS7/JVM+settings">JVM settings</a> for further details.            </p>
    </li></ul>    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Server"  >
        <h5>Server</h5>
    
            <p>
    Each &quot;Server&quot; in the above diagram represents an actual application server instance. The server runs in a separate JVM process from the Host Controller. The Host Controller is responsible for launching that process. (In a managed domain the end user cannot directly launch a server process from the command line.)            </p>
                <p>
        <span style="color: #333333;">
The Host Controller synthesizes the server's configuration by combining elements from the domain wide configuration (from    </span>
     <span style="color: #333333;">
<tt class=" ">domain.xml</tt>    </span>
    <span style="color: #333333;">
) and the host-specific configuration (from    </span>
     <span style="color: #333333;">
<tt class=" ">host.xml</tt>    </span>
    <span style="color: #333333;">
).    </span>
            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-"  >
        <h4>Deciding between running standalone servers or a managed domain</h4>
    
            <p>
    Which use cases are appropriate for managed domain and which are appropriate for standalone servers? A managed domain is all about coordinated multi-server management -- with it WildFly 8 provides a central point through which users can manage multiple servers, with rich capabilities to keep those servers' configurations consistent and the ability to roll out configuration changes (including deployments) to the servers in a coordinated fashion.            </p>
                <p>
    It's important to understand that the choice between a managed domain and standalone servers is all about how your servers are managed, not what capabilities they have to service end user requests. This distinction is particularly important when it comes to high availability clusters. It's important to understand that HA functionality is orthogonal to running standalone servers or a managed domain. That is, a group of standalone servers can be configured to form an HA cluster. The domain and standalone modes determine how the servers are managed, not what capabilities they provide.            </p>
                <p>
    So, given all that:            </p>
    <ul class=" "><li class=" ">            <p>
    A single server installation gains nothing from running in a managed domain, so running a standalone server is a better choice.            </p>
    </li><li class=" ">            <p>
    For multi-server production environments, the choice of running a managed domain versus standalone servers comes down to whether the user wants to use the centralized management capabilities a managed domain provides. Some enterprises have developed their own sophisticated multi-server management capabilities and are comfortable coordinating changes across a number of independent WildFly 8 instances. For these enterprises, a multi-server architecture comprised of individual standalone servers is a good option.            </p>
    </li><li class=" ">            <p>
    Running a standalone server is better suited for most development scenarios. Any individual server configuration that can be achieved in a managed domain can also be achieved in a standalone server, so even if the application being developed will eventually run in production on a managed domain installation, much (probably most) development can be done using a standalone server.            </p>
    </li><li class=" ">            <p>
    Running a managed domain mode can be helpful in some advanced development scenarios; i.e. those involving interaction between multiple WildFly 8 instances. Developers may find that setting up various servers as members of a domain is an efficient way to launch a multi-server cluster.            </p>
    </li></ul>    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Generalconfigurationconcepts"  >
        <h3>General configuration concepts</h3>
    
            <p>
    For both a managed domain or a standalone server, a number of common configuration concepts apply:            </p>
                <p>
        <span id="66322684_AdminGuide-extensions"><a name="66322684_AdminGuide-extensions"></a></span>
            </p>
        <div class="section-4"  id="66322684_AdminGuide-Extensions"  >
        <h4>Extensions</h4>
    
            <p>
    An  extension is a module that extends the core capabilities of the server.  The WildFly 8 core is very simple and lightweight; most of the capabilities  people associate with an application server are provided via extensions.  An extension is packaged as a module in the <tt class=" ">modules</tt> folder. The user indicates that they want a particular extension to be available by including an <tt class=" ">&lt;extension/&gt;</tt> element naming its module in the <tt class=" ">domain.xml</tt> or <tt class=" ">standalone.xml</tt> file.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;extensions&gt;
&nbsp;&nbsp;&nbsp; [...]
&nbsp;&nbsp;&nbsp; &lt;extension module=&quot;org.jboss.as.transactions&quot;/&gt;
&nbsp;&nbsp;&nbsp; &lt;extension module=&quot;org.jboss.as.webservices&quot; /&gt;
&nbsp;&nbsp;&nbsp; &lt;extension module=&quot;org.jboss.as.weld&quot; /&gt;
&lt;/extensions&gt;</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-profiles"><a name="66322684_AdminGuide-profiles"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ProfilesandSubsystems"  >
        <h4>Profiles and Subsystems</h4>
    
            <p>
    The most significant part of the configuration in <tt class=" ">domain.xml</tt> and <tt class=" ">standalone.xml</tt> is the configuration of one (in <tt class=" ">standalone.xml</tt>) or more (in <tt class=" ">domain.xml</tt>)   &quot;profiles&quot;. A profile is a named set of subsystem configurations. A   subsystem is an added set of capabilities added to the core server by an   extension (see &quot;Extensions&quot; above). A subsystem provides servlet   handling capabilities; a subsystem provides an EJB container; a   subsystem provides JTA, etc. A profile is a named list of subsystems,   along with the details of each subsystem's configuration. A profile with   a large number of subsystems results in a server with a large set of   capabilities. A profile with a small, focused set of subsystems will   have fewer capabilities but a smaller footprint.            </p>
                <p>
    The content of an individual profile configuration looks largely the same in <tt class=" ">domain.xml</tt> and <tt class=" ">standalone.xml</tt>.  The only difference is <tt class=" ">standalone.xml</tt> is only allowed to have a single  profile element (the profile the server will run), while <tt class=" ">domain.xml</tt> can have many profiles, each of which can be mapped to one or more groups of servers.            </p>
                <p>
    The contents of individual subsystem configurations look exactly the same between <tt class=" ">domain.xml</tt> and <tt class=" ">standalone.xml</tt>.            </p>
                <p>
        <span id="66322684_AdminGuide-paths"><a name="66322684_AdminGuide-paths"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Paths"  >
        <h4>Paths</h4>
    
            <p>
    A logical name for a filesystem path. The <tt class=" ">domain.xml</tt>, <tt class=" ">host.xml</tt> and <tt class=" ">standalone.xml</tt> configurations all include a section where paths can be declared. Other  sections of the configuration can then reference those paths by their  logical name, rather than having to include the full details of the path  (which may vary on different machines). For example, the logging  subsystem configuration includes a reference to the  &quot;<tt class=" ">jboss.server.log.dir</tt>&quot; path that points to the server's &quot;<tt class=" ">log</tt>&quot; directory.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;file relative-to=&quot;jboss.server.log.dir&quot; path=&quot;server.log&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    WildFly 8 automatically provides a number of standard paths without any need  for the user to configure them in a configuration file:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">jboss.home</tt> - the root directory of the WildFly distribution            </p>
    </li><li class=" ">            <p>
    <tt class=" ">user.home</tt> - user's home directory            </p>
    </li><li class=" ">            <p>
    <tt class=" ">user.dir</tt> - user's current working directory            </p>
    </li><li class=" ">            <p>
    <tt class=" ">java.home</tt> - java installation directory            </p>
    </li><li class=" ">            <p>
    <tt class=" ">jboss.server.base.dir</tt> - root directory for an individual server instance            </p>
    </li><li class=" ">            <p>
    <tt class=" ">jboss.server.data.dir</tt> - directory the server will use for persistent data file storage            </p>
    </li><li class=" ">            <p>
    <tt class=" ">jboss.server.log.dir</tt> - directory the server will use for log file storage            </p>
    </li><li class=" ">            <p>
    <tt class=" ">jboss.server.tmp.dir</tt> - directory the server will use for temporary file storage            </p>
    </li><li class=" ">            <p>
    <tt class=" ">jboss.domain.servers.dir</tt> - directory under which a host controller will create the working area  for individual server instances (managed domain mode only)            </p>
    </li></ul>            <p>
    Users can add their own paths or override all except the first 5 of the above by adding a <tt class=" ">&lt;path/&gt;</tt> element to their configuration file.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;path name=&quot;example&quot; path=&quot;example&quot; relative-to=&quot;jboss.server.data.dir&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    &nbsp;The attributes are:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">name</tt> -- the name of the path.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">path</tt> -- the actual filesystem path. Treated as an absolute path, unless the 'relative-to' attribute is specified, in which case the value is treated as relative to that path.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">relative-to</tt> -- (optional) the name of another previously named path, or of one of the standard paths provided by the system.            </p>
    </li></ul>            <p>
    A <tt class=" ">&lt;path/&gt;</tt> element in a <tt class=" ">domain.xml</tt> need not include anything more than the <tt class=" ">name</tt> attribute; i.e. it need not include any information indicating what the actual filesystem path is:&nbsp;            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;path name=&quot;x&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    Such  a configuration simply says, &quot;There is a path named 'x' that other  parts of the <tt class=" ">domain.xml</tt> configuration can reference. The actual  filesystem location pointed to by 'x' is host-specific and will be  specified in each machine's <tt class=" ">host.xml</tt> file.&quot; If this approach is used,  there must be a path element in each machine's <tt class=" ">host.xml</tt> that specifies  what the actual filesystem path is:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;path name=&quot;x&quot; path=&quot;/var/x&quot; /&gt;</code></pre>
        </div>
    </div>
            <p>
    A <tt class=" ">&lt;path/&gt;</tt> element in a <tt class=" ">standalone.xml</tt> must include the specification of the actual filesystem path.            </p>
                <p>
        <span id="66322684_AdminGuide-interfaces"><a name="66322684_AdminGuide-interfaces"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Interfaces"  >
        <h4>Interfaces</h4>
    
            <p>
    A logical name for a network interface/IP address/host name to which sockets can be bound. The <tt class=" ">domain.xml</tt>, <tt class=" ">host.xml</tt> and <tt class=" ">standalone.xml</tt> configurations all include a section where interfaces can be declared.  Other sections of the configuration can then reference those interfaces  by their logical name, rather than having to include the full details of  the interface (which may vary on different machines). An  interface configuration includes the logical name of the  interface as  well as information specifying the criteria to use for  resolving the  actual physical address to use. See&nbsp;<a href="https://docs.jboss.org/author/display/AS7/Interfaces+and+ports">Interfaces and ports</a> for further details.            </p>
                <p>
    An <tt class=" ">&lt;interface/&gt;</tt> element in a <tt class=" ">domain.xml</tt> need not include anything more than the <tt class=" ">name</tt> attribute; i.e. it need not include any information indicating what the actual IP address associated with the name is:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interface name=&quot;internal&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    Such  a configuration simply says, &quot;There is an interface named 'internal'  that other parts of the domain.xml configuration can reference. The  actual IP address pointed to by 'internal' is host-specific and will be  specified in each machine's host.xml file.&quot; If this approach is used,  there must be an interface element in each machine's <tt class=" ">host.xml</tt> that  specifies the criteria for determining the IP address:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interface name=&quot;internal&quot;&gt;
&nbsp;&nbsp; &lt;nic name=&quot;eth1&quot;/&gt;
&lt;/interface&gt;</code></pre>
        </div>
    </div>
            <p>
    An <tt class=" ">&lt;interface/&gt;</tt> element in a <tt class=" ">standalone.xml</tt> must include the criteria for determining the IP address.            </p>
                <p>
        <span id="66322684_AdminGuide-socketbindings"><a name="66322684_AdminGuide-socketbindings"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-SocketBindingsandSocketBindingGroups"  >
        <h4>Socket Bindings and Socket Binding Groups</h4>
    
            <p>
    A socket binding is a named configuration for a socket.            </p>
                <p>
    The <tt class=" ">domain.xml</tt> and <tt class=" ">standalone.xml</tt> configurations both include a section where named socket configurations  can be declared. Other sections of the configuration can then reference  those sockets by their logical name, rather than having to include the  full details of the socket configuration (which may vary on different  machines). See <a href="66322697.html">Interfaces and ports</a> for full details.            </p>
                <p>
        <span id="66322684_AdminGuide-systemproperties"><a name="66322684_AdminGuide-systemproperties"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-SystemProperties"  >
        <h4>System Properties</h4>
    
            <p>
    System property values can be set in a number of places in <tt class=" ">domain.xml</tt>, <tt class=" ">host.xml</tt> and <tt class=" ">standalone.xml</tt>.  The values in <tt class=" ">standalone.xml</tt> are set as part of the server boot  process. Values in <tt class=" ">domain.xml</tt> and <tt class=" ">host.xml</tt> are applied to servers when  they are launched.            </p>
                <p>
    When a system property is configured in <tt class=" ">domain.xml</tt> or <tt class=" ">host.xml</tt>, the servers it ends up being applied to depends on where it is set. Setting a system property in a child element directly under the <tt class=" ">domain.xml</tt> root results in the property being set on all servers. Setting it in a <tt class=" ">&lt;system-property/&gt;</tt> element inside a <tt class=" ">&lt;server-group/&gt;</tt> element in domain.xml results in the property being set on all servers in the group. Setting it in a child element directly under the <tt class=" ">host.xml</tt> root results in the property being set on all servers controlled by that host's Host Controller. Finally, setting it in a <tt class=" ">&lt;system-property/&gt;</tt> element inside a <tt class=" ">&lt;server/&gt;</tt> element in <tt class=" ">host.xml</tt> result in the property being set on that server. The same property can be configured in multiple locations, with a value in a <tt class=" ">&lt;server/&gt;</tt> element taking precedence over a value specified directly under the <tt class=" ">host.xml</tt> root element, the value in a <tt class=" ">host.xml</tt> taking precedence over anything from <tt class=" ">domain.xml</tt>, and a value in a <tt class=" ">&lt;server-group/&gt;</tt> element taking precedence over a value specified directly under the <tt class=" ">domain.xml</tt> root element.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Managementresources"  >
        <h3>Management resources</h3>
    
            <p>
    When WildFly parses your configuration files at boot, or when you use one of the AS's <a href="66322687.html">Management Clients</a> you are adding, removing or modifying <i class=" ">management resources</i> in the AS's internal management model. A WildFly management resource has the following characteristics:            </p>
        <div class="section-4"  id="66322684_AdminGuide-Address"  >
        <h4>Address</h4>
    
            <p>
    All WildFly management resources are organized in a tree. The path to the node in the tree for a particular resource is its <i class=" ">address</i>. Each segment in a resource's address is a key/value pair:            </p>
    <ul class=" "><li class=" ">            <p>
    The key is the resource's <i class=" ">type</i>, in the context of its parent. So, for example, the root resource for a standalone server has children of type <tt class=" ">subsystem</tt>, <tt class=" ">interface</tt>, <tt class=" ">socket-binding</tt>, etc. The resource for the subsystem that provides the AS's webserver capability has children of type <tt class=" ">connector</tt> and <tt class=" ">virtual-server</tt>. The resource for the subsystem that provides the AS's messaging server capability has, among others, children of type <tt class=" ">jms-queue</tt> and <tt class=" ">jms-topic</tt>.            </p>
    </li><li class=" ">            <p>
    The value is the name of a particular resource of the given type, e.g <tt class=" ">web</tt> or <tt class=" ">messaging</tt> for subsystems or <tt class=" ">http</tt> or <tt class=" ">https</tt> for web subsystem connectors.            </p>
    </li></ul>            <p>
    The full address for a resource is the ordered list of key/value pairs that lead from the root of the tree to the resource. Typical notation is to separate the elements in the address with a '/' and to separate the key and the value with an '=':            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">/subsystem=web/connector=http</tt>            </p>
    </li><li class=" ">            <p>
    <tt class=" ">/subsystem=messaging/jms-queue=testQueue</tt>            </p>
    </li><li class=" ">            <p>
    <tt class=" ">/interface=public</tt>            </p>
    </li></ul>            <p>
    When using the HTTP API, a '/' is used to separate the key and the value instead of an '=':            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">http://localhost:9990/management/subsystem/web/connector/http</tt>            </p>
    </li><li class=" ">            <p>
    <tt class=" ">http://localhost:9990/management/subsystem/messaging/jms-queue/testQueue</tt>            </p>
    </li><li class=" ">            <p>
    <tt class=" ">http://localhost:9990/management/interface/public</tt>            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Operations"  >
        <h4>Operations</h4>
    
            <p>
    Querying or modifying the state of a resource is done via an operation. An operation has the following characteristics:            </p>
    <ul class=" "><li class=" ">            <p>
    A string name            </p>
    </li><li class=" ">            <p>
    Zero or more named parameters. Each parameter has a string name, and a value of type <tt class=" ">org.jboss.dmr.ModelNode</tt> (or, when invoked via the CLI, the text representation of a <tt class=" ">ModelNode</tt>; when invoked via the HTTP API, the JSON representation of a <tt class=" ">ModelNode</tt>.) Parameters may be optional.            </p>
    </li><li class=" ">            <p>
    A return value, which will be of type <tt class=" ">org.jboss.dmr.ModelNode</tt> (or, when invoked via the CLI, the text representation of a <tt class=" ">ModelNode</tt>; when invoked via the HTTP API, the JSON representation of a <tt class=" ">ModelNode</tt>.)            </p>
    </li></ul>            <p>
    Every resource except the root resource will have an <tt class=" ">add</tt> operation and should have a <tt class=" ">remove</tt> operation (&quot;should&quot; because in WildFly 8 many do not). The parameters for the <tt class=" ">add</tt> operation vary depending on the resource. The <tt class=" ">remove</tt> operation has no parameters.            </p>
                <p>
    There are also a number of &quot;global&quot; operations that apply to all resources. See <a href="66322742.html">Global operations</a> for full details.            </p>
                <p>
    The operations a resource supports can themselves be determined by invoking an operation: the <tt class=" ">read-operation-names</tt> operation. Once the name of an operation is known, details about its parameters and return value can be determined by invoking the <tt class=" ">read-operation-description</tt> operation. For example, to learn the names of the operations exposed by the root resource for a standalone server, and then learn the full details of one of them, via the CLI one would:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :read-operation-names
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        &quot;add-namespace&quot;,
        &quot;add-schema-location&quot;,
        &quot;delete-snapshot&quot;,
        &quot;full-replace-deployment&quot;,
        &quot;list-snapshots&quot;,
        &quot;read-attribute&quot;,
        &quot;read-children-names&quot;,
        &quot;read-children-resources&quot;,
        &quot;read-children-types&quot;,
        &quot;read-config-as-xml&quot;,
        &quot;read-operation-description&quot;,
        &quot;read-operation-names&quot;,
        &quot;read-resource&quot;,
        &quot;read-resource-description&quot;,
        &quot;reload&quot;,
        &quot;remove-namespace&quot;,
        &quot;remove-schema-location&quot;,
        &quot;replace-deployment&quot;,
        &quot;shutdown&quot;,
        &quot;take-snapshot&quot;,
        &quot;upload-deployment-bytes&quot;,
        &quot;upload-deployment-stream&quot;,
        &quot;upload-deployment-url&quot;,
        &quot;validate-address&quot;,
        &quot;write-attribute&quot;
    ]
}
[standalone@localhost:9999 /] :read-operation-description(name=upload-deployment-url)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;operation-name&quot; =&gt; &quot;upload-deployment-url&quot;,
        &quot;description&quot; =&gt; &quot;Indicates that the deployment content available at the included URL should be added to the deployment content repository. Note that this operation does not indicate the content should be deployed into the runtime.&quot;,
        &quot;request-properties&quot; =&gt; {&quot;url&quot; =&gt; {
            &quot;type&quot; =&gt; STRING,
            &quot;description&quot; =&gt; &quot;The URL at which the deployment content is available for upload to the domain's or standalone server's deployment content repository.. Note that the URL must be accessible from the target of the operation (i.e. the Domain Controller or standalone server).&quot;,
            &quot;required&quot; =&gt; true,
            &quot;min-length&quot; =&gt; 1,
            &quot;nillable&quot; =&gt; false
        }},
        &quot;reply-properties&quot; =&gt; {
            &quot;type&quot; =&gt; BYTES,
            &quot;description&quot; =&gt; &quot;The hash of managed deployment content that has been uploaded to the domain's or standalone server's deployment content repository.&quot;,
            &quot;min-length&quot; =&gt; 20,
            &quot;max-length&quot; =&gt; 20,
            &quot;nillable&quot; =&gt; false
        }
    }
}</code></pre>
        </div>
    </div>
            <p>
    See <a href="66322684.html#66322684_AdminGuide-Descriptions">Descriptions</a> below for more on how to learn about the operations a resource exposes.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Attributes"  >
        <h4>Attributes</h4>
    
            <p>
    Management resources expose information about their state as attributes. Attributes have string name, and a value of type <tt class=" ">org.jboss.dmr.ModelNode</tt> (or: for the CLI, the text representation of a <tt class=" ">ModelNode</tt>; for HTTP API, the JSON representation of a <tt class=" ">ModelNode</tt>.)            </p>
                <p>
    Attributes can either be read-only or read-write. Reading and writing attribute values is done via the global <tt class=" ">read-attribute</tt> and <tt class=" ">write-attribute</tt> operations.            </p>
                <p>
    The <tt class=" ">read-attribute</tt> operation takes a single parameter &quot;name&quot; whose value is a the name of the attribute. For example, to read the &quot;port&quot; attribute of a socket-binding resource via the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /socket-binding-group=standard-sockets/socket-binding=https:read-attribute(name=port)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; 8443
}</code></pre>
        </div>
    </div>
            <p>
    If an attribute is writable, the <tt class=" ">write-attribute</tt> operation is used to mutate its state. The operation takes two parameters:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">name</tt> &ndash; the name of the attribute            </p>
    </li><li class=" ">            <p>
    <tt class=" ">value</tt> &ndash; the value of the attribute            </p>
    </li></ul>            <p>
    For example, to read the &quot;port&quot; attribute of a socket-binding resource via the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /socket-binding-group=standard-sockets/socket-binding=https:write-attribute(name=port,value=8444)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    Attributes can have one of two possible <i class=" ">storage types</i>:            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">CONFIGURATION</strong> &ndash; means the value of the attribute is stored in the persistent configuration; i.e. in the <tt class=" ">domain.xml</tt>, <tt class=" ">host.xml</tt> or <tt class=" ">standalone.xml</tt> file from which the resource's configuration was read.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">RUNTIME</strong> &ndash; the attribute value is only available from a running server; the value is not stored in the persistent configuration. A metric (e.g. number of requests serviced) is a typical example of a RUNTIME attribute.            </p>
    </li></ul>            <p>
    The values of all of the attributes a resource exposes can be obtained via the <tt class=" ">read-resource</tt> operation, with the &quot;include-runtime&quot; parameter set to &quot;true&quot;. For example, from the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=web/connector=http:read-resource(include-runtime=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;bytesReceived&quot; =&gt; &quot;0&quot;,
        &quot;bytesSent&quot; =&gt; &quot;0&quot;,
        &quot;errorCount&quot; =&gt; &quot;0&quot;,
        &quot;maxTime&quot; =&gt; &quot;0&quot;,
        &quot;processingTime&quot; =&gt; &quot;0&quot;,
        &quot;protocol&quot; =&gt; &quot;HTTP/1.1&quot;,
        &quot;requestCount&quot; =&gt; &quot;0&quot;,
        &quot;scheme&quot; =&gt; &quot;http&quot;,
        &quot;socket-binding&quot; =&gt; &quot;http&quot;,
        &quot;ssl&quot; =&gt; undefined,
        &quot;virtual-server&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
            <p>
    Omit the &quot;include-runtime&quot; parameter (or set it to &quot;false&quot;) to limit output to those attributes whose values are stored in the persistent configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=web/connector=http:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;protocol&quot; =&gt; &quot;HTTP/1.1&quot;,
        &quot;scheme&quot; =&gt; &quot;http&quot;,
        &quot;socket-binding&quot; =&gt; &quot;http&quot;,
        &quot;ssl&quot; =&gt; undefined,
        &quot;virtual-server&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
            <p>
    See <a href="66322684.html#66322684_AdminGuide-Descriptions">Descriptions</a> below for how to learn more about the attributes a particular resource exposes.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Children"  >
        <h4>Children</h4>
    
            <p>
    Management resources may support child resources. The <a href="66322684.html#66322684_AdminGuide-Address"><i class=" ">types</i> of children</a> a resource supports (e.g. <tt class=" ">connector</tt> for the web subsystem resource) can be obtained by querying the resource's description (see <a href="66322684.html#66322684_AdminGuide-Descriptions">Descriptions</a> below) or by invoking the <tt class=" ">read-children-types</tt> operation. Once you know the legal child types, you can query the names of all children of a given type by using the global <tt class=" ">read-children-types</tt> operation. The operation takes a single parameter &quot;child-type&quot; whose value is the type. For example, a resource representing a socket binding group has children. To find the type of those children and the names of resources of that type via the CLI one could:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /socket-binding-group=standard-sockets:read-children-types
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [&quot;socket-binding&quot;]
}
[standalone@localhost:9999 /] /socket-binding-group=standard-sockets:read-children-names(child-type=socket-binding)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        &quot;http&quot;,
        &quot;https&quot;,
        &quot;jmx-connector-registry&quot;,
        &quot;jmx-connector-server&quot;,
        &quot;jndi&quot;,
        &quot;osgi-http&quot;,
        &quot;remoting&quot;,
        &quot;txn-recovery-environment&quot;,
        &quot;txn-status-manager&quot;
    ]
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Descriptions"  >
        <h4>Descriptions</h4>
    
            <p>
    All resources expose metadata that describes their attributes, operations and child types. This metadata is itself obtained by invoking one or more of the <a href="66322742.html">global operations</a> each resource supports. We showed examples of the <tt class=" ">read-operation-names</tt>, <tt class=" ">read-operation-description</tt>, <tt class=" ">read-children-types</tt> and <tt class=" ">read-children-names</tt> operations above.            </p>
                <p>
    The <tt class=" ">read-resource-description</tt> operation can be used to find the details of the attributes and child types associated with a resource. For example, using the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /socket-binding-group=standard-sockets:read-resource-description
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;description&quot; =&gt; &quot;Contains a list of socket configurations.&quot;,
        &quot;head-comment-allowed&quot; =&gt; true,
        &quot;tail-comment-allowed&quot; =&gt; false,
        &quot;attributes&quot; =&gt; {
            &quot;name&quot; =&gt; {
                &quot;type&quot; =&gt; STRING,
                &quot;description&quot; =&gt; &quot;The name of the socket binding group.&quot;,
                &quot;required&quot; =&gt; true,
                &quot;head-comment-allowed&quot; =&gt; false,
                &quot;tail-comment-allowed&quot; =&gt; false,
                &quot;access-type&quot; =&gt; &quot;read-only&quot;,
                &quot;storage&quot; =&gt; &quot;configuration&quot;
            },
            &quot;default-interface&quot; =&gt; {
                &quot;type&quot; =&gt; STRING,
                &quot;description&quot; =&gt; &quot;Name of an interface that should be used as the interface for any sockets that do not explicitly declare one.&quot;,
                &quot;required&quot; =&gt; true,
                &quot;head-comment-allowed&quot; =&gt; false,
                &quot;tail-comment-allowed&quot; =&gt; false,
                &quot;access-type&quot; =&gt; &quot;read-write&quot;,
                &quot;storage&quot; =&gt; &quot;configuration&quot;
            },
            &quot;port-offset&quot; =&gt; {
                &quot;type&quot; =&gt; INT,
                &quot;description&quot; =&gt; &quot;Increment to apply to the base port values defined in the socket bindings to derive the runtime values to use on this server.&quot;,
                &quot;required&quot; =&gt; false,
                &quot;head-comment-allowed&quot; =&gt; true,
                &quot;tail-comment-allowed&quot; =&gt; false,
                &quot;access-type&quot; =&gt; &quot;read-write&quot;,
                &quot;storage&quot; =&gt; &quot;configuration&quot;
            }
        },
        &quot;operations&quot; =&gt; {},
        &quot;children&quot; =&gt; {&quot;socket-binding&quot; =&gt; {
            &quot;description&quot; =&gt; &quot;The individual socket configurtions.&quot;,
            &quot;min-occurs&quot; =&gt; 0,
            &quot;model-description&quot; =&gt; undefined
        }}
    }
}</code></pre>
        </div>
    </div>
            <p>
    Note the <tt class=" ">&quot;operations&quot; =&gt; }} in the output above. If the command had included the {{operations</tt> parameter (i.e. <tt class=" ">/socket-binding-group=standard-sockets:read-resource-description(operations=true)</tt>) the output would have included the description of each operation supported by the resource.            </p>
                <p>
    See the <a href="66322742.html">Global operations</a> section for details on other parameters supported by the <tt class=" ">read-resource-description</tt> operation and all the other globally available operations.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ComparisontoJMXMBeans"  >
        <h4>Comparison to JMX MBeans</h4>
    
            <p>
    WildFly management resources are conceptually quite similar to Open MBeans. They have the following primary differences:            </p>
    <ul class=" "><li class=" ">            <p>
    WildFly management resources are organized in a tree structure. The order of the key value pairs in a resource's address is significant, as it defines the resource's position in the tree. The order of the key properties in a JMX <tt class=" ">ObjectName</tt> is not significant.            </p>
    </li><li class=" ">            <p>
    In an Open MBean attribute values, operation parameter values and operation return values must either be one of the simple JDK types (String, Boolean, Integer, etc) or implement either the <tt class=" ">javax.management.openmbean.CompositeData</tt> interface or the <tt class=" ">javax.management.openmbean.TabularData</tt> interface. WildFly&nbsp;management resource attribute values, operation parameter values and operation return values are all of type <tt class=" ">org.jboss.dmr.ModelNode</tt>.            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Basicstructureofthemanagementresourcetrees"  >
        <h4>Basic structure of the management resource trees</h4>
    
            <p>
    As noted above, management resources are organized in a tree structure. The structure of the tree depends on whether you are running a standalone server or a managed domain.            </p>
        <div class="section-5"  id="66322684_AdminGuide-Standaloneserver"  >
        <h5>Standalone server</h5>
    
            <p>
    The structure of the managed resource tree is quite close to the structure of the <tt class=" ">standalone.xml</tt> configuration file.            </p>
    <ul class=" "><li class=" ">            <p>
    The root resource            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">extension</tt> &ndash; extensions installed in the server            </p>
    </li><li class=" ">            <p>
    <tt class=" ">path</tt> &ndash; paths available on the server            </p>
    </li><li class=" ">            <p>
    <tt class=" ">system-property</tt> &ndash; system properties set as part of the configuration (i.e. not on the command line)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">core-service=management</tt> &ndash; the server's core management services            </p>
    </li><li class=" ">            <p>
    <tt class=" ">core-service=service-container</tt> &ndash; resource for the JBoss MSC <tt class=" ">ServiceContainer</tt> that's at the heart of the AS            </p>
    </li><li class=" ">            <p>
    <tt class=" ">subsystem</tt> &ndash; the subsystems installed on the server. The bulk of the management model will be children of type <tt class=" ">subsystem</tt>            </p>
    </li><li class=" ">            <p>
    <tt class=" ">interface</tt> &ndash; interface configurations            </p>
    </li><li class=" ">            <p>
    <tt class=" ">socket-binding-group</tt> &ndash; the central resource for the server's socket bindings            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">socket-binding</tt> &ndash; individual socket binding configurations            </p>
    </li></ul></li><li class=" ">            <p>
    <tt class=" ">deployment</tt> &ndash; available deployments on the server            </p>
    </li></ul></li></ul>    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Manageddomain"  >
        <h5>Managed domain</h5>
    
            <p>
    In a managed domain, the structure of the managed resource tree spans the entire domain, covering both the domain wide configuration (e.g. what's in <tt class=" ">domain.xml</tt>, the host specific configuration for each host (e.g. what's in <tt class=" ">host.xml</tt>, and the resources exposed by each running application server. The Host Controller processes in a managed domain provide access to all or part of the overall resource tree. How much is available depends on whether the management client is interacting with the Host Controller that is acting as the master Domain Controller. If the Host Controller is the master Domain Controller, then the section of the tree for each host is available. If the Host Controller is a slave to a remote Domain Controller, then only the portion of the tree associated with that host is available.            </p>
    <ul class=" "><li class=" ">            <p>
    The root resource for the entire domain. The persistent configuration associated with this resource and its children, except for those of type <tt class=" ">host</tt>, is persisted in the <tt class=" ">domain.xml</tt> file on the Domain Controller.            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">extension</tt> &ndash; extensions available in the domain            </p>
    </li><li class=" ">            <p>
    <tt class=" ">path</tt> &ndash; paths available on across the domain            </p>
    </li><li class=" ">            <p>
    <tt class=" ">system-property</tt> &ndash; system properties set as part of the configuration (i.e. not on the command line) and available across the domain            </p>
    </li><li class=" ">            <p>
    <tt class=" ">profile</tt> &ndash; sets of subsystem configurations that can be assigned to server groups            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">subsystem</tt> &ndash; configuration of subsystems that are part of the profile            </p>
    </li></ul></li><li class=" ">            <p>
    <tt class=" ">interface</tt> &ndash; interface configurations            </p>
    </li><li class=" ">            <p>
    <tt class=" ">socket-binding-group</tt> &ndash; sets of socket bindings configurations that can be applied to server groups            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">socket-binding</tt> &ndash; individual socket binding configurations            </p>
    </li></ul></li><li class=" ">            <p>
    <tt class=" ">deployment</tt> &ndash; deployments available for assignment to server groups            </p>
    </li><li class=" ">            <p>
    <tt class=" ">server-group</tt> &ndash; server group configurations            </p>
    </li><li class=" ">            <p>
    host &ndash; the individual Host Controllers. Each child of this type represents the root resource for a particular host. The persistent configuration associated with one of these resources or its children is persisted in the host's <tt class=" ">host.xml</tt> file.            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">path</tt> &ndash; paths available on each server on the host            </p>
    </li><li class=" ">            <p>
    <tt class=" ">system-property</tt> &ndash; system properties to set on each server on the host            </p>
    </li><li class=" ">            <p>
    <tt class=" ">core-service=management</tt> &ndash; the Host Controller's core management services            </p>
    </li><li class=" ">            <p>
    <tt class=" ">interface</tt> &ndash; interface configurations that apply to the Host Controller or servers on the host            </p>
    </li><li class=" ">            <p>
    <tt class=" ">jvm</tt> &ndash; JVM configurations that can be applied when launching servers            </p>
    </li><li class=" ">            <p>
    <tt class=" ">server-config</tt> &ndash; configuration describing how the Host Controller should launch a server; what server group configuration to use, and any server-specific overrides of items specified in other resources            </p>
    </li><li class=" ">            <p>
    <tt class=" ">server</tt> &ndash; the root resource for a running server. Resources from here and below are not directly persisted; the domain-wide and host level resources contain the persistent configuration that drives a server            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">extension</tt> &ndash; extensions installed in the server            </p>
    </li><li class=" ">            <p>
    <tt class=" ">path</tt> &ndash; paths available on the server            </p>
    </li><li class=" ">            <p>
    <tt class=" ">system-property</tt> &ndash; system properties set as part of the configuration (i.e. not on the command line)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">core-service=management</tt> &ndash; the server's core management services            </p>
    </li><li class=" ">            <p>
    <tt class=" ">core-service=service-container</tt> &ndash; resource for the JBoss MSC <tt class=" ">ServiceContainer</tt> that's at the heart of the AS            </p>
    </li><li class=" ">            <p>
    <tt class=" ">subsystem</tt> &ndash; the subsystems installed on the server. The bulk of the management model will be children of type <tt class=" ">subsystem</tt>            </p>
    </li><li class=" ">            <p>
    <tt class=" ">interface</tt> &ndash; interface configurations            </p>
    </li><li class=" ">            <p>
    <tt class=" ">socket-binding-group</tt> &ndash; the central resource for the server's socket bindings            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">socket-binding</tt> &ndash; individual socket binding configurations            </p>
    </li></ul></li><li class=" ">            <p>
    <tt class=" ">deployment</tt> &ndash; available deployments on the server            </p>
    </li></ul></li></ul></li></ul></li></ul>    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322684_AdminGuide-Managementtasks"  >
        <h2>Management tasks</h2>
    
    <div class="section-3"  id="66322684_AdminGuide-Interfacesandports"  >
        <h3>Interfaces and ports</h3>
    
    <div class="section-4"  id="66322684_AdminGuide-Interfacedeclarations"  >
        <h4>Interface declarations</h4>
    
            <p>
    WildFly 8 uses named interface references throughout the configuration. A network interface is declared by specifying a logical name and a selection criteria for the physical interface:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :read-children-names(child-type=interface)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [
       &quot;management&quot;,
       &quot;public&quot;
   ]
}</code></pre>
        </div>
    </div>
            <p>
    This means the server in question declares two interfaces: One is referred to as &quot;<i class=" ">management</i>&quot;; the other one &quot;<i class=" ">public</i>&quot;. The &quot;<i class=" ">management</i>&quot; interface is used for all components and services that are required by the management layer (i.e. the HTTP Management Endpoint). The &quot;<i class=" ">public</i>&quot; interface binding is used for any application related network communication (i.e. Web, Messaging, etc). There is nothing special about these names; interfaces can be declared with any name. Other sections of the configuration can then reference those interfaces   by their logical name, rather than having to include the full details  of  the interface (which, on servers in a management domain, may vary on different machines).            </p>
                <p>
    The <tt class=" ">domain.xml</tt>, <tt class=" ">host.xml</tt> and <tt class=" ">standalone.xml</tt> configuration files all include a section where interfaces can be declared.&nbsp; If we take a look at the XML declaration it reveals the selection criteria. The criteria is one of two types: either a single element indicating  that the interface should be bound to a wildcard address, or a set of  one or more characteristics that an interface or address must have in  order to be a valid match. The selection criteria in this example are specific IP addresses for each interface:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
  &lt;interface name=&quot;management&quot;&gt;
   &lt;inet-address value=&quot;127.0.0.1&quot;/&gt;
  &lt;/interface&gt;
  &lt;interface name=&quot;public&quot;&gt;
   &lt;inet-address value=&quot;127.0.0.1&quot;/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    Some other examples:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interface name=&quot;global&quot;&gt;
  &nbsp;&lt;!-- Use the wildcard address --&gt;
  &nbsp;&lt;any-address/&gt;
&lt;/interface&gt;

&lt;interface name=&quot;ipv4-global&quot;&gt;
  &nbsp;&lt;!-- Use the IPv4 wildcard address --&gt;
  &nbsp;&lt;any-ipv4-address/&gt;
&lt;/interface&gt;

&lt;interface name=&quot;ipv6-global&quot;&gt;
  &nbsp;&lt;!-- Use the IPv6 wildcard address --&gt;
  &nbsp;&lt;any-ipv6-address/&gt;
&lt;/interface&gt;

&lt;interface name=&quot;external&quot;&gt;
  &nbsp;&lt;nic name=&quot;eth0&quot;/&gt;
&lt;/interface&gt;

&lt;interface name=&quot;default&quot;&gt;
  &nbsp;&lt;!-- Match any interface/address on the right subnet if it's
       &nbsp;up, supports multicast and isn't point-to-point --&gt;
  &nbsp;&lt;subnet-match value=&quot;192.168.0.0/16&quot;/&gt;
  &nbsp;&lt;up/&gt;
  &nbsp;&lt;multicast/&gt;
  &nbsp;&lt;not&gt;
     &nbsp;&lt;point-to-point/&gt;
  &nbsp;&lt;/not&gt;
&lt;/interface&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-SocketBindingGroups"  >
        <h4>Socket Binding Groups</h4>
    
            <p>
    The socket configuration in WildFly 8 works similar to the interfaces declarations. Sockets are declared using a logical name, by which they will be referenced throughout the configuration. Socket declarations are grouped under a certain name. This allows you to easily reference a particular socket binding group when configuring server groups for instance (Managed Domain). Socket binding groups reference an interface by it's logical name:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;socket-binding-group name=&quot;standard-sockets&quot; default-interface=&quot;public&quot;&gt;
   &lt;socket-binding name=&quot;jndi&quot; port=&quot;1099&quot;/&gt;
   &lt;socket-binding name=&quot;jmx-connector-registry&quot; port=&quot;1090&quot;/&gt;
   &lt;socket-binding name=&quot;jmx-connector-server&quot; port=&quot;1091&quot;/&gt;
   &lt;socket-binding name=&quot;http&quot; port=&quot;8080&quot;/&gt;
   &lt;socket-binding name=&quot;https&quot; port=&quot;8443&quot;/&gt;
   &lt;socket-binding name=&quot;jacorb&quot; port=&quot;3528&quot;/&gt;
   &lt;socket-binding name=&quot;jacorb-ssl&quot; port=&quot;3529&quot;/&gt;
   &lt;socket-binding name=&quot;osgi-http&quot; port=&quot;8090&quot;/&gt;
   &lt;socket-binding name=&quot;remoting&quot; port=&quot;4447&quot;/&gt;
   &lt;socket-binding name=&quot;txn-recovery-environment&quot; port=&quot;4712&quot;/&gt;
   &lt;socket-binding name=&quot;txn-status-manager&quot; port=&quot;4713&quot;/&gt;
   &lt;socket-binding name=&quot;messaging&quot; port=&quot;5445&quot;/&gt;
   &lt;socket-binding name=&quot;messaging-throughput&quot; port=&quot;5455&quot;/&gt;
&lt;/socket-binding-group&gt;</code></pre>
        </div>
    </div>
            <p>
    A socket binding includes the following information:            </p>
    <ul class=" "><li class=" ">            <p>
    name -- logical name of the socket configuration that should be used elsewhere in the configuration            </p>
    </li><li class=" ">            <p>
    port  -- base port to which a socket based on this configuration should be  bound. (Note that servers can be configured to override this base value  by applying an increment or decrement to all port values.)            </p>
    </li><li class=" ">            <p>
    interface (optional) -- logical name (see &quot;Interfaces declarations&quot; above) of the interface to which a socket based on this configuration should be bound. If not defined, the value of the &quot;default-interface&quot; attribute from the enclosing socket binding group will be used.            </p>
    </li><li class=" ">            <p>
    multicast-address (optional) -- if the socket will be used for multicast, the multicast address to use            </p>
    </li><li class=" ">            <p>
    multicast-port (optional) -- if the socket will be used for multicast, the multicast port to use            </p>
    </li><li class=" ">            <p>
    fixed-port (optional, defaults to false) -- if true, declares that the value of port should always be used for the socket and should not be overridden by applying an increment or decrement            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-IPv4versusIPv6"  >
        <h4>IPv4 versus IPv6</h4>
    
            <p>
    WildFly 8 supports the use of both IPv4 and IPv6 addresses. By default, WildFly is configured for use in an IPv4 network and so if you are running in an IPv4 network, no changes are required. If you need to run in an IPv6 network, the changes required are minimal and involve changing the JVM stack and address preferences, and adjusting any interface IP address values specified in the configuration (standalone.xml or domain.xml).            </p>
        <div class="section-5"  id="66322684_AdminGuide-Stackandaddresspreference"  >
        <h5>Stack and address preference</h5>
    
            <p>
    The system properties java.net.preferIPv4Stack and java.net.preferIPv6Addresses are used to configure the JVM for use with IPv4 or IPv6 addresses. With WildFly 8, in order to run using IPv4 addresses, we need to specify java.net.preferIPv4Stack=true; in order to run with IPv6 addresses, we need to specify java.net.preferIPv4Stack=false (the JVM default) and java.net.preferIPv6Addresses=true. The latter ensures that any hostname to IP address conversions always return IPv6 address variants.            </p>
                <p>
    These system properties are conveniently set by the JAVA_OPTS environment variable, defined in the standalone.conf (or domain.conf) file. For example, to change the IP stack preference from its default of IPv4 to IPv6, edit the standalone.conf (or domain.conf) file and change its default IPv4 setting:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>if [ &quot;x$JAVA_OPTS&quot; = &quot;x&quot; ]; then
   JAVA_OPTS=&quot; ... -Djava.net.preferIPv4Stack=true ...&quot;
...</code></pre>
        </div>
    </div>
            <p>
    to an IPv6 suitable setting:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>if [ &quot;x$JAVA_OPTS&quot; = &quot;x&quot; ]; then
   JAVA_OPTS=&quot; ... -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true ...&quot;
...</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-IPaddressliterals"  >
        <h5>IP address literals</h5>
    
            <p>
    To change the IP address literals referenced in standalone.xml (or domain.xml), first visit the interface declarations and ensure that valid IPv6 addresses are being used as interface values. For example, to change the default configuration in which the loopback interface is used as the primary interface, change from the IPv4 loopback address:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
  &lt;interface name=&quot;management&quot;&gt;
    &lt;inet-address value=&quot;${jboss.bind.address.management:127.0.0.1}&quot;/&gt;
  &lt;/interface&gt;
  &lt;interface name=&quot;public&quot;&gt;
    &lt;inet-address value=&quot;${jboss.bind.address:127.0.0.1}&quot;/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    to the IPv6 loopback address:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
  &lt;interface name=&quot;management&quot;&gt;
    &lt;inet-address value=&quot;${jboss.bind.address.management:[::1]}&quot;/&gt;
  &lt;/interface&gt;
  &lt;interface name=&quot;public&quot;&gt;
    &lt;inet-address value=&quot;${jboss.bind.address:[::1]}&quot;/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    Note that when embedding IPv6 address literals in the substitution expression, square brackets surrounding the IP address literal are used to avoid ambiguity. This follows the convention for the use of IPv6 literals in URLs.            </p>
                <p>
    Over and above making such changes for the interface definitions, you should also check the rest of your configuration file and adjust IP address literals from IPv4 to IPv6 as required.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-ConfigureSecurityRealms"  >
        <h3>Configure Security Realms</h3>
    
            <p>
    Within WildFly 8 we make use of security realms to secure access to the management interfaces, these same realms are used to secure inbound access as exposed by JBoss Remoting such as remote JNDI and EJB access, the realms are also used to define an identity for the server - this identity can be used for both inbound connections to the server and outbound connections being established by the server.            </p>
        <div class="section-4"  id="66322684_AdminGuide-GeneralStructure"  >
        <h4>General Structure</h4>
    
            <p>
    The general structure of a management realm definition is: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ManagementRealm&quot;&gt;
   &lt;plug-ins&gt;&lt;/plug-ins&gt;
   &lt;server-identities&gt;&lt;/server-identities&gt;
   &lt;authentication&gt;&lt;/authentication&gt;
   &lt;authorization&gt;&lt;/authorization&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
<ul class=" "><li class=" ">            <p>
    <tt class=" ">plug-ins</tt> - This is an optional element that is used to define modules what will be searched for security realm PlugInProviders to extend the capabilities of the security realms.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">server-identities</tt> - An optional element to define the identity of the server as visible to the outside world, this applies to both inbound connection to a resource secured by the realm and to outbound connections also associated with the realm.            </p>
    </li></ul>            <p>
    One example is the SSL identity of the server, for inbound connections this will control the identity of the server as the SSL connection is established, for outbound connections this same identity can be used where CLIENT-CERT style authentication is being performed.            </p>
                <p>
    A second example is where the server is establishing an outbound connection that requires username / password authentication - this element can be used to define that password.            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">authentication</tt> - This is probably the most important element that will be used within a security realm definition and mostly applies to inbound connections to the server, this element defines which backing stores will be used to provide the verification of the inbound connection.            </p>
    </li></ul>            <p>
    This element is optional as there are some scenarios where it will not be required such as if a realm is being defined for an outbound connection using a username and password.            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">authorization</tt> - This is the final optional element and is used to define how roles are loaded for an authenticated identity.  At the moment this is more applicable for realms used for access to EE deployments such as web applications or EJBs but this will also become relevant as we add role based authorization checks to the management model.            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-EnablingaRealm"  >
        <h4>Enabling a Realm</h4>
    
            <p>
    After a realm has been defined it needs to be associated with an inbound or outbound connection for it to be used, the following are some examples where these associations are used within the WildFly 8&nbsp;configuration.            </p>
        <div class="section-5"  id="66322684_AdminGuide-InboundConnections"  >
        <h5>Inbound Connections</h5>
    
    <div class="section-6"  id="66322684_AdminGuide-ManagementInterfaces"  >
        <h6>Management Interfaces</h6>
    
            <p>
    Either within the <tt class=" ">standalone.xml</tt> or <tt class=" ">host.xml</tt> configurations the security realms can be associated with the management interfaces as follows: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;native-interface security-realm=&quot;ManagementRealm&quot;&gt;...&lt;/native-interface&gt;
&lt;http-interface security-realm=&quot;ManagementRealm&quot;&gt;...&lt;/http-interface&gt;</code></pre>
        </div>
    </div>
            <p>
    If the <tt class=" ">security-realm</tt> attribute is omitted or removed from the interface definition it means that access to that interface will be unsecured            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    By default we do bind these interfaces to the loopback address so that the interfaces are not accessible remotely out of the box, however do be aware that if these interfaces are then unsecured any other local user will be able to control and administer the WildFly 8&nbsp;installation.            </p>
        </div>
    
    <div class="confbox admonition admonition-tip">
        
            <p>
    Also do note that the <tt class=" ">security-realm</tt> attribute is defined on each interface independently, this means that you could define a different security realm for each - this may be applicable if say you want the administrators to only access over the HTTP interface and leave only local users to access the native interface.            </p>
        </div>
    
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-RemotingSubsystem"  >
        <h6>Remoting Subsystem</h6>
    
            <p>
    The Remoting subsystem exposes a connector to allow for inbound comunications with JNDI and the EJB subsystem by default we associate the <tt class=" ">ApplicationRealm</tt> with this connection.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:1.1&quot;&gt;
  &lt;connector name=&quot;remoting-connector&quot; socket-binding=&quot;remoting&quot; security-realm=&quot;ApplicationRealm&quot;/&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-OutboundConnections"  >
        <h5>Outbound Connections</h5>
    
    <div class="section-6"  id="66322684_AdminGuide-RemotingSubsystem2"  >
        <h6>Remoting Subsystem</h6>
    
            <p>
    Outbound connections can also be defined within the Remoting subsystem, these are typically used for remote EJB invocations from one AS server to another, in this scenario the security realm is used to obtain the server identity either it's password for X.509 certificate and possibly a trust store to verify the certificate of the remote host.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    Even if the referenced realm contains username and password authentication configuration the client side of the connection will NOT use this to verify the remote server.            </p>
        </div>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;remote-outbound-connection name=&quot;remote-ejb-connection&quot;
                            outbound-socket-binding-ref=&quot;binding-remote-ejb-connection&quot;
                            username=&quot;user1&quot;
                            security-realm=&quot;PasswordRealm&quot;&gt;</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-info">
        
            <p>
    The security realm is only used to obtain the password for this example, as you can see here the username is specified separately.            </p>
        </div>
    
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-SlaveHostController"  >
        <h6>Slave Host Controller</h6>
    
            <p>
    When running in domain mode slave host controllers need to establish a connection to the native interface of the master domain controller so these also need a realm for the identity of the slave.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;domain-controller&gt;
  &lt;remote host=&quot;${jboss.domain.master.address}&quot; port=&quot;${jboss.domain.master.port:9999}&quot; security-realm=&quot;ManagementRealm&quot;/&gt;
&lt;/domain-controller&gt;</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
        
            <p>
    By default when a slave host controller authenticates against the master domain controller it uses its configured name as its username. If you want to override the username used for authentication a <tt class=" ">username</tt> attribute can be added to the <tt class=" ">&lt;remote /&gt;</tt> element.            </p>
        </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Authentication"  >
        <h4>Authentication</h4>
    
            <p>
    One of the primary functions of the security realms is to define the user stores that will be used to verify the identity of inbound connections, the actual approach taken at the transport level is based on the capabilities of these backing store definitions.  The security realms are used to secure inbound connections for both the http management interface and for inbound remoting connections for both the native management interface and to access other services exposed over remoting - because of this there are some small differences between how the realm is used for each of these.            </p>
                <p>
    At the transport level we support the following authentication mechanisms.            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    HTTP            </td>
                <td rowspan="1" colspan="1">
    Remoting (SASL)            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    None            </td>
                <td rowspan="1" colspan="1">
    Anonymous            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    N/A            </td>
                <td rowspan="1" colspan="1">
    JBoss Local User            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    Digest            </td>
                <td rowspan="1" colspan="1">
    Digest            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    Basic            </td>
                <td rowspan="1" colspan="1">
    Plain            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    Client Cert            </td>
                <td rowspan="1" colspan="1">
    Client Cert            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    The most notable are the first two in this list as they need some additional explanation - the final 3 are fairly standard mechanisms.            </p>
                <p>
    If either the http interface, the native interface or a remoting connection are difined <strong class=" ">without</strong> a security realm reference then they are effectively unsecured, in the case of the http interface this means that no authentication will be performed on the incoming connection - for the remoting connections however we make use of SASL so require at least one authentication mechanism so make use of the anonymous mechanism to allow a user in without requiring a validated authentication process.            </p>
                <p>
    The next mechanism 'JBoss Local User' is specific to the remoting connections - as we ship WildFly 8 secured by default we wanted a way to allow users to connect to their own AS installation after it is started without mandating that they define a user with a password - to accomplish this we have added the 'JBoss Local User' mechanism.  This mechanism makes the use of tokens exchanged on the filesystem to prove that the client is local to the AS installation and has the appropriate file permissions to read a token written by the AS to file.  As this mechanism is dependent on both server and client implementation details it is only supported for the remoting connections and not the http connections - at some point we may review if we can add support for this to the http interface but we would need to explore the options available with the commony used web browsers that are used to communicate with the http interface.            </p>
                <p>
    The Digest mechanism is simply the HTTP Digest / SASL Digest mechanism that authenticates the user by making use of md5 hashed including nonces to avoid sending passwords in plain text over the network - this is the preferred mechanism for username / password authentication.            </p>
                <p>
    The HTTP Basic / SASL Plain mechanism is made available for times that Digest can not be used but effectively this means that the users password will be sent over the network in the clear unless SSL is enabled.            </p>
                <p>
    The final mechanism Client-Cert allows X.509 certificates to be used to verify the identity of the remote client.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    One point bearing in mind is that it is possible that an association with a realm can mean that a single incoming connection has the ability to choose between one or more authentication mechanisms.  As an example it is possible that an incoming remoting connection could choose between 'Client Cert', A username password mechanism or 'JBoss Local User' for authentication - this would allow say a local user to use the local mechanism, a remote user to supply their username and password whilst a remote script could make a call and authenticate using a certificate.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Authorization"  >
        <h4>Authorization</h4>
    
            <p>
    The actual security realms are not involved in any authorization decisions however they can be configured to load a users roles which will subsequently be used to make authorization decisions - when references to authorization are seen in the context of security realms it is this loading of roles that is being referred to.            </p>
                <p>
    For the loading of roles the process is split out to occur after the authentication step so after a user has been authenticated a second step will occur to load the roles based on the username they used to authenticate with.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-OutOfTheBoxConfiguration"  >
        <h3>Out Of The Box Configuration</h3>
    
            <p>
    Before describing the complete set of configuration options available within the realms we will look at the default configuration as for most users that is going to be the starting point before customising further.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    The examples here are taken from the standalone configuration however the descriptions are equally applicable to domain mode, one point worth noting is that all security realms defined in the <tt class=" ">host.xml</tt> are available to be referenced within the domain configuration for the servers running on that host controller.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ManagementRealm"  >
        <h4>Management Realm</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ManagementRealm&quot;&gt;
  &lt;authentication&gt;
    &lt;local default-user=&quot;$local&quot;/&gt;
    &lt;properties path=&quot;mgmt-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;
  &lt;/authentication&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    The realm <tt class=" ">ManagementRealm</tt> is the simplest realm within the default configuration, this realm simply enables two authentication mechanisms, the local mechanism and username/password authentication which will be using Digest authentication.            </p>
    <ul class=" "><li class=" ">            <p>
    local            </p>
    </li></ul>            <p>
    When using the local mechanism it is optional for remote clients to send a username to the server, this configuration specifies that where clients do not send a username it will be assumed that the clients username is <tt class=" ">$local</tt> - the <tt class=" ">&lt;local /&gt;</tt> element can also be configured to allow other usernames to be specified by remote clients however for the default configuration this is not enabled so is not supported.            </p>
    <ul class=" "><li class=" ">            <p>
    properties            </p>
    </li></ul>            <p>
    For username / password authentication the users details will be loaded from the file <tt class=" ">mgmt-users.properties</tt> which is located in {<tt class=" ">jboss.home}/standalone/configuration</tt> or {<tt class=" ">jboss.home}/domain/configuration</tt> depending on the running mode of the server.            </p>
                <p>
    Each user is represented on their own line and the format of each line is <tt class=" ">username=</tt><tt class=" ">HASH</tt> where <tt class=" ">HASH</tt> is a pre-prepared hash of the users password along with their username and the name of the realm which in this case is <tt class=" ">ManagementRealm</tt>.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    You do not need to worry about generating the entries within the properties file as we provide a utility <tt class=" ">add-user.sh</tt> or <tt class=" ">add-user.bat</tt> to add the users, this utility is described in more detail below.            </p>
        </div>
    
    <div class="confbox admonition admonition-warning">
        
            <p>
    By pre-hashing the passwords in the properties file it does mean that if the user has used the same password on different realms then the contents of the file falling into the wrong hands does not nescesarily mean all accounts are compromised. <strong class=" ">HOWEVER</strong> the contents of the files do still need to be protected as they can be used to access any server where the realm name is the same and the user has the same username and password pair.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ApplicationRealm"  >
        <h4>Application Realm</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ApplicationRealm&quot;&gt;
  &lt;authentication&gt;
    &lt;local default-user=&quot;$local&quot; allowed-users=&quot;*&quot;/&gt;
    &lt;properties path=&quot;application-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;
  &lt;/authentication&gt;
  &lt;authorization&gt;
    &lt;properties path=&quot;application-roles.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;
  &lt;/authorization&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    The realm <tt class=" ">ApplicationRealm</tt> is a slightly more complex realm as this is used for both            </p>
        <div class="section-5"  id="66322684_AdminGuide-Authentication2"  >
        <h5>Authentication</h5>
    
            <p>
    The authentication configuration is very similar to the <tt class=" ">ManagementRealm</tt> in that it enabled both the local mechanism and a username/password based Digest mechanism.            </p>
    <ul class=" "><li class=" ">            <p>
    local            </p>
    </li></ul>            <p>
    The local configuration is similar to the <tt class=" ">ManagementRealm</tt> in that where the remote user does not supply a username it will be assumed that the username is <tt class=" ">$local</tt>, however in addition to this there is now an <tt class=" ">allowed-users</tt> attribute with a value of <tt class=" ">'*'</tt> - this means that the remote user can specify any username and it will be accepted over the local mechanism provided that the local verification is a success.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    To restrict the usernames that can be specified by the remote user a comma separated list of usernames can be specified instead within the <tt class=" ">allowed-users</tt> attribute.            </p>
        </div>
    
<ul class=" "><li class=" ">            <p>
    properties            </p>
    </li></ul>            <p>
    The properties definition works in exactly the same way as the definition for <tt class=" ">ManagementRealm</tt> except now the properties file is called <tt class=" ">application-users.properties</tt>.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Authorization2"  >
        <h5>Authorization</h5>
    
            <p>
    The contents of the <tt class=" ">Authorization</tt> element are specific to the <tt class=" ">ApplicationRealm</tt>, in this case a properties file is used to load a users roles.            </p>
                <p>
    The properties file is called <tt class=" ">application-roles.properties</tt> and is located in {<tt class=" ">jboss.home}/standalone/configuration</tt> or {<tt class=" ">jboss.home}/domain/configuration</tt> depending on the running mode of the server.  The format of this file is <tt class=" ">username=</tt><tt class=" ">ROLES</tt> where <i class=" ">ROLES</i> is a comma separated list of the users roles.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    As the loading of a users roles is a second step this is where it may be desirable to restrict which users can use the local mechanism so that some users still require username and password authentication for their roles to be loaded.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-othersecuritydomain"  >
        <h5>other security domain</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;
  &lt;authentication&gt;
    &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;
      &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;
    &lt;/login-module&gt;
    &lt;login-module code=&quot;RealmDirect&quot; flag=&quot;required&quot;&gt;
      &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;
    &lt;/login-module&gt;
  &lt;/authentication&gt;
&lt;/security-domain&gt;</code></pre>
        </div>
    </div>
            <p>
    When applications are deployed to the application server they are associated with a security domain within the security subsystem, the <tt class=" ">other</tt> security domain is provided to work with the <tt class=" ">ApplicationRealm</tt>, this domain is defined with a pair of login modules Remoting and RealmDirect.            </p>
    <ul class=" "><li class=" ">            <p>
    Remoting            </p>
    </li></ul>            <p>
    The <tt class=" ">Remoting</tt> login module is used to check if the request currently being authenticated is a request received over a Remoting connection, if so the identity that was created during the authentication process is used and associated with the current request.            </p>
                <p>
    If the request did not arrive over a Remoting connection this module does nothing and allows the JAAS based login to continue to the next module.            </p>
    <ul class=" "><li class=" ">            <p>
    RealmDirect            </p>
    </li></ul>            <p>
    The <tt class=" ">RealmDirect</tt> login module makes use of a security realm to authenticate the current request if that did not occur in the <tt class=" ">Remoting</tt> login module and then use the realm to load the users roles, by default this login module assumes the realm to use is called <tt class=" ">ApplicationRealm</tt> although other names can be overridden using the &quot;realm&quot; module-option.            </p>
                <p>
    The advantage of this approach is that all of the backing store configuration can be left within the realm with the security domain just delegating to the realm.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-adduser.sh"  >
        <h4>user.sh</h4>
    
            <p>
    For use with the default configuration we supply a utility <tt class=" ">add-user</tt> which can be used to manage the properties files for the default realms used to store the users and their roles.            </p>
                <p>
    The add-user utility can be used to manage both the users in the <tt class=" ">ManagementRealm</tt> and the users in the <tt class=" ">ApplicationRealm</tt>, changes made apply to the properties file used both for domain mode and standalone mode.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    After you have installed your application server and decided if you are going to run in standalone mode or domain mode you can delete the parent folder for the mode you are not using, the add-user utility will then only be managing the properties file for the mode in use.            </p>
        </div>
    
            <p>
    The add-user utility is a command line utility however it can be run in both interactive and non-interactive mode.  Depending on your platform the script to run the add-user utility is either <tt class=" ">add-user.sh</tt> or <tt class=" ">add-user.bat</tt> which can be found in {<tt class=" ">jboss.home}/bin</tt>.            </p>
                <p>
    This guide now contains a couple of examples of this utility in use to accomplish the most common tasks.            </p>
        <div class="section-5"  id="66322684_AdminGuide-AddingaUser"  >
        <h5>Adding a User</h5>
    
            <p>
    Adding users to the properties files is the primary purpose of this utility.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    The server caches the contents of the properties files in memory, however the server does check the modified time of the properties files on each authentication request and re-load if the time has been updated - this means all changes made by this utility are immediately applied to any running server.            </p>
        </div>
    
    <div class="section-6"  id="66322684_AdminGuide-AManagementUser"  >
        <h6>A Management User</h6>
    
    <div class="confbox admonition admonition-note">
        
            <p>
    The default name of the realm for management users is <tt class=" ">ManagementRealm</tt>, when the utility prompts for the realm name just accept the default unless you have switched to a different realm.            </p>
        </div>
    
    <div class="section-7"  id="66322684_AdminGuide-InteractiveMode"  >
        <h7>Interactive Mode</h7>
    
            <p>
        <img src="images/author/download/attachments/66322734/415498048.png" alt="images/author/download/attachments/66322734/415498048.png" />
                </p>
                <p>
    Here we have added a new Management User called <tt class=" ">adminUser</tt>, as you can see some of the questions offer default responses so you can just press enter without repeating the default value.            </p>
                <p>
    For now just answer <tt class=" ">n</tt> or <tt class=" ">no</tt> to the final question, adding users to be used by processes is described in more detail in the domain management chapter.            </p>
        </div>
    
    <div class="section-7"  id="66322684_AdminGuide-NonInteractiveMode"  >
        <h7>Interactive Mode</h7>
    
            <p>
    To add a user in non-interactive mode the command <tt class=" ">./add-user.sh {username} {password</tt>} can be used.            </p>
                <p>
        <img src="images/author/download/attachments/66322734/265392448.png" alt="images/author/download/attachments/66322734/265392448.png" />
                </p>
        <div class="confbox admonition admonition-warning">
        
            <p>
    If you add users using this approach there is a risk that any other user that can view the list of running process may see the arguments including the password of the user being added, there is also the risk that the username / password combination will be cached in the history file of the shell you are currently using.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-AnApplicationUser"  >
        <h6>An Application User</h6>
    
            <p>
    When adding application users in addition to adding the user with their pre-hashed password it is also now possible to define the roles of the user.            </p>
        <div class="section-7"  id="66322684_AdminGuide-InteractiveMode2"  >
        <h7>Interactive Mode</h7>
    
            <p>
        <img src="images/author/download/attachments/66322734/-1210289224.png" alt="images/author/download/attachments/66322734/-1210289224.png" />
                </p>
                <p>
    Here a new user called <tt class=" ">appUser</tt> has been added, in this case a comma separated list of roles has also been specified.            </p>
                <p>
    As with adding a management user just answer <tt class=" ">n</tt> or <tt class=" ">no</tt> to the final question until you know you are adding a user that will be establishing a connection from one server to another.            </p>
        </div>
    
    <div class="section-7"  id="66322684_AdminGuide-NonInteractiveMode2"  >
        <h7>Interactive Mode</h7>
    
            <p>
    To add an application user non-interactively use the command <tt class=" ">./add-user.sh -a {username} {password</tt>}.            </p>
                <p>
        <img src="images/author/download/attachments/66322734/-869594696.png" alt="images/author/download/attachments/66322734/-869594696.png" />
                </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    Non-interactive mode does not support defining a list of users, to associate a user with a set of roles you will need to manually edit the <tt class=" ">application-roles.properties</tt> file by hand.            </p>
        </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-UpdatingaUser"  >
        <h5>Updating a User</h5>
    
            <p>
    Within the add-user utility it is also possible to update existing users, in interactive mode you will be prompted to confirm if this is your intention.            </p>
        <div class="section-6"  id="66322684_AdminGuide-AManagementUser2"  >
        <h6>A Management User</h6>
    
    <div class="section-7"  id="66322684_AdminGuide-InteractiveMode3"  >
        <h7>Interactive Mode</h7>
    
            <p>
        <img src="images/author/download/attachments/66322734/-17649304.png" alt="images/author/download/attachments/66322734/-17649304.png" />
                </p>
        </div>
    
    <div class="section-7"  id="66322684_AdminGuide-NonInteractiveMode3"  >
        <h7>Interactive Mode</h7>
    
            <p>
    In non-interactive mode if a user already exists the update is automatic with no confirmation prompt.            </p>
        </div>
    
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-AnApplicationUser2"  >
        <h6>An Application User</h6>
    
    <div class="section-7"  id="66322684_AdminGuide-InteractiveMode4"  >
        <h7>Interactive Mode</h7>
    
            <p>
        <img src="images/author/download/attachments/66322734/-2055545712.png" alt="images/author/download/attachments/66322734/-2055545712.png" />
                </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    On updating a user with roles you will need to re-enter the list of roles assigned to the user.            </p>
        </div>
    
    </div>
    
    <div class="section-7"  id="66322684_AdminGuide-NonInteractiveMode4"  >
        <h7>Interactive Mode</h7>
    
            <p>
    In non-interactive mode if a user already exists the update is automatic with no confirmation prompt.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-CommunityContributions"  >
        <h5>Community Contributions</h5>
    
            <p>
    There are still a few features to add to the add-user utility such as removing users or adding application users with roles in non-interactive mode, if you are interested in contributing to WildFly development the add-user utility is a good place to start as it is a stand alone utility, however it is a part of the AS build so you can become familiar with the AS development processes without needing to delve straight into the internals of the application server.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-JMX"  >
        <h4>JMX</h4>
    
            <p>
    When configuring the security realms remote access to the servers MBeanServer needs a special mention, when running in standalone mode the following is the default configuration: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;native-interface security-realm=&quot;ManagementRealm&quot;&gt;...&lt;/native-interface&gt;</code></pre>
        </div>
    </div>
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:jmx:1.1&quot;&gt;
  ...
  &lt;remoting-connector/&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    With this configuration remote access to JMX is provided over the native management interface, this is secured using the realm <tt class=" ">ManagementRealm</tt>, this means that any user that can connect to the native interface can also use this interface to access the MBeanServer - to disable this just remove the <tt class=" ">&lt;remoting-connector /&gt;</tt> element.            </p>
                <p>
    In domain mode it is slightly more complicates as the native interface is exposed by the host controller process however each application server is running in it's own process so by default remote access to JMX is disabled.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:1.1&quot;&gt;
  &lt;connector name=&quot;remoting-connector&quot; socket-binding=&quot;remoting&quot; security-realm=&quot;ApplicationRealm&quot;/&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:jmx:1.1&quot;&gt;
  ...
  &lt;!--&lt;remoting-connector use-management-endpoint=&quot;false&quot;/&gt;--&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    To enable remote access to JMX uncomment the <tt class=" ">&lt;remoting-connector /&gt;</tt> element however be aware that this will make the MBeanServer accessible over the same Remoting connector used for remote JNDI and EJB access - this means that any user that can authenticate against the realm <tt class=" ">ApplicationRealm</tt> will be able to access the MBeanServer.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    The following Jira issue is currently outstanding to allow access to the individual MBeanServers by proxying through the host controllers native interface <a href="https://issues.jboss.org/browse/AS7-4009">AS7-4009</a>, if this is a feature you would use please add your vote to the issue.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-DetailedConfiguration"  >
        <h3>Detailed Configuration</h3>
    
            <p>
    This section of the documentation describes the various configuration options when defining realms, plug-ins are a slightly special case so the configuration options for plug-ins is within it's own section.            </p>
                <p>
    Within a security realm definition there are four optional elements <tt class=" ">&lt;plug-ins /&gt;</tt>, <tt class=" ">&lt;server-identities /&gt;</tt>, <tt class=" ">&lt;authentication /&gt;</tt>, and <tt class=" ">&lt;authorization /&gt;</tt>, as mentioned above plug-ins is defined within it's own section below so we will begin by looking at the <tt class=" ">&lt;server-identities /&gt;</tt> element.            </p>
        <div class="section-4"  id="66322684_AdminGuide-%7B%7B%3Cserveridentities%2F%3E%7D%7D"  >
        <h4>&lt;server-identities /&gt;</h4>
    
            <p>
    The server identities section of a realm definition is used to define how a server appears to the outside world, currently this element can be used to configure a password to be used when establishing a remote outbound connection and also how to load a X.509 key which can be used for both inbound and outbound SSL connections.            </p>
        <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Cssl%2F%3E%7D%7D"  >
        <h5>&lt;ssl /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;server-identities&gt;
  &lt;ssl protocol=&quot;...&quot;&gt;
    &lt;keystore path=&quot;...&quot; relative-to=&quot;...&quot; keystore-password=&quot;...&quot; alias=&quot;...&quot; key-password=&quot;...&quot; /&gt;
  &lt;/ssl&gt;
&lt;/server-identities&gt;</code></pre>
        </div>
    </div>
<ul class=" "><li class=" ">            <p>
    <strong class=" ">protocol</strong> - By default this is set to TLS and in general does not need to be set.            </p>
    </li></ul>            <p>
    The SSL element then contains the nested <tt class=" ">&lt;keystore /&gt;</tt> element, this is used to define how to load the key from the file based (JKS) keystore.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">path</strong> (mandatory) - This is the path to the keystore, this can be an absolute path or relative to the next attribute.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">relative-to</strong> (optional) - The name of a service representing a path the keystore is relative to.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">keystore-password</strong> (mandatory) - The password required to open the keystore.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">alias</strong> (optional) - The alias of the entry to use from the keystore - for a keystore with multiple entries in practice the first usable entry is used but this should not be relied on and the alias should be set to guarantee which entry is used.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">key-password</strong> (optional) - The password to load the key entry, if omitted the keystore-password will be used instead.            </p>
    </li></ul>    <div class="confbox admonition admonition-tip">
        
            <p>
    If you see the error <tt class=" ">UnrecoverableKeyException: Cannot recover key</tt> the most likely cause that you need to specify a <tt class=" ">key-password</tt> and possible even an <tt class=" ">alias</tt> as well to ensure only one key is loaded.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Csecret%2F%3E%7D%7D"  >
        <h5>&lt;secret /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;server-identities&gt;
  &lt;secret value=&quot;...&quot; /&gt;
&lt;/server-identities&gt;</code></pre>
        </div>
    </div>
<ul class=" "><li class=" ">            <p>
    <strong class=" ">value</strong> (mandatory) - The password to use for outbound connections encoded as Base64, this field also supports a vault expression should stronger protection be required.            </p>
    </li></ul>    <div class="confbox admonition admonition-note">
        
            <p>
    The username for the outbound connection is specified at the point the outbound connection is defined.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-%7B%7B%3Cauthentication%2F%3E%7D%7D"  >
        <h4>&lt;authentication /&gt;</h4>
    
            <p>
    The authentication element is predominantly used to configure the authentication that is performed on an inbound connection, however there is one exception and that is if a trust store is defined - on negotiating an outbound SSL connection the trust store will be used to verify the remote server.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;truststore /&gt;
  &lt;local /&gt;
  &lt;jaas /&gt;
  &lt;ldap /&gt;
  &lt;properties /&gt;
  &lt;users /&gt;
  &lt;plug-in /&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    An authentication definition can have zero or one <tt class=" ">&lt;truststore /&gt;</tt>, it can also have zero or one <tt class=" ">&lt;local /&gt;</tt> and it can also have one of <tt class=" ">&lt;jaas /&gt;</tt>, <tt class=" ">&lt;ldap /&gt;</tt>, <tt class=" ">&lt;properties /&gt;</tt>, <tt class=" ">&lt;users /&gt;</tt>, and <tt class=" ">&lt;plug-in /&gt;</tt> i.e. the local mechanism and a truststore for certificate verification can be independent switched on and off and a single username / password store can be defined.            </p>
        <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Ctruststore%2F%3E%7D%7D"  >
        <h5>&lt;truststore /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;truststore path=&quot;...&quot; relative-to=&quot;...&quot; keystore-password=&quot;...&quot;/&gt; 
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    This element is used to define how to load a key store file that can be used as the trust store within the SSLContext we create internally, the store is then used to verify the certificates of the remote side of the connection be that inbound or outbound.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">path</strong> (mandatory) - This is the path to the keystore, this can be an absolute path or relative to the next attribute.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">relative-to</strong> (optional) - The name of a service representing a path the keystore is relative to.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">keystore-password</strong> (mandatory) - The password required to open the keystore.            </p>
    </li></ul>    <div class="confbox admonition admonition-note">
        
            <p>
    Although this is a definition of a trust store the attribute for the password is <tt class=" ">keystore-password</tt>, this is because the underlying file being opened is still a key store.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Clocal%2F%3E%7D%7D"  >
        <h5>&lt;local /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;local default-user=&quot;...&quot; allowed-users=&quot;...&quot; /&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    This element switches on the local authentication mechanism that allows clients to the server to verify that they are local to the server, at the protocol level it is optional for the remote client to send a user name in the authentication response.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">default-user</strong> (optional) - If the client does not pass in a username this is the assumed username, this value is also automatically added to the list of allowed-users.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">allowed-users</strong> (optional) - This attribute is used to specify a comma separated list of users allowed to authenticate using the local mechanism, alternatively '<tt class=" ">*</tt>' can be specified to allow any username to be specified.            </p>
    </li></ul>    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Cjaas%2F%3E%7D%7D"  >
        <h5>&lt;jaas /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;jaas name=&quot;...&quot; /&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    The jaas element is used to enable username and password based authentication where the supplied username and password are verified by making use of a configured jaas domain.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">name</strong> (mandatory) - The name of the jaas domain to use to verify the supplied username and password.            </p>
    </li></ul>    <div class="confbox admonition admonition-warning">
        
            <p>
    As JAAS authentication works by taking a username and password and verifying these the use of this element means that at the transport level authentication will be forced to send the password in plain text, any interception of the messages exchanged between the client and server without SSL enabled will reveal the users password.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Cldap%2F%3E%7D%7D"  >
        <h5>&lt;ldap /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;ldap connection=&quot;...&quot; base-dn=&quot;...&quot; recursive=&quot;...&quot; user-dn=&quot;...&quot;&gt;
    &lt;username-filter attribute=&quot;...&quot; /&gt;
    &lt;advanced-filter filter=&quot;...&quot; /&gt;
  &lt;/ldap&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    The ldap element is used to define how LDAP searches will be used to authenticate a user, this works by first connecting to LDAP and performing a search using the supplied user name to identity the distinguished name of the user and then a subsequent connection is made to the server using the password supplied by the user - if this second connection is a success then authentication succeeds.            </p>
        <div class="confbox admonition admonition-warning">
        
            <p>
    Due to the verification approach used this configuration causes the authentication mechanisms selected for the protocol to cause the password to be sent from the client in plain text, the following Jira issue is to investigating proxying a Digest authentication with the LDAP server so no plain text password is needed  <a href="https://issues.jboss.org/browse/AS7-4195">AS7-4195</a>.            </p>
        </div>
    
<ul class=" "><li class=" ">            <p>
    <strong class=" ">connection</strong> (mandatory) - The name of the connection to use to connect to LDAP.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">base-dn</strong> (mandatory) - The distinguished name of the context to use to begin the search from.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">recursive</strong> (optional) - Should the filter be executed recursively? Defaults to false.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">user-dn</strong> (optional) - After the user has been found specifies which attribute to read for the users distinguished name, defaults to '<tt class=" ">dn</tt>'.            </p>
    </li></ul>            <p>
    Within the ldap element only one of <tt class=" ">&lt;username-filter /&gt;</tt> or <tt class=" ">&lt;advanced-filter /&gt;</tt> can be specified.            </p>
        <div class="section-6"  id="66322684_AdminGuide-%7B%7B%3Cusernamefilter%2F%3E%7D%7D"  >
        <h6>&lt;username-filter /&gt;</h6>
    
            <p>
    This element is used for a simple filter to match the username specified by the remote user against a single attribute, as an example with Active Directory the match is most likely to be against the '<tt class=" ">sAMAccountName</tt>' attribute.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">attribute</strong> (mandatory) - The name of the field to match the users supplied username against.            </p>
    </li></ul>    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-%7B%7B%3Cadvancedfilter%2F%3E%7D%7D"  >
        <h6>&lt;advanced-filter /&gt;</h6>
    
            <p>
    This element is used where a more advanced filter is required, one example use of this filter is to exclude certain matches by specifying some additional criteria for the filter.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">filter</strong> (mandatory) - The filter to execute to locate the user, this filter should contain '{<tt class=" ">0</tt>}' as a place holder for the username supplied by the user authenticating.            </p>
    </li></ul>    </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Cproperties%2F%3E%7D%7D"  >
        <h5>&lt;properties /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;properties path=&quot;...&quot; relative-to=&quot;...&quot; plain-text=&quot;...&quot; /&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    The properties element is used to reference a properties file to load to read a users password or pre-prepared digest for the authentication process.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">path</strong> (mandatory) - The path to the properties file, either absolute or relative to the path referenced by the relative-to attribute.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">relative-to</strong> (optional) - The name of a path service that the defined path will be relative to.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">plain-text</strong> (optional) - Setting to specify if the passwords are stored as plain text within the properties file, defaults to false.            </p>
    </li></ul>    <div class="confbox admonition admonition-note">
        
            <p>
    By default the properties files are expected to store a pre-prepared hash of the users password in the form HEX( MD5( username ':' realm ':' password))            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Cusers%2F%3E%7D%7D"  >
        <h5>&lt;users /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;users&gt;
    &lt;user username=&quot;...&quot;&gt;
      &lt;password&gt;...&lt;/password&gt;
    &lt;/user&gt;
  &lt;/users&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    This is a very simple store of a username and password that stores both of these within the domain model, this is only really provided for the provision of simple examples.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">username</strong> (mandatory) - A users username.            </p>
    </li></ul>            <p>
    The <tt class=" ">&lt;password/&gt;</tt> element is then used to define the password for the user.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-%7B%7B%3Cauthorization%2F%3E%7D%7D"  >
        <h4>&lt;authorization /&gt;</h4>
    
            <p>
    The authorization element is used to define how a users roles can be loaded after the authentication process completes, these roles may then be used for subsequent authorization decisions based on the service being accessed.  At the moment only a properties file approach or a custom plug-in are supported - support for loading roles from LDAP or from a database are planned for a subsequent release.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authorization&gt;
  &lt;properties /&gt;
  &lt;plug-in /&gt;
&lt;/authorization&gt;</code></pre>
        </div>
    </div>
    <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Cproperties%2F%3E%7D%7D2"  >
        <h5>&lt;properties /&gt;</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authorization&gt;
  &lt;properties path=&quot;...&quot; relative-to=&quot;...&quot; /&gt;
&lt;/authorization&gt;</code></pre>
        </div>
    </div>
            <p>
    The format of the properties file is <tt class=" ">username={ROLES</tt>} where {<tt class=" ">ROLES</tt>} is a comma separated list of the users roles.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">path</strong> (mandatory) - The path to the properties file, either absolute or relative to the path referenced by the relative-to attribute.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">relative-to</strong> (optional) - The name of a path service that the defined path will be relative to.            </p>
    </li></ul>    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-%7B%7B%3Coutboundconnection%2F%3E%7D%7D"  >
        <h4>&lt;outbound-connection /&gt;</h4>
    
            <p>
    Strictly speaking these are not a part of the security realm definition, however at the moment they are only used by security realms so the definition of outbound connection is described here.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;management&gt;
  &lt;security-realms /&gt;
  &lt;outbound-connections&gt;
    &lt;ldap /&gt;
  &lt;/outbound-connections&gt;
&lt;/management&gt;</code></pre>
        </div>
    </div>
    <div class="section-5"  id="66322684_AdminGuide-%7B%7B%3Cldap%2F%3E%7D%7D2"  >
        <h5>&lt;ldap /&gt;</h5>
    
            <p>
    At the moment we only support outbound connections to ldap servers for the authentication process - this will later be expanded when we add support for database based authentication.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;outbound-connections&gt;
  &lt;ldap name=&quot;...&quot; url=&quot;...&quot; search-dn=&quot;...&quot; search-credential=&quot;...&quot; initial-context-factory=&quot;...&quot; /&gt;
&lt;/outbound-connections&gt;</code></pre>
        </div>
    </div>
            <p>
    The outbound connections are defined in this section and then referenced by name from the configuration that makes use of them.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">name</strong> (mandatory) - The unique name used to reference this connection.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">url</strong> (mandatory) - The URL use to establish the LDAP connection.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">search-dn</strong> (mandatory) - The distinguished name of the user to authenticate as to perform the searches.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">search-credential</strong> (mandatory) - The password required to connect to LDAP as the search-dn.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">initial-context-factory</strong> (optional) - Allows overriding the initial context factory, defaults to '<tt class=" ">com.sun.jndi.ldap.LdapCtxFactory</tt>'            </p>
    </li></ul>    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-PlugIns"  >
        <h3>Plug Ins</h3>
    
            <p>
    Within WildFly 8 for communication with the management interfaces and for other services exposed using Remoting where username / password authentication is used the use of Digest authentication is preferred over the use of HTTP Basic or SASL Plain so that we can avoid the sending of password in the clear over the network.  For validation of the digests to work on the server we either need to be able to retrieve a users plain text password or we need to be able to obtain a ready prepared hash of their password along with the username and realm.            </p>
                <p>
    Previously to allow the addition of custom user stores we have added an option to the realms to call out to a JAAS domain to validate a users username and password, the problem with this approach is that to call JAAS we need the remote user to send in their plain text username and password so that a JAAS LoginModule can perform the validation, this forces us down to use either the HTTP Basic authentication mechanism or the SASL Plain mechanism depending on the transport used which is undesirable as we can not longer use Digest.            </p>
                <p>
    To overcome this we now support plugging in custom user stores to support loading a users password, hash and roles from a custom store to allow different stores to be implemented without forcing the authentication back to plain text variant, this article describes the requirements for a plug in and shows a simple example plug-in for use with WildFly 8.            </p>
                <p>
    When implementing a plug in there are two steps to the authentication process, the first step is to load the users identity and credential from the relevant store - this is then used to verify the user attempting to connect is valid.  After the remote user is validated we then load the users roles in a second step.  For this reason the support for plug-ins is split into the two stages, when providing a plug-in either of these two steps can be implemented but there is no requirement to implement the other side.            </p>
                <p>
    When implementing a plug-in the following interfaces are the bare minimum that need to be implemented so depending on if a plug-in to load a users identity or a plug-in to load a users roles is being implemented you will be implementing one of these interfaces.            </p>
                <p>
    <strong class=" "><i class=" ">Note</i></strong> <i class=" ">- All classes and interfaces of the SPI to be implemented are in the 'org.jboss.as.domain.management.plugin' package which is a part of the 'org.jboss.as.domain-management' module but for simplicity for the rest of this section only the short names will be shown.</i>            </p>
        <div class="section-4"  id="66322684_AdminGuide-AuthenticationPlugIn"  >
        <h4>AuthenticationPlugIn</h4>
    
            <p>
    To implement an <tt class=" ">AuthenticationPlugIn</tt> the following interface needs to be implemened: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface AuthenticationPlugIn&lt;T extends Credential&gt; {
    Identity&lt;T&gt; loadIdentity(final String userName, final String realm) throws IOException;
}</code></pre>
        </div>
    </div>
            <p>
    During the authentication process this method will be called with the user name supplied by the remote user and the name of the realm they are authenticating against, this method call represents that an authentication attempt is occurring but it is the Identity instance that is returned that will be used for the actual authentication to verify the remote user.            </p>
                <p>
    The Identity interface is also an interface you will implement: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface Identity&lt;T extends Credential&gt; {
    String getUserName();
    T getCredential();
}</code></pre>
        </div>
    </div>
            <p>
    Additional information can be contained within the Identity implementation although it will not currently be used, the key piece of information here is the Credential that will be returned - this needs to be one of the following: -            </p>
        <div class="section-5"  id="66322684_AdminGuide-PasswordCredential"  >
        <h5>PasswordCredential</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>public final class PasswordCredential implements Credential {
    public PasswordCredential(final char[] password);
    public char[] getPassword();
    void clear();
}</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">PasswordCredential</tt> is already implemented so use this class if you have the plain text password of the remote user, by using this the secured interfaces will be able to continue using the Digest mechanism for authentication.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-DigestCredential"  >
        <h5>DigestCredential</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>public final class DigestCredential implements Credential {
    public DigestCredential(final String hash);
    public String getHash();
}</code></pre>
        </div>
    </div>
            <p>
    This class is also already implemented and should be returned if instead of the plain text password you already have a pre-prepared hash of the username, realm and password.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ValidatePasswordCredential"  >
        <h5>ValidatePasswordCredential</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface ValidatePasswordCredential extends Credential {
    boolean validatePassword(final char[] password);
}</code></pre>
        </div>
    </div>
            <p>
    This is a special Credential type to use when it is not possible to obtain either a plain text representation of the password or a pre-prepared hash - this is an interface as you will need to provide an implementation to verify a supplied password.  The down side of using this type of Credential is that the authentication mechanism used at the transport level will need to drop down from Digest to either HTTP Basic or SASL Plain which will now mean that the remote client is sending their credential across the network in the clear.            </p>
                <p>
    If you use this type of credential be sure to force the mechanism choice to Plain as described in the configuration section below.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-AuthorizationPlugIn"  >
        <h4>AuthorizationPlugIn</h4>
    
            <p>
    If you are implementing a custom mechanism to load a users roles you need to implement the <tt class=" ">AuthorizationPlugIn</tt>            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface AuthorizationPlugIn {
    String[] loadRoles(final String userName, final String realm) throws IOException;
}</code></pre>
        </div>
    </div>
            <p>
    As with the <tt class=" ">AuthenticationPlugIn</tt> this has a single method that takes a users userName and realm - the return type is an array of Strings with each entry representing a role the user is a member of.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-PlugInConfigurationSupport"  >
        <h4>PlugInConfigurationSupport</h4>
    
            <p>
    In addition to the specific interfaces above there is an additional interface that a plug-in can implement to receive configuration information before the plug-in is used and also to receive a Map instance that can be used to share state between the plug-in instance used for the authentication step of the call and the plug-in instance used for the authorization step.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface PlugInConfigurationSupport {
    void init(final Map&lt;String, String&gt; configuration, final Map&lt;String, Object&gt; sharedState) throws IOException;
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-InstallingandConfiguringaPlugIn"  >
        <h4>Installing and Configuring a Plug-In</h4>
    
            <p>
    The next step of this article describes the steps to implement a plug-in provider and how to make it available within WildFly 8&nbsp;and how to configure it.  Example configuration and an example implementation are shown to illustrate this.            </p>
                <p>
    The following is an example security realm definition which will be used to illustrate this: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;PlugInRealm&quot;&gt;
   &lt;plug-ins&gt;
      &lt;plug-in module=&quot;org.jboss.as.sample.plugin&quot;/&gt;
   &lt;/plug-ins&gt;
   &lt;authentication&gt;
      &lt;plug-in name=&quot;Sample&quot;&gt;
         &lt;properties&gt;
            &lt;property name=&quot;darranl.password&quot; value=&quot;dpd&quot;/&gt;
            &lt;property name=&quot;darranl.roles&quot; value=&quot;Admin,Banker,User&quot;/&gt;
         &lt;/properties&gt;
      &lt;/plug-in&gt;
   &lt;/authentication&gt;
   &lt;authorization&gt;
      &lt;plug-in name=&quot;Delegate&quot; /&gt;
   &lt;/authorization&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    Before looking closely at the packaging and configuration there is one more interface to implement and that is the <tt class=" ">PlugInProvider</tt> interface, that interface is responsible for making PlugIn instances available at runtime to handle the requests.            </p>
        <div class="section-5"  id="66322684_AdminGuide-PlugInProvider"  >
        <h5>PlugInProvider</h5>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface PlugInProvider {
    AuthenticationPlugIn&lt;Credential&gt; loadAuthenticationPlugIn(final String name);
    AuthorizationPlugIn loadAuthorizationPlugIn(final String name);
}</code></pre>
        </div>
    </div>
            <p>
    These methods are called with the name that is supplied in the plug-in elements that are contained within the authentication and authorization elements of the configuration, based on the sample configuration above the loadAuthenticationPlugIn method will be called with a parameter of 'Sample' and the loadAuthorizationPlugIn method will be called with a parameter of 'Delegate'.            </p>
                <p>
    Multiple plug-in providers may be available to the application server so if a <tt class=" ">PlugInProvider</tt> implementation does not recognise a name then it should just return null and the server will continue searching the other providers.  If a <tt class=" ">PlugInProvider</tt> does recognise a name but fails to instantiate the PlugIn then a <tt class=" ">RuntimeException</tt> can be thrown to indicate the failure.            </p>
                <p>
    As a server could have many providers registered it is recommended that a naming convention including some form of hierarchy is used e.g. use package style names to avoid conflicts.            </p>
                <p>
    For the example the implementation is as follows: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public class SamplePluginProvider implements PlugInProvider {

    public AuthenticationPlugIn&lt;Credential&gt; loadAuthenticationPlugIn(String name) {
        if (&quot;Sample&quot;.equals(name)) {
            return new SampleAuthenticationPlugIn();
        }
        return null;
    }

    public AuthorizationPlugIn loadAuthorizationPlugIn(String name) {
        if (&quot;Sample&quot;.equals(name)) {
            return new SampleAuthenticationPlugIn();
        } else if (&quot;Delegate&quot;.equals(name)) {
            return new DelegateAuthorizationPlugIn();
        }
        return null;
    }
}</code></pre>
        </div>
    </div>
            <p>
    The load methods are called for each authentication attempt but it will be an implementation detail of the provider if it decides to return a new instance of the provider each time - in this scenario as we also use configuration and shared state then new instances of the implementations make sense.            </p>
                <p>
    To load the provider use a ServiceLoader so within the META-INF/services folder of the jar this project adds a file called '<tt class=" ">org.jboss.as.domain.management.plugin.PlugInProvider</tt>' - this contains a single entry which is the fully qualified class name of the PlugInProvider implementation class.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>org.jboss.as.sample.SamplePluginProvider</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-PackageasaModule"  >
        <h5>Package as a Module</h5>
    
            <p>
    To make the <tt class=" ">PlugInProvider</tt> available to the application it is bundled as a module and added to the modules already shipped with WildFly 8.            </p>
                <p>
    To add as a module we first need a <tt class=" ">module.xml</tt>: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.jboss.as.sample.plugin&quot;&gt;
    &lt;properties&gt;
    &lt;/properties&gt;

    &lt;resources&gt;
        &lt;resource-root path=&quot;SamplePlugIn.jar&quot;/&gt;
    &lt;/resources&gt;

    &lt;dependencies&gt;
        &lt;module name=&quot;org.jboss.as.domain-management&quot; /&gt;
    &lt;/dependencies&gt;
&lt;/module&gt;</code></pre>
        </div>
    </div>
            <p>
    The interfaces being implemented are in the '<tt class=" ">org.jboss.as.domain-management</tt>' module so a dependency on that module is defined, this <tt class=" ">module.xml</tt> is then placed in the '{<tt class=" ">jboss.home}/modules/org/jboss/as/sample/plugin/main</tt>'.            </p>
                <p>
    The compiled classed and <tt class=" ">META-INF/services</tt> as described above are assembled into a jar called <tt class=" ">SamplePlugIn.jar</tt> and also placed into this folder.            </p>
                <p>
    Looking back at the sample configuration at the top of the realm definition the following element was added: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>   &lt;plug-ins&gt;
      &lt;plug-in module=&quot;org.jboss.as.sample.plugin&quot;/&gt;
   &lt;/plug-ins&gt;</code></pre>
        </div>
    </div>
            <p>
    This element is used to list the modules that should be searched for plug-ins.  As plug-ins are loaded during the server start up this search is a lazy search so don't expect a definition to a non existant module or to a module that does not contain a plug-in to report an error.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-TheAuthenticationPlugIn"  >
        <h5>The AuthenticationPlugIn</h5>
    
            <p>
    The example <tt class=" ">AuthenticationPlugIn</tt> is implemented as: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public class SampleAuthenticationPlugIn extends AbstractPlugIn {

    private static final String PASSWORD_SUFFIX = &quot;.password&quot;;
    private static final String ROLES_SUFFIX = &quot;.roles&quot;;
    private Map&lt;String, String&gt; configuration;

    public void init(Map&lt;String, String&gt; configuration, Map&lt;String, Object&gt; sharedState) throws IOException {
        this.configuration = configuration;
        // This will allow an AuthorizationPlugIn to delegate back to this instance.
        sharedState.put(AuthorizationPlugIn.class.getName(), this);
    }

    public Identity loadIdentity(String userName, String realm) throws IOException {
        String passwordKey = userName + PASSWORD_SUFFIX;
        if (configuration.containsKey(passwordKey)) {
            return new SampleIdentity(userName, configuration.get(passwordKey));
        }
        throw new IOException(&quot;Identity not found.&quot;);
    }

    public String[] loadRoles(String userName, String realm) throws IOException {
        String rolesKey = userName + ROLES_SUFFIX;
        if (configuration.containsKey(rolesKey)) {
            String roles = configuration.get(rolesKey);
            return roles.split(&quot;,&quot;);
        } else {
            return new String[0];
        }
    }

    private static class SampleIdentity implements Identity {
        private final String userName;
        private final Credential credential;

        private SampleIdentity(final String userName, final String password) {
            this.userName = userName;
            this.credential = new PasswordCredential(password.toCharArray());
        }

        public String getUserName() {
            return userName;
        }

        public Credential getCredential() {
            return credential;
        }
    }
}</code></pre>
        </div>
    </div>
            <p>
    As you can see from this implementation there is also an additional class being extended <tt class=" ">AbstractPlugIn</tt> - that is simply an abstract class that implements the <tt class=" ">AuthenticationPlugIn</tt>, <tt class=" ">AuthorizationPlugIn</tt>, and <tt class=" ">PlugInConfigurationSupport</tt> interfaces already.  The properties that were defined in the configuration are passed in as a Map and importantly for this sample the plug-in adds itself to the shared state map.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-TheAuthorizationPlugIn"  >
        <h5>The AuthorizationPlugIn</h5>
    
            <p>
    The example implementation of the authentication plug in is as follows: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public class DelegateAuthorizationPlugIn extends AbstractPlugIn {

    private AuthorizationPlugIn authorizationPlugIn;

    public void init(Map&lt;String, String&gt; configuration, Map&lt;String, Object&gt; sharedState) throws IOException {
        authorizationPlugIn = (AuthorizationPlugIn) sharedState.get(AuthorizationPlugIn.class.getName());
    }

    public String[] loadRoles(String userName, String realm) throws IOException {
        return authorizationPlugIn.loadRoles(userName, realm);
    }

}</code></pre>
        </div>
    </div>
            <p>
    This plug-in illustrates how two plug-ins can work together, by the <tt class=" ">AuthenticationPlugIn</tt> placing itself in the shared state map it is possible for the authorization plug-in to make use of it for the loadRoles implementation.            </p>
                <p>
    Another option to consider to achieve similar behaviour could be to provide an Identity implementation that also contains the roles and place this in the shared state map - the <tt class=" ">AuthorizationPlugIn</tt> can retrieve this and return the roles.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ForcingPlainTextAuthentication"  >
        <h5>Forcing Plain Text Authentication</h5>
    
            <p>
    As mentioned earlier in this article if the <tt class=" ">ValidatePasswordCredential</tt> is going to be used then the authentication used at the transport level needs to be forced from Digest authentication to plain text authentication, this can be achieved by adding a mechanism attribute to the plug-in definition within the authentication element i.e.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;authentication&gt;
    &lt;plug-in name=&quot;Sample&quot; mechanism=&quot;PLAIN&quot;&gt;</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-ExampleConfigurations"  >
        <h3>Example Configurations</h3>
    
            <p>
    This section of the document contains a couple of examples for the most common scenarios likely to be used with the security realms, please feel free to raise Jira issues requesting additional scenarios or if you have configured something not covered here please feel free to add your own examples - this document is editable after all     <img src="images/author/images/icons/emoticons/3649551.gif" alt="images/author/images/icons/emoticons/3649551.gif" />
            </p>
                <p>
    At the moment these examples are making use of the '<tt class=" ">ManagementRealm</tt>' however the same can apply to the '<tt class=" ">ApplicationRealm</tt>' or any custom realm you create for yourselves.            </p>
        <div class="section-4"  id="66322684_AdminGuide-LDAPAuthentication"  >
        <h4>LDAP Authentication</h4>
    
            <p>
    The following example demonstrates an example configuration making use of Active Directory to verify the users username and password.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;management&gt;
  &lt;security-realms&gt;
    &lt;security-realm name=&quot;ManagementRealm&quot;&gt;
      &lt;authentication&gt;
        &lt;ldap connection=&quot;EC2&quot; base-dn=&quot;CN=Users,DC=darranl,DC=jboss,DC=org&quot;&gt;
          &lt;username-filter attribute=&quot;sAMAccountName&quot; /&gt;
        &lt;/ldap&gt;
      &lt;/authentication&gt;
    &lt;/security-realm&gt;

  &lt;/security-realms&gt;

  &lt;outbound-connections&gt;
    &lt;ldap name=&quot;EC2&quot; url=&quot;ldap://127.0.0.1:9797&quot; search-dn=&quot;CN=wf8,CN=Users,DC=darranl,DC=jboss,DC=org&quot; search-credential=&quot;password&quot;/&gt;
  &lt;/outbound-connections&gt;

  ...

&lt;/management&gt;</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
        
            <p>
    For simplicity the <tt class=" ">&lt;local/&gt;</tt> configuration has been removed from this example, however there it is fine to leave that in place for local authentication to remain possible.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-EnableSSL"  >
        <h4>Enable SSL</h4>
    
            <p>
    The first step is the creation of the key, by default this is going to be used for both the native management interface and the http management interface - to create the key we can use the <tt class=" ">keyTool</tt>, the following example will create a key valid for one year.            </p>
                <p>
    Open a terminal window in the folder {<tt class=" ">jboss.home}/standalone/configuration</tt> and enter the following command: -            </p>
                <p>
    <tt class=" ">keytool -genkey -alias server -keyalg RSA -keystore server.keystore -validity 365</tt>            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>Enter keystore password:
Re-enter new password:</code></pre>
        </div>
    </div>
            <p>
    In this example I choose '<tt class=" ">keystore_password</tt>'.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>What is your first and last name?
  [Unknown]:  localhost</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
        
            <p>
    Of all of the questions asked this is the most important and should match the host name that will be entered into the web browser to connect to the admin console.            </p>
        </div>
    
            <p>
    Answer the remaining questions as you see fit and at the end for the purpose of this example I set the key password to '<tt class=" ">key_password</tt>'.            </p>
                <p>
    The following example shows how this newly created keystore will be referenced to enable SSL.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ManagementRealm&quot;&gt;
  &lt;server-identities&gt;
    &lt;ssl&gt;
      &lt;keystore path=&quot;server.keystore&quot; relative-to=&quot;jboss.server.config.dir&quot; keystore-password=&quot;keystore_password&quot; alias=&quot;server&quot; key-password=&quot;key_password&quot; /&gt;
    &lt;/ssl&gt;
  &lt;/server-identities&gt;
  &lt;authentication&gt;
    ...
  &lt;/authentication&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    The contents of the <tt class=" ">&lt;authentication /&gt;</tt> have not been changed in this example so authentication still occurs using either the local mechanism or username/password authentication using Digest.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-AddClientCerttoSSL"  >
        <h4>Add Client-Cert to SSL</h4>
    
            <p>
    To enable Client-Cert style authentication we just now need to add a <tt class=" ">&lt;truststore /&gt;</tt> element to the <tt class=" ">&lt;authentication /&gt;</tt> element referencing a trust store that has had the certificates or trusted clients imported.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ManagementRealm&quot;&gt;
  &lt;server-identities&gt;
    &lt;ssl&gt;
      &lt;keystore path=&quot;server.keystore&quot; relative-to=&quot;jboss.server.config.dir&quot; keystore-password=&quot;keystore_password&quot; alias=&quot;server&quot; key-password=&quot;key_password&quot; /&gt;
    &lt;/ssl&gt;
  &lt;/server-identities&gt;
  &lt;authentication&gt;
    &lt;truststore path=&quot;server.truststore&quot; relative-to=&quot;jboss.server.config.dir&quot; keystore-password=&quot;truststore_password&quot; /&gt;
    &lt;local default-user=&quot;$local&quot;/&gt;
    &lt;properties path=&quot;mgmt-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;
  &lt;/authentication&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    In this scenario if Client-Cert authentication does not occur clients can fall back to use either the local mechanism or username/password authentication.  To make Client-Cert based authentication mandatory just remove the <tt class=" ">&lt;local /&gt;</tt> and <tt class=" ">&lt;properties /&gt;</tt> elements.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-JVMsettings"  >
        <h3>JVM settings</h3>
    
            <p>
    Configuration of the JVM settings is different for a managed domain and a standalone server. In a managed domain, the domain controller components are responsible for starting and stoping server processes and hence determine the JVM settings. For a standalone server, it's the responsibility of the process that started the server (e.g. passing them as command line arguments).            </p>
        <div class="section-4"  id="66322684_AdminGuide-ManagedDomain2"  >
        <h4>Managed Domain</h4>
    
            <p>
    In a managed domain the JVM settings can be declared at different scopes: For a specific server group, for a host or for a particular server. If not declared, the settings are inherited from the parent scope. This allows you to customize or extend the JVM settings within every layer.            </p>
                <p>
    Let's take a look at the JVM declaration for a server group:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;server-groups&gt;
       &lt;server-group name=&quot;main-server-group&quot; profile=&quot;default&quot;&gt;
           &lt;jvm name=&quot;default&quot;&gt;
               &lt;heap size=&quot;64m&quot; max-size=&quot;512m&quot;/&gt;
           &lt;/jvm&gt;
           &lt;socket-binding-group ref=&quot;standard-sockets&quot;/&gt;
       &lt;/server-group&gt;
       &lt;server-group name=&quot;other-server-group&quot; profile=&quot;default&quot;&gt;
           &lt;jvm name=&quot;default&quot;&gt;
               &lt;heap size=&quot;64m&quot; max-size=&quot;512m&quot;/&gt;
           &lt;/jvm&gt;
           &lt;socket-binding-group ref=&quot;standard-sockets&quot;/&gt;
       &lt;/server-group&gt;
&lt;/server-groups&gt;
</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See</sub> <tt class=" ">domain/configuration/domain.xml</tt><sub class=" ">)</sub>            </p>
                <p>
    In this example the server group &quot;main-server-group&quot; declares a heap size of <tt class=" ">64m</tt> and a maximum heap size of <tt class=" ">512m</tt>. Any server that belongs to this group will inherit these settings. You can change these settings for the group as a whole, or a specific server or host:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;servers&gt;
       &lt;server name=&quot;server-one&quot; group=&quot;main-server-group&quot; auto-start=&quot;true&quot;&gt;
           &lt;jvm name=&quot;default&quot;/&gt;
       &lt;/server&gt;
       &lt;server name=&quot;server-two&quot; group=&quot;main-server-group&quot; auto-start=&quot;true&quot;&gt;
           &lt;jvm name=&quot;default&quot;&gt;
               &lt;heap size=&quot;64m&quot; max-size=&quot;256m&quot;/&gt;
           &lt;/jvm&gt;
           &lt;socket-binding-group ref=&quot;standard-sockets&quot; port-offset=&quot;150&quot;/&gt;
       &lt;/server&gt;
       &lt;server name=&quot;server-three&quot; group=&quot;other-server-group&quot; auto-start=&quot;false&quot;&gt;
           &lt;socket-binding-group ref=&quot;standard-sockets&quot; port-offset=&quot;250&quot;/&gt;
       &lt;/server&gt;
&lt;/servers&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/host.xml)</sub>            </p>
                <p>
    In this case, <i class=" ">server-two</i>, belongs to the <i class=" ">main-server-group</i> and inherits the JVM settings named <i class=" ">default</i>, but declares a lower maximum heap size.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=local/server-config=server-two/jvm=default:read-resource
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; {
       &quot;heap-size&quot; =&gt; &quot;64m&quot;,
       &quot;max-heap-size&quot; =&gt; &quot;256m&quot;,
   }
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-StandaloneServer2"  >
        <h4>Standalone Server</h4>
    
            <p>
    For a standalone sever you have to pass in the JVM settings either as command line arguments when executing the <tt class=" ">$JBOSS_HOME/bin/standalone.sh</tt> script, or by declaring them in <tt class=" ">$JBOSS_HOME/bin/standalone.conf</tt>. (For Windows users, the script to execute is <tt class=" ">%JBOSS_HOME%/bin/standalone.bat</tt> while the JVM settings can be declared in <tt class=" ">%JBOSS_HOME%/bin/standalone.conf.bat.)</tt>            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Commandlineparameters"  >
        <h3>Command line parameters</h3>
    
            <p>
    To start up a WildFly 8 managed domain, execute the <tt class=" ">$JBOSS_HOME/bin/domain.sh</tt> script. To start up a standalone server, execute the&nbsp;<tt class=" ">$JBOSS_HOME/bin/standalone.sh</tt>. With no arguments, the default configuration is used. You can override the default configuration by providing arguments on the command line, or in your calling script.            </p>
        <div class="section-4"  id="66322684_AdminGuide-Systemproperties"  >
        <h4>System properties</h4>
    
            <p>
    The standalone and the managed domain modes each use a default configuration which expects various files and writable directories to exist in standard locations. Each of these standard locations is associated with a system property, which has a default value. To override a system property, pass its new value using the standard jvm <tt class=" ">-Dkey=value</tt> options:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -Djboss.home.dir=some/location/WildFly/jboss-as \
    -Djboss.server.config.dir=some/location/WildFly/jboss-as/custom-standalone</code></pre>
        </div>
    </div>
            <p>
    This command starts up a standalone server instance using a non-standard AS home directory and a custom configuration directory. For specific information about system properties, refer to the definitions below.            </p>
                <p>
    Instead of passing the parameters directly, you can put them into a properties file, and pass the properties file to the script, as in the two examples below.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/domain.sh --properties=/some/location/jboss.properties
$JBOSS_HOME/bin/domain.sh -P=/some/location/jboss.properties</code></pre>
        </div>
    </div>
            <p>
    The syntax for passing in parameters and properties files is the same regardless of whether you are running the <tt class=" ">domain.sh</tt>, <tt class=" ">standalone.sh</tt>, or the Microsoft Windows scripts<tt class=" ">domain.bat</tt> or <tt class=" ">standalone.bat</tt>.            </p>
                <p>
    The properties file is a standard Java property file containing <tt class=" ">key=value</tt> pairs:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>jboss.home.dir=/some/location/WildFly/jboss-as
jboss.domain.config.dir=/some/location/WildFly/custom-domain</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-standalonesystemproperties"><a name="66322684_AdminGuide-standalonesystemproperties"></a></span>
            </p>
        <div class="section-5"  id="66322684_AdminGuide-Standalone"  >
        <h5>Standalone</h5>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Property name            </td>
                <td rowspan="1" colspan="1">
    Usage            </td>
                <td rowspan="1" colspan="1">
    Default value            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">java.ext.dirs</tt>            </td>
                <td rowspan="1" colspan="1">
    The JDK extension directory paths            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">null</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.home.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The root directory of the WildFly 8 installation.            </td>
                <td rowspan="1" colspan="1">
    Set by <tt class=" ">standalone.sh</tt> to <tt class=" ">$JBOSS_HOME</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The base directory for server content.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.home.dir</tt>/standalone            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.config.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The base configuration directory.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>/configuration            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.data.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used for persistent data file storage.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>/data            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.log.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory containing the <tt class=" ">server.log</tt> file.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>/log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.temp.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used for temporary file storage.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>/tmp            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.deploy.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used to store deployed content            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.data.dir</tt>/content            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
        <span id="66322684_AdminGuide-domainsystemproperties"><a name="66322684_AdminGuide-domainsystemproperties"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ManagedDomain3"  >
        <h5>Managed Domain</h5>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Property name            </td>
                <td rowspan="1" colspan="1">
    Usage            </td>
                <td rowspan="1" colspan="1">
    Default value            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.home.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The root directory of the WildFly installation.            </td>
                <td rowspan="1" colspan="1">
    Set by <tt class=" ">domain.sh</tt> to <tt class=" ">$JBOSS_HOME</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The base directory for domain content.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.home.dir</tt>/domain            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.config.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The base configuration directory            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/configuration            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.data.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used for persistent data file storage.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/data            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.log.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory containing the <tt class=" ">host-controller.log</tt> and <tt class=" ">process-controller.log</tt> files            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.temp.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used for temporary file storage            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/tmp            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.deployment.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used to store deployed content            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/content            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.servers.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory containing the output for the managed server instances            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/servers            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
        <span id="66322684_AdminGuide-parameters"><a name="66322684_AdminGuide-parameters"></a></span>
            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Othercommandlineparameters"  >
        <h4>Other command line parameters</h4>
    
            <p>
    The first acceptable format for command line arguments to the WildFly launch scripts is            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>--name=value</code></pre>
        </div>
    </div>
            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh --server-config=standalone-ha.xml</code></pre>
        </div>
    </div>
            <p>
    If the parameter name is a single character, it is prefixed by a single '-' instead of two. Some parameters have both a long and short option.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>-x=value</code></pre>
        </div>
    </div>
            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -P=/some/location/jboss.properties</code></pre>
        </div>
    </div>
            <p>
    For some command line arguments frequently used in previous major releases of WildFly, replacing the &quot;=&quot; in the above examples with a space is supported, for compatibility.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>-b 192.168.100.10</code></pre>
        </div>
    </div>
            <p>
    If possible, use the <tt class=" ">-x=value</tt> syntax. New parameters will always support this syntax.            </p>
                <p>
    The sections below describe the command line parameter names that are available in standalone and domain mode.            </p>
        <div class="section-5"  id="66322684_AdminGuide-Standalone2"  >
        <h5>Standalone</h5>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Default if absent            </td>
                <td rowspan="1" colspan="1">
    Value            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--server-config</tt><br/><tt class=" ">-c</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.config.dir</tt>/standalone.xml            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.server.config.dir</tt>.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--read-only-server-config</tt>            </td>
                <td rowspan="1" colspan="1">
    -            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.server.config.dir</tt>. This is similar to <tt class=" ">--server-config</tt> but it does not overwrite the file used when the management model is changed. However a full versioned history is maintained of the file.            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ManagedDomain4"  >
        <h5>Managed Domain</h5>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Default if absent            </td>
                <td rowspan="1" colspan="1">
    Value            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--domain-config</tt><br/><tt class=" ">-c</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.config.dir</tt>/domain.xml            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.domain.config.dir</tt>.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--read-only-domain-config</tt>            </td>
                <td rowspan="1" colspan="1">
    -            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.domain.config.dir</tt>. This is similar to <tt class=" ">--domain-config</tt> but it does not overwrite the file used when the management model is changed. However a full versioned history is maintained of the file.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--host-config</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.config.dir</tt>/host.xml            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.domain.config.dir</tt>.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--read-only-host-config</tt>            </td>
                <td rowspan="1" colspan="1">
    -            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.domain.config.dir</tt>. This is similar to <tt class=" ">--host-config</tt> but it does not overwrite the file used when the management model is changed. However a full versioned history is maintained of the file.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    The following parameters take no value and are only usable on slave host controllers (i.e. hosts configured to connect to a <tt class=" ">remote</tt> domain controller.)            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name &nbsp; &nbsp;            </td>
                <td rowspan="1" colspan="1">
    Function            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--backup</tt>            </td>
                <td rowspan="1" colspan="1">
    Causes the slave host controller to create and maintain a local copy of the domain configuration file            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--cached-dc</tt>            </td>
                <td rowspan="1" colspan="1">
    If the slave host controller is unable to contact the master domain controller to get its configuration at boot, boot from a local copy previously created using <tt class=" ">--backup</tt>. The slave host controller will not be able make any modifications to the domain configuration, but it will be able to launch servers.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
        <span id="66322684_AdminGuide-commonparameters"><a name="66322684_AdminGuide-commonparameters"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Commonparameters"  >
        <h5>Common parameters</h5>
    
            <p>
    These parameters apply in both standalone or managed domain mode:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Function            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">-b=&lt;value&gt;</tt>            </td>
                <td rowspan="1" colspan="1">
    Sets system property <tt class=" ">jboss.bind.address</tt> to &lt;value&gt;. See <a href="66322684.html#66322684_AdminGuide-bindaddress">Controlling the Bind Address with -b</a> for further details.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">-b&lt;name&gt;=&lt;value&gt;</tt>            </td>
                <td rowspan="1" colspan="1">
    Sets system property <tt class=" ">jboss.bind.address.&lt;name&gt;</tt> to &lt;value&gt; where <i class=" ">name</i> can vary. See <a href="66322684.html#66322684_AdminGuide-bindaddress">Controlling the Bind Address with -b</a> for further details.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">-u=&lt;value&gt;</tt>            </td>
                <td rowspan="1" colspan="1">
    Sets system property <tt class=" ">jboss.default.multicast.address</tt> to &lt;value&gt;. See <a href="66322684.html#66322684_AdminGuide-defaultmulticastaddress">Controlling the Default Multicast Address with -u</a> for further details.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--version</tt><br/><tt class=" ">-v</tt><br/><tt class=" ">-V</tt>            </td>
                <td rowspan="1" colspan="1">
    Prints the version of WildFly to standard output and exits the JVM.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--help</tt><br/><tt class=" ">-h</tt>            </td>
                <td rowspan="1" colspan="1">
    Prints a help message explaining the options and exits the JVM.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
        <span id="66322684_AdminGuide-bindaddress"><a name="66322684_AdminGuide-bindaddress"></a></span>
            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ControllingtheBindAddresswith%5Cb"  >
        <h4>Controlling the Bind Address with -b</h4>
    
            <p>
    WildFly&nbsp;binds sockets to the IP addresses and interfaces contained in the <tt class=" ">&lt;interfaces&gt;</tt> elements in <tt class=" ">standalone.xml</tt>, <tt class=" ">domain.xml</tt> and <tt class=" ">host.xml</tt>. (See <a href="66322692.html#66322692_Generalconfigurationconcepts-interfaces">Interfaces</a> and <a href="66322692.html#66322692_Generalconfigurationconcepts-socketbindings">Socket Bindings</a> for further information on these elements.) The standard configurations that ship with WildFly includes two interface configurations:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
    &lt;interface name=&quot;management&quot;&gt;
        &lt;inet-address value=&quot;${jboss.bind.address.management:127.0.0.1}&quot;/&gt;
    &lt;/interface&gt;
    &lt;interface name=&quot;public&quot;&gt;
       &lt;inet-address value=&quot;${jboss.bind.address:127.0.0.1}&quot;/&gt;
    &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    Those configurations use the values of system properties <tt class=" ">jboss.bind.address.management</tt> and <tt class=" ">jboss.bind.address</tt> if they are set. If they are not set, 127.0.0.1 is used for each value.            </p>
                <p>
    As noted in <a href="66322684.html#66322684_AdminGuide-commonparameters">Common Parameters</a>, the AS supports the <tt class=" ">-b</tt> and <tt class=" ">-b&lt;name&gt;</tt> command line switches. The only function of these switches is to set system properties <tt class=" ">jboss.bind.address</tt> and <tt class=" ">jboss.bind.address.&lt;name&gt;</tt> respectively. However, because of the way the standard WildFly configuration files are set up, using the <tt class=" ">-b</tt> switches can indirectly control how the AS binds sockets.            </p>
                <p>
    <i class=" ">If your interface configurations match those shown above</i>, using this as your launch command causes all sockets associated with interface named &quot;public&quot; &nbsp;to be bound to <tt class=" ">192.168.100.10</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -b=192.168.100.10</code></pre>
        </div>
    </div>
            <p>
    In the standard config files, public interfaces are those not associated with server management. Public interfaces handle normal end-user requests.            </p>
        <div class="confbox admonition admonition-info">
            <div class="title">Interface names</div>
        
            <p>
    The interface named &quot;public&quot; is not inherently special. It is provided as a convenience. You can name your interfaces to suit your environment.            </p>
        </div>
    
            <p>
    To bind the public interfaces to all IPv4 addresses (the IPv4 wildcard address), use the following syntax:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -b=0.0.0.0</code></pre>
        </div>
    </div>
            <p>
    You can also bind the management interfaces, as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -bmanagement=192.168.100.10</code></pre>
        </div>
    </div>
            <p>
    In the standard config files, management interfaces are those sockets associated with server management, such as the socket used by the CLI, the HTTP socket used by the admin console, and the JMX connector socket.            </p>
        <div class="confbox admonition admonition-note">
            <div class="title">Be Careful</div>
        
            <p>
    The <tt class=" ">-b</tt> switch only controls the interface bindings because the standard config files that ship with WildFly sets things up that way. If you change the <tt class=" ">&lt;interfaces&gt;</tt> section in your configuration to ignore the system properties controlled by <tt class=" ">-b</tt>, then setting <tt class=" ">-b</tt> in your launch command will have no effect.            </p>
                <p>
    For example, this perfectly valid setting for the &quot;public&quot; interface causes &nbsp;<tt class=" ">-b</tt> to have no effect on the &quot;public&quot; interface:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interface name=&quot;public&quot;&gt;
   &lt;nic name=&quot;eth0&quot;/&gt;
&lt;/interface&gt;</code></pre>
        </div>
    </div>
            <p>
    The key point is <strong class=" ">the contents of the configuration files determine the configuration. Settings like</strong> <tt class=" ">-b</tt> <strong class=" ">are not overrides of the configuration files.</strong>&nbsp;They only provide a shorter syntax for setting a system properties that may or may not be referenced in the configuration files. They are provided as a convenience, and you can choose to modify your configuration to ignore them.            </p>
        </div>
    
            <p>
        <span id="66322684_AdminGuide-defaultmulticastaddress"><a name="66322684_AdminGuide-defaultmulticastaddress"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ControllingtheDefaultMulticastAddresswith%5Cu"  >
        <h4>Controlling the Default Multicast Address with -u</h4>
    
            <p>
    WildFly 8 may use multicast communication for some services, particularly those involving high availability clustering. The multicast addresses and ports used are configured using the <tt class=" ">socket-binding</tt> elements in <tt class=" ">standalone.xml</tt> and <tt class=" ">domain.xml</tt>. (See <a href="66322692.html#66322692_Generalconfigurationconcepts-socketbindings">Socket Bindings</a> for further information on these elements.) The standard HA configurations that ship with WildFly include two socket binding configurations that use a default multicast address:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;socket-binding name=&quot;jgroups-mping&quot; port=&quot;0&quot; multicast-address=&quot;${jboss.default.multicast.address:230.0.0.4}&quot; multicast-port=&quot;45700&quot;/&gt;
&lt;socket-binding name=&quot;jgroups-udp&quot; port=&quot;55200&quot; multicast-address=&quot;${jboss.default.multicast.address:230.0.0.4}&quot; multicast-port=&quot;45688&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    Those configurations use the values of system property <tt class=" ">jboss.default.multicast.address</tt> if it is set. If it is not set, 230.0.0.4 is used for each value. (The configuration may include other socket bindings for multicast-based services that are not meant to use the default multicast address; e.g. a binding the mod-cluster services use to communicate on a separate address/port with Apache httpd servers.)            </p>
                <p>
    As noted in <a href="66322684.html#66322684_AdminGuide-commonparameters">Common Parameters</a>, the AS supports the <tt class=" ">-u</tt> command line switch. The only function of this switch is to set system property <tt class=" ">jboss.default.multicast.address</tt>. However, because of the way the standard AS configuration files are set up, using the <tt class=" ">-u</tt> switches can indirectly control how the AS uses multicast.            </p>
                <p>
    <i class=" ">If your socket binding configurations match those shown above</i>, using this as your launch command causes the service using those sockets configurations to be communicate over multicast address <tt class=" ">230.0.1.2</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -u=230.0.1.2</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
            <div class="title">Be Careful</div>
        
            <p>
    As with the <tt class=" ">-b</tt> switch, the <tt class=" ">-u</tt> switch only controls the multicast address used because the standard config files that ship with WildFly 8&nbsp;sets things up that way. If you change the <tt class=" ">&lt;socket-binding&gt;</tt> sections in your configuration to ignore the system properties controlled by <tt class=" ">-u</tt>, then setting <tt class=" ">-u</tt> in your launch command will have no effect.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Auditlogging"  >
        <h3>Audit logging</h3>
    
            <p>
    WildFly comes with audit logging built in for management operations affecting the management model. By default it is turned off. The information is output as JSON records.            </p>
                <p>
    The default configuration of audit logging in standalone.xml looks as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>    &lt;management&gt;
        &lt;security-realms&gt;
...
        &lt;/security-realms&gt;
        &lt;audit-log&gt;
            &lt;formatters&gt;
                &lt;json-formatter name=&quot;json-formatter&quot;/&gt;
            &lt;/formatters&gt;
            &lt;handlers&gt;
                &lt;file-handler name=&quot;file&quot; formatter=&quot;json-formatter&quot; path=&quot;audit-log.log&quot; relative-to=&quot;jboss.server.data.dir&quot;/&gt;
            &lt;/handlers&gt;
            &lt;logger log-boot=&quot;true&quot; log-read-only=&quot;true&quot; enabled=&quot;false&quot;&gt;
                &lt;handlers&gt;
                    &lt;handler name=&quot;file&quot;/&gt;
                &lt;/handlers&gt;
            &lt;/logger&gt;
        &lt;/audit-log&gt;
...</code></pre>
        </div>
    </div>
            <p>
    Looking at this via the CLI it looks like            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /core-service=management/access=audit:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;file-handler&quot; =&gt; {&quot;file&quot; =&gt; {
            &quot;formatter&quot; =&gt; &quot;json-formatter&quot;,
            &quot;max-failure-count&quot; =&gt; 10,
            &quot;path&quot; =&gt; &quot;audit-log.log&quot;,
            &quot;relative-to&quot; =&gt; &quot;jboss.server.data.dir&quot;
        }},
        &quot;json-formatter&quot; =&gt; {&quot;json-formatter&quot; =&gt; {
            &quot;compact&quot; =&gt; false,
            &quot;date-format&quot; =&gt; &quot;yyyy-MM-dd HH:mm:ss&quot;,
            &quot;date-separator&quot; =&gt; &quot; - &quot;,
            &quot;escape-control-characters&quot; =&gt; false,
            &quot;escape-new-line&quot; =&gt; false,
            &quot;include-date&quot; =&gt; true
        }},
        &quot;logger&quot; =&gt; {&quot;audit-log&quot; =&gt; {
            &quot;enabled&quot; =&gt; false,
            &quot;log-boot&quot; =&gt; true,
            &quot;log-read-only&quot; =&gt; false,
            &quot;handler&quot; =&gt; {&quot;file&quot; =&gt; {}}
        }},
        &quot;syslog-handler&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
        
            <p>
    The audit logging subsystem has a lot of internal dependencies, and it logs operations changing, enabling and disabling its components. When configuring or changing things at runtime it is a good idea to make these changes as part of a CLI batch. For example if you are adding a syslog handler you need to add the handler and its information as one step. Similarly if you are using a file handler, and want to change its <tt class=" ">path</tt> and <tt class=" ">relative-to</tt> attributes, that needs to happen as one step.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-JSONFormatter"  >
        <h4>JSON Formatter</h4>
    
            <p>
    The first thing that needs configuring is the formatter, we currently support outputting log records as JSON. You can define several formatters, for use with different handlers. A log record has the following format, and it is the formatter's job to format the data presented:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>2013-08-12 11:01:12 - {
    &quot;type&quot; : &quot;core&quot;,
    &quot;r/o&quot; : false,
    &quot;booting&quot; : false,
    &quot;version&quot; : &quot;8.0.0.Alpha4&quot;,
    &quot;user&quot; : &quot;$local&quot;,
    &quot;domainUUID&quot; : null,
    &quot;access&quot; : &quot;NATIVE&quot;,
    &quot;remote-address&quot; : &quot;127.0.0.1/127.0.0.1&quot;,
    &quot;success&quot; : true,
    &quot;ops&quot; : [JMX|WFLY8:JMX subsystem configuration],
        &quot;operation&quot; : &quot;write-attribute&quot;,
        &quot;name&quot; : &quot;enabled&quot;,
        &quot;value&quot; : true,
        &quot;operation-headers&quot; : {&quot;caller-type&quot; : &quot;user&quot;}
    }]
}</code></pre>
        </div>
    </div>
            <p>
    It includes an optional timestamp and then the following information in the json record            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Field name            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">type</tt>            </td>
                <td rowspan="1" colspan="1">
    This can have the values <tt class=" ">core</tt>, meaning it is a management operation, or <tt class=" ">jmx</tt> meaning it comes from the jmx subsystem (see the jmx subsystem for configuration of the jmx subsystem's audit logging)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">r/o</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation does not change the management model, <tt class=" ">false</tt> otherwise            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">booting</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation was executed during the bootup process, <tt class=" ">false</tt> if it was executed once the server is up and running            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">version</tt>            </td>
                <td rowspan="1" colspan="1">
    The version number of the WildFly instance            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">user</tt>            </td>
                <td rowspan="1" colspan="1">
    The username of the authenticated user. In this case the operation has been logged via the CLI on the same machine as the running server, so the special <tt class=" ">$local</tt> user is used            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">domainUUID</tt>            </td>
                <td rowspan="1" colspan="1">
    An ID to link together all operations as they are propagated from the Doman Controller to it servers, slave Host Controllers, and slave Host Controller servers            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">access</tt>            </td>
                <td rowspan="1" colspan="1">
    This can have one of the following values:<br/>*<tt class=" ">NATIVE</tt> - The operation came in through the native management interface, for example the CLI<br/>*<tt class=" ">HTTP</tt> - The operation came in through the domain HTTP interface, for example the admin console<br/>*<tt class=" ">JMX</tt> - The operation came in through the JMX subsystem. See <a href="66322718.html">JMX</a> for how to configure audit logging for JMX.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">remote-address</tt>            </td>
                <td rowspan="1" colspan="1">
    The address of the client executing this operation            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">success</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation succeeded, <tt class=" ">false</tt> if it was rolled back            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">ops</tt>            </td>
                <td rowspan="1" colspan="1">
    The operations being executed. This is a list of the operations serialized to JSON. At boot this will be all the operations resulting from parsing the xml. Once booted the list will typically just contain a single entry            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    The json formatter resource has the following attributes:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">include-date</tt>            </td>
                <td rowspan="1" colspan="1">
    Boolan toggling whether or not to include the timestamp in the formatted log records            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">date-separator</tt>            </td>
                <td rowspan="1" colspan="1">
    A string containing characters to separate the date and the rest of the formatted log message. Will be ignored if <tt class=" ">include-date=false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">date-format</tt>            </td>
                <td rowspan="1" colspan="1">
    The date format to use for the timestamp as understood by <tt class=" ">java.text.SimpleDateFormat</tt>. Will be ignored if <tt class=" ">include-date=false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">compact</tt>            </td>
                <td rowspan="1" colspan="1">
    If true will format the JSON on one line. There may still be values containing new lines, so if having the whole record on one line is important, set escape-new-line or escape-control-characters to true            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">escape-control-characters</tt>            </td>
                <td rowspan="1" colspan="1">
    If <tt class=" ">true</tt> it will escape all control characters (ascii entries with a decimal value &lt; 32) with the ascii code in octal, e.g. a new line becomes '#012'. If this is <tt class=" ">true</tt>, it will override <tt class=" ">escape-new-line=false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">escape-new-line</tt>            </td>
                <td rowspan="1" colspan="1">
    If <tt class=" ">true</tt> it will escape all new lines with the ascii code in octal, e.g. &quot;#012&quot;.            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Handlers"  >
        <h4>Handlers</h4>
    
            <p>
    A handler is responsible for taking the formatted data and logging it to a location. There are currently two types of handlers, File and Syslog. You can configure several of each type of handler and use them to log information.            </p>
        <div class="section-5"  id="66322684_AdminGuide-Filehandler"  >
        <h5>File handler</h5>
    
            <p>
    The file handlers log the audit log records to a file on the server. The attributes for the file handler are            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
                <td rowspan="1" colspan="1">
    Read Only            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">formatter</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of a JSON formatter to use to format the log records            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">path</tt>            </td>
                <td rowspan="1" colspan="1">
    The path of the audit log file            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">relative-to</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of another previously named path, or of one of the standard paths provided by the system. If <tt class=" ">relative-to</tt> is provided, the value of the <tt class=" ">path</tt> attribute is treated as relative to the path specified by this attribute            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">failure-count</tt>            </td>
                <td rowspan="1" colspan="1">
    The number of logging failures since the handler was initialized            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">max-failure-count</tt>            </td>
                <td rowspan="1" colspan="1">
    The maximum number of logging failures before disabling this handler            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">disabled-due-to-failure</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if this handler was disabled due to logging failures            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt>            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    In our standard configuration <tt class=" ">path=audit-log.log</tt> and <tt class=" ">relative-to=jboss.server.data.dir</tt>, typically this will be <tt class=" ">$JBOSS_HOME/standalone/data/audit-log.log</tt>            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Sysloghandler"  >
        <h5>Syslog handler</h5>
    
            <p>
    The default configuration does not have syslog audit logging set up. Syslog is a better choice for audit logging since you can log to a remote syslog server, and secure the authentication to happen over TLS with client certificate authentication. Syslog servers vary a lot in their capabilities so not all settings in this section apply to all syslog servers. We have tested with <a href="http://www.rsyslog.com">rsyslog</a>.            </p>
                <p>
    The address for the syslog handler is <tt class=" ">/core-service=management/access=audit/syslog-handler=*</tt> and just like file handlers you can add as many syslog entries as you like. The syslog handler resources reference the main RFC's for syslog a fair bit, for reference they can be found at:<br/>*<a href="http://www.ietf.org/rfc/rfc3164.txt">http://www.ietf.org/rfc/rfc3164.txt</a><br/>*<a href="http://www.ietf.org/rfc/rfc5424.txt">http://www.ietf.org/rfc/rfc5424.txt</a><br/>*<a href="http://www.ietf.org/rfc/rfc6587.txt">http://www.ietf.org/rfc/rfc6587.txt</a>            </p>
                <p>
    The syslog handler resource has the following attributes:            </p>
        <div class="tablewrap">
        <table>
<thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">formatter</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of a JSON formatter to use to format the log records            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">failure-count</tt>            </td>
                <td rowspan="1" colspan="1">
    The number of logging failures since the handler was initialized            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">max-failure-count</tt>            </td>
                <td rowspan="1" colspan="1">
    The maximum number of logging failures before disabling this handler            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">disabled-due-to-failure</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if this handler was disabled due to logging failures            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">syslog-format</tt>            </td>
                <td rowspan="1" colspan="1">
    Whether to set the syslog format to the one specified in RFC-5424 or RFC-3164            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">max-length</tt>            </td>
                <td rowspan="1" colspan="1">
    The maximum length in bytes a log message, including the header, is allowed to be. If undefined, it will default to 1024 bytes if the syslog-format is RFC3164, or 2048 bytes if the syslog-format is RFC5424.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">truncate</tt>            </td>
                <td rowspan="1" colspan="1">
    Whether or not a message, including the header, should truncate the message if the length in bytes is greater than the maximum length. If set to false messages will be split and sent with the same header values            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    When adding a syslog handler you also need to add the protocol it will use to communicate with the syslog server. The valid choices for protocol are <tt class=" ">UDP</tt>,<tt class=" ">TCP</tt> and <tt class=" ">TLS</tt>. The protocol must be added at the same time as you add the syslog handler, or it will fail. Also, you can only add one protocol for the handler.            </p>
        <div class="section-6"  id="66322684_AdminGuide-UDP"  >
        <h6>UDP</h6>
    
            <p>
    Configures the handler to use UDP to communicate with the syslog server. The address of the <tt class=" ">UDP</tt> resource is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=udp</tt>. The attributes of the <tt class=" ">UDP</tt> resource are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">host</tt>            </td>
                <td rowspan="1" colspan="1">
    The host of the syslog server for the udp requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">port</tt>            </td>
                <td rowspan="1" colspan="1">
    The port of the syslog server listening for the udp requests            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-TCP"  >
        <h6>TCP</h6>
    
            <p>
    Configures the handler to use TCP to communicate with the syslog server. The address of the <tt class=" ">TCP</tt> resource is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=tcp</tt>. The attributes of the <tt class=" ">TCP</tt> resource are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">host</tt>            </td>
                <td rowspan="1" colspan="1">
    The host of the syslog server for the tcp requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">port</tt>            </td>
                <td rowspan="1" colspan="1">
    The port of the syslog server listening for the tcp requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">message-transfer</tt>            </td>
                <td rowspan="1" colspan="1">
    The message transfer setting as described in section 3.4 of RFC-6587. This can either be OCTET_COUNTING as described in section 3.4.1 of RFC-6587, or NON_TRANSPARENT_FRAMING as described in section 3.4.1 of RFC-6587            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-TLS"  >
        <h6>TLS</h6>
    
            <p>
    Configures the handler to use TLC to communicate securely with the syslog server. The address of the <tt class=" ">TLS</tt> resource is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=tls</tt>. The attributes of the <tt class=" ">TLS</tt> resource are the same as for <tt class=" ">TCP</tt>:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">host</tt>            </td>
                <td rowspan="1" colspan="1">
    The host of the syslog server for the tls requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">port</tt>            </td>
                <td rowspan="1" colspan="1">
    The port of the syslog server listening for the tls requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">message-transfer</tt>            </td>
                <td rowspan="1" colspan="1">
    The message transfer setting as described in section 3.4 of RFC-6587. This can either be OCTET_COUNTING as described in section 3.4.1 of RFC-6587, or NON_TRANSPARENT_FRAMING as described in section 3.4.1 of RFC-6587            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    If the syslog server's TLS certificate is not signed by a certificate signing authority, you will need to set up a truststore to trust the certificate. The resource for the trust store is a child of the <tt class=" ">TLS</tt> resource, and the full address is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=tls/authentication=truststore</tt>. The attributes of the truststore resource are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-password</tt>            </td>
                <td rowspan="1" colspan="1">
    The password for the truststore            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-path</tt>            </td>
                <td rowspan="1" colspan="1">
    The path of the truststore            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-relative-to</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of another previously named path, or of one of the standard paths provided by the system. If <tt class=" ">keystore-relative-to</tt> is provided, the value of the <tt class=" ">keystore-path</tt> attribute is treated as relative to the path specified by this attribute            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="section-7"  id="66322684_AdminGuide-TLSwithClientcertificateauthentication."  >
        <h7>TLS with Client certificate authentication.</h7>
    
            <p>
    If you have set up the syslog server to require client certificate authentication, when creating your handler you will also need to set up a client certificate store containing the certificate to be presented to the syslog server. The address of the client certificate store resource is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=tls/authentication=client-certificate-store</tt> and its attributes are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-password</tt>            </td>
                <td rowspan="1" colspan="1">
    The password for the keystore            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">key-password</tt>            </td>
                <td rowspan="1" colspan="1">
    The password for the keystore key            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-path</tt>            </td>
                <td rowspan="1" colspan="1">
    The path of the keystore            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-relative-to</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of another previously named path, or of one of the standard paths provided by the system. If <tt class=" ">keystore-relative-to</tt> is provided, the value of the <tt class=" ">keystore-path</tt> attribute is treated as relative to the path specified by this attribute            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Loggerconfiguration"  >
        <h4>Logger configuration</h4>
    
            <p>
    The final part that needs configuring is the logger for the management operations. This references one or more handlers and is configured at <tt class=" ">/core-service=management/access=audit/logger=audit-log</tt>. The attributes for this resource are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">enabled</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> to enable logging of the management operations            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">log-boot</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> to log the management operations when booting the server, <tt class=" ">false</tt> otherwise            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">log-read-only</tt>            </td>
                <td rowspan="1" colspan="1">
    If <tt class=" ">true</tt> all operations will be audit logged, if <tt class=" ">false</tt> only operations that change the model will be logged            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    Then which handlers are used to log the management operations are configured as <tt class=" ">handler=*</tt> children of the logger.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-DomainMode%28hostspecificconfiguration%29"  >
        <h4>Domain Mode (host specific configuration)</h4>
    
            <p>
    In domain mode audit logging is configured for each host in its <tt class=" ">host.xml</tt> file. This means that when connecting to the DC, the configuration of the audit logging is under the host's entry, e.g. here is the default configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9990 /] /host=master/core-service=management/access=audit:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;file-handler&quot; =&gt; {
            &quot;host-file&quot; =&gt; {
                &quot;formatter&quot; =&gt; &quot;json-formatter&quot;,
                &quot;max-failure-count&quot; =&gt; 10,
                &quot;path&quot; =&gt; &quot;audit-log.log&quot;,
                &quot;relative-to&quot; =&gt; &quot;jboss.domain.data.dir&quot;
            },
            &quot;server-file&quot; =&gt; {
                &quot;formatter&quot; =&gt; &quot;json-formatter&quot;,
                &quot;max-failure-count&quot; =&gt; 10,
                &quot;path&quot; =&gt; &quot;audit-log.log&quot;,
                &quot;relative-to&quot; =&gt; &quot;jboss.server.data.dir&quot;
            }
        },
        &quot;json-formatter&quot; =&gt; {&quot;json-formatter&quot; =&gt; {
            &quot;compact&quot; =&gt; false,
            &quot;date-format&quot; =&gt; &quot;yyyy-MM-dd HH:mm:ss&quot;,
            &quot;date-separator&quot; =&gt; &quot; - &quot;,
            &quot;escape-control-characters&quot; =&gt; false,
            &quot;escape-new-line&quot; =&gt; false,
            &quot;include-date&quot; =&gt; true
        }},
        &quot;logger&quot; =&gt; {&quot;audit-log&quot; =&gt; {
            &quot;enabled&quot; =&gt; false,
            &quot;log-boot&quot; =&gt; true,
            &quot;log-read-only&quot; =&gt; false,
            &quot;handler&quot; =&gt; {&quot;host-file&quot; =&gt; {}}
        }},
        &quot;server-logger&quot; =&gt; {&quot;audit-log&quot; =&gt; {
            &quot;enabled&quot; =&gt; false,
            &quot;log-boot&quot; =&gt; true,
            &quot;log-read-only&quot; =&gt; false,
            &quot;handler&quot; =&gt; {&quot;server-file&quot; =&gt; {}}
        }},
        &quot;syslog-handler&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
            <p>
    We now have two file handlers, one called <tt class=" ">host-file</tt> used to configure the file to log management operations on the host, and one called <tt class=" ">server-file</tt> used to log management operations executed on the servers. Then <tt class=" ">logger=audit-log</tt> is used to configure the logger for the host controller, referencing the <tt class=" ">host-file</tt> handler. <tt class=" ">server-logger=audit-log</tt> is used to configure the logger for the managed servers, referencing the <tt class=" ">server-file</tt> handler. The attributes for <tt class=" ">server-logger=audit-log</tt> are the same as for <tt class=" ">server-logger=audit-log</tt> in the previous section. Having the host controller and server loggers configured independently means we can control audit logging for managed servers and the host controller independently.&nbsp;            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Subsystemconfiguration"  >
        <h3>Subsystem configuration</h3>
    
            <p>
    The following chapters will focus on the high level management use cases that are available through the CLI and the web interface. For a detailed description of each subsystem configuration property, please consult the respective component reference.            </p>
        <div class="confbox admonition admonition-tip">
            <div class="title">Schema Location</div>
        
            <p>
    The configuration schemas can found in <tt class=" ">$JBOSS_HOME/docs/schema</tt>.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-EESubsystemConfiguration"  >
        <h4>EE Subsystem Configuration</h4>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Overview"  >
        <h3>Overview</h3>
    
            <p>
    The EE subsystem provides common functionality in the Java EE platform, such as the EE Concurrency Utilities (JSR 236) and <tt class=" ">@Resource</tt> injection. The subsystem is also responsible for managing the lifecycle of Java EE application's deployments, that is, <tt class=" ">.ear</tt> files.            </p>
                <p>
    The EE subsystem configuration may be used to:            </p>
    <ul class=" "><li class=" ">            <p>
    customise the deployment of Java EE applications            </p>
    </li><li class=" ">            <p>
    create EE Concurrency Utilities instances            </p>
    </li><li class=" ">            <p>
    define the default bindings            </p>
    </li></ul>            <p>
    The subsystem name is ee and this document covers EE subsystem version <tt class=" ">2.0</tt>, which XML namespace within WildFly XML configurations is&nbsp;<tt class=" ">urn:jboss:domain:ee:2.0</tt>. The path for the subsystem's XML schema, within WildFly's distribution, is <tt class=" ">docs/schema/jboss-as-ee_2_0.xsd</tt>.            </p>
                <p>
    Subsystem XML configuration example with all elements and attributes specified:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:ee:2.0&quot; &gt;
    &lt;global-modules&gt;
        &lt;module name=&quot;org.jboss.logging&quot;
                slot=&quot;main&quot;/&gt;
        &lt;module name=&quot;org.apache.log4j&quot;
                annotations=&quot;true&quot;
                meta-inf=&quot;true&quot;
                services=&quot;false&quot; /&gt;
    &lt;/global-modules&gt;
    &lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;
    &lt;spec-descriptor-property-replacement&gt;false&lt;/spec-descriptor-property-replacement&gt;
    &lt;jboss-descriptor-property-replacement&gt;false&lt;/jboss-descriptor-property-replacement&gt;
    &lt;annotation-property-replacement&gt;false&lt;/annotation-property-replacement&gt;
    &lt;concurrent&gt;
        &lt;context-services&gt;
            &lt;context-service
                    name=&quot;default&quot;
                    jndi-name=&quot;java:jboss/ee/concurrency/context/default&quot;
                    use-transaction-setup-provider=&quot;true&quot; /&gt;
        &lt;/context-services&gt;
        &lt;managed-thread-factories&gt;
            &lt;managed-thread-factory
                    name=&quot;default&quot;
                    jndi-name=&quot;java:jboss/ee/concurrency/factory/default&quot;
                    context-service=&quot;default&quot;
                    priority=&quot;1&quot; /&gt;
        &lt;/managed-thread-factories&gt;
        &lt;managed-executor-services&gt;
            &lt;managed-executor-service
                    name=&quot;default&quot;
                    jndi-name=&quot;java:jboss/ee/concurrency/executor/default&quot;
                    context-service=&quot;default&quot;
                    thread-factory=&quot;default&quot;
                    hung-task-threshold=&quot;60000&quot;
                    core-threads=&quot;5&quot;
                    max-threads=&quot;25&quot;
                    keepalive-time=&quot;5000&quot;
                    queue-length=&quot;1000000&quot;
                    reject-policy=&quot;RETRY_ABORT&quot; /&gt;
        &lt;/managed-executor-services&gt;
        &lt;managed-scheduled-executor-services&gt;
            &lt;managed-scheduled-executor-service
                    name=&quot;default&quot;
                    jndi-name=&quot;java:jboss/ee/concurrency/scheduler/default&quot;
                    context-service=&quot;default&quot;
                    thread-factory=&quot;default&quot;
                    hung-task-threshold=&quot;60000&quot;
                    core-threads=&quot;5&quot;
                    keepalive-time=&quot;5000&quot;
                    reject-policy=&quot;RETRY_ABORT&quot; /&gt;
        &lt;/managed-scheduled-executor-services&gt;
    &lt;/concurrent&gt;
    &lt;default-bindings
            context-service=&quot;java:jboss/ee/concurrency/context/default&quot;
            datasource=&quot;java:jboss/datasources/ExampleDS&quot;
            jms-connection-factory=&quot;java:jboss/DefaultJMSConnectionFactory&quot;
            managed-executor-service=&quot;java:jboss/ee/concurrency/executor/default&quot;
            managed-scheduled-executor-service=&quot;java:jboss/ee/concurrency/scheduler/default&quot;
            managed-thread-factory=&quot;java:jboss/ee/concurrency/factory/default&quot; /&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-JavaEEApplicationDeployment"  >
        <h3>Java EE Application Deployment</h3>
    
            <p>
    The EE subsystem configuration allows the customisation of the deployment behaviour for Java EE Applications.            </p>
        <div class="section-4"  id="66322684_AdminGuide-GlobalModules"  >
        <h4>Global Modules</h4>
    
            <p>
    Global modules is a set of JBoss Modules that will be added as dependencies to the JBoss Module of every Java EE deployment. Such dependencies allows Java EE deployments to see the classes exported by the global modules.            </p>
                <p>
    Each global module is defined through the <tt class=" ">module</tt> resource, an example of its XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;global-modules&gt;
    &lt;module name=&quot;org.jboss.logging&quot; slot=&quot;main&quot;/&gt;
    &lt;module name=&quot;org.apache.log4j&quot; annotations=&quot;true&quot; meta-inf=&quot;true&quot; services=&quot;false&quot; /&gt;
  &lt;/global-modules&gt;</code></pre>
        </div>
    </div>
            <p>
    The only mandatory attribute is the JBoss Module <tt class=" ">name</tt>, the <tt class=" ">slot</tt> attribute defaults to <tt class=" ">main</tt>, and both define the JBoss Module ID to reference.            </p>
                <p>
    The optional <tt class=" ">annotations</tt> attribute, which defaults to <tt class=" ">false</tt>, indicates if a pre-computed annotation index should be imported from META-INF/jandex.idx            </p>
                <p>
    The optional <tt class=" ">services</tt> attribute indicates if any services exposed in META-INF/services should be made available to the deployments class loader, and defaults to <tt class=" ">false</tt>.            </p>
                <p>
    The optional <tt class=" ">meta-inf</tt> attribute, which defaults to <tt class=" ">true</tt>, indicates if the Module's <tt class=" ">META-INF</tt> path should be available to the deployment's class loader.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-EARSubdeploymentsIsolation"  >
        <h4>EAR Subdeployments Isolation</h4>
    
            <p>
    A flag indicating whether each of the subdeployments within a <tt class=" ">.ear</tt> can access classes belonging to another subdeployment within the same <tt class=" ">.ear</tt>. The default value is <tt class=" ">false</tt>, which allows the subdeployments to see classes belonging to other subdeployments within the <tt class=" ">.ear</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;</code></pre>
        </div>
    </div>
            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>myapp.ear
|
|--- web.war
|
|--- ejb1.jar
|
|--- ejb2.jar
</code></pre>
        </div>
    </div>
            <p>
    If the <tt class=" ">ear-subdeployments-isolated</tt> is set to false, then the classes in <tt class=" ">web.war</tt> can access classes belonging to <tt class=" ">ejb1.jar</tt> and <tt class=" ">ejb2.jar</tt>. Similarly, classes from <tt class=" ">ejb1.jar</tt> can access classes from <tt class=" ">ejb2.jar</tt> (and vice-versa).            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    This flag has no effect on the isolated classloader of the <tt class=" ">.war</tt> file(s), i.e. irrespective of whether this flag is set to <tt class=" ">true</tt> or <tt class=" ">false</tt>, the <tt class=" ">.war</tt> within a <tt class=" ">.ear</tt> will have a isolated classloader, and other subdeployments within that <tt class=" ">.ear</tt> will not be able to access classes from that <tt class=" ">.war</tt>. This is as per spec.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-PropertyReplacement"  >
        <h4>Property Replacement</h4>
    
            <p>
    The EE subsystem configuration includes flags to configure whether system property replacement will be done on XML descriptors and Java Annotations, included in Java EE deployments.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    System properties etc are resolved in the security context of the application server itself, not the deployment that contains the file. This means that if you are running with a security manager and enable this property, a deployment can potentially access system properties or environment entries that the security manager would have otherwise prevented.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-SpecDescriptorPropertyReplacement"  >
        <h5>Spec Descriptor Property Replacement</h5>
    
            <p>
    Flag indicating whether system property replacement will be performed on standard Java EE XML descriptors. This defaults to <tt class=" ">true</tt>, however it is disabled in the default configurations.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;spec-descriptor-property-replacement&gt;false&lt;/spec-descriptor-property-replacement&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-JBossDescriptorPropertyReplacement"  >
        <h5>JBoss Descriptor Property Replacement</h5>
    
            <p>
    Flag indicating whether system property replacement will be performed on WildFly proprietary XML descriptors, such as <tt class=" ">jboss-app.xml</tt>. This defaults to <tt class=" ">true</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;jboss-descriptor-property-replacement&gt;false&lt;/jboss-descriptor-property-replacement&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-AnnotationPropertyReplacement"  >
        <h5>Annotation Property Replacement</h5>
    
            <p>
    Flag indicating whether system property replacement will be performed on Java annotations. The default value is&nbsp;<tt class=" ">false</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;annotation-property-replacement&gt;false&lt;/annotation-property-replacement&gt;</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-EEConcurrencyUtilities"  >
        <h3>EE Concurrency Utilities</h3>
    
            <p>
    EE Concurrency Utilities (JSR 236) were introduced with Java EE 7, to ease the task of writing multithreaded Java EE applications. Instances of these utilities are managed by WildFly, and the related configuration provided by the EE subsystem.            </p>
        <div class="section-4"  id="66322684_AdminGuide-ContextServices"  >
        <h4>Context Services</h4>
    
            <p>
    The Context Service is a concurrency utility which creates contextual proxies from existent objects. WildFly Context Services are also used to propagate the context from a Java EE application invocation thread, to the threads internally used by the other EE Concurrency Utilities. Context Service instances may be created using the subsystem XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;context-services&gt;
    &lt;context-service
	name=&quot;default&quot;
	jndi-name=&quot;java:jboss/ee/concurrency/context/default&quot;
	use-transaction-setup-provider=&quot;true&quot; /&gt;
  &lt;/context-services&gt;</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">name</tt> attribute is mandatory, and it's value should be a unique name within all Context Services.            </p>
                <p>
    The <tt class=" ">jndi-name</tt> attribute is also mandatory, and defines where in the JNDI the Context Service should be placed.            </p>
                <p>
    The optional <tt class=" ">use-trasaction-setup-provider</tt> attribute indicates if the contextual proxies built by the Context Service should suspend transactions in context, when invoking the proxy objects, and its value defaults to true.            </p>
                <p>
    Management clients, such as the WildFly CLI, may also be used to configure Context Service instances. An example to <tt class=" ">add</tt> and <tt class=" ">remove</tt> one named <tt class=" ">other</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=ee/context-service=other:add(jndi-name=java\:jboss\/ee\/concurrency\/other)
/subsystem=ee/context-service=other:remove</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ManagedThreadFactories"  >
        <h4>Managed Thread Factories</h4>
    
            <p>
    The Managed Thread Factory allows Java EE applications to create new threads. WildFly Managed Thread Factory instances may also, optionally, use a Context Service instance to propagate the Java EE application thread&rsquo;s context to the new threads. Instance creation is done through the EE subsystem, by editing the subsystem XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;managed-thread-factories&gt;
    &lt;managed-thread-factory
	name=&quot;default&quot;
	jndi-name=&quot;java:jboss/ee/concurrency/factory/default&quot;
	context-service=&quot;default&quot;
	priority=&quot;1&quot; /&gt;
  &lt;/managed-thread-factories&gt;</code></pre>
        </div>
    </div>
            <p>
    The&nbsp;<tt class=" ">name</tt>&nbsp;attribute is mandatory, and it's value should be a unique name within all Managed Thread Factories.            </p>
                <p>
    The&nbsp;<tt class=" ">jndi-name</tt>&nbsp;attribute is also mandatory, and defines where in the JNDI the Managed Thread Factory should be placed.            </p>
                <p>
    The optional&nbsp;<tt class=" ">context-service</tt>&nbsp;references an existent Context Service by its <tt class=" ">name</tt>. If specified then thread created by the factory will propagate the invocation context, present when creating the thread.            </p>
                <p>
    The optional&nbsp;<tt class=" ">priority</tt>&nbsp;indicates the priority for new threads created by the factory, and defaults to <tt class=" ">5</tt>.            </p>
                <p>
    Management clients, such as the WildFly CLI, may also be used to configure Managed Thread Factory instances. An example to <tt class=" ">add</tt> and <tt class=" ">remove</tt> one named <tt class=" ">other</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=ee/managed-thread-factory=other:add(jndi-name=java\:jboss\/ee\/factory\/other)
/subsystem=ee/managed-thread-factory=other:remove</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ManagedExecutorServices"  >
        <h4>Managed Executor Services</h4>
    
            <p>
    The Managed Executor Service is the Java EE adaptation of Java SE Executor Service, providing to Java EE applications the functionality of asynchronous task execution. WildFly is responsible to manage the lifecycle of Managed Executor Service instances, which are specified through the EE subsystem XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;managed-executor-services&gt;
    &lt;managed-executor-service
	name=&quot;default&quot;
	jndi-name=&quot;java:jboss/ee/concurrency/executor/default&quot;
	context-service=&quot;default&quot;
	thread-factory=&quot;default&quot;
	hung-task-threshold=&quot;60000&quot;
	core-threads=&quot;5&quot;
	max-threads=&quot;25&quot;
	keepalive-time=&quot;5000&quot;
	queue-length=&quot;1000000&quot;
	reject-policy=&quot;RETRY_ABORT&quot; /&gt;
  &lt;/managed-executor-services&gt;</code></pre>
        </div>
    </div>
            <p>
    The&nbsp;<tt class=" ">name</tt>&nbsp;attribute is mandatory, and it's value should be a unique name within all Managed Executor Services.            </p>
                <p>
    The&nbsp;<tt class=" ">jndi-name</tt>&nbsp;attribute is also mandatory, and defines where in the JNDI the Managed Executor Service should be placed.            </p>
                <p>
    The optional&nbsp;<tt class=" ">context-service</tt>&nbsp;references an existent Context Service by its&nbsp;<tt class=" ">name</tt>. If specified then the referenced Context Service will capture the invocation context present when submitting a task to the executor, which will then be used when executing the task.            </p>
                <p>
    The optional&nbsp;<tt class=" ">thread-factory</tt>&nbsp;references an existent Managed Thread Factory by its&nbsp;<tt class=" ">name</tt>, to handle the creation of internal threads. If not specified then a Managed Thread Factory with default configuration will be created and used internally.            </p>
                <p>
    The mandatory&nbsp;<tt class=" ">core-threads</tt>&nbsp;provides the number of threads to keep in the executor's pool, even if they are idle. A value of&nbsp;<tt class=" ">0</tt>&nbsp;means there is no limit.            </p>
                <p>
    The optional&nbsp;<tt class=" ">queue-length</tt>&nbsp;indicates the number of tasks that can be stored in the input queue. The default value is <tt class=" ">0</tt>, which means the queue capacity is unlimited.            </p>
                <p>
    The executor&rsquo;s task queue is based on the values of the attributes&nbsp;<tt class=" ">core-threads</tt> and <tt class=" ">queue-length</tt>:            </p>
    <ul class=" "><li class=" ">            <p>
    If <tt class=" ">queue-length</tt> is <tt class=" ">0</tt>, or <tt class=" ">queue-length</tt> is <tt class=" ">Integer.MAX_VALUE (2147483647)</tt> and <tt class=" ">core-threads</tt> is <tt class=" ">0</tt>, direct handoff queuing strategy will be used and a synchronous queue will be created.            </p>
    </li><li class=" ">            <p>
    If <tt class=" ">queue-length</tt> is <tt class=" ">Integer.MAX_VALUE</tt> but <tt class=" ">core-threads</tt> is not <tt class=" ">0</tt>, an unbounded queue will be used.            </p>
    </li><li class=" ">            <p>
    For any other valid value for <tt class=" ">queue-length</tt>, a bounded queue wil be created.            </p>
    </li></ul>            <p>
    The optional&nbsp;<tt class=" ">hung-task-threshold</tt>&nbsp;defines a threshold value, in milliseconds, to hung a possibly blocked task. A value of&nbsp;<tt class=" ">0</tt>&nbsp;will never hung a task, and is the default.            </p>
                <p>
    The optional&nbsp;<tt class=" ">long-running-tasks</tt>&nbsp;is a hint to optimize the execution of long running tasks, and defaults to <tt class=" ">false</tt>.            </p>
                <p>
    The optional&nbsp;<tt class=" ">max-threads</tt>&nbsp;defines the the maximum number of threads used by the executor, which defaults to Integer.MAX_VALUE&nbsp;(2147483647).            </p>
                <p>
    The optional&nbsp;<tt class=" ">keepalive-time</tt>&nbsp;defines the time, in milliseconds, that an internal thread may be idle. The attribute default value is <tt class=" ">60000</tt>.            </p>
                <p>
    The optional&nbsp;reject-policy defines the policy to use when a task is rejected by the executor. The attribute value may be the default <tt class=" ">ABORT</tt>, which means an exception should be thrown, or <tt class=" ">RETRY_ABORT</tt>, which means the executor will try to submit it once more, before throwing an exception.&nbsp;            </p>
                <p>
    Management clients, such as the WildFly CLI, may also be used to configure Managed Executor Service instances. An example to <tt class=" ">add</tt> and <tt class=" ">remove</tt> one named <tt class=" ">other</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=ee/managed-executor-service=other:add(jndi-name=java\:jboss\/ee\/executor\/other, core-threads=2)
/subsystem=ee/managed-executor-service=other:remove</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ManagedScheduledExecutorServices"  >
        <h4>Managed Scheduled Executor Services</h4>
    
            <p>
    The Managed Scheduled  Executor Service is the Java EE adaptation of Java SE Scheduled Executor Service, providing to Java EE applications the functionality of scheduling task execution. WildFly is responsible to manage the lifecycle of Managed Scheduled  Executor Service instances, which are specified through the EE subsystem XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;managed-scheduled-executor-services&gt;
    &lt;managed-scheduled-executor-service
	name=&quot;default&quot;
	jndi-name=&quot;java:jboss/ee/concurrency/scheduler/default&quot;
	context-service=&quot;default&quot;
	thread-factory=&quot;default&quot;
	hung-task-threshold=&quot;60000&quot;
	core-threads=&quot;5&quot;
	keepalive-time=&quot;5000&quot;
	reject-policy=&quot;RETRY_ABORT&quot; /&gt;
  &lt;/managed-scheduled-executor-services&gt;</code></pre>
        </div>
    </div>
            <p>
    The&nbsp;<tt class=" ">name</tt>&nbsp;attribute is mandatory, and it's value should be a unique name within all Managed Scheduled Executor Services.            </p>
                <p>
    The&nbsp;<tt class=" ">jndi-name</tt>&nbsp;attribute is also mandatory, and defines where in the JNDI the Managed Scheduled Executor Service should be placed.            </p>
                <p>
    The optional&nbsp;<tt class=" ">context-service</tt>&nbsp;references an existent Context Service by its&nbsp;<tt class=" ">name</tt>. If specified then the referenced Context Service will capture the invocation context present when submitting a task to the executor, which will then be used when executing the task.            </p>
                <p>
    The optional&nbsp;<tt class=" ">thread-factory</tt>&nbsp;references an existent Managed Thread Factory by its&nbsp;<tt class=" ">name</tt>, to handle the creation of internal threads. If not specified then a Managed Thread Factory with default configuration will be created and used internally.            </p>
                <p>
    The mandatory&nbsp;<tt class=" ">core-threads</tt>&nbsp;provides the number of threads to keep in the executor's pool, even if they are idle. A value of&nbsp;<tt class=" ">0</tt>&nbsp;means there is no limit.            </p>
                <p>
    The optional&nbsp;<tt class=" ">hung-task-threshold</tt>&nbsp;defines a threshold value, in milliseconds, to hung a possibly blocked task. A value of&nbsp;<tt class=" ">0</tt>&nbsp;will never hung a task, and is the default.            </p>
                <p>
    The optional&nbsp;<tt class=" ">long-running-tasks</tt>&nbsp;is a hint to optimize the execution of long running tasks, and defaults to&nbsp;<tt class=" ">false</tt>.            </p>
                <p>
    The optional&nbsp;<tt class=" ">keepalive-time</tt>&nbsp;defines the time, in milliseconds, that an internal thread may be idle. The attribute default value is&nbsp;<tt class=" ">60000</tt>.            </p>
                <p>
    The optional&nbsp;reject-policy defines the policy to use when a task is rejected by the executor. The attribute value may be the default&nbsp;<tt class=" ">ABORT</tt>, which means an exception should be thrown, or<tt class=" ">RETRY_ABORT</tt>, which means the executor will try to submit it once more, before throwing an exception.&nbsp;            </p>
                <p>
    Management clients, such as the WildFly CLI, may also be used to configure Managed Scheduled Executor Service instances. An example to <tt class=" ">add</tt> and <tt class=" ">remove</tt> one named <tt class=" ">other</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=ee/managed-scheduled-executor-service=other:add(jndi-name=java\:jboss\/ee\/scheduler\/other, core-threads=2)
/subsystem=ee/managed-scheduled-executor-service=other:remove</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-DefaultEEBindings"  >
        <h3>Default EE Bindings</h3>
    
            <p>
    The Java EE Specification mandates the existence of a default instance for each of the following resources:            </p>
    <ul class=" "><li class=" ">            <p>
    Context Service            </p>
    </li><li class=" ">            <p>
    Datasource            </p>
    </li><li class=" ">            <p>
    JMS Connection Factory            </p>
    </li><li class=" ">            <p>
    Managed Executor Service            </p>
    </li><li class=" ">            <p>
    Managed Scheduled Executor Service            </p>
    </li><li class=" ">            <p>
    Managed Thread Factory            </p>
    </li></ul>            <p>
    The EE subsystem looks up the default instances from JNDI, using the names in the default bindings configuration, before placing those in the standard JNDI names, such as <tt class=" ">java:comp/DefaultManagedExecutorService</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;default-bindings
	context-service=&quot;java:jboss/ee/concurrency/context/default&quot;
	datasource=&quot;java:jboss/datasources/ExampleDS&quot;
	jms-connection-factory=&quot;java:jboss/DefaultJMSConnectionFactory&quot;
	managed-executor-service=&quot;java:jboss/ee/concurrency/executor/default&quot;
	managed-scheduled-executor-service=&quot;java:jboss/ee/concurrency/scheduler/default&quot;
	managed-thread-factory=&quot;java:jboss/ee/concurrency/factory/default&quot; /&gt;</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
        
            <p>
    The default bindings are optional, if the jndi name for a default binding is not configured then the related resource will not be available to Java EE applications.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Datasources"  >
        <h4>Data sources</h4>
    
            <p>
    Datasources are configured through the <i class=" ">datasource</i> subsystem. Declaring a new datasource consists of two separate steps: You would need to provide a JDBC driver and define a datasource that references the driver you installed.&nbsp;            </p>
        <div class="section-5"  id="66322684_AdminGuide-JDBCDriverInstallation"  >
        <h5>JDBC Driver Installation</h5>
    
            <p>
    The recommended way to install a JDBC driver into WildFly 8&nbsp;is to deploy it as a regular JAR deployment.&nbsp; The reason for this is that when you run WildFly 8&nbsp;in domain mode, deployments are automatically propagated to all servers to which the deployment applies; thus distribution of the driver JAR is one less thing for you to worry about!            </p>
                <p>
    Any JDBC 4-compliant driver will automatically be recognized and installed into the system by name and version. A JDBC JAR is identified using the Java service provider mechanism. Such JARs will contain a text a file named <tt class=" ">META-INF/services/java.sql.Driver</tt>, which contains the name of the class(es) of the Drivers which exist in that JAR. If your JDBC driver JAR is not JDBC 4-compliant, it can be made deployable in one of a few ways.            </p>
                <p>
    <strong class=" ">Modify the JAR</strong>            </p>
                <p>
    The most straightforward solution is to simply modify the JAR and add the missing file. You can do this from your command shell by:            </p>
    <ol class=" "><li class=" ">            <p>
    Change to, or create, an empty temporary directory.            </p>
    </li><li class=" ">            <p>
    Create a <tt class=" ">META-INF</tt> subdirectory.            </p>
    </li><li class=" ">            <p>
    Create a <tt class=" ">META-INF/services</tt> subdirectory.            </p>
    </li><li class=" ">            <p>
    Create a <tt class=" ">META-INF/services/java.sql.Driver</tt> file which contains one line - the fully-qualified class name of the JDBC driver.            </p>
    </li><li class=" ">            <p>
    Use the <tt class=" ">jar</tt> command-line tool to update the JAR like this:            </p>
    </li></ol>    <div class="confbox programlisting">
                <div class="content">
        <pre><code>jar \-uf jdbc-driver.jar META-INF/services/java.sql.Driver</code></pre>
        </div>
    </div>
            <p>
    For a detailed explanation how to deploy JDBC 4 compliant driver jar, please refer to the chapter &quot;<a href="https://docs.jboss.org/author/display/AS71/Application+deployment">Application Deployment</a>&quot;.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-DatasourceDefinitions"  >
        <h5>Datasource Definitions</h5>
    
            <p>
    The datasource itself is defined within the subsystem <i class=" ">datasources</i>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:datasources:1.0&quot;&gt;
    &lt;datasources&gt;
        &lt;datasource jndi-name=&quot;java:jboss/datasources/ExampleDS&quot; pool-name=&quot;ExampleDS&quot;&gt;
            &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
            &lt;driver&gt;h2&lt;/driver&gt;
            &lt;pool&gt;
                &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;
                &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;
                &lt;prefill&gt;true&lt;/prefill&gt;
            &lt;/pool&gt;
            &lt;security&gt;
                &lt;user-name&gt;sa&lt;/user-name&gt;
                &lt;password&gt;sa&lt;/password&gt;
            &lt;/security&gt;
        &lt;/datasource&gt;
        &lt;xa-datasource&nbsp;jndi-name=&quot;java:jboss/datasources/ExampleXADS&quot;&nbsp;pool-name=&quot;ExampleXADS&quot;&gt;
          &nbsp;&lt;driver&gt;h2&lt;/driver&gt;
       &nbsp;&nbsp;&nbsp; &lt;xa-datasource-property&nbsp;name=&quot;URL&quot;&gt;jdbc:h2:mem:test&lt;/xa-datasource-property&gt;
           &lt;xa-pool&gt;
                &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;
                &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;
                &lt;prefill&gt;true&lt;/prefill&gt;
           &lt;/xa-pool&gt;
       &nbsp;&nbsp;&nbsp; &lt;security&gt;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;user-name&gt;sa&lt;/user-name&gt;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;password&gt;sa&lt;/password&gt;
       &nbsp;&nbsp;&nbsp; &lt;/security&gt;
      &nbsp; &lt;/xa-datasource&gt;
        &lt;drivers&gt;
           &nbsp;&lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;
                &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;
            &lt;/driver&gt;
        &lt;/drivers&gt;
  &lt;/datasources&gt;

&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See</sub> <tt class=" ">standalone/configuration/standalone.xml</tt><sub class=" ">)</sub>            </p>
                <p>
    As you can see the datasource references a driver by it's logical name.            </p>
                <p>
    You can easily query the same information through the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=datasources:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;data-source&quot; =&gt; {&quot;java:/H2DS&quot; =&gt; {
            &quot;connection-url&quot; =&gt; &quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&quot;,
            &quot;jndi-name&quot; =&gt; &quot;java:/H2DS&quot;,
            &quot;driver-name&quot; =&gt; &quot;h2&quot;,
            &quot;pool-name&quot; =&gt; &quot;H2DS&quot;,
            &quot;use-java-context&quot; =&gt; true,
            &quot;enabled&quot; =&gt; true,
            &quot;jta&quot; =&gt; true,
            &quot;pool-prefill&quot; =&gt; true,
            &quot;pool-use-strict-min&quot; =&gt; false,
            &quot;user-name&quot; =&gt; &quot;sa&quot;,
            &quot;password&quot; =&gt; &quot;sa&quot;,
            &quot;flush-strategy&quot; =&gt; &quot;FailingConnectionOnly&quot;,
            &quot;background-validation&quot; =&gt; false,
            &quot;use-fast-fail&quot; =&gt; false,
            &quot;validate-on-match&quot; =&gt; false,
            &quot;use-ccm&quot; =&gt; true
        }},
        &quot;xa-data-source&quot; =&gt; undefined,
        &quot;jdbc-driver&quot; =&gt; {&quot;h2&quot; =&gt; {
            &quot;driver-name&quot; =&gt; &quot;h2&quot;,
            &quot;driver-module-name&quot; =&gt; &quot;com.h2database.h2&quot;,
            &quot;driver-xa-datasource-class-name&quot; =&gt; &quot;org.h2.jdbcx.JdbcDataSource&quot;
        }}
    }
}


[standalone@localhost:9999 /] /subsystem=datasources:installed-drivers-list
{
&nbsp;&nbsp; &nbsp;&quot;outcome&quot; =&gt; &quot;success&quot;,
&nbsp;&nbsp; &nbsp;&quot;result&quot; =&gt; [{
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-name&quot; =&gt; &quot;h2&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;deployment-name&quot; =&gt; undefined,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-module-name&quot; =&gt; &quot;com.h2database.h2&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;module-slot&quot; =&gt; &quot;main&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-xa-datasource-class-name&quot; =&gt; &quot;org.h2.jdbcx.JdbcDataSource&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-class-name&quot; =&gt; &quot;org.h2.Driver&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-major-version&quot; =&gt; 1,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-minor-version&quot; =&gt; 2,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;jdbc-compliant&quot; =&gt; true
&nbsp;&nbsp; &nbsp;}]
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
        
            <p>
    Using the web console or the CLI greatly simplifies the deployment of JDBC drivers and the creation of datasources.            </p>
        </div>
    
            <p>
    The CLI offers a set of commands to create and modify datasources:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] help
Supported commands:

 [...]

 data-source             - allows to add new, modify and remove existing data sources
 xa-data-source          - allows add new, modify and remove existing XA data sources

For a more detailed description of a specific command,
execute the command with '--help' as the argument.</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Usingsecuritydomains"  >
        <h5>Using security domains</h5>
    
            <p>
    Information can be found at <a href="https://community.jboss.org/wiki/JBossAS7SecurityDomainModel">https://community.jboss.org/wiki/JBossAS7SecurityDomainModel</a>            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Deploymentof%5Cds.xmlfiles"  >
        <h5>Deployment of -ds.xml files</h5>
    
            <p>
    Starting with WildFly 8, you have the ability to deploy a -ds.xml file following the schema:            </p>
                <p>
    <a href="http://www.ironjacamar.org/doc/schema/datasources_1_1.xsd">http://www.ironjacamar.org/doc/schema/datasources_1_1.xsd</a>            </p>
                <p>
    It is mandatory to use a reference to an already deployed / defined &lt;driver&gt; entry.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    This feature <strong class=" ">is&nbsp;primarily intended for development</strong>, and thus has a few limitations to be aware of. It can not be altered in any of the management interfaces (consle, CLI, etc). Only limited runtime information is available. Also, password vaults and security domains are not deployable, so these can not be bundled with a datasource deployment.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ComponentReference"  >
        <h5>Component Reference</h5>
    
            <p>
    The datasource subsystem is provided by the <a href="http://www.jboss.org/ironjacamar">IronJacamar</a> project. For a detailed description of the available configuration properties, please consult the project documentation.            </p>
        <div class="confbox panel">
    <ul class=" "><li class=" ">            <p>
    IronJacamar homepage: <a href="http://ironjacamar.org/">http://ironjacamar.org/</a>            </p>
    </li><li class=" ">            <p>
    Project Documentation:&nbsp; <a href="http://ironjacamar.org/documentation.html">http://ironjacamar.org/documentation.html</a>            </p>
    </li><li class=" ">            <p>
    Schema description: <a href="http://www.ironjacamar.org/doc/userguide/1.1/en-US/html_single/index.html#deployingds_descriptor">http://www.ironjacamar.org/doc/userguide/1.1/en-US/html_single/index.html#deployingds_descriptor</a>            </p>
    </li></ul>    </div>
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Messaging"  >
        <h4>Messaging</h4>
    
<ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Connectors">Connectors</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JMSConnectionFactories">JMS Connection Factories</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JMSQueuesandTopics">JMS Queues and Topics</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DeadLetter%26Redelivery">Dead Letter &amp; Redelivery</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SecuritySettingsforHornetQaddressesandJMSdestinations">Security Settings for HornetQ addresses and JMS destinations</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-SecurityDomainforUsers">Security Domain for Users</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ClusterAuthentication">Cluster Authentication</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Deploymentof%5Cjms.xmlfiles">Deployment of -jms.xml files</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-JMSBridge">JMS Bridge</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Modulesforothermessagingbrokers">Modules for other messaging brokers</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Configuration">Configuration</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Managementcommands">Management commands</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ComponentReference">Component Reference</a>            </p>
    </li></ul>            <p>
    The JMS server configuration is done through the <i class=" ">messaging</i> subsystem. In this chapter we are going outline the frequently used configuration options. For a more detailed explanation please consult the HornetQ user guide (See &quot;Component Reference&quot;).&nbsp;            </p>
        <div class="section-5"  id="66322684_AdminGuide-Connectors"  >
        <h5>Connectors</h5>
    
            <p>
    There are three kind of connectors that can be used to connect to WildFly JMS Server            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">invm-connector</tt> can be used by a local client (i.e. one running in the same JVM as the server)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">netty-connector</tt> can be used by a remote client (and uses Netty over TCP for the communication)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">http-connector</tt> can be used by a remote client (and uses Undertow Web Server to upgrade from a HTTP connection)            </p>
    </li></ul>    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-JMSConnectionFactories"  >
        <h5>JMS Connection Factories</h5>
    
            <p>
    There are three kinds of <i class=" ">basic</i> JMS <tt class=" ">connection-factory</tt> that depends on the type of connectors that is used.            </p>
                <p>
    There is also a <tt class=" ">pooled-connection-factory</tt>&nbsp;which is special in that it is essentially a configuration facade for <i class=" ">both</i>&nbsp;the inbound and outbound connectors of the&nbsp;the&nbsp;HornetQ JCA Resource Adapter. &nbsp;An MDB can be configured to use a <tt class=" ">pooled-connection-factory</tt> (e.g. using <tt class=" ">@ResourceAdapter</tt>). &nbsp;In this context, the MDB leverages the <i class=" ">inbound connector</i>&nbsp;of the HornetQ JCA RA. &nbsp;Other kinds of clients can look up the pooled-connection-factory in JNDI (or inject it) and use it to send messages. &nbsp;In this context, such a client would leverage the <i class=" ">outbound connector</i>&nbsp;of the HornetQ JCA RA. &nbsp;A <tt class=" ">pooled-connection-factory</tt>&nbsp;is also special because:            </p>
    <ul class=" "><li class=" ">            <p>
    It is only available to local clients, although it can be configured to point to a remote server.            </p>
    </li><li class=" ">            <p>
    As the name suggests, it is pooled and therefore provides superior performance to the clients which are able to use it. &nbsp;The pool size can be configured via the <tt class=" ">max-pool-size</tt> and <tt class=" ">min-pool-size</tt> attributes.            </p>
    </li><li class=" ">            <p>
    It should only be used to&nbsp;<i class=" ">send</i>&nbsp;(i.e. produce) messages when looked up in JNDI or injected.            </p>
    </li><li class=" ">            <p>
    It can be configured to use specific security credentials via the <tt class=" ">user</tt> and <tt class=" ">password</tt> attributes. &nbsp;This is useful if the remote server to which it is pointing is secured.            </p>
    </li><li class=" ">            <p>
    Resources acquired from it will be automatically enlisted any on-going JTA transaction. &nbsp;If you want to send a message from an EJB using CMT then this is likely the connection factory you want to use so the send operation will be atomically committed along with the rest of the EJB's transaction operations.            </p>
    </li></ul>            <p>
    To be clear, the <i class=" ">inbound connector</i>&nbsp;of the HornetQ JCA RA (which is for consuming messages) is only used by MDBs and other JCA-based components. &nbsp;It is not available to traditional clients.            </p>
                <p>
    Both a&nbsp;<tt class=" ">connection-factory</tt>&nbsp;and a <tt class=" ">pooled-connection-factory</tt> reference a <tt class=" ">connector</tt> declaration. &nbsp;            </p>
                <p>
    A <tt class=" ">netty-connector</tt> is&nbsp;associated with a <tt class=" ">socket-binding</tt>&nbsp;which tells the client using the <tt class=" ">connection-factory</tt> where to connect.            </p>
    <ul class=" "><li class=" ">            <p>
    A <tt class=" ">connection-factory</tt> referencing a <tt class=" ">netty-connector</tt> is suitable to be used by a&nbsp;<i class=" ">remote</i> client to send messages to or receive messages from the server (assuming the connection-factory has an appropriately exported <tt class=" ">entry</tt>). &nbsp;            </p>
    </li><li class=" ">            <p>
    A <tt class=" ">pooled-connection-factory</tt> looked up in JNDI or injected which is&nbsp;referencing a <tt class=" ">netty-connector</tt> is suitable to be used by a <i class=" ">local</i> client to send messages to a remote server granted the <tt class=" ">socket-binding</tt>&nbsp;references an <tt class=" ">outbound-socket-binding</tt> pointing to the remote server in question.            </p>
    </li><li class=" ">            <p>
    A&nbsp;<tt class=" ">pooled-connection-factory</tt>&nbsp;used by an MDB which is&nbsp;referencing a&nbsp;<tt class=" ">netty-connector</tt>&nbsp;is suitable to consume&nbsp;messages from a remote server granted the&nbsp;<tt class=" ">socket-binding</tt>&nbsp;references an&nbsp;<tt class=" ">outbound-socket-binding</tt>&nbsp;pointing to the remote server in question.            </p>
    </li></ul>            <p>
    An <tt class=" ">in-vm-connector</tt> is associated with a <tt class=" ">server-id</tt> which tells the client using the <tt class=" ">connection-factory</tt> where to connect (since multiple HornetQ servers can run in a single JVM).            </p>
    <ul class=" "><li class=" ">            <p>
    A&nbsp;<tt class=" ">connection-factory</tt> referencing an <tt class=" ">in-vm-connector</tt> is suitable to be used by a <i class=" ">local</i> client to either send messages to or receive messages from a local server. &nbsp;            </p>
    </li><li class=" ">            <p>
    A&nbsp;<tt class=" ">pooled-connection-factory</tt>&nbsp;looked up in JNDI or injected which is referencing an <tt class=" ">in-vm-connector</tt> is suitable to be used by a <i class=" ">local</i> client only to send messages to a local server.            </p>
    </li><li class=" ">            <p>
    A&nbsp;<tt class=" ">pooled-connection-factory</tt>&nbsp;used by an MDB which is referencing an&nbsp;<tt class=" ">in-vm-connector</tt>&nbsp;is suitable only to consume messages from a local server.            </p>
    </li></ul>            <p>
    A <tt class=" ">http-connector</tt> is associated with the <tt class=" ">socket-binding</tt> that represents the HTTP socket (by default, named <tt class=" ">http</tt>).            </p>
    <ul class=" "><li class=" ">            <p>
    A <tt class=" ">connection-factory</tt> referencing a <tt class=" ">http-connector</tt> is suitable to be used by a remote client to send messages to or receive messages from the server by connecting to its HTTP port before upgrading to the messaging protocol.            </p>
    </li><li class=" ">            <p>
    A <tt class=" ">pooled-connection-factory</tt> referencing a <tt class=" ">http-connector</tt> is suitable to be used by a local client to send messages&nbsp;to a remote server &nbsp;granted the&nbsp;<tt class=" ">socket-binding</tt>&nbsp;references an&nbsp;<tt class=" ">outbound-socket-binding</tt>&nbsp;pointing to the remote server in question.            </p>
    </li><li class=" ">            <p>
    A&nbsp;<tt class=" ">pooled-connection-factory</tt>&nbsp;used by an MDB which is referencing a&nbsp;<tt class=" ">http-connector</tt>&nbsp;is suitable&nbsp;only to consume messages from&nbsp;a remote server&nbsp;granted the&nbsp;<tt class=" ">socket-binding</tt>&nbsp;references an&nbsp;<tt class=" ">outbound-socket-binding</tt>&nbsp;pointing to the remote server in question.            </p>
    </li></ul>            <p>
    The <tt class=" ">entry</tt> declaration of a <tt class=" ">connection-factory</tt> or a <tt class=" ">pooled-connection-factory</tt> specifies the JNDI name under which the factory will be exposed. &nbsp;Only JNDI names bound in the <tt class=" ">&quot;java:jboss/exported&quot;</tt> namespace are available to remote clients. &nbsp;If a <tt class=" ">connection-factory</tt> has an entry bound in the&nbsp;<tt class=" ">&quot;java:jboss/exported&quot;</tt> namespace a remote client would look-up the <tt class=" ">connection-factory</tt> using the text <i class=" ">after</i>&nbsp;<tt class=" ">&quot;java:jboss/exported&quot;</tt>. &nbsp;For example, the &quot;<tt class=" ">RemoteConnectionFactory</tt>&quot; is bound by default to&nbsp;<tt class=" ">&quot;java:jboss/exported/jms/RemoteConnectionFactory&quot;</tt> which means a remote client would look-up this <tt class=" ">connection-factory</tt> using &quot;<tt class=" ">jms/RemoteConnectionFactory</tt>&quot;. &nbsp;A <tt class=" ">pooled-connection-factory</tt> should <i class=" ">not</i> have any <tt class=" ">entry</tt> bound in the&nbsp;&quot;<tt class=" ">java:jboss/exported</tt>&quot; namespace because a <tt class=" ">pooled-connection-factory</tt> is not suitable for remote clients.            </p>
                <p>
    Since JMS 2.0, a default JMS connection factory is accessible to EE application&nbsp;under the JNDI name <tt class=" ">java:comp/DefaultJMSConnectionFactory.</tt> WildFly messaging subsystem defines a&nbsp;<tt class=" ">pooled-connection-factory</tt> that is used to provide this default connection factory. Any parameter change on this <tt class=" ">pooled-connection-factory</tt> will be take into account by any EE application looking the default JMS provider&nbsp;under the JNDI name&nbsp;<tt class=" ">java:comp/DefaultJMSConnectionFactory.</tt>            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
&nbsp; &nbsp; &nbsp; &lt;connectors&gt;
         &lt;http-connector name=&quot;http-connector&quot; socket-binding=&quot;http&quot;&gt;
            &lt;param key=&quot;http-upgrade-endpoint&quot; value=&quot;http-acceptor&quot;/&gt;
         &lt;/http-connector&gt;
         &lt;http-connector name=&quot;http-connector-throughput&quot; socket-binding=&quot;http&quot;&gt;
            &lt;param key=&quot;http-upgrade-endpoint&quot; value=&quot;http-acceptor-throughput&quot;/&gt;
            &lt;param key=&quot;batch-delay&quot; value=&quot;50&quot;/&gt;
         &lt;/http-connector&gt;
         &lt;in-vm-connector name=&quot;in-vm&quot; server-id=&quot;0&quot;/&gt;
      &lt;/connectors&gt;
      [...]
      &lt;jms-connection-factories&gt;
         &lt;connection-factory name=&quot;InVmConnectionFactory&quot;&gt;
            &lt;connectors&gt;
               &lt;connector-ref connector-name=&quot;in-vm&quot;/&gt;
            &lt;/connectors&gt;
            &lt;entries&gt;
               &lt;entry name=&quot;java:/ConnectionFactory&quot;/&gt;&nbsp;
            &lt;/entries&gt;
         &lt;/connection-factory&gt;&nbsp;
         &lt;connection-factory name=&quot;RemoteConnectionFactory&quot;&gt;
            &lt;connectors&gt;
               &lt;connector-ref connector-name=&quot;http-connector&quot;/&gt;
            &lt;/connectors&gt;
            &lt;entries&gt;
               &lt;entry name=&quot;java:jboss/exported/jms/RemoteConnectionFactory&quot;/&gt;
            &lt;/entries&gt;
         &lt;/connection-factory&gt;
         &lt;pooled-connection-factory name=&quot;hornetq-ra&quot;&gt;
            &lt;transaction mode=&quot;xa&quot;/&gt;
            &lt;connectors&gt;
               &lt;connector-ref connector-name=&quot;in-vm&quot;/&gt;
            &lt;/connectors&gt;
            &lt;entries&gt;
               &lt;entry name=&quot;java:/JmsXA&quot;/&gt;
               &lt;!-- Global JNDI entry used to provide a default JMS Connection factory to EE application --&gt;
               &lt;entry name=&quot;java:jboss/DefaultJMSConnectionFactory&quot;/&gt;
            &lt;/entries&gt;
         &lt;/pooled-connection-factory&gt;
      &lt;/jms-connection-factories&gt;
      [...]
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone-full.xml)</sub>            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-JMSQueuesandTopics"  >
        <h5>JMS Queues and Topics</h5>
    
            <p>
    JMS queues and topics are sub resources of the messaging subsystem. &nbsp;They are defined in the <tt class=" ">jms-destinations</tt> section. &nbsp;One can define either a <tt class=" ">jms-queue</tt> or <tt class=" ">jms-topic</tt>. &nbsp;Each destination <i class=" ">must</i> be given a <tt class=" ">name</tt> and contain at least one <tt class=" ">entry</tt> element.            </p>
                <p>
    Each <tt class=" ">entry</tt> refers to a JNDI name of the queue or topic. &nbsp;Keep in mind that any <tt class=" ">jms-queue</tt>&nbsp;or&nbsp;<tt class=" ">jms-topic</tt>&nbsp;which needs to be accessed by a remote client needs to have an <tt class=" ">entry</tt> in the &quot;java:jboss/exported&quot; namespace. &nbsp;As with connection factories, if a&nbsp;<tt class=" ">jms-queue</tt>&nbsp;or&nbsp;<tt class=" ">jms-topic</tt>&nbsp;has an <tt class=" ">entry</tt> bound in the&nbsp;&quot;java:jboss/exported&quot; namespace a remote client would look it up using the text&nbsp;<i class=" ">after</i>&nbsp;&quot;java:jboss/exported&quot;. &nbsp;For example, the following&nbsp;<tt class=" ">jms-queue</tt> &quot;testQueue&quot; is bound to&nbsp;&quot;java:jboss/exported/jms/queue/test&quot; which means a remote client would look-up this&nbsp;<tt class=" ">jms-queue</tt>&nbsp;using &quot;jms/queue/test&quot;. &nbsp;A local client could look it up using &quot;java:jboss/exported/jms/queue/test&quot;, &quot;java:jms/queue/test&quot;, or more simply &quot;jms/queue/test&quot;:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
      &lt;jms-destinations&gt;
         &lt;jms-queue name=&quot;testQueue&quot;&gt;
             &lt;entry name=&quot;jms/queue/test&quot;/&gt;
             &lt;entry name=&quot;java:jboss/exported/jms/queue/test&quot;/&gt;
         &lt;/jms-queue&gt;
         &lt;jms-topic name=&quot;testTopic&quot;&gt;
            &lt;entry name=&quot;jms/topic/test&quot;/&gt;
            &lt;entry name=&quot;java:jboss/exported/jms/topic/test&quot;/&gt;
         &lt;/jms-topic&gt;
      &lt;/jms-destinations&gt;
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone-full.xml)</sub>            </p>
                <p>
    JMS endpoints can easily be created through the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] jms-queue add --queue-address=myQueue --entries=queues/myQueue</code></pre>
        </div>
    </div>
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=messaging/hornetq-server=default/jms-queue=myQueue:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;durable&quot; =&gt; true,
        &quot;entries&quot; =&gt; [&quot;queues/myQueue&quot;],
        &quot;selector&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
            <p>
    A number of additional commands to maintain the JMS subsystem are available as well:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] jms-queue --help --commands
add
...
remove
To read the description of a specific command execute 'jms-queue command_name --help'.</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-DeadLetter%26Redelivery"  >
        <h5>Dead Letter &amp; Redelivery</h5>
    
            <p>
    Some of the settings are applied against an address wild card instead of a specific messaging destination. The dead letter queue and redelivery settings belong into this group:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
      &lt;address-settings&gt;
         &lt;address-setting match=&quot;#&quot;&gt;
            &lt;dead-letter-address&gt;jms.queue.DLQ&lt;/dead-letter-address&gt;
            &lt;expiry-address&gt;jms.queue.ExpiryQueue&lt;/expiry-address&gt;
            &lt;redelivery-delay&gt;0&lt;/redelivery-delay&gt;
            [...]
         &lt;/address-setting&gt;
      &lt;/address-settings&gt;
      [...]
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone-full.xml)</sub>            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-SecuritySettingsforHornetQaddressesandJMSdestinations"  >
        <h5>Security Settings for HornetQ addresses and JMS destinations</h5>
    
            <p>
    Security constraints are matched against an address wildcard, similar to the DLQ and redelivery settings. &nbsp;<strong class=" ">Note</strong>: Multiple roles are separated by spaces.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
      &lt;security-settings&gt;
         &lt;security-setting match=&quot;#&quot;&gt;
            &lt;permission type=&quot;send&quot; roles=&quot;guest&quot;/&gt;
            &lt;permission type=&quot;consume&quot; roles=&quot;guest&quot;/&gt;
            &lt;permission type=&quot;createNonDurableQueue&quot; roles=&quot;role1&quot;/&gt;
            &lt;permission type=&quot;deleteNonDurableQueue&quot; roles=&quot;role1 role2&quot;/&gt;
         &lt;/security-setting&gt;
      &lt;/security-settings&gt;
      [...]
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone-full.xml)</sub>            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-SecurityDomainforUsers"  >
        <h5>Security Domain for Users</h5>
    
            <p>
    By default, HornetQ will use the &quot;<tt class=" ">other</tt>&quot; JAAS security domain. &nbsp;This domain is used to authenticate users making connections to HornetQ and then they are authorized to perform specific functions based on their role(s) and the <tt class=" ">security-settings</tt> described above. &nbsp;This domain can be changed by using&nbsp;<tt class=" ">security-domain</tt>, e.g.:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
      &lt;security-domain&gt;mySecurityDomain&lt;/security-domain&gt;
      [...]
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ClusterAuthentication"  >
        <h5>Cluster Authentication</h5>
    
            <p>
        <span style="color: #333333;">
If the HornetQ server is configured to be clustered (    </span>
    <span style="color: #333333;">
<tt class=" ">&lt;clustered&gt;true&lt;/clustered&gt;</tt>    </span>
    <span style="color: #333333;">
), it will use the    </span>
     <span style="color: #333333;">
<tt class=" ">&lt;cluster-user&gt;</tt>    </span>
     <span style="color: #333333;">
and    </span>
     <span style="color: #333333;">
<tt class=" ">&lt;cluster-password&gt;</tt>    </span>
     <span style="color: #333333;">
attributes to connect to other HornetQ nodes in the cluster.    </span>
            </p>
                <p>
    If you do not change the default value of &lt;cluster-password&gt;, HornetQ will fail to authenticate with the error:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>HQ224018: Failed to create session: HornetQExceptionerrorType=CLUSTER_SECURITY_EXCEPTION message=HQ119099: Unable to authenticate cluster user: HORNETQ.CLUSTER.ADMIN.USER</code></pre>
        </div>
    </div>
            <p>
    To prevent this error, you must specify a value for&nbsp;<tt class=" ">&lt;cluster-password&gt;</tt>.&nbsp;It is possible to encrypt this value&nbsp;by following <a href="https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6.1/html/Security_Guide/sect-Password_Vaults_for_Sensitive_Strings.html">this guide</a>.            </p>
                <p>
    Alternatively,&nbsp;you&nbsp;can use the system property&nbsp;jboss.messaging.cluster.password to specify the cluster password from the command line.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Deploymentof%5Cjms.xmlfiles"  >
        <h5>Deployment of -jms.xml files</h5>
    
            <p>
    Starting with WildFly 8,&nbsp;you have the ability to deploy a -jms.xml file defining JMS destinations, e.g.:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;messaging-deployment xmlns=&quot;urn:jboss:messaging-deployment:1.0&quot;&gt;
   &lt;hornetq-server&gt;
      &lt;jms-destinations&gt;
         &lt;jms-queue name=&quot;sample&quot;&gt;
            &lt;entry name=&quot;jms/queue/sample&quot;/&gt;
            &lt;entry name=&quot;java:jboss/exported/jms/queue/sample&quot;/&gt;
         &lt;/jms-queue&gt;
      &lt;/jms-destinations&gt;
   &lt;/hornetq-server&gt;
&lt;/messaging-deployment&gt;</code></pre>
        </div>
    </div>
    <div class="tablewrap">
        <table>
<thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
        <img src="images/author/images/icons/emoticons/1124446108.gif" alt="images/author/images/icons/emoticons/1124446108.gif" />
                </td>
                <td rowspan="1" colspan="1">
    This feature&nbsp;<strong class=" ">is&nbsp;primarily intended for development</strong>&nbsp;as destinations deployed this way can not be managed with any of the provided management tools (e.g. console, CLI, etc).            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-JMSBridge"  >
        <h5>JMS Bridge</h5>
    
            <p>
    The function of a JMS bridge is to consume messages from a source JMS destination, and send them to a target JMS destination. Typically either the source or the target destinations are on different servers.<br/>The bridge can also be used to bridge messages from other non HornetQ JMS servers, as long as they are JMS 1.1 compliant.            </p>
                <p>
    The JMS Bridge is provided by the HornetQ project. Fo a detailed description of the available configuration properties, please consult the project documentation.            </p>
        <div class="section-6"  id="66322684_AdminGuide-Modulesforothermessagingbrokers"  >
        <h6>Modules for other messaging brokers</h6>
    
            <p>
    Source and target JMS resources (destination and connection factories) are looked up using JNDI.<br/>If either the source or the target resources are managed by another messaging server than WildFly, the required client classes must be bundled in a module. The name of the module must then be declared when the JMS Bridge is configured.            </p>
                <p>
    The use of a JMS bridges with any messaging provider will require to create a module containing the jar of this provider.            </p>
                <p>
    Let's suppose we want to use an hypothetical messaging provider named AcmeMQ. We want to bridge messages coming from a source AcmeMQ destination to a target destination on the local WildFly messaging server.&nbsp;To lookup AcmeMQ resources from JNDI, 2 jars are required, acmemq-1.2.3.jar, mylogapi-0.0.1.jar (please note these jars do not exist, this is just for the example purpose). We must <i class=" ">not</i> include a JMS jar since it will be provided by a WildFly module directly.            </p>
                <p>
    To use these resources in a JMS bridge, we must bundle them in a WildFly&nbsp;module:            </p>
                <p>
    in JBOSS_HOME/modules, we create the layout:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>modules/
`-- org
    `-- acmemq
        `-- main
            |-- acmemq-1.2.3.jar
            |-- mylogapi-0.0.1.jar
            `-- module.xml</code></pre>
        </div>
    </div>
            <p>
    We define the module in <tt class=" ">module.xml</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.acmemq&quot;&gt;
    &lt;properties&gt;
        &lt;property name=&quot;jboss.api&quot; value=&quot;private&quot;/&gt;
    &lt;/properties&gt;


    &lt;resources&gt;
        &lt;!-- insert resources required to connect to the source or target   --&gt;
        &lt;!-- messaging brokers if it not another WildFly instance           --&gt;
        &lt;resource-root path=&quot;acmemq-1.2.3.jar&quot; /&gt;
        &lt;resource-root path=&quot;mylogapi-0.0.1.jar&quot; /&gt;
    &lt;/resources&gt;


    &lt;dependencies&gt;
       &lt;!-- add the dependencies required by JMS Bridge code                --&gt;
       &lt;module name=&quot;javax.api&quot; /&gt;
       &lt;module name=&quot;javax.jms.api&quot; /&gt;
       &lt;module name=&quot;javax.transaction.api&quot;/&gt;
       &lt;module name=&quot;org.jboss.remote-naming&quot;/&gt;
       &lt;!-- we depend on org.hornetq module since we will send messages to  --&gt;
       &lt;!-- the HornetQ server embedded in the local WildFly instance       --&gt;
       &lt;module name=&quot;org.hornetq&quot; /&gt;
    &lt;/dependencies&gt;
&lt;/module&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-Configuration"  >
        <h6>Configuration</h6>
    
            <p>
    A JMS bridge is defined inside a <tt class=" ">jms-bridge</tt> section of the `messaging` subsystem in the XML configuration files.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;jms-bridge name=&quot;myBridge&quot; module=&quot;org.acmemq&quot;&gt;
      &lt;source&gt;
         &lt;connection-factory name=&quot;ConnectionFactory&quot;/&gt;
         &lt;destination name=&quot;sourceQ&quot;/&gt;
         &lt;user&gt;user1&lt;/user&gt;
         &lt;password&gt;pwd1&lt;/password&gt;
         &lt;context&gt;
            &lt;property key=&quot;java.naming.factory.initial&quot; value=&quot;org.acmemq.jndi.AcmeMQInitialContextFactory&quot;/&gt;
            &lt;property key=&quot;java.naming.provider.url&quot;    value=&quot;tcp://127.0.0.1:9292&quot;/&gt;
         &lt;/context&gt;
      &lt;/source&gt;
      &lt;target&gt;
         &lt;connection-factory name=&quot;/jms/invmTargetCF&quot;/&gt;
         &lt;destination name=&quot;/jms/targetQ&quot;/&gt;
      &lt;/target&gt;
      &lt;quality-of-service&gt;AT_MOST_ONCE&lt;/quality-of-service&gt;
      &lt;failure-retry-interval&gt;500&lt;/failure-retry-interval&gt;
      &lt;max-retries&gt;1&lt;/max-retries&gt;
      &lt;max-batch-size&gt;500&lt;/max-batch-size&gt;
      &lt;max-batch-time&gt;500&lt;/max-batch-time&gt;
      &lt;add-messageID-in-header&gt;true&lt;/add-messageID-in-header&gt;
   &lt;/jms-bridge&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">source</tt> and <tt class=" ">target</tt> sections contain the name of the JMS resource (<tt class=" ">connection-factory</tt> and <tt class=" ">destination</tt>) that will be looked up in JNDI.<br/>It optionally defines the <tt class=" ">user</tt> and <tt class=" ">password</tt> credentials. If they are set, they will be passed as arguments when creating the JMS connection from the looked up ConnectionFactory.<br/>It is also possible to define JNDI context properties in the <tt class=" ">context</tt> section. If the <tt class=" ">context</tt> section is absent, the JMS resources will be looked up in the local WildFly instance (as it is the case in the <tt class=" ">target</tt> section in the example above).            </p>
        </div>
    
    <div class="section-6"  id="66322684_AdminGuide-Managementcommands"  >
        <h6>Management commands</h6>
    
            <p>
    A JMS Bridge can also be managed using the WildFly&nbsp;command line interface:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=messaging/jms-bridge=myBridge/:add(module=&quot;org.acmemq&quot;,      \
      source-destination=&quot;sourceQ&quot;,                                                                   \
      source-connection-factory=&quot;ConnectionFactory&quot;,                                                  \
      source-user=&quot;user1&quot;,                                                                            \
      source-password=&quot;pwd1&quot;,                                                                         \
      source-context={&quot;java.naming.factory.initial&quot; =&gt; &quot;org.acmemq.jndi.AcmeMQInitialContextFactory&quot;, \
                      &quot;java.naming.provider.url&quot; =&gt; &quot;tcp://127.0.0.1:9292&quot;},                          \
      target-destination=&quot;/jms/targetQ&quot;,                                                              \
      target-connection-factory=&quot;/jms/invmTargetCF&quot;,                                                  \
      quality-of-service=AT_MOST_ONCE,                                                                \
      failure-retry-interval=500,                                                                     \
      max-retries=1,                                                                                  \
      max-batch-size=500,                                                                             \
      max-batch-time=500,                                                                             \
      add-messageID-in-header=true)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    You can also see the complete JMS Bridge resource description from the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=messaging/jms-bridge=*/:read-resource-description
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [{
        &quot;address&quot; =&gt; [
            (&quot;subsystem&quot; =&gt; &quot;messaging&quot;),
            (&quot;jms-bridge&quot; =&gt; &quot;*&quot;)
        ],
        &quot;outcome&quot; =&gt; &quot;success&quot;,
        &quot;result&quot; =&gt; {
            &quot;description&quot; =&gt; &quot;A JMS bridge instance.&quot;,
            &quot;attributes&quot; =&gt; {
                ...
        }
    }]
}</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ComponentReference2"  >
        <h5>Component Reference</h5>
    
            <p>
    The messaging subsystem is provided by the HornetQ project. For a detailed description of the available configuration properties, please consult the project documentation.            </p>
        <div class="confbox panel">
    <ul class=" "><li class=" ">            <p>
    HornetQ homepage:&nbsp;<a href="http://www.jboss.org/hornetq">http://www.jboss.org/hornetq</a>            </p>
    </li><li class=" ">            <p>
    Project Documentation: &nbsp;<a href="http://www.jboss.org/hornetq/docs">http://www.jboss.org/hornetq/docs</a>            </p>
    </li></ul>    </div>
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Web"  >
        <h4>Web</h4>
    
<div class=" error">            <p>
    Couldn't find a page to include called: <a href="https://docs.jboss.org/author/pages/createpage.action?spaceKey=WFLY8&amp;title=Web+subsystem+configuration&amp;linkCreation=true&amp;fromPageId=66322700">Web subsystem configuration</a>            </p>
    </div>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Webservices"  >
        <h4>Web services</h4>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Domainmanagement"  >
        <h3>Domain management</h3>
    
            <p>
    JBossWS components are provided to the application server through the webservices subsystem.&nbsp; JBossWS components handle the processing of WS endpoints.&nbsp; The subsystem supports the configuration of published endpoint addresses, and endpoint handler chains.&nbsp; A default webservice subsystem is provided in the server's domain and standalone configuration files.            </p>
        <div class="section-4"  id="66322684_AdminGuide-Structureofthewebservicessubsystem"  >
        <h4>Structure of the webservices subsystem</h4>
    
    <div class="section-5"  id="66322684_AdminGuide-Publishedendpointaddress"  >
        <h5>Published endpoint address</h5>
    
            <p>
    JBossWS supports the rewriting of the <tt class=" ">&lt;soap:address&gt;</tt>&nbsp;element of endpoints published in WSDL contracts.&nbsp; This feature is useful for controlling the server address that is advertised to clients for each endpoint.            </p>
                <p>
    The following elements are available and can be modified (all are optional and require server restart upon modification):            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Type            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    modify-wsdl-address            </td>
                <td rowspan="1" colspan="1">
    boolean            </td>
                <td rowspan="1" colspan="1">
    This boolean enables and disables the address rewrite functionality.<br/><br/>When modify-wsdl-address is set to true and the content of &lt;soap:address&gt; is a valid URL, JBossWS will rewrite the URL using the values of wsdl-host and wsdl-port or wsdl-secure-port.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>When modify-wsdl-address is set to false and the content of &lt;soap:address&gt; is a valid URL, JBossWS will not rewrite the URL.&nbsp; The &lt;soap:address&gt; URL will be used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br/>When the content of &lt;soap:address&gt; is not a valid URL, JBossWS will rewrite it no matter what the setting of modify-wsdl-address.<br/><br/>If modify-wsdl-address is set to true and wsdl-host is not defined or explicitly set to <i class=" ">'</i><tt class=" ">jbossws.undefined.host</tt><i class=" ">'&nbsp;</i> the content of &lt;soap:address&gt; URL is use.&nbsp; JBossWS uses the requester's host when rewriting the &lt;soap:address&gt;<br/><br/>When modify-wsdl-address is not defined JBossWS uses a default value of true.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    wsdl-host            </td>
                <td rowspan="1" colspan="1">
    string            </td>
                <td rowspan="1" colspan="1">
    The hostname / IP address to be used for rewriting <tt class=" ">&lt;soap:address&gt;</tt>.<br/>If&nbsp;<tt class=" ">wsdl-host</tt>&nbsp;is set to&nbsp;<tt class=" ">jbossws.undefined.host</tt>, JBossWS uses the requester's host when rewriting the&nbsp;<tt class=" ">&lt;soap:address&gt;</tt><br/>When wsdl-host is not defined JBossWS uses a default value of '<tt class=" ">jbossws.undefined.host</tt>'.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    wsdl-port            </td>
                <td rowspan="1" colspan="1">
    int            </td>
                <td rowspan="1" colspan="1">
    Set this property to explicitly define the HTTP port that will be used for rewriting the SOAP address.<br/>Otherwise the HTTP port will be identified by querying the list of installed HTTP connectors.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    wsdl-secure-port            </td>
                <td rowspan="1" colspan="1">
    int            </td>
                <td rowspan="1" colspan="1">
    Set this property to explicitly define the HTTPS port that will be used for rewriting the SOAP address.<br/>Otherwise the HTTPS port will be identified by querying the list of installed HTTPS connectors.            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Predefinedendpointconfigurations"  >
        <h5>Predefined endpoint configurations</h5>
    
            <p>
    JBossWS enables extra setup configuration data to be predefined and associated with an endpoint implementation.&nbsp; Predefined endpoint configurations can be used for JAX-WS client and JAX-WS endpoint setup.&nbsp; Endpoint configurations can include JAX-WS handlers and key/value properties declarations.&nbsp; This feature provides a convenient way to add handlers to WS endpoints and to set key/value properties that control JBossWS and Apache CXF internals (<a href="https://docs.jboss.org/author/display/JBWS/Apache+CXF+integration#ApacheCXFintegration-Deploymentdescriptorproperties">see Apache CXF configuration</a>).            </p>
                <p>
    The webservices subsystem provides <a href="http://www.jboss.org/schema/jbossas/jboss-as-webservices_1_2.xsd">schema</a> to support the definition of named sets of endpoint configuration data.&nbsp; Annotation, <i class=" ">org.jboss.ws.api.annotation.EndpointConfig</i> is provided to map the named configuration to the endpoint implementation.            </p>
                <p>
    There is no limit to the number of endpoint configurations that can be defined within the webservices subsystem.&nbsp; Each endpoint configuration must have a name that is unique within the webservices subsystem.&nbsp; Endpoint configurations defined in the webservices subsystem are available for reference by name through the annotation to any endpoint in a deployed application.            </p>
                <p>
    WildFly ships with two predefined endpoint configurations.&nbsp; Standard-Endpoint-Config is the default configuration.&nbsp; Recording-Endpoint-Config is an example of custom endpoint configuration and includes a recording handler.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;endpoint&quot; =&gt; {},
        &quot;modify-wsdl-address&quot; =&gt; true,
        &quot;wsdl-host&quot; =&gt; expression &quot;${jboss.bind.address:127.0.0.1}&quot;,
        &quot;endpoint-config&quot; =&gt; {
            &quot;Standard-Endpoint-Config&quot; =&gt; undefined,
            &quot;Recording-Endpoint-Config&quot; =&gt; undefined
        }
    }
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-info">
        
            <p>
    The <tt class=" ">Standard-Endpoint-Config</tt> is a special endpoint configuration.&nbsp; It is used for any endpoint that does not have an explicitly assigned endpoint configuration.            </p>
        </div>
    
    <div class="section-6"  id="66322684_AdminGuide-Endpointconfigs"  >
        <h6>Endpoint configs</h6>
    
            <p>
    Endpoint configs are defined using <tt class=" ">the endpoint-config</tt> element.&nbsp; Each endpoint configuration may include properties and handlers set to the endpoints associated to the configuration.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=Recording-Endpoint-Config:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;post-handler-chain&quot; =&gt; undefined,
        &quot;property&quot; =&gt; undefined,
        &quot;pre-handler-chain&quot; =&gt; {&quot;recording-handlers&quot; =&gt; undefined}
    }
}</code></pre>
        </div>
    </div>
            <p>
    A new endpoint configuration can be added as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=My-Endpoint-Config:add
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;response-headers&quot; =&gt; {
        &quot;operation-requires-restart&quot; =&gt; true,
        &quot;process-state&quot; =&gt; &quot;restart-required&quot;
    }
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-Handlerchains"  >
        <h6>Handler chains</h6>
    
            <p>
    Each endpoint configuration may be associated with zero or more PRE and POST handler chains.&nbsp; Each handler chain may include JAXWS handlers.&nbsp; For outbound messages the PRE handler chains are executed before any handler that is attached to the endpoint using the standard means, such as with annotation @HandlerChain, and POST handler chains are executed after those objects have executed.&nbsp; For inbound messages the POST handler chains are executed before any handler that is attached to the endpoint using the standard means and the PRE handler chains are executed after those objects have executed.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>* Server inbound messages
Client --&gt; ... --&gt; POST HANDLER --&gt; ENDPOINT HANDLERS --&gt; PRE HANDLERS --&gt; Endpoint

* Server outbound messages
Endpoint --&gt; PRE HANDLER --&gt; ENDPOINT HANDLERS --&gt; POST HANDLERS --&gt; ... --&gt; Client</code></pre>
        </div>
    </div>
            <p>
    The protocol-binding attribute must be used to set the protocols for which the chain will be triggered.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=Recording-Endpoint-Config/pre-handler-chain=recording-handlers:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;protocol-bindings&quot; =&gt; &quot;##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM&quot;,
        &quot;handler&quot; =&gt; {&quot;RecordingHandler&quot; =&gt; undefined}
    },
    &quot;response-headers&quot; =&gt; {&quot;process-state&quot; =&gt; &quot;restart-required&quot;}
}</code></pre>
        </div>
    </div>
            <p>
    A new handler chain can be added as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=My-Endpoint-Config/post-handler-chain=my-handlers:add(protocol-bindings=&quot;##SOAP11_HTTP&quot;)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;response-headers&quot; =&gt; {
        &quot;operation-requires-restart&quot; =&gt; true,
        &quot;process-state&quot; =&gt; &quot;restart-required&quot;
    }
}
[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=My-Endpoint-Config/post-handler-chain=my-handlers:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;handler&quot; =&gt; undefined,
        &quot;protocol-bindings&quot; =&gt; &quot;##SOAP11_HTTP&quot;
    },
    &quot;response-headers&quot; =&gt; {&quot;process-state&quot; =&gt; &quot;restart-required&quot;}
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-6"  id="66322684_AdminGuide-Handlers2"  >
        <h6>Handlers</h6>
    
            <p>
    JAXWS handler can be added in handler chains:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=Recording-Endpoint-Config/pre-handler-chain=recording-handlers/handler=RecordingHandler:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {&quot;class&quot; =&gt; &quot;org.jboss.ws.common.invocation.RecordingServerHandler&quot;},
    &quot;response-headers&quot; =&gt; {&quot;process-state&quot; =&gt; &quot;restart-required&quot;}
}
[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=My-Endpoint-Config/post-handler-chain=my-handlers/handler=foo-handler:add(class=&quot;org.jboss.ws.common.invocation.RecordingServerHandler&quot;)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;response-headers&quot; =&gt; {
        &quot;operation-requires-restart&quot; =&gt; true,
        &quot;process-state&quot; =&gt; &quot;restart-required&quot;
    }
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
            <div class="title">Endpoint-config handler classloading</div>
        
            <p>
    The <tt class=" ">class</tt> attribute is used to provide the fully qualified class name of the handler.&nbsp; At deploy time, an instance of the class is created for each referencing deployment.&nbsp; For class creation to succeed, either the deployment classloader or the classloader for module, <tt class=" ">org.jboss.as.webservices.server.integration,</tt> must to be able to load the handler class.            </p>
        </div>
    
    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Runtimeinformation"  >
        <h3>Runtime information</h3>
    
            <p>
    Each web service endpoint is exposed through the deployment that provides the endpoint implementation. Each endpoint can be queried as a deployment resource. For further information please consult the chapter &quot;Application Deployment&quot;. Each web service endpoint specifies a web context and a WSDL Url:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /deployment=&quot;*&quot;/subsystem=webservices/endpoint=&quot;*&quot;:read-resource
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [{
       &quot;address&quot; =&gt; [
           (&quot;deployment&quot; =&gt; &quot;jaxws-samples-handlerchain.war&quot;),
           (&quot;subsystem&quot; =&gt; &quot;webservices&quot;),
           (&quot;endpoint&quot; =&gt; &quot;jaxws-samples-handlerchain:TestService&quot;)
       ],
       &quot;outcome&quot; =&gt; &quot;success&quot;,
       &quot;result&quot; =&gt; {
           &quot;class&quot; =&gt; &quot;org.jboss.test.ws.jaxws.samples.handlerchain.EndpointImpl&quot;,
           &quot;context&quot; =&gt; &quot;jaxws-samples-handlerchain&quot;,
           &quot;name&quot; =&gt; &quot;TestService&quot;,
           &quot;type&quot; =&gt; &quot;JAXWS_JSE&quot;,
           &quot;wsdl-url&quot; =&gt; &quot;http://localhost:8080/jaxws-samples-handlerchain?wsdl&quot;
       }
   }]
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-ComponentReference3"  >
        <h3>Component Reference</h3>
    
            <p>
        <span style="color: #333333;">
The web service subsystem is provided by the JBossWS project. For a detailed description of the available configuration properties, please consult the project documentation.    </span>
            </p>
        <div class="confbox panel">
    <ul class=" "><li class=" ">            <p>
    JBossWS homepage:&nbsp;<a href="http://www.jboss.org/jbossws">http://www.jboss.org/jbossws</a>            </p>
    </li><li class=" ">            <p>
    Project Documentation: &nbsp;<a href="https://docs.jboss.org/author/display/JBWS">https://docs.jboss.org/author/display/JBWS</a>            </p>
    </li></ul>    </div>
    <div class="section-4"  id="66322684_AdminGuide-Logging"  >
        <h4>Logging</h4>
    
<ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Overview">Overview</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Attributes">Attributes</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7Baddloggingapidependencies%7D%7D"> <tt class=" ">add-logging-api-dependencies</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-%7B%7Busedeploymentloggingconfig%7D%7D"> <tt class=" ">use-deployment-logging-config</tt></a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-PerdeploymentLogging">Per-deployment Logging</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-LoggingProfiles">Logging Profiles</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-DefaultLogFileLocations">Default Log File Locations</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ManagedDomain">Managed Domain</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-StandaloneServer">Standalone Server</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-FilterExpressions">Filter Expressions</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ListLogFilesandReadingLogFiles">List Log Files and Reading Log Files</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ListLogFiles">List Log Files</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ReadLogFile">Read Log File</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-FAQ">FAQ</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Whyistherea%7B%7Blogging.properties%7D%7Dfile%3F">Why is there a <tt class=" ">logging.properties</tt> file?</a>            </p>
    </li></ul></li></ul>            <p>
                </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Overview2"  >
        <h4>Overview</h4>
    
            <p>
    The overall server logging configuration is represented by the logging subsystem. It consists of four notable parts: <tt class=" ">handler</tt> configurations, <tt class=" ">logger</tt>, the <tt class=" ">root logger</tt> declarations (aka log categories) and logging profiles. Each logger does reference a handler (or set of handlers). Each handler declares the log format and output:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:logging:1.0&quot;&gt;
   &lt;console-handler name=&quot;CONSOLE&quot; autoflush=&quot;true&quot;&gt;
       &lt;level name=&quot;DEBUG&quot;/&gt;
       &lt;formatter&gt;
           &lt;pattern-formatter pattern=&quot;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n&quot;/&gt;
       &lt;/formatter&gt;
   &lt;/console-handler&gt;
   &lt;periodic-rotating-file-handler name=&quot;FILE&quot; autoflush=&quot;true&quot;&gt;
       &lt;formatter&gt;
           &lt;pattern-formatter pattern=&quot;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n&quot;/&gt;
       &lt;/formatter&gt;
       &lt;file relative-to=&quot;jboss.server.log.dir&quot; path=&quot;server.log&quot;/&gt;
       &lt;suffix value=&quot;.yyyy-MM-dd&quot;/&gt;
   &lt;/periodic-rotating-file-handler&gt;
   &lt;logger category=&quot;com.arjuna&quot;&gt;
       &lt;level name=&quot;WARN&quot;/&gt;
   &lt;/logger&gt;
   [...]
   &lt;root-logger&gt;
       &lt;level name=&quot;DEBUG&quot;/&gt;
       &lt;handlers&gt;
           &lt;handler name=&quot;CONSOLE&quot;/&gt;
           &lt;handler name=&quot;FILE&quot;/&gt;
       &lt;/handlers&gt;
   &lt;/root-logger&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
                </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Attributes2"  >
        <h4>Attributes</h4>
    
            <p>
    The root resource contains two notable attributes <tt class=" ">add-logging-api-dependencies</tt> and <tt class=" ">use-deployment-logging-config</tt>.            </p>
        <div class="section-5"  id="66322684_AdminGuide-%7B%7Baddloggingapidependencies%7D%7D"  >
        <h5>logging-api-dependencies</h5>
    
            <p>
    The <tt class=" ">add-logging-api-dependencies</tt> controls whether or not the container adds <a href="https://docs.jboss.org/author/display/WFLY8/Implicit+module+dependencies+for+deployments#Implicitmoduledependenciesfordeployments-ImplicitmoduledependenciesfordeploymentsWhicha...">implicit</a> logging API dependencies to your deployments. If set to <tt class=" ">true</tt>, the default, all the implicit logging API dependencies are added. If set to <tt class=" ">false</tt> the dependencies are not added to your deployments.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-%7B%7Busedeploymentloggingconfig%7D%7D"  >
        <h5>deployment-logging-config</h5>
    
            <p>
    The <tt class=" ">use-deployment-logging-config</tt> controls whether or not your deployment is scanned for <a href="66322684.html#66322684_AdminGuide-PerdeploymentLogging">per-deployment logging</a>. If set to <tt class=" ">true</tt>, the default, <a href="66322684.html#66322684_AdminGuide-PerdeploymentLogging">per-deployment logging</a> is enabled. Set to <tt class=" ">false</tt> to disable this feature.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-PerdeploymentLogging"  >
        <h4>deployment Logging</h4>
    
            <p>
    Per-deployment logging allows you to add a logging configuration file to your deployment and have the logging for that deployment configured according to the configuration file. In an EAR the configuration should be in the <tt class=" ">META-INF</tt> directory. In a WAR or JAR deployment the configuration file can be in either the <tt class=" ">META-INF</tt> or <tt class=" ">WEB-INF</tt> directories.            </p>
                <p>
    The following configuration files are allowed:            </p>
    <ul class=" "><li class=" ">            <p>
    logging.properties            </p>
    </li><li class=" ">            <p>
    jboss-logging.properties            </p>
    </li><li class=" ">            <p>
    log4j.properties            </p>
    </li><li class=" ">            <p>
    log4j.xml            </p>
    </li><li class=" ">            <p>
    jboss-log4j.xml            </p>
    </li></ul>            <p>
    You can also disable this functionality by changing the <tt class=" ">use-deployment-logging-config</tt> attribute to <tt class=" ">false</tt>.            </p>
                <p>
                </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-LoggingProfiles"  >
        <h4>Logging Profiles</h4>
    
            <p>
    Logging profiles are like additional logging subsystems. Each logging profile constists of three of the four notable parts listed above: <tt class=" ">handler</tt> configurations, <tt class=" ">logger</tt> and the <tt class=" ">root logger</tt> declarations.            </p>
                <p>
    You can assign a logging profile to a deployment via the deployments manifest. Add a <tt class=" ">Logging-Profile</tt> entry to the <tt class=" ">MANIFEST.MF</tt> file with a value of the logging profile id. For example a logging profile defined on <tt class=" ">/subsystem=logging/logging-profile=ejbs</tt> the MANIFEST.MF would look like:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>Manifest-Version: 1.0
Logging-Profile: ejbs</code></pre>
        </div>
    </div>
            <p>
    A logging profile can be assigned to any number of deployments. Using a logging profile also allows for runtime changes to the configuration. This is an advantage over the per-deployment logging configuration as the redeploy is not required for logging changes to take affect.            </p>
                <p>
                </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-DefaultLogFileLocations"  >
        <h4>Default Log File Locations</h4>
    
    <div class="section-5"  id="66322684_AdminGuide-ManagedDomain5"  >
        <h5>Managed Domain</h5>
    
            <p>
    In a managed domain two types of log files do exist: Controller and server logs. The controller components govern the domain as whole. It's their responsibility to start/stop server instances and execute managed operations throughout the domain. Server logs contain the logging information for a particular server instance. They are co-located with the host the server is running on.            </p>
                <p>
    For the sake of simplicity we look at the default setup for managed domain. In this case, both the domain controller components and the servers are located on the same host:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Process            </td>
                <td rowspan="1" colspan="1">
    Log File            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Host Controller            </td>
                <td rowspan="1" colspan="1">
    ./domain/log/host-controller.log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    Process Controller            </td>
                <td rowspan="1" colspan="1">
    ./domain/log/process-controller.log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    &quot;Server One&quot;            </td>
                <td rowspan="1" colspan="1">
    ./domain/servers/server-one/log/server.log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    &quot;Server Two&quot;            </td>
                <td rowspan="1" colspan="1">
    ./domain/servers/server-two/log/server.log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    &quot;Server Three&quot;            </td>
                <td rowspan="1" colspan="1">
    ./domain/servers/server-three/log/server.log            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-StandaloneServer3"  >
        <h5>Standalone Server</h5>
    
            <p>
    The default log files for a standalone server can be found in the log subdirectory of the distribution:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Process            </td>
                <td rowspan="1" colspan="1">
    Log File            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Server            </td>
                <td rowspan="1" colspan="1">
    ./standalone/log/server.log            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
                </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-FilterExpressions"  >
        <h4>Filter Expressions</h4>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Filter Type            </td>
                <td rowspan="1" colspan="1">
    Expression            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
                <td rowspan="1" colspan="1">
    Parameter(s)            </td>
                <td rowspan="1" colspan="1">
    Examples            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    accept            </td>
                <td rowspan="1" colspan="1">
    accept            </td>
                <td rowspan="1" colspan="1">
    Accepts all log messages.            </td>
                <td rowspan="1" colspan="1">
    None            </td>
                <td rowspan="1" colspan="1">
    accept            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    deny            </td>
                <td rowspan="1" colspan="1">
    deny            </td>
                <td rowspan="1" colspan="1">
    enies all log messages.            </td>
                <td rowspan="1" colspan="1">
    None            </td>
                <td rowspan="1" colspan="1">
    deny            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    not            </td>
                <td rowspan="1" colspan="1">
    not(filterExpression)            </td>
                <td rowspan="1" colspan="1">
    Accepts a filter as an argument and inverts the returned value.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a single filter for it's argument.            </td>
                <td rowspan="1" colspan="1">
    not(match(&quot;JBAS&quot;))            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    all            </td>
                <td rowspan="1" colspan="1">
    all(filterExpressions)            </td>
                <td rowspan="1" colspan="1">
    A filter consisting of several filters in a chain. If any filter find the log message to be unloggable, the message will not be logged and subsequent filters will not be checked.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a comma delimited list of filters for it's argument.            </td>
                <td rowspan="1" colspan="1">
    all(match(&quot;JBAS&quot;), match(&quot;WELD&quot;))            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    any            </td>
                <td rowspan="1" colspan="1">
    any(filterExpressions)            </td>
                <td rowspan="1" colspan="1">
    A filter consisting of several filters in a chain. If any filter fins the log message to be loggable, the message will be logged and the subsequent filters will not be checked.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a comma delimited list of filters for it's argument.            </td>
                <td rowspan="1" colspan="1">
    any(match(&quot;JBAS&quot;), match(&quot;WELD&quot;))            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    levelChange            </td>
                <td rowspan="1" colspan="1">
    levelChange(level)            </td>
                <td rowspan="1" colspan="1">
    A filter which modifies the log record with a new level.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a single string based level for it's argument.            </td>
                <td rowspan="1" colspan="1">
    levelChange(&quot;WARN&quot;)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    levels            </td>
                <td rowspan="1" colspan="1">
    levels(levels)            </td>
                <td rowspan="1" colspan="1">
    A filter which includes log messages with a level that is listed in the list of levels.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a comma delimited list of string based levels for it's argument.            </td>
                <td rowspan="1" colspan="1">
    levels(&quot;DEBUG&quot;, &quot;INFO&quot;, &quot;WARN&quot;, &quot;ERROR&quot;)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    levelRange            </td>
                <td rowspan="1" colspan="1">
    levelRange([minLevel,maxLevel])            </td>
                <td rowspan="1" colspan="1">
    A filter which logs records that are within the level range.            </td>
                <td rowspan="1" colspan="1">
    The filter expression uses a &quot;[&quot; to indicate a minimum inclusive level and a &quot;]&quot; to indicate a maximum inclusive level. Otherwise use &quot;(&quot; or &quot;)&quot; respectively indicate exclusive. The first argument for the expression is the minimum level allowed, the second argument is the maximum level allowed.            </td>
                <td rowspan="1" colspan="1">
    <ul class="alternate "><li class=" ">            <p>
    minimum level must be less than ERROR and the maximum level must be greater than DEBUG<br/><br/>levelRange(&quot;ERROR&quot;, &quot;DEBUG&quot;)            </p>
    </li><li class=" ">            <p>
    minimum level must be less than or equal to ERROR and the maximum level must be greater than DEBUG<br/><br/>levelRange[&quot;ERROR&quot;, &quot;DEBUG&quot;)            </p>
    </li><li class=" ">            <p>
    minimum level must be less than or equal to ERROR and the maximum level must be greater or equal to INFO<br/><br/>levelRange[&quot;ERROR&quot;, &quot;INFO&quot;]            </p>
    </li></ul>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    match            </td>
                <td rowspan="1" colspan="1">
    match(&quot;pattern&quot;)            </td>
                <td rowspan="1" colspan="1">
    A regular-expression based filter. The raw unformatted message is used against the pattern.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a regular expression for it's argument. match(&quot;JBAS\d+&quot;)            </td>
                <td rowspan="1" colspan="1">
                </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    substitute            </td>
                <td rowspan="1" colspan="1">
    substitute(&quot;pattern&quot;, &quot;replacement value&quot;)            </td>
                <td rowspan="1" colspan="1">
    A filter which replaces the first match to the pattern with the replacement value.            </td>
                <td rowspan="1" colspan="1">
    The first argument for the expression is the pattern the second argument is the replacement text.            </td>
                <td rowspan="1" colspan="1">
    substitute(&quot;JBAS&quot;, &quot;EAP&quot;)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    substituteAll            </td>
                <td rowspan="1" colspan="1">
    substituteAll(&quot;pattern&quot;, &quot;replacement value&quot;)            </td>
                <td rowspan="1" colspan="1">
    A filter which replaces all matches of the pattern with the replacement value.            </td>
                <td rowspan="1" colspan="1">
    The first argument for the expression is the pattern the second argument is the replacement text.            </td>
                <td rowspan="1" colspan="1">
    substituteAll(&quot;JBAS&quot;, &quot;EAP&quot;)            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ListLogFilesandReadingLogFiles"  >
        <h4>List Log Files and Reading Log Files</h4>
    
            <p>
    Log files can be listed and viewed via management operations. The log files allowed to be listed and/or viewed is intentionally limited to files that exist in the <tt class=" ">jboss.server.log.dir</tt> and are associated with a known file handler. Known file handler types include <tt class=" ">file-handler</tt>, <tt class=" ">periodic-rotating-file-handler</tt> and <tt class=" ">size-rotating-file-handler</tt>. The operations are valid in both standalone and domain modes.            </p>
        <div class="section-5"  id="66322684_AdminGuide-ListLogFiles"  >
        <h5>List Log Files</h5>
    
            <p>
    The <tt class=" ">list-log-files</tt> operation is available on the root logging resource, <tt class=" ">/subsystem=logging</tt> in standalone CLI syntax. The files listed are the only files allowed to be read by the <tt class=" ">read-log-file</tt> operation.            </p>
        <div class="confbox programlisting">
                    <div class="title">CLI command and output</div>
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=logging:list-log-files
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        {
            &quot;file-name&quot; =&gt; &quot;server.log&quot;,
            &quot;file-size&quot; =&gt; 10973L,
            &quot;last-modified-date&quot; =&gt; &quot;2014-02-14T14:16:49.000-0800&quot;
        },
        {
            &quot;file-name&quot; =&gt; &quot;server.log.2014-02-12&quot;,
            &quot;file-size&quot; =&gt; 27688L,
            &quot;last-modified-date&quot; =&gt; &quot;2014-02-12T11:20:35.000-0800&quot;
        },
        {
            &quot;file-name&quot; =&gt; &quot;server.log.2014-02-13&quot;,
            &quot;file-size&quot; =&gt; 359154L,
            &quot;last-modified-date&quot; =&gt; &quot;2014-02-13T20:43:49.000-0800&quot;
        }
    ]
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ReadLogFile"  >
        <h5>Read Log File</h5>
    
            <p>
    The <tt class=" ">read-log-file</tt> operation is available on the root logging resource, <tt class=" ">/subsystem=logging</tt> in standalone CLI syntax. Only files available in the <tt class=" ">list-log-files</tt> operation are allowed to be read. This operation has one required parameters and 4 additional parameters.            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    name (required)            </td>
                <td rowspan="1" colspan="1">
    the name of the log file to be read            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    encoding            </td>
                <td rowspan="1" colspan="1">
    the encoding the file should be read in            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    lines            </td>
                <td rowspan="1" colspan="1">
    the number of lines from the file. A value of -1 indicates all lines should be read.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    skip            </td>
                <td rowspan="1" colspan="1">
    the number of lines to skip before reading.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    tail            </td>
                <td rowspan="1" colspan="1">
    true to read from the end of the file up or false to read top down.            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="confbox programlisting">
                    <div class="title">CLI command and output</div>
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=logging:read-log-file(name=server.log)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        &quot;2014-02-14 14:16:48,781 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-11) JBAS015012: Started FileSystemDeploymentService for directory /home/jperkins/servers/wildfly-8.0.0.Final/standalone/deployments&quot;,
        &quot;2014-02-14 14:16:48,782 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-8) JBAS010400: Bound data source [java:jboss/myDs]&quot;,
        &quot;2014-02-14 14:16:48,782 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-15) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]&quot;,
        &quot;2014-02-14 14:16:48,786 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of \&quot;simple-servlet.war\&quot; (runtime-name: \&quot;simple-servlet.war\&quot;)&quot;,
        &quot;2014-02-14 14:16:48,978 INFO  [org.jboss.ws.common.management] (MSC service thread 1-10) JBWS022052: Starting JBoss Web Services - Stack CXF Server 4.2.3.Final&quot;,
        &quot;2014-02-14 14:16:49,160 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-16) JBAS017534: Registered web context: /simple-servlet&quot;,
        &quot;2014-02-14 14:16:49,189 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed \&quot;simple-servlet.war\&quot; (runtime-name : \&quot;simple-servlet.war\&quot;)&quot;,
        &quot;2014-02-14 14:16:49,224 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://127.0.0.1:9990/management&quot;,
        &quot;2014-02-14 14:16:49,224 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990&quot;,
        &quot;2014-02-14 14:16:49,225 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: WildFly 8.0.0.Final \&quot;WildFly\&quot; started in 1906ms - Started 258 of 312 services (90 services are lazy, passive or on-demand)&quot;
    ]
}</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-FAQ"  >
        <h4>FAQ</h4>
    
    <div class="section-5"  id="66322684_AdminGuide-Whyistherea%7B%7Blogging.properties%7D%7Dfile%3F"  >
        <h5>Why is there a  logging.properties  file?</h5>
    
            <p>
    You may have noticed that there is a <tt class=" ">logging.properties</tt> file in the configuration directory. This logging configuration is used when the server boots up until the logging subsystem kicks in. If the logging subsystem is not included in your configuration, then this would act as the logging configuration for the entire server.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    The <tt class=" ">logging.properties</tt> file is overwritten at boot and with each change to the logging subsystem. Any changes made to the file are not persisted. Any changes made to the XML configuration or via management operations will be persisted to the <tt class=" ">logging.properties</tt> file and used on the next boot.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-JMX2"  >
        <h4>JMX</h4>
    
            <p>
    The JMX subsystem registers a service with the Remoting endpoint so that remote access to JMX can be obtained over the exposed Remoting connector.            </p>
                <p>
    This is switched on by default in standalone mode and accessible over port 9990 but in domain mode is switched off so needs to be enabled - in domain mode the port will be the port of the Remoting connector for the WildFly 8&nbsp;instance to be monitored.            </p>
                <p>
    To use the connector you can access it in the standard way using a <tt class=" ">service:jmx</tt> URL:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>import javax.management.MBeanServerConnection;
import javax.management.remote.JMXConnector;
import javax.management.remote.JMXConnectorFactory;
import javax.management.remote.JMXServiceURL;

public class JMXExample {

    public static void main(String[] args) throws Exception {
        //Get a connection to the WildFly 8 MBean server on localhost
        String host = &quot;localhost&quot;;
        int port = 9990;  // management-web port
        String urlString =
            System.getProperty(&quot;jmx.service.url&quot;,&quot;service:jmx:http-remoting-jmx://&quot; + host + &quot;:&quot; + port);
        JMXServiceURL serviceURL = new JMXServiceURL(urlString);
        JMXConnector jmxConnector = JMXConnectorFactory.connect(serviceURL, null);
        MBeanServerConnection connection = jmxConnector.getMBeanServerConnection();

        //Invoke on the WildFly 8 MBean server
        int count = connection.getMBeanCount();
        System.out.println(count);
       &nbsp;jmxConnector.close();
    }
}</code></pre>
        </div>
    </div>
            <p>
    You also need to set your classpath when running the above example.&nbsp; The following script covers Linux.&nbsp; If your environment is much different, paste your script when you have it working.            </p>
        <div class="confbox panel">
                <p>
    !/bin/bash            </p>
                <p>
    # specify your WildFly 8&nbsp;folder<br/>export YOUR_JBOSS_HOME=~/WildFly8            </p>
                <p>
    java -classpath $YOUR_JBOSS_HOME/bin/client/jboss-client.jar:./ JMXExample            </p>
        </div>
            <p>
    You can also connect using jconsole.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    If using jconsole use the <tt class=" ">jconsole.sh</tt> and <tt class=" ">jconsole.bat</tt> scripts included in the /bin directory of the WildFly 8&nbsp;distribution as these set the classpath as required to connect over Remoting.            </p>
        </div>
    
            <p>
    In addition to the standard JVM MBeans, the WildFly 8&nbsp;MBean server contains the following MBeans:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    JMX ObjectName            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.msc:type=container,name=jboss-as</tt>            </td>
                <td rowspan="1" colspan="1">
    Exposes management operations on the JBoss Modular Service Container, which is the dependency injection framework at the heart of WildFly 8. It is useful for debugging dependency problems, for example if you are integrating your own subsystems, as it exposes operations to dump all services and their current states            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.naming:type=JNDIView</tt>            </td>
                <td rowspan="1" colspan="1">
    Shows what is bound in JNDI            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.modules:type=ModuleLoader,name=*</tt>            </td>
                <td rowspan="1" colspan="1">
    This collection of MBeans exposes management operations on JBoss Modules classloading layer. It is useful for debugging dependency problems arising from missing module dependencies            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Auditlogging2"  >
        <h4>Audit logging</h4>
    
            <p>
    Audit logging for the JMX MBean server managed by the JMX subsystem. The resource is at <tt class=" ">/subsystem=jmx/configuration=audit-log</tt> and its attributes are similar to the ones mentioned for <tt class=" ">/core-service=management/access=audit/logger=audit-log</tt> in <a href="69536296.html">Audit logging</a>.            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">enabled</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> to enable logging of the JMX operations            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">log-boot</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> to log the JMX operations when booting the server, <tt class=" ">false</tt> otherwise            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">log-read-only</tt>            </td>
                <td rowspan="1" colspan="1">
    If <tt class=" ">true</tt> all operations will be audit logged, if <tt class=" ">false</tt> only operations that change the model will be logged            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    Then which handlers are used to log the management operations are configured as <tt class=" ">handler=*</tt> children of the logger. These handlers and their formatters are defined in the global <tt class=" ">/core-service=management/access=audit</tt> section mentioned in <a href="69536296.html">Audit logging</a>.            </p>
        <div class="section-5"  id="66322684_AdminGuide-JSONFormatter2"  >
        <h5>JSON Formatter</h5>
    
            <p>
    The same JSON Formatter is used as described in <a href="69536296.html">Audit logging</a>. However the records for MBean Server invocations have slightly different fields from those logged for the core management layer.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>2013-08-29 18:26:29 - {
    &quot;type&quot; : &quot;jmx&quot;,
    &quot;r/o&quot; : false,
    &quot;booting&quot; : false,
    &quot;version&quot; : &quot;8.0.0.Beta1-SNAPSHOT&quot;,
    &quot;user&quot; : &quot;$local&quot;,
    &quot;domainUUID&quot; : null,
    &quot;access&quot; : &quot;JMX&quot;,
    &quot;remote-address&quot; : &quot;127.0.0.1/127.0.0.1&quot;,
    &quot;method&quot; : &quot;invoke&quot;,
    &quot;sig&quot; : [
        &quot;javax.management.ObjectName&quot;,
        &quot;java.lang.String&quot;,
        &quot;[Ljava.lang.Object;&quot;,
        &quot;[Ljava.lang.String;&quot;
    ],
    &quot;params&quot; : [
        &quot;java.lang:type=Threading&quot;,
        &quot;getThreadInfo&quot;,
        &quot;[Ljava.lang.Object;@5e6c33c&quot;,
        &quot;[Ljava.lang.String;@4b681c69&quot;
    ]
}</code></pre>
        </div>
    </div>
            <p>
    It includes an optional timestamp and then the following information in the json record            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Field name            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">type</tt>            </td>
                <td rowspan="1" colspan="1">
    This will have the value <tt class=" ">jmx</tt> meaning it comes from the jmx subsystem            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">r/o</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation has read only impact on the MBean(s)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">booting</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation was executed during the bootup process, <tt class=" ">false</tt> if it was executed once the server is up and running            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">version</tt>            </td>
                <td rowspan="1" colspan="1">
    The version number of the WildFly instance            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">user</tt>            </td>
                <td rowspan="1" colspan="1">
    The username of the authenticated user.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">domainUUID</tt>            </td>
                <td rowspan="1" colspan="1">
    This is not currently populated for JMX operations            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">access</tt>            </td>
                <td rowspan="1" colspan="1">
    This can have one of the following values:<br/>*<tt class=" ">NATIVE</tt> - The operation came in through the native management interface, for example the CLI<br/>*<tt class=" ">HTTP</tt> - The operation came in through the domain HTTP interface, for example the admin console<br/>*<tt class=" ">JMX</tt> - The operation came in through the JMX subsystem. See <a href="66322718.html">JMX</a> for how to configure audit logging for JMX.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">remote-address</tt>            </td>
                <td rowspan="1" colspan="1">
    The address of the client executing this operation            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">method</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of the called MBeanServer method            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">sig</tt>            </td>
                <td rowspan="1" colspan="1">
    The signature of the called called MBeanServer method            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">params</tt>            </td>
                <td rowspan="1" colspan="1">
    The actual parameters passed in to the MBeanServer method, a simple <tt class=" ">Object.toString()</tt> is called on each parameter.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">error</tt>            </td>
                <td rowspan="1" colspan="1">
    If calling the MBeanServer method resulted in an error, this field will be populated with <tt class=" ">Throwable.getMessage()</tt>            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-OSGi"  >
        <h4>OSGi</h4>
    
            <p>
    OSGi functionality in WildFly 8&nbsp;is provided through the OSGi subsystem.            </p>
                <p>
    The documentation of this functionality can be found at the <a href="https://docs.jboss.org/author/display/JBOSGI/JBoss+OSGi+Home">JBoss OSGi documentation pages</a>.            </p>
                <p>
    Integration with WildFly&nbsp;and reference the the OSGi subsystem in the WildFly&nbsp;XML configuration file can be found in the <a href="https://docs.jboss.org/author/display/JBOSGI/Application+Server+Integration">Application Server Integration</a> section.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    More information on the OSGi component in WildFly&nbsp;can be found on the <a href="http://www.jboss.org/jbossas/osgi">JBoss OSGi project pages</a>.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-DeploymentScanner"  >
        <h4>Deployment Scanner</h4>
    
            <p>
    The deployment scanner is only used in standalone mode. Its job is to monitor a directory for new files and to deploy those files. It can be found in <tt class=" ">standalone.xml</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:deployment-scanner:1.0&quot;&gt;
   &lt;deployment-scanner scan-interval=&quot;5000&quot;
      relative-to=&quot;jboss.server.base.dir&quot; path=&quot;deployments&quot; /&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    You can define more <tt class=" ">deployment-scanner</tt> entries to scan for deployments from more locations. The configuration showed will scan the <tt class=" ">JBOSS_HOME/standalone/deployments</tt> directory every five seconds. The runtime model is shown below, and uses default values for attributes not specified in the xml:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=deployment-scanner:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {&quot;scanner&quot; =&gt; {&quot;default&quot; =&gt; {
        &quot;auto-deploy-exploded&quot; =&gt; false,
        &quot;auto-deploy-zipped&quot; =&gt; true,
        &quot;deployment-timeout&quot; =&gt; 60L,
        &quot;name&quot; =&gt; &quot;default&quot;,
        &quot;path&quot; =&gt; &quot;deployments&quot;,
        &quot;relative-to&quot; =&gt; &quot;jboss.server.base.dir&quot;,
        &quot;scan-enabled&quot; =&gt; true,
        &quot;scan-interval&quot; =&gt; 5000
    }}}
}</code></pre>
        </div>
    </div>
            <p>
    The attributes are            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Type            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">name</tt>            </td>
                <td rowspan="1" colspan="1">
    STRING            </td>
                <td rowspan="1" colspan="1">
    The name of the scanner. <tt class=" ">default</tt> is used if not specified            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">path</tt>            </td>
                <td rowspan="1" colspan="1">
    STRING            </td>
                <td rowspan="1" colspan="1">
    The actual filesystem path to be scanned. Treated as an absolute path, unless the 'relative-to' attribute is specified, in which case the value is treated as relative to that path.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">relative-to</tt>            </td>
                <td rowspan="1" colspan="1">
    STRING            </td>
                <td rowspan="1" colspan="1">
    Reference to a filesystem path defined in the &quot;paths&quot; section of the server configuration, or one of the system properties specified on startup. In the example above <tt class=" ">jboss.server.base.dir</tt> resolves to&nbsp;<tt class=" ">JBOSS_HOME/standalone</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">scan-enabled</tt>            </td>
                <td rowspan="1" colspan="1">
    BOOLEAN            </td>
                <td rowspan="1" colspan="1">
    If true scanning is enabled            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">scan-interval</tt>            </td>
                <td rowspan="1" colspan="1">
    INT            </td>
                <td rowspan="1" colspan="1">
    Periodic interval, in milliseconds, at which the repository should be scanned for changes. A value of less than 1 indicates the repository should only be scanned at initial startup.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">auto-deploy-zipped</tt>            </td>
                <td rowspan="1" colspan="1">
    BOOLEAN            </td>
                <td rowspan="1" colspan="1">
    Controls whether zipped deployment content should be automatically deployed by the scanner without requiring the user to add a .dodeploy marker file.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">auto-deploy-exploded</tt>            </td>
                <td rowspan="1" colspan="1">
    BOOLEAN            </td>
                <td rowspan="1" colspan="1">
    Controls whether exploded deployment content should be automatically deployed by the scanner without requiring the user to add a .dodeploy marker file. Setting this to 'true' is not recommended for anything but basic development scenarios,  as there is no way to ensure that deployment will not occur in the middle of changes to the content.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">deployment-timeout</tt>            </td>
                <td rowspan="1" colspan="1">
    LONG            </td>
                <td rowspan="1" colspan="1">
    Timeout, in seconds, a deployment is allows to execute before being canceled.  The default is 60 seconds.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    Deployment scanners can be added by modifying <tt class=" ">standalone.xml</tt> before starting up the server or they can be added and removed at runtime using the CLI            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=deployment-scanner/scanner=new:add(scan-interval=10000,relative-to=&quot;jboss.server.base.dir&quot;,path=&quot;other-deployments&quot;)
{&quot;outcome&quot; =&gt; &quot;success&quot;}
[standalone@localhost:9999 /] /subsystem=deployment-scanner/scanner=new:remove
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    You can also change the attributes at runtime, so for example to turn off scanning you can do            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=deployment-scanner/scanner=default:write-attribute(name=&quot;scan-enabled&quot;,value=false)
{&quot;outcome&quot; =&gt; &quot;success&quot;}
[standalone@localhost:9999 /] /subsystem=deployment-scanner:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {&quot;scanner&quot; =&gt; {&quot;default&quot; =&gt; {
        &quot;auto-deploy-exploded&quot; =&gt; false,
        &quot;auto-deploy-zipped&quot; =&gt; true,
        &quot;deployment-timeout&quot; =&gt; 60L,
        &quot;name&quot; =&gt; &quot;default&quot;,
        &quot;path&quot; =&gt; &quot;deployments&quot;,
        &quot;relative-to&quot; =&gt; &quot;jboss.server.base.dir&quot;,
        &quot;scan-enabled&quot; =&gt; false,
        &quot;scan-interval&quot; =&gt; 5000
    }}}
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Threadssubsystemconfiguration"  >
        <h4>Threads subsystem configuration</h4>
    
    <div class="section-5"  id="66322684_AdminGuide-Definingthreadpools"  >
        <h5>Defining thread pools</h5>
    
            <p>
    Subsystems can reference thread  pools defined by the threading subsystem. Externalizing thread pool in  this way has the additional advantage of being able to manage the thread  pools via native WildFly management mechanisms, and allows you to  share thread pools across subsystems. For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:threads:1.0&quot;&gt;
    &lt;thread-factory name=&quot;infinispan-factory&quot; priority=&quot;1&quot;/&gt;
    &lt;bounded-queue-thread-pool name=&quot;infinispan-transport&quot;&gt;
        &lt;core-threads count=&quot;1&quot;/&gt;
        &lt;queue-length count=&quot;100000&quot;/&gt;
        &lt;max-threads count=&quot;25&quot;/&gt;
        &lt;thread-factory name=&quot;infinispan-factory&quot;/&gt;
    &lt;/bounded-queue-thread-pool&gt;
    &lt;bounded-queue-thread-pool name=&quot;infinispan-listener&quot;&gt;
        &lt;core-threads count=&quot;1&quot;/&gt;
        &lt;queue-length count=&quot;100000&quot;/&gt;
        &lt;max-threads count=&quot;1&quot;/&gt;
        &lt;thread-factory name=&quot;infinispan-factory&quot;/&gt;
    &lt;/bounded-queue-thread-pool&gt;
    &lt;scheduled-thread-pool name=&quot;infinispan-eviction&quot;&gt;
        &lt;max-threads count=&quot;1&quot;/&gt;
        &lt;thread-factory name=&quot;infinispan-factory&quot;/&gt;
    &lt;/scheduled-thread-pool&gt;
    &lt;scheduled-thread-pool name=&quot;infinispan-repl-queue&quot;&gt;
        &lt;max-threads count=&quot;1&quot;/&gt;
        &lt;thread-factory name=&quot;infinispan-factory&quot;/&gt;
    &lt;/scheduled-thread-pool&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    Infinispan configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;cache-container name=&quot;web&quot; default-cache=&quot;repl&quot; listener-executor=&quot;infinispan-listener&quot; eviction-executor=&quot;infinispan-eviction&quot; replication-queue-executor=&quot;infinispan-repl-queue&quot;&gt;
    &lt;transport executor=&quot;infinispan-transport&quot;/&gt;
    &lt;replicated-cache name=&quot;repl&quot; mode=&quot;ASYNC&quot; batching=&quot;true&quot;&gt;
        &lt;locking isolation=&quot;REPEATABLE_READ&quot;/&gt;
        &lt;file-store/&gt;
    &lt;/replicated-cache&gt;
&lt;/cache-container&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Operationrequestexamples"  >
        <h5>Operation request examples</h5>
    
            <p>
    &#65279;            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/profile=production/subsystem=threads/bounded-queue-thread-pool=pool1:write-core-threads (count=0, per-cpu=20)</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Simpleconfigurationsubsystems"  >
        <h4>Simple configuration subsystems</h4>
    
            <p>
    The following subsystems currently have no configuration beyond its root element in the configuration            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:ejb3:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:jaxrs:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:sar:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:threads:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:weld:1.0&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    The presence of each of these turns on a piece of functionality:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">EJB3</tt>            </td>
                <td rowspan="1" colspan="1">
    Enables the deployment and functionality of EJB 3.1 applications.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">JAXRS</tt>            </td>
                <td rowspan="1" colspan="1">
    Enables the deployment and functionality of JAX-RS applications. This is implemented by the RestEasy project            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">Remoting</tt>            </td>
                <td rowspan="1" colspan="1">
    Turns on the remoting subsystem, which is used for the management communication and will be what underlies remote JNDI lookups and remote EJB calls in a future release.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">Sar</tt>            </td>
                <td rowspan="1" colspan="1">
    Enables the deployment of .SAR archives containing MBean services, as supported by previous versions of&nbsp;WildFly            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">Threads</tt>            </td>
                <td rowspan="1" colspan="1">
    This subsystem is being deprecated and will not be part of the next release            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">Weld</tt>            </td>
                <td rowspan="1" colspan="1">
    Enables the deployment and functionality of CDI applications            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Configurationfilehistory"  >
        <h3>Configuration file history</h3>
    
            <p>
    The management operations may modify the model. When this occurs the xml backing the model is written out again reflecting the latest changes. In addition a full history of the file is maintained. The history of the file goes in a separate directory under the configuration directory.            </p>
                <p>
    As mentioned in <a href="https://docs.jboss.org/author/display/AS7/Command+line+parameters#Commandlineparameters-parameters">Command line parameters#parameters</a> the default configuration file can be selected using a command-line parameter. For a standalone server instance the history of the active <tt class=" ">standalone.xml</tt> is kept in <tt class=" ">jboss.server.config.dir</tt>/standalone_xml_history (See <a href="https://docs.jboss.org/author/display/AS7/Command+line+parameters#Commandlineparameters-standalonesystemproperties">Command line parameters#standalone_system_properties</a> for more details). For a domain the active <tt class=" ">domain.xml</tt> and <tt class=" ">host.xml</tt> histories are kept in <tt class=" ">jboss.domain.config.dir</tt>/domain_xml_history and <tt class=" ">jboss.domain.config.dir</tt>/host_xml_history.            </p>
                <p>
    The rest of this section will only discuss the history for <tt class=" ">standalone.xml</tt>. The concepts are exactly the same for <tt class=" ">domain.xml</tt> and <tt class=" ">host.xml</tt>.            </p>
                <p>
    Within <tt class=" ">standalone_xml_history</tt> itself following a successful first time boot we end up with three new files:<br/>*<tt class=" ">standalone.initial.xml</tt> - This contains the original configuration that was used the first time we successfully booted. This file will never be overwritten. You may of course delete the history directory and any files in it at any stage.<br/>*<tt class=" ">standalone.boot.xml</tt> - This contains the original configuration that was used for the last successful boot of the server. This gets overwritten every time we boot the server successfully.<br/>*<tt class=" ">standalone.last.xml</tt> - At this stage the contents will be identical to <tt class=" ">standalone.boot.xml.&nbsp; This file gets overwritten each time the server successfully writes the configuration, if there was an unexpected failure writing the configuration this file is the last known successful write.</tt>            </p>
                <p>
    <tt class=" ">standalone_xml_history</tt> contains a directory called <tt class=" ">current</tt> which should be empty. Now if we execute a management operation that modifies the model, for example adding a new system property using the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /system-property=test:add(value=&quot;test123&quot;)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    What happens is:            </p>
    <ul class=" "><li class=" ">            <p>
    The original configuration file is backed up to <tt class=" ">standalone_xml_history/current/standalone.v1.xml</tt>. The next change to the model would result in a file called <tt class=" ">standalone.v2.xml</tt> etc. The 100 most recent of these files are kept.            </p>
    </li><li class=" ">            <p>
    The change is applied to the original configuration file            </p>
    </li><li class=" ">            <p>
    The changed original configuration file is copied to <tt class=" ">standalone.last.xml</tt>            </p>
    </li></ul>            <p>
    When restarting the server, any existing <tt class=" ">standalone_xml_history/current</tt> directory is moved to a new timestamped folder within the <tt class=" ">standalone_xml_history</tt>, and a new <tt class=" ">current</tt> folder is created. These timestamped folders are kept for 30 days.            </p>
        <div class="section-4"  id="66322684_AdminGuide-Snapshots"  >
        <h4>Snapshots</h4>
    
            <p>
    In addition to the backups taken by the server as described above you can manually take take snapshots which will be stored in the <tt class=" ">snapshot</tt> folder under the <tt class=" ">_xml_history</tt> folder, the automatic backups described above are subject to automatic house keeping so will eventually be automatically removed, the snapshots on the other hand can be entirely managed by the administrator.            </p>
                <p>
    You may also take your own snapshots using the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :take-snapshot
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {&quot;name&quot; =&gt; &quot;/Users/kabir/jboss-7.0.0.CR1/standalone/configuration/standalone_xml_history/snapshot/20110630-172258657standalone.xml&quot;}
}</code></pre>
        </div>
    </div>
            <p>
    You can also use the CLI to list all the snapshots            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :list-snapshots
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;directory&quot; =&gt; &quot;/Users/kabir/jboss-7.0.0.CR1/standalone/configuration/standalone_xml_history/snapshot&quot;,
        &quot;names&quot; =&gt; [
            &quot;20110630-165714239standalone.xml&quot;,
            &quot;20110630-165821795standalone.xml&quot;,
            &quot;20110630-170113581standalone.xml&quot;,
            &quot;20110630-171411463standalone.xml&quot;,
            &quot;20110630-171908397standalone.xml&quot;,
            &quot;20110630-172258657standalone.xml&quot;
        ]
    }
}</code></pre>
        </div>
    </div>
            <p>
    &nbsp;To delete a particular snapshot:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :delete-snapshot(name=&quot;20110630-165714239standalone.xml&quot;)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    and to delete all snapshots:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :delete-snapshot(name=&quot;all&quot;)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    In domain mode executing the snapshot operations against the root node will work against the domain model. To do this for a host model you need to navigate to the host in question:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=master:list-snapshots
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;domain-results&quot; =&gt; {&quot;step-1&quot; =&gt; {
            &quot;directory&quot; =&gt; &quot;/Users/kabir/jboss-7.0.0.CR1/domain/configuration/host_xml_history/snapshot&quot;,
            &quot;names&quot; =&gt; [
                &quot;20110630-141129571host.xml&quot;,
                &quot;20110630-172522225host.xml&quot;
            ]
        }},
        &quot;server-operations&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-SubsequentStarts"  >
        <h4>Subsequent Starts</h4>
    
            <p>
    For subsequent server starts it may be desirable to take the state of the server back to one of the previously known states, for a number of items an abbreviated reverence to the file can be used: -            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Abreviation            </td>
                <td rowspan="1" colspan="1">
    Parameter            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">initial</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=initial</tt>            </td>
                <td rowspan="1" colspan="1">
    This will start the server using the initial configuration first used to start the server.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">boot</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=boot</tt>            </td>
                <td rowspan="1" colspan="1">
    This will use the configuration from the last successful boot of the server.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">last</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=last</tt>            </td>
                <td rowspan="1" colspan="1">
    This will start the server using the configuration backed up from the last successful save.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">v?</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=v?</tt>            </td>
                <td rowspan="1" colspan="1">
    This will server the _xml_history/current folder for the configuration where ? is the number of the backup to use.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">????</tt>    <cite>
<tt class=" "></tt>    </cite>
<tt class=" ">-</tt>    <cite>
<tt class=" "></tt>    </cite>
<tt class=" ">?????</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=????</tt>    <cite>
<tt class=" "></tt>    </cite>
<tt class=" ">-</tt>    <cite>
<tt class=" "></tt>    </cite>
<tt class=" ">?????</tt>            </td>
                <td rowspan="1" colspan="1">
    The server will be started after searching the snapshot folder for the configuration which matches this prefix.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    In addition to this the <tt class=" ">--server-config</tt> parameter can always be used to specify a configuration relative to the <tt class=" ">jboss.server.config.dir</tt> and finally if no matching configuration is found an attempt to locate the configuration as an absolute path will be made.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Starting%26stoppingServersinaManagedDomain"  >
        <h3>Starting &amp; stopping Servers in a Managed Domain</h3>
    
            <p>
    Starting a standalone server is done through the <tt class=" ">bin/standalone.sh</tt> script. However in a managed domain server instances are managed by the domain controller and need to be started through the management layer:            </p>
                <p>
    First of all, get to know which <tt class=" ">servers</tt> are configured on a particular <tt class=" ">host</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] :read-children-names(child-type=host)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [&quot;local&quot;]
}


[domain@localhost:9999 /] /host=local:read-children-names(child-type=server-config)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [
       &quot;my-server&quot;,
       &quot;server-one&quot;,
       &quot;server-three&quot;
   ]
}
</code></pre>
        </div>
    </div>
            <p>
    Now that we know, that there are two <tt class=" ">servers</tt> configured on <tt class=" ">host</tt> &quot;<i class=" ">local</i>&quot;, we can go ahead and check their status:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=local/server-config=server-one:read-resource(include-runtime=true)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; {
       &quot;auto-start&quot; =&gt; true,
       &quot;group&quot; =&gt; &quot;main-server-group&quot;,
       &quot;interface&quot; =&gt; undefined,
       &quot;name&quot; =&gt; &quot;server-one&quot;,
       &quot;path&quot; =&gt; undefined,
       &quot;socket-binding-group&quot; =&gt; undefined,
       &quot;socket-binding-port-offset&quot; =&gt; undefined,
       &quot;status&quot; =&gt; &quot;STARTED&quot;,
       &quot;system-property&quot; =&gt; undefined,
       &quot;jvm&quot; =&gt; {&quot;default&quot; =&gt; undefined}
   }
}</code></pre>
        </div>
    </div>
            <p>
    You can change the server state through the &quot;<i class=" ">start</i>&quot; and &quot;<i class=" ">stop</i>&quot; operations            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=local/server-config=server-one:stop
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; &quot;STOPPING&quot;
}
</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
        
            <p>
    Navigating through the domain topology is much more simple when you use the web interface.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Applicationdeployment"  >
        <h3>Application deployment</h3>
    
    <div class="section-4"  id="66322684_AdminGuide-ManagedDomain6"  >
        <h4>Managed Domain</h4>
    
            <p>
    In a managed domain, deployments are associated with a <tt class=" ">server group</tt> (see &#65279;<a href="66322690.html">Core management concepts</a>). Any server within the server group will then be provided with that deployment.            </p>
                <p>
    The domain and host controller components manage the distribution of binaries across network boundaries.            </p>
        <div class="section-5"  id="66322684_AdminGuide-DeploymentCommands"  >
        <h5>Deployment Commands</h5>
    
            <p>
    Distributing deployment binaries involves two steps: uploading the deployment to the repository the domain controller will use to distribute its contents, and then assigning the deployment to one or more server groups.            </p>
                <p>
    You can do this in one sweep with the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] deploy ~/Desktop/test-application.war
Either --all-server-groups or --server-groups must be specified.

[domain@localhost:9999 /] deploy ~/Desktop/test-application.war --all-server-groups
'test-application.war' deployed successfully.

[domain@localhost:9999 /] deploy --help
[...]</code></pre>
        </div>
    </div>
            <p>
    After you've uploaded the binary using the <tt class=" ">deploy</tt> command, it will be available to the domain controller, and assigned to a server group:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] :read-children-names(child-type=deployment)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [
       &quot;mysql-connector-java-5.1.15.jar&quot;,
       &quot;test-application.war&quot;
   ]
}

[domain@localhost:9999 /] /server-group=main-server-group/deployment=test-application.war:read-resource
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; {
       &quot;enabled&quot; =&gt; true,
       &quot;name&quot; =&gt; &quot;test-application.war&quot;,
       &quot;runtime-name&quot; =&gt; &quot;test-application.war&quot;
   }
}
</code></pre>
        </div>
    </div>
            <p>
    You can remove binaries from server groups with the <tt class=" ">undeploy</tt> command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] undeploy test-application.war --all-relevant-server-groups
Successfully undeployed test-application.war.

[domain@localhost:9999 /] /server-group=main-server-group:read-children-names(child-type=deployment)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; []
}
</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
        
            <p>
    Managing deployments through the web interface provides an alternate, sometimes simpler approach.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ContentRepository"  >
        <h5>Content Repository</h5>
    
            <p>
    Deployments are referenced in the domain configuration file, and co-located with the domain controller:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[...]
&lt;deployments&gt;
   &lt;deployment name=&quot;test-application.war&quot;
               runtime-name=&quot;test-application.war&quot;&gt;
       &lt;content sha1=&quot;dda9881fa7811b22f1424b4c5acccb13c71202bd&quot;/&gt;
   &lt;/deployment&gt;
&lt;/deployments&gt;
[...]
&lt;server-groups&gt;
   &lt;server-group name=&quot;main-server-group&quot; profile=&quot;default&quot;&gt;
       [...]
       &lt;deployments&gt;
           &lt;deployment name=&quot;test-application.war&quot; runtime-name=&quot;test-application.war&quot;/&gt;
       &lt;/deployments&gt;
   &lt;/server-group&gt;
&lt;/server-groups&gt;
[...]</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/domain.xml)</sub>            </p>
                <p>
    The actual binaries are stored in the content subdirectory:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ls domain/content/
  |---/47
  |-----95cc29338b5049e238941231b36b3946952991
  |---/dd
  |-----a9881fa7811b22f1424b4c5acccb13c71202bd</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-StandaloneServer4"  >
        <h4>Standalone Server</h4>
    
            <p>
    Deployments on a standalone server work in a similar way to those on managed domains. The main difference is that there are no server group associations.            </p>
        <div class="section-5"  id="66322684_AdminGuide-DeploymentCommands2"  >
        <h5>Deployment Commands</h5>
    
            <p>
    The same CLI commands used for managed domains work for standalone servers when deploying and removing an application:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] deploy ~/Desktop/test-application.war
'test-application.war' deployed successfully.

[standalone@localhost:9999 /] undeploy test-application.war
Successfully undeployed test-application.war.</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-filesystemdeployments"><a name="66322684_AdminGuide-filesystemdeployments"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-FileSystemDeployments"  >
        <h5>File System Deployments</h5>
    
            <p>
    Deployment content (for example, war, ear, jar, and sar files) can be placed in the standalone/deployments directory of the WildFly 8 distribution, in order to be automatically deployed into the server runtime.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    Users are encouraged to use the WildFly 8 management APIs to upload and deploy deployment content instead of relying on the deployment scanner that periodically scans the directory, particularly if running production systems.            </p>
        </div>
    
    <div class="section-6"  id="66322684_AdminGuide-DeploymentModes"  >
        <h6>Deployment Modes</h6>
    
            <p>
    The WildFly 8 filesystem deployment scanner operates in one of two different modes, depending on whether it will directly monitor the deployment content in order to decide to deploy or redeploy it.            </p>
                <p>
    <u class=" ">Auto-deploy mode</u>:            </p>
                <p>
    The scanner will directly monitor the deployment content, automatically deploying new content and redeploying content whose timestamp has changed. This is similiar to the behavior of previous AS releases, although there are differences:            </p>
    <ul class=" "><li class=" ">            <p>
    A change in any file in an exploded deployment triggers redeploy. Because EE 6 applications do not require deployment descriptors,<br/>there is no attempt to monitor deployment descriptors and only redeploy when a deployment descriptor changes.            </p>
    </li><li class=" ">            <p>
    The scanner will place marker files in this directory as an indication of the status of its attempts to deploy or undeploy content. These are detailed below.            </p>
    </li></ul>            <p>
    <u class=" ">Manual deploy mode</u>:            </p>
                <p>
    The scanner will not attempt to directly monitor the  deployment content and decide if or when the end user wishes the content to be deployed. Instead, the scanner relies on a system of marker  files, with the user's addition or removal of a marker file serving as a sort of command telling the scanner to deploy, undeploy or redeploy content.            </p>
                <p>
    Auto-deploy mode and manual deploy mode can be independently configured for  zipped deployment content and exploded deployment content. This is done via the &quot;auto-deploy&quot; attribute on the deployment-scanner element in the standalone.xml configuration file:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;deployment-scanner scan-interval=&quot;5000&quot; relative-to=&quot;jboss.server.base.dir&quot;
   path=&quot;deployments&quot; auto-deploy-zipped=&quot;true&quot; auto-deploy-exploded=&quot;false&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    By default, auto-deploy of zipped content is enabled, and auto-deploy of exploded content is disabled. Manual deploy mode is strongly recommended for exploded content, as exploded content is inherently vulnerable to the scanner trying to auto-deploy partially copied content.            </p>
        </div>
    
    <div class="section-6"  id="66322684_AdminGuide-MarkerFiles"  >
        <h6>Marker Files</h6>
    
            <p>
    The marker files always have the same name as the deployment content to which they relate, but with an additional file suffix appended. For example, the marker file to indicate the example.war file should be deployed is named example.war.dodeploy. Different marker file suffixes have different meanings.            </p>
                <p>
    The relevant marker file types are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    File            </td>
                <td rowspan="1" colspan="1">
    Purpose            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    .dodeploy            </td>
                <td rowspan="1" colspan="1">
    Placed by the user to indicate that the given content should<br/>be deployed into the runtime (or redeployed if already<br/>deployed in the runtime.)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .skipdeploy            </td>
                <td rowspan="1" colspan="1">
    Disables auto-deploy of the content for as long as the file<br/>is present. Most useful for allowing updates to exploded<br/>content without having the scanner initiate redeploy in the<br/>middle of the update. Can be used with zipped content as<br/>well, although the scanner will detect in-progress changes<br/>to zipped content and wait until changes are complete.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .isdeploying            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that it<br/>has noticed a .dodeploy file or new or updated auto-deploy<br/>mode content and is in the process of deploying the content.<br/>This marker file will be deleted when the deployment process<br/>completes.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .deployed            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that the<br/>given content has been deployed into the runtime. If an end<br/>user deletes this file, the content will be undeployed.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .failed            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that the<br/>given content failed to deploy into the runtime. The content<br/>of the file will include some information about the cause of<br/>the failure. Note that with auto-deploy mode, removing this<br/>file will make the deployment eligible for deployment again.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .isundeploying            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that it<br/>has noticed a .deployed file has been deleted and the<br/>content is being undeployed. This marker file will be deleted<br/>when the undeployment process completes.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .undeployed            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that the<br/>given content has been undeployed from the runtime. If an end<br/>user deletes this file, it has no impact.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .pending            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that it<br/>has noticed the need to deploy content but has not yet<br/>instructed the server to deploy it. This file is created if<br/>the scanner detects that some auto-deploy content is still in<br/>the process of being copied or if there is some problem that<br/>prevents auto-deployment. The scanner will not instruct the<br/>server to deploy or undeploy any content (not just the<br/>directly affected content) as long as this condition holds.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    <strong class=" ">Basic workflows:</strong><br/>All examples assume variable $JBOSS_HOME points to the root of the WildFly 8 distribution.            </p>
                <p>
    A) Add new zipped content and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    cp target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    (Manual mode only) touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    B) Add new unzipped content and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    cp -r target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    (Manual mode only) touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    C) Undeploy currently deployed content:            </p>
    <ol class=" "><li class=" ">            <p>
    rm $JBOSS_HOME/standalone/deployments/example.war.deployed            </p>
    </li></ol>            <p>
    D) Auto-deploy mode only: Undeploy currently deployed content:            </p>
    <ol class=" "><li class=" ">            <p>
    rm $JBOSS_HOME/standalone/deployments/example.war            </p>
    </li></ol>            <p>
    E) Replace currently deployed zipped content with a new version and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    cp target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    (Manual mode only) touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    F) Manual mode only: Replace currently deployed unzipped content with a new version and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    rm $AS/standalone/deployments/example.war.deployed            </p>
    </li><li class=" ">            <p>
    wait for $JBOSS_HOME/standalone/deployments/example.war.undeployed file to appear            </p>
    </li><li class=" ">            <p>
    cp -r target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    G) Auto-deploy mode only: Replace currently deployed unzipped content with a new version and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war.skipdeploy            </p>
    </li><li class=" ">            <p>
    cp -r target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    rm $JBOSS_HOME/standalone/deployments/example.war.skipdeploy            </p>
    </li></ol>            <p>
    H) Manual mode only: Live replace portions of currently deployed unzipped content without redeploying:            </p>
    <ol class=" "><li class=" ">            <p>
    cp -r target/example.war/foo.html $JBOSS_HOME/standalone/deployments/example.war            </p>
    </li></ol>            <p>
    I) Auto-deploy mode only: Live replace portions of currently deployed unzipped content without redeploying:            </p>
    <ol class=" "><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war.skipdeploy            </p>
    </li><li class=" ">            <p>
    cp -r target/example.war/foo.html $JBOSS_HOME/standalone/deployments/example.war            </p>
    </li></ol>            <p>
    J) Manual or auto-deploy mode: Redeploy currently deployed content (i.e. bounce it with no content change):            </p>
    <ol class=" "><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    K) Auto-deploy mode only: Redeploy currently deployed content (i.e. bounce it with no content change):            </p>
    <ol class=" "><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war            </p>
    </li></ol>    <div class="confbox admonition admonition-info">
        
            <p>
    The above examples use Unix shell commands. Windows equivalents are:            </p>
                <p>
    cp src dest --&gt; xcopy /y src dest<br/>cp -r src dest --&gt; xcopy /e /s /y src dest<br/>rm afile --&gt; del afile<br/>touch afile --&gt; echo&gt;&gt; afile            </p>
                <p>
    Note that the behavior of 'touch' and 'echo' are different but the differences are not relevant to the usages in the examples above.            </p>
        </div>
    
    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-GettingServerspecificMetricsinaManagedDomain"  >
        <h3>Getting Server-specific Metrics in a Managed Domain</h3>
    
            <p>
    In a managed domain, with one or more server groups deployed, we may wish to view server-specific subsystem metrics for a given subsystem resource. In other words, for a given host and a server deployed on that host, we may wish to view metrics defined for a particular subsystem which reflect the run-time behaviour of that particular subsystem on that particular server instance.&nbsp;            </p>
                <p>
    For example, we may have a server group of consisting of two servers using the full-ha profile, so forming a cluster, and a distributed application deployed on that cluster. The values for runtime metrics for distributed cache management on each server would reflect the processing activity at that particular server.            </p>
        <div class="section-4"  id="66322684_AdminGuide-Standalonemode"  >
        <h4>Standalone mode</h4>
    
            <p>
    In standalone mode, such resources could be accessed by using the CLI to connect to the standalone instance and executing the command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=infinispan/cache-container=web/distributed-cache=dist:read-resource(include-runtime=true)
</code></pre>
        </div>
    </div>
            <p>
    The fact that we have used the CLI to connect to a specific server instance allows us to choose the server we wish to read the metrics from.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Domainmode"  >
        <h4>Domain mode</h4>
    
            <p>
    In domain mode, the same resources could be accessed by using the CLI to connect to the domain controller of the domain and executing the command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/host=&lt;host&gt;/server=&lt;server&gt;/subsystem=infinispan/cache-container=web/distributed-cache=dist:read-resource(include-runtime=true)
</code></pre>
        </div>
    </div>
            <p>
    where &lt;host&gt; is the name of the host on which the server resides and &lt;server&gt; is the name of the server of interest.&nbsp;            </p>
                <p>
    Note that the command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/profile=full-ha/subsystem=infinispan/cache-container=web/distributed-cache=dist:read-resource(include-runtime=true)</code></pre>
        </div>
    </div>
            <p>
    does not return run-time information concerning specific servers, but rather the configuration of the full-ha profile used in the domain. Any run-time metrics will be marked as undefined.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322684_AdminGuide-Domainsetup"  >
        <h2>Domain setup</h2>
    
            <p>
    To run a group of servers as a managed domain you need to configure both the domain controller and each host that joins the domain. The following steps focus on the&nbsp; network configuration for the domain and host controller components.            </p>
        <div class="section-3"  id="66322684_AdminGuide-DomainControllerConfiguration"  >
        <h3>Domain Controller Configuration</h3>
    
            <p>
    The domain controller is the central government for a managed domain. A domain controller configuration requires two steps:            </p>
    <ul class=" "><li class=" ">            <p>
    A host needs to be configured to act as the Domain Controller for the whole domain            </p>
    </li><li class=" ">            <p>
    The host must expose an addressable management interface binding for the managed hosts to communicate with it            </p>
    </li></ul>    <div class="confbox admonition admonition-info">
            <div class="title">Example IP Adresses</div>
        
            <p>
    In this example the domain controller uses 192.168.0.101 and the host controller 192.168.0.10            </p>
        </div>
    
            <p>
    Configuring a host to act as the Domain Controller is done through the <tt class=" ">domain-controller</tt> declaration in <tt class=" ">host.xml</tt>. If it includes the <tt class=" ">&lt;local/&gt;</tt> element, then this host will become the domain controller:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;domain-controller&gt;
   &lt;local/&gt;
&lt;/domain-controller&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/host.xml)</sub>            </p>
                <p>
    A host acting as the Domain Controller <i class=" ">must</i> expose a native (i.e. non-HTTP) management interface on an address accessible to the other hosts in the domain. Also exposing an HTTP management interface is not required, but is recommended as it allows the Administration Console to work:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;management-interfaces&gt;
  &lt;native-interface security-realm=&quot;ManagementRealm&quot;&gt;
    &lt;socket interface=&quot;management&quot; port=&quot;${jboss.management.native.port:9999}&quot;/&gt;
  &lt;/native-interface&gt;
  &lt;http-interface security-realm=&quot;ManagementRealm&quot;&gt;
    &lt;socket interface=&quot;management&quot; port=&quot;${jboss.management.http.port:9990}&quot;/&gt;
  &lt;/http-interface&gt;
&lt;/management-interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
        <span style="color: #333333;">
The interface attributes above refer to a named interface declaration later in the host.xml file. This interface declaration will be used to resolve a corresponding network interface.&nbsp;    </span>
            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
   &lt;interface name=&quot;management&quot;&gt;
       &lt;inet-address value=&quot;192.168.0.101&quot;/&gt;
   &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/host.xml)</sub>            </p>
                <p>
        <span style="color: #333333;">
Please consult the chapter &quot;Interface Configuration&quot; for a more detailed explanation on how to configure network interfaces.    </span>
            </p>
                <p>
    Next by default the master domain controller is configured to require authentication so a user needs to be added that can be used by the slave domain controller to connect.            </p>
                <p>
    Make use of the <tt class=" ">add-user</tt> utility to add a new user, for this example I am adding a new user called slave.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    <tt class=" ">add-user</tt> MUST be run on the master domain controller and NOT the slave.            </p>
        </div>
    
            <p>
                </p>
                <p>
    When you reach the final question of the interactive flow answer <tt class=" ">y</tt> or <tt class=" ">yes</tt> to indicate that the new user will be used for a process e.g.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>Is this new user going to be used for one AS process to connect to another AS process e.g. slave domain controller?
yes/no? y
To represent the user add the following to the server-identities definition &lt;secret value=&quot;cE3EBEkE=&quot; /&gt;</code></pre>
        </div>
    </div>
            <p>
    Make a note of the XML Element output as that is going to be required within the slave configuration.            </p>
        </div>
    
    <div class="section-3"  id="66322684_AdminGuide-HostControllerConfiguration"  >
        <h3>Host Controller Configuration</h3>
    
            <p>
    Once the domain controller is configured correctly you can proceed with any host that should join the domain. The host controller configuration requires three steps:            </p>
    <ul class=" "><li class=" ">            <p>
    The logical host name (within the domain) needs to be distinct            </p>
    </li><li class=" ">            <p>
    The host controller needs to know the domain controller IP address            </p>
    </li></ul>            <p>
    Provide a distinct, logical name for the host. In the following example we simply name it &quot;slave&quot;:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;host xmlns=&quot;urn:jboss:domain:1.0&quot;
     name=&quot;slave&quot;&gt;
[...]
&lt;/host&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/host.xml)</sub>            </p>
                <p>
    If the <tt class=" ">name</tt> attribute is not set, the default name for the host will be the value of the <tt class=" ">HOSTNAME</tt> or <tt class=" ">COMPUTERNAME</tt> environment variable, one of which will be set on most operating systems. If neither is set the name will be the value of <tt class=" ">InetAddress.getLocalHost().getHostName()</tt>.            </p>
                <p>
    A security realm needs to be defined to hold the identity of the slave, as it is performing a specific purpose I would suggest a new realm is defined although it is possible to combine this with an existing realm.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;SlaveRealm&quot;&gt;
  &lt;server-identities&gt;
    &lt;secret value=&quot;cE3EBEkE=&quot; /&gt;
  &lt;/server-identities&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">&lt;secret /&gt;</tt> element here is the one output from <tt class=" ">add-user</tt> previously.  To create the <tt class=" ">&lt;secret /&gt;</tt> element yourself the <tt class=" ">value</tt> needs to be the password encoded using Base64.            </p>
                <p>
        <span style="color: #333333;">
Tell it how to find the domain controller so it can register itself with the domain:    </span>
            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;domain-controller&gt;
   &lt;remote host=&quot;192.168.0.101&quot; port=&quot;9999&quot; username=&quot;slave&quot; security-realm=&quot;SlaveRealm&quot;/&gt;
&lt;/domain-controller&gt;</code></pre>
        </div>
    </div>
            <p>
        <span style="color: #333333;">
<sub class=" ">(See domain/configuration/host.xml)</sub>    </span>
            </p>
                <p>
    The username attribute here is optional, if it is omitted then the name of the host will be used instead, in this example that was already set to name.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    The name of each host needs to be unique when registering with the domain controller, however the username does not - using the username attribute allows the same account to be used by multiple hosts if this makes sense in your environment.            </p>
        </div>
    
            <p>
    The <tt class=" ">&lt;remote /&gt;</tt> element is also associated with the security realm <tt class=" ">SlaveRealm</tt>, this is how it picks up the password from the <tt class=" ">&lt;secret /&gt;</tt> element.            </p>
        </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Servergroups"  >
        <h3>Server groups</h3>
    
            <p>
    The domain controller defines one or more server groups and associates each of these with a profile and a socket binding group, and also :            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;server-groups&gt;
    &lt;server-group name=&quot;main-server-group&quot; profile=&quot;default&quot;&gt;
        &lt;jvm name=&quot;default&quot;&gt;
           &lt;heap size=&quot;64m&quot; max-size=&quot;512m&quot;/&gt;
           &lt;permgen size=&quot;128m&quot; max-size=&quot;128m&quot;/&gt;
        &lt;/jvm&gt;
        &lt;socket-binding-group ref=&quot;standard-sockets&quot;/&gt;
    &lt;/server-group&gt;
    &lt;server-group name=&quot;other-server-group&quot; profile=&quot;bigger&quot;&gt;
        &lt;jvm name=&quot;default&quot;&gt;
            &lt;heap size=&quot;64m&quot; max-size=&quot;512m&quot;/&gt;
        &lt;/jvm&gt;
        &lt;socket-binding-group ref=&quot;bigger-sockets&quot;/&gt;
    &lt;/server-group&gt;
&lt;/server-groups&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/domain.xml)</sub>            </p>
                <p>
    The domain controller also defines the socket binding groups and the profiles. The socket binding groups define the default socket bindings that are used:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;socket-binding-groups&gt;
    &lt;socket-binding-group name=&quot;standard-sockets&quot; default-interface=&quot;public&quot;&gt;
        &lt;socket-binding name=&quot;http&quot; port=&quot;8080&quot;/&gt;
        [...]
    &lt;/socket-binding-group&gt;
    &lt;socket-binding-group name=&quot;bigger-sockets&quot; include=&quot;standard-sockets&quot; default-interface=&quot;public&quot;&gt;
        &lt;socket-binding name=&quot;unique-to-bigger&quot; port=&quot;8123&quot;/&gt;
    &lt;/socket-binding-group&gt;
&lt;/socket-binding-groups&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/domain.xml)</sub><br/>In this example the <tt class=" ">bigger-sockets</tt> group includes all the socket bindings defined in the <tt class=" ">standard-sockets</tt> groups and then defines an extra socket binding of its own.            </p>
                <p>
    A profile is a collection of subsystems, and these subsystems are what implement the functionality people expect of an application server.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;profiles&gt;
    &lt;profile name=&quot;default&quot;&gt;
        &lt;subsystem xmlns=&quot;urn:jboss:domain:web:1.0&quot;&gt;
            &lt;connector name=&quot;http&quot; scheme=&quot;http&quot; protocol=&quot;HTTP/1.1&quot; socket-binding=&quot;http&quot;/&gt;
            [...]
        &lt;/subsystem&gt;
        &lt;\!-\- The rest of the subsystems here \--&gt;
        [...]
    &lt;/profile&gt;
    &lt;profile name=&quot;bigger&quot;&gt;
        &lt;subsystem xmlns=&quot;urn:jboss:domain:web:1.0&quot;&gt;
            &lt;connector name=&quot;http&quot; scheme=&quot;http&quot; protocol=&quot;HTTP/1.1&quot; socket-binding=&quot;http&quot;/&gt;
            [...]
        &lt;/subsystem&gt;
        &lt;\!-\- The same subsystems as defined by 'default' here \--&gt;
        [...]
        &lt;subsystem xmlns=&quot;urn:jboss:domain:fictional-example:1.0&quot;&gt;
            &lt;socket-to-use name=&quot;unique-to-bigger&quot;/&gt;
        &lt;/subsystem&gt;
    &lt;/profile&gt;
&lt;/profiles&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/domain.xml)</sub><br/>Here we have two profiles. The <tt class=" ">bigger</tt> profile contains all the same subsystems as the <tt class=" ">default</tt> profile (athough the parameters for the various subsystems could be different in each profile), and adds the <tt class=" ">fictional-example</tt> subsystem which references the <tt class=" ">unique-to-bigger</tt> socket binding.            </p>
        </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Servers"  >
        <h3>Servers</h3>
    
            <p>
    The host controller defines one or more servers:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;servers&gt;
    &lt;server name=&quot;server-one&quot; group=&quot;main-server-group&quot;&gt;
        &lt;\!-\- server-one inherits the default socket-group declared in the server-group \--&gt;
        &lt;jvm name=&quot;default&quot;/&gt;
    &lt;/server&gt;

    &lt;server name=&quot;server-two&quot; group=&quot;main-server-group&quot; auto-start=&quot;true&quot;&gt;
        &lt;socket-binding-group ref=&quot;standard-sockets&quot; port-offset=&quot;150&quot;/&gt;
        &lt;jvm name=&quot;default&quot;&gt;
            &lt;heap size=&quot;64m&quot; max-size=&quot;256m&quot;/&gt;
        &lt;/jvm&gt;
    &lt;/server&gt;

    &lt;server name=&quot;server-three&quot; group=&quot;other-server-group&quot; auto-start=&quot;false&quot;&gt;
        &lt;socket-binding-group ref=&quot;bigger-sockets&quot; port-offset=&quot;250&quot;/&gt;
    &lt;/server&gt;
&lt;/servers&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/host.xml)</sub>            </p>
                <p>
    <tt class=" ">server-one</tt> and <tt class=" ">server-two</tt> both are associated with <tt class=" ">main-server-group</tt> so that means they both run the subsystems defined by the <tt class=" ">default</tt> profile, and have the socket bindings defined by the <tt class=" ">standard-sockets</tt> socket binding group. Since all the servers defined by a host will be run on the same physical host we would get port conflicts unless we used <tt class=" ">&lt;socket-binding-group ref=&quot;standard-sockets&quot; port-offset=&quot;150&quot;/&gt;</tt> for <tt class=" ">server-two</tt>. This means that <tt class=" ">server-two</tt> will use the socket bindings defined by <tt class=" ">standard-sockets</tt> but it will add <tt class=" ">150</tt> to each port number defined, so the value used for <tt class=" ">http</tt> will be <tt class=" ">8230</tt> for <tt class=" ">server-two</tt>.            </p>
                <p>
    <tt class=" ">server-three</tt> will not be started due to its <tt class=" ">auto-start=&quot;false&quot;</tt>. The default value if no <tt class=" ">auto-start</tt> is given is <tt class=" ">true</tt> so both <tt class=" ">server-one</tt> and <tt class=" ">server-two</tt> will be started when the host controller is started. <tt class=" ">server-three</tt> belongs to <tt class=" ">other-server-group</tt>, so if its <tt class=" ">auto-start</tt> were changed to <tt class=" ">true</tt> it would start up using the subsystems from the <tt class=" ">bigger</tt> profile, and it would use the <tt class=" ">bigger-sockets</tt> socket binding group.            </p>
        <div class="section-4"  id="66322684_AdminGuide-JVM"  >
        <h4>JVM</h4>
    
            <p>
    The host controller contains the main <tt class=" ">jvm</tt> definitions with arguments:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;jvms&gt;
    &lt;jvm name=&quot;default&quot;&gt;
        &lt;heap size=&quot;64m&quot; max-size=&quot;128m&quot;/&gt;
    &lt;/jvm&gt;
&lt;/jvms&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/host.xml)</sub><br/>From the preceeding examples we can see that we also had a <tt class=" ">jvm</tt> reference at server group level in the domain controller. The jvm's name <strong class=" ">must</strong> match one of the definitions in the host controller. The values supplied at domain controller and host controller level are combined, with the host controller taking precedence if the same parameter is given in both places.            </p>
                <p>
    Finally, as seen, we can also override the <tt class=" ">jvm</tt> at server level. Again, the jvm's name <strong class=" ">must</strong> match one of the definitions in the host controller. The values are combined with the ones coming in from domain controller and host controller level, this time the server definition takes precedence if the same parameter is given in all places.            </p>
                <p>
    Following these rules the jvm parameters to start each server would be            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Server            </td>
                <td rowspan="1" colspan="1">
    JVM parameters            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">server-one</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">-XX:PermSize=128m -XX:MaxPermSize=128m -Xms64m -Xmx128m</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">server-two</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">-XX:PermSize=128m -XX:MaxPermSize=128m -Xms64m -Xmx256m</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">server-three</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">-Xms64m -Xmx128m</tt>            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322684_AdminGuide-ManagementAPIreference"  >
        <h2>Management API reference</h2>
    
            <p>
    This section is an in depth reference to the WildFly management API. Readers are encouraged to read the <a href="66322687.html">Management Clients</a> and <a href="66322690.html">Core management concepts</a> sections for fundamental background information, as well as the <a href="66322694.html">Management tasks</a> and <a href="66322740.html">Domain Setup</a> sections for key task oriented information. This section is meant as an in depth reference to delve into some of the key details.            </p>
        <div class="section-3"  id="66322684_AdminGuide-Globaloperations"  >
        <h3>Global operations</h3>
    
            <p>
    The WildFly management API includes a number of operations that apply to every resource.            </p>
        <div class="section-4"  id="66322684_AdminGuide-The%7B%7Breadresource%7D%7Doperation"  >
        <h4>The  read-resource  operation</h4>
    
            <p>
    Reads a management resource's attribute values along with either basic or complete information about any child resources. Supports the<br/>following parameters, none of which are required:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">recursive</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include complete information about child resources, recursively.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">recursive-depth</tt> &ndash; (int) &ndash; The depth to which information about child resources should be included if <tt class=" ">recursive</tt> is {{true}. If not set, the depth will be unlimited; i.e. all descendant resources will be included.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">proxies</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include remote resources in a recursive query (i.e. host level resources from slave Host Controllers in a query of the Domain Controller; running server resources in a query of a host).            </p>
    </li><li class=" ">            <p>
    <tt class=" ">include-runtime</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include runtime attributes (i.e. those whose value does not come from the persistent configuration) in the response.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">include-defaults</tt> &ndash; (boolean, default is <tt class=" ">true</tt>) &ndash; whether to include in the result default values not set by users. Many attributes have a default value that will be used in the runtime if the users have not provided an explicit value. If this parameter is <tt class=" ">false</tt> the value for such attributes in the result will be <tt class=" ">undefined</tt>. If <tt class=" ">true</tt> the result will include the default value for such parameters.            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Breadattribute%7D%7Doperation"  >
        <h4>The  read-attribute  operation</h4>
    
            <p>
    Reads the value of an individual attribute. Takes a single, required, parameter:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">name</tt> &ndash; (string) &ndash; the name of the attribute to read.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">include-defaults</tt> &ndash; (boolean, default is <tt class=" ">true</tt>) &ndash; whether to include in the result default values not set by users. Many attributes have a default value that will be used in the runtime if the users have not provided an explicit value. If this parameter is <tt class=" ">false</tt> the value for such attributes in the result will be <tt class=" ">undefined</tt>. If <tt class=" ">true</tt> the result will include the default value for such parameters.            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Bwriteattribute%7D%7Doperation"  >
        <h4>The  write-attribute  operation</h4>
    
            <p>
    Writes the value of an individual attribute. Takes two required parameters:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">name</tt> &ndash; (string) &ndash; the name of the attribute to write.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">value</tt> &ndash; (type depends on the attribute being written) &ndash; the new value.            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Bunsetattribute%7D%7Doperation"  >
        <h4>The  unset-attribute  operation</h4>
    
            <p>
    Sets the value of an individual attribute to the <tt class=" ">undefined</tt> value, if such a value is allowed for the attribute. The operation will fail if the <tt class=" ">undefined</tt> value is not allowed. Takes a single required parameter:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">name</tt> &ndash; (string) &ndash; the name of the attribute to write.            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Breadresourcedescription%7D%7Doperation"  >
        <h4>The  read-resource-description  operation</h4>
    
            <p>
    Returns the description of a resource's attributes, types of children and, optionally, operations. Supports the<br/>following parameters, none of which are required:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">recursive</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include information about child resources, recursively.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">proxies</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include remote resources in a recursive query (i.e. host level resources from slave Host Controllers in a query of the Domain Controller; running server resources in a query of a host)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">operations</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include descriptions of the resource's operations            </p>
    </li><li class=" ">            <p>
    <tt class=" ">inherited</tt> &ndash; (boolean, default is <tt class=" ">true</tt>) &ndash; if <tt class=" ">operations</tt> is <tt class=" ">true</tt>, whether to include descriptions of operations inherited from higher level resources. The global operations described in this section are themselves inherited from the root resource, so the primary effect of setting <tt class=" ">inherited</tt> to <tt class=" ">false</tt> is to exclude the descriptions of the global operations from the output.            </p>
    </li></ul>            <p>
    See <a href="66322746.html">Description of the Management Model</a> for details on the result of this operation.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Breadoperationnames%7D%7Doperation"  >
        <h4>The  read-operation-names  operation</h4>
    
            <p>
    Returns a list of the names of all the operations the resource supports. Takes no parameters.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Breadoperationdescription%7D%7Doperation"  >
        <h4>The  read-operation-description  operation</h4>
    
            <p>
    Returns the description of an operation, along with details of its parameter types and its return value. Takes a single, required, parameter:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">name</tt> &ndash; (string) &ndash; the name of the operation            </p>
    </li></ul>            <p>
    See <a href="66322746.html">Description of the Management Model</a> for details on the result of this operation.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Breadchildrentypes%7D%7Doperation"  >
        <h4>The  read-children-types  operation</h4>
    
            <p>
    Returns a list of the <a href="66322693.html#66322693_Managementresources-Address">types of child resources</a> the resource supports. Takes no parameters.            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Breadchildrennames%7D%7Doperation"  >
        <h4>The  read-children-names  operation</h4>
    
            <p>
    Returns a list of the names of all child resources of a given <a href="66322693.html#66322693_Managementresources-Address">type</a>.  Takes a single, required, parameter:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">child-type</tt> &ndash; (string) &ndash; the name of the type            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-The%7B%7Breadchildrenresources%7D%7Doperation"  >
        <h4>The  read-children-resources  operation</h4>
    
            <p>
    Returns information about all of a resource's children that are of a given <a href="66322693.html#66322693_Managementresources-Address">type</a>. For each child resource, the returned information is equivalent to executing the <tt class=" ">read-resource</tt> operation on that resource. Takes the following parameters, of which only {{child-type} is required:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">child-type</tt> &ndash; (string) &ndash; the name of the type of child resource            </p>
    </li><li class=" ">            <p>
    <tt class=" ">recursive</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include complete information about child resources, recursively.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">recursive-depth</tt> &ndash; (int) &ndash; The depth to which information about child resources should be included if <tt class=" ">recursive</tt> is {{true}. If not set, the depth will be unlimited; i.e. all descendant resources will be included.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">proxies</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include remote resources in a recursive query (i.e. host level resources from slave Host Controllers in a query of the Domain Controller; running server resources in a query of a host)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">include-runtime</tt> &ndash; (boolean, default is <tt class=" ">false</tt>) &ndash; whether to include runtime attributes (i.e. those whose value does not come from the persistent configuration) in the response.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">include-defaults</tt> &ndash; (boolean, default is <tt class=" ">true</tt>) &ndash; whether to include in the result default values not set by users. Many attributes have a default value that will be used in the runtime if the users have not provided an explicit value. If this parameter is <tt class=" ">false</tt> the value for such attributes in the result will be <tt class=" ">undefined</tt>. If <tt class=" ">true</tt> the result will include the default value for such parameters.            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-StandardOperations"  >
        <h4>Standard Operations</h4>
    
            <p>
    Besides the global operations described above, by convention nearly every resource should expose an <tt class=" ">add</tt> operation and a <tt class=" ">remove</tt> operation. Exceptions to this convention are the root resource, and resources that do not store persistent configuration and are created dynamically at runtime (e.g. resources representing the JVM's platform mbeans or resources representing aspects of the running state of a deployment.)            </p>
        <div class="section-5"  id="66322684_AdminGuide-The%7B%7Badd%7D%7Doperation"  >
        <h5>The  add  operation</h5>
    
            <p>
    The operation that creates a new resource must be named <tt class=" ">add</tt>. The operation may take zero or more parameters; what those parameters are depends on the resource being created.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-The%7B%7Bremove%7D%7Doperation"  >
        <h5>The  remove  operation</h5>
    
            <p>
    The operation that removes an existing resource must be named <tt class=" ">remove</tt>. The operation should take no parameters.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Detypedmanagementandthejbossdmrlibrary"  >
        <h3>Detyped management and the jboss-dmr library</h3>
    
            <p>
    The management model exposed by WildFly 8 is very large and complex. There are dozens, probably hundreds of logical concepts involved &ndash; hosts, server groups, servers, subsystems, datasources, web connectors, and on and on &ndash; each of which in a classic objected oriented API design could be represented by a Java <i class=" ">type</i> (i.e. a Java class or interface.) However, a primary goal in the development of WildFly's native management API was to ensure that clients built to use the API had as few compile-time and run-time dependencies on JBoss-provided classes as possible, and that the API exposed by those libraries be powerful but also simple and stable. A management client running with the management libraries created for an earlier version of WildFly should still work if used to manage a later version domain. The management client libraries needed to be <i class=" ">forward compatible</i>.            </p>
                <p>
    It is highly unlikely that an API that consists of hundreds of Java types could be kept forward compatible. Instead, the WildFly 8 management API is a <i class=" ">detyped</i> API. A detyped API is like decaffeinated coffee &ndash; it still has a little bit of caffeine, but not enough to keep you awake at night.  WildFly's management API still has a few Java types in it (it's impossible for a Java library to have no types!) but not enough to keep you (or us) up at night worrying that your management clients won't be forward compatible.            </p>
                <p>
    A detyped API works by making it possible to build up arbitrarily complex data structures using a small number of Java types. All of the parameter values and return values in the API are expressed using those few types. Ideally, most of the types are basic JDK types, like <tt class=" ">java.lang.String</tt>, <tt class=" ">java.lang.Integer</tt>, etc. In addition to the basic JDK types, WildFly 8's detyped management API uses a small library called <strong class=" ">jboss-dmr</strong>. The purpose of this section is to provide a basic overview of the jboss-dmr library.            </p>
                <p>
    Even if you don't use jboss-dmr directly (probably the case for all but a few users), some of the information in this section may be useful. When you invoke operations using the application server's Command Line Interface, the return values are just the text representation of of a jboss-dmr <tt class=" ">ModelNode</tt>. If your CLI commands require complex parameter values, you may yourself end up writing the text representation of a <tt class=" ">ModelNode</tt>. And if you use the HTTP management API, all response bodies as well as the request body for any POST will be a JSON representation of a <tt class=" ">ModelNode</tt>.            </p>
                <p>
    The source code for jboss-dmr is available on <a href="https://github.com/jbossas/jboss-dmr">Github</a>. The maven coordinates for a jboss-dmr release are <tt class=" ">org.jboss.jboss-dmr:jboss-dmr</tt>.            </p>
        <div class="section-4"  id="66322684_AdminGuide-ModelNodeandModelType"  >
        <h4>ModelNode and ModelType</h4>
    
            <p>
    The public API exposed by jboss-dmr is very simple: just three classes, one of which is an enum!            </p>
                <p>
    The primary class is <tt class=" ">org.jboss.dmr.ModelNode</tt>. A <tt class=" ">ModelNode</tt> is essentially just a wrapper around some <i class=" ">value</i>; the value is typically some basic JDK type. A <tt class=" ">ModelNode</tt> exposes a <tt class=" ">getType()</tt> method. This method returns a value of type <tt class=" ">org.jboss.dmr.ModelType</tt>, which is an enum of all the valid types of values. And that's 95% of the public API; a class and an enum. (We'll get to the third class, <tt class=" ">Property</tt>, below.)            </p>
        <div class="section-5"  id="66322684_AdminGuide-Basic%7B%7BModelNode%7D%7Dmanipulation"  >
        <h5>Basic  ModelNode  manipulation</h5>
    
            <p>
    To illustrate how to work with <tt class=" ">ModelNode</tt> s, we'll use the <a href="http://www.beanshell.org">Beanshell</a> scripting library. We won't get into many details of beanshell here; it's a simple and intuitive tool and hopefully the following examples are as well.            </p>
                <p>
    We'll start by launching a beanshell interpreter, with the jboss-dmr library available on the classpath. Then we'll tell beanshell to import all the jboss-dmr classes so they are available for use:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$ java -cp bsh-2.0b4.jar:jboss-dmr-1.0.0.Final.jar bsh.Interpreter
BeanShell 2.0b4 - by Pat Niemeyer (pat@pat.net)
bsh % import org.jboss.dmr.*;
bsh %</code></pre>
        </div>
    </div>
            <p>
    Next, create a <tt class=" ">ModelNode</tt> and use the beanshell <tt class=" ">print</tt> function to output what type it is:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode node = new ModelNode();
bsh % print(node.getType());
UNDEFINED</code></pre>
        </div>
    </div>
            <p>
    A new <tt class=" ">ModelNode</tt> has no value stored, so its type is <tt class=" ">ModelType.UNDEFINED</tt>.            </p>
                <p>
    Use one of the overloaded <tt class=" ">set</tt> method variants to assign a node's value:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % node.set(1);
bsh % print(node.getType());
INT
bsh % node.set(true);
bsh % print(node.getType());
BOOLEAN
bsh % node.set(&quot;Hello, world&quot;);
bsh % print(node.getType());
STRING</code></pre>
        </div>
    </div>
            <p>
    Use one of the <tt class=" ">asXXX()</tt> methods to retrieve the value:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % node.set(2);
bsh % print(node.asInt());
2
bsh % node.set(&quot;A string&quot;);
bsh % print(node.asString());
A string</code></pre>
        </div>
    </div>
            <p>
    <tt class=" ">ModelNode</tt> will attempt to perform type conversions when you invoke the <tt class=" ">asXXX</tt> methods:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % node.set(1);
bsh % print(node.asString());
1
bsh % print(node.asBoolean());
true
bsh % node.set(0);
bsh % print(node.asBoolean());
false
bsh % node.set(&quot;true&quot;);
bsh % print(node.asBoolean());
true</code></pre>
        </div>
    </div>
            <p>
    Not all type conversions are possible:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % node.set(&quot;A string&quot;);
bsh % print(node.asInt());
// Error: // Uncaught Exception: Method Invocation node.asInt : at Line: 20 : in file: &lt;unknown file&gt; : node .asInt ( )

Target exception: java.lang.NumberFormatException: For input string: &quot;A string&quot;

java.lang.NumberFormatException: For input string: &quot;A string&quot;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
	at java.lang.Integer.parseInt(Integer.java:449)
	at java.lang.Integer.parseInt(Integer.java:499)
	at org.jboss.dmr.StringModelValue.asInt(StringModelValue.java:61)
	at org.jboss.dmr.ModelNode.asInt(ModelNode.java:117)
        ....</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">ModelNode.getType()</tt> method can be used to ensure a node has an expected value type before attempting a type conversion.            </p>
                <p>
    One <tt class=" ">set</tt> variant takes another <tt class=" ">ModelNode</tt> as its argument. The value of the passed in node is copied, so there is no shared state between the two model nodes:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % node.set(&quot;A string&quot;);
bsh % ModelNode another = new ModelNode();
bsh % another.set(node);
bsh % print(another.asString());
A string
bsh % node.set(&quot;changed&quot;);
bsh % print(node.asString());
changed
bsh % print(another.asString());
A string</code></pre>
        </div>
    </div>
            <p>
    A <tt class=" ">ModelNode</tt> can be cloned. Again, there is no shared state between the original node and its clone:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode clone = another.clone();
bsh % print(clone.asString());
A string
bsh % another.set(42);
bsh % print(another.asString());
42
bsh % print(clone.asString());
A string</code></pre>
        </div>
    </div>
            <p>
    Use the <tt class=" ">protect()</tt> method to make a <tt class=" ">ModelNode</tt> immutable:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % clone.protect();
bsh % clone.set(&quot;A different string&quot;);
// Error: // Uncaught Exception: Method Invocation clone.set : at Line: 15 : in file: &lt;unknown file&gt; : clone .set ( &quot;A different string&quot; )

Target exception: java.lang.UnsupportedOperationException

java.lang.UnsupportedOperationException
	at org.jboss.dmr.ModelNode.checkProtect(ModelNode.java:1441)
	at org.jboss.dmr.ModelNode.set(ModelNode.java:351)
        ....</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-typeLIST"><a name="66322684_AdminGuide-typeLIST"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Lists"  >
        <h5>Lists</h5>
    
            <p>
    The above examples aren't particularly interesting; if all we can do with a <tt class=" ">ModelNode</tt> is wrap a simple Java primitive, what use is that? However, a <tt class=" ">ModelNode</tt>'s value can be more complex than a simple primitive, and using these more complex types we can build complex data structures. The first more complex type is <tt class=" ">ModelType.LIST</tt>.            </p>
                <p>
    Use the <tt class=" ">add</tt> methods to initialize a node's value as a list and add to the list:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode list = new ModelNode();
bsh % list.add(5);
bsh % list.add(10);
bsh % print(list.getType());
LIST</code></pre>
        </div>
    </div>
            <p>
    Use <tt class=" ">asInt()</tt> to find the size of the list:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(list.asInt());
2</code></pre>
        </div>
    </div>
            <p>
    Use the overloaded <tt class=" ">get</tt> method variant that takes an int param to retrieve an item. The item is returned as a <tt class=" ">ModelNode</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode child = list.get(1);
bsh % print(child.asInt());
10</code></pre>
        </div>
    </div>
            <p>
    Elements in a list need not all be of the same type:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % list.add(&quot;A string&quot;);
bsh % print(list.get(1).getType());
INT
bsh % print(list.get(2).getType());
STRING</code></pre>
        </div>
    </div>
            <p>
    <strong class=" ">Here's one of the trickiest things about jboss-dmr:</strong> <i class=" ">The</i> <tt class=" ">get</tt> <i class=" ">methods actually mutate state; they are not &quot;read-only&quot;</i>. For example, calling <tt class=" ">get</tt> with an index that does not exist yet in the list will actually create a child of type <tt class=" ">ModelType.UNDEFINED</tt> at that index (and will create UNDEFINED children for any intervening indices.)            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode four = list.get(4);
bsh % print(four.getType());
UNDEFINED
bsh % print(list.asInt());
6</code></pre>
        </div>
    </div>
            <p>
    Since the <tt class=" ">get</tt> call always returns a <tt class=" ">ModelNode</tt> and never <tt class=" ">null</tt> it is safe to manipulate the return value:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % list.get(5).set(30);
bsh % print(list.get(5).asInt());
30</code></pre>
        </div>
    </div>
            <p>
    That's not so interesting in the above example, but later on with node of type <tt class=" ">ModelType.OBJECT</tt> we'll see how that kind of method chaining can let you build up fairly complex data structures with a minimum of code.            </p>
                <p>
    Use the <tt class=" ">asList()</tt> method to get a <tt class=" ">List&lt;ModelNode&gt;</tt> of the children:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % for (ModelNode element : list.asList()) {
print(element.getType());
}
INT
INT
STRING
UNDEFINED
UNDEFINED
INT</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">asString()</tt> and <tt class=" ">toString()</tt> methods provide slightly differently formatted text representations of a <tt class=" ">ModelType.LIST</tt> node:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(list.asString());
[5,10,&quot;A string&quot;,undefined,undefined,30]
bsh % print(list.toString());
[
    5,
    10,
    &quot;A string&quot;,
    undefined,
    undefined,
    30
]</code></pre>
        </div>
    </div>
            <p>
    Finally, if you've previously used <tt class=" ">set</tt> to assign a node's value to some non-list type, you cannot use the <tt class=" ">add</tt> method:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % node.add(5);
// Error: // Uncaught Exception: Method Invocation node.add : at Line: 18 : in file: &lt;unknown file&gt; : node .add ( 5 )

Target exception: java.lang.IllegalArgumentException

java.lang.IllegalArgumentException
	at org.jboss.dmr.ModelValue.addChild(ModelValue.java:120)
	at org.jboss.dmr.ModelNode.add(ModelNode.java:1007)
	at org.jboss.dmr.ModelNode.add(ModelNode.java:761)
        ...</code></pre>
        </div>
    </div>
            <p>
    You can, however, use the <tt class=" ">setEmptyList()</tt> method to change the node's type, and then use <tt class=" ">add</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % node.setEmptyList();
bsh % node.add(5);
bsh % print(node.toString());
[5]</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-typePROPERTY"><a name="66322684_AdminGuide-typePROPERTY"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Properties"  >
        <h5>Properties</h5>
    
            <p>
    The third public class in the jboss-dmr library is <tt class=" ">org.jboss.dmr.Property</tt>. A <tt class=" ">Property</tt> is a <tt class=" ">String =&gt; ModelNode</tt> tuple.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % Property prop = new Property(&quot;stuff&quot;, list);
bsh % print(prop.toString());
org.jboss.dmr.Property@79a5f739
bsh % print(prop.getName());
stuff
bsh % print(prop.getValue());
[
    5,
    10,
    &quot;A string&quot;,
    undefined,
    undefined,
    30
]</code></pre>
        </div>
    </div>
            <p>
    The property can be passed to <tt class=" ">ModelNode.set</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % node.set(prop);
bsh % print(node.getType());
PROPERTY</code></pre>
        </div>
    </div>
            <p>
    The text format for a node of <tt class=" ">ModelType.PROPERTY</tt> is:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(node.toString());
(&quot;stuff&quot; =&gt; [
    5,
    10,
    &quot;A string&quot;,
    undefined,
    undefined,
    30
])</code></pre>
        </div>
    </div>
            <p>
    Directly instantiating a <tt class=" ">Property</tt> via its constructor is not common. More typically one of the two argument <tt class=" ">ModelNode.add</tt> or <tt class=" ">ModelNode.set</tt> variants is used. The first argument is the property name:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode simpleProp = new ModelNode();
bsh % simpleProp.set(&quot;enabled&quot;, true);
bsh % print(simpleProp.toString());
(&quot;enabled&quot; =&gt; true)
bsh % print(simpleProp.getType());
PROPERTY
bsh % ModelNode propList = new ModelNode();
bsh % propList.add(&quot;min&quot;, 1);
bsh % propList.add(&quot;max&quot;, 10);
bsh % print(propList.toString());
[
    (&quot;min&quot; =&gt; 1),
    (&quot;max&quot; =&gt; 10)
]
bsh % print(propList.getType());
LIST
bsh % print(propList.get(0).getType());
PROPERTY</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">asPropertyList()</tt> method provides easy access to a <tt class=" ">List&lt;Property&gt;</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % for (Property prop : propList.asPropertyList()) {
print(prop.getName() + &quot; = &quot; + prop.getValue());
}
min = 1
max = 10</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-typeOBJECT"><a name="66322684_AdminGuide-typeOBJECT"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ModelType.OBJECT"  >
        <h5>ModelType.OBJECT</h5>
    
            <p>
    The most powerful and most commonly used complex value type in jboss-dmr is <tt class=" ">ModelType.OBJECT</tt>. A <tt class=" ">ModelNode</tt> whose value is <tt class=" ">ModelType.OBJECT</tt> internally maintains a <tt class=" ">Map&lt;String, ModelNode</tt>.            </p>
                <p>
    Use the <tt class=" ">get</tt> method variant that takes a string argument to add an entry to the map. If no entry exists under the given name, a new entry is added with a the value being a <tt class=" ">ModelType.UNDEFINED</tt> node. The node is returned:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode range = new ModelNode();
bsh % ModelNode min = range.get(&quot;min&quot;);
bsh % print(range.toString());
{&quot;min&quot; =&gt; undefined}
bsh % min.set(2);
bsh % print(range.toString());
{&quot;min&quot; =&gt; 2}</code></pre>
        </div>
    </div>
            <p>
    Again <strong class=" ">it is important to remember that the</strong> <tt class=" ">get</tt> <strong class=" ">operation may mutate the state of a model node by adding a new entry.</strong> <i class=" ">It is not a read-only operation.</i>            </p>
                <p>
    Since <tt class=" ">get</tt> will never return <tt class=" ">null</tt>, a common pattern is to use method chaining to create the key/value pair:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % range.get(&quot;max&quot;).set(10);
bsh % print(range.toString());
{
    &quot;min&quot; =&gt; 2,
    &quot;max&quot; =&gt; 10
}</code></pre>
        </div>
    </div>
            <p>
    A call to <tt class=" ">get</tt> passing an already existing key will of course return the same model node as was returned the first time <tt class=" ">get</tt> was called with that key:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(min == range.get(&quot;min&quot;));
true</code></pre>
        </div>
    </div>
            <p>
    Multiple parameters can be passed to <tt class=" ">get</tt>. This is a simple way to traverse a tree made up of <tt class=" ">ModelType.OBJECT</tt> nodes. Again, <tt class=" ">get</tt> may mutate the node on which it is invoked; e.g. it will actually create the tree if nodes do not exist. This next example uses a workaround to get beanshell to handle the overloaded <tt class=" ">get</tt> method that takes a variable number of arguments:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % String[] varargs = { &quot;US&quot;, &quot;Missouri&quot;, &quot;St. Louis&quot; };
bsh % salesTerritories.get(varargs).set(&quot;Brian&quot;);
bsh % print(salesTerritories.toString());
{&quot;US&quot; =&gt; {&quot;Missouri&quot; =&gt; {&quot;St. Louis&quot; =&gt; &quot;Brian&quot;}}}</code></pre>
        </div>
    </div>
            <p>
    The normal syntax would be:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>salesTerritories.get(&quot;US&quot;, &quot;Missouri&quot;, &quot;St. Louis&quot;).set(&quot;Brian&quot;);</code></pre>
        </div>
    </div>
            <p>
    The key/value pairs in the map can be accessed as a <tt class=" ">List&lt;Property</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % for (Property prop : range.asPropertyList()) {
print(prop.getName() + &quot; = &quot; + prop.getValue());
}
min = 2</code></pre>
        </div>
    </div>
            <p>
    The semantics of the backing map in a node of <tt class=" ">ModelType.OBJECT</tt> are those of a <tt class=" ">LinkedHashMap</tt>. The map remembers the order in which key/value pairs are added. This is relevant when iterating over the pairs after calling <tt class=" ">asPropertyList()</tt> and for controlling the order in which key/value pairs appear in the output from <tt class=" ">toString()</tt>.            </p>
                <p>
    Since the <tt class=" ">get</tt> method will actually mutate the state of a node if the given key does not exist, <tt class=" ">ModelNode</tt> provides a couple methods to let you check whether the entry is there. The <tt class=" ">has</tt> method simply does that:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(range.has(&quot;unit&quot;));
false
bsh % print(range.has(&quot;min&quot;));
true</code></pre>
        </div>
    </div>
            <p>
    Very often, the need is to not only know whether the key/value pair exists, but whether the value is defined (i.e. not <tt class=" ">ModelType.UNDEFINED</tt>. This kind of check is analogous to checking whether a field in a Java class has a null value. The <tt class=" ">hasDefined</tt> lets you do this:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(range.hasDefined(&quot;unit&quot;));
false
bsh % // Establish an undefined child 'unit';
bsh % range.get(&quot;unit&quot;);
bsh % print(range.toString());
{
    &quot;min&quot; =&gt; 2,
    &quot;max&quot; =&gt; 10,
    &quot;unit&quot; =&gt; undefined
}
bsh % print(range.hasDefined(&quot;unit&quot;));
false
bsh % range.get(&quot;unit&quot;).set(&quot;meters&quot;);
bsh % print(range.hasDefined(&quot;unit&quot;));
true</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ModelType.EXPRESSION"  >
        <h5>ModelType.EXPRESSION</h5>
    
            <p>
    A value of type <tt class=" ">ModelType.EXPRESSION</tt> is stored as a string, but can later be <i class=" ">resolved</i> to different value. The string has a special syntax that should be familiar to those who have used the system property substitution feature in previous JBoss AS releases.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[&lt;prefix&gt;][${&lt;system-property-name&gt;[:&lt;default-value&gt;]}][&lt;suffix&gt;]*</code></pre>
        </div>
    </div>
            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>${queue.length}
http://${host}
http://${host:localhost}:${port:8080}/index.html</code></pre>
        </div>
    </div>
            <p>
    Use the <tt class=" ">setExpression</tt> method to set a node's value to type expression:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode expression = new ModelNode();
bsh % expression.setExpression(&quot;${queue.length}&quot;);
bsh % print(expression.getType());
EXPRESSION</code></pre>
        </div>
    </div>
            <p>
    Calling <tt class=" ">asString()</tt> returns the same string that was input:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(expression.asString());
${queue.length}</code></pre>
        </div>
    </div>
            <p>
    However, calling <tt class=" ">toString()</tt> tells you that this node's value is not of <tt class=" ">ModelType.STRING</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(expression.toString());
expression &quot;${queue.length}&quot;</code></pre>
        </div>
    </div>
            <p>
    When the <tt class=" ">resolve</tt> operation is called, the string is parsed and any embedded system properties are resolved against the JVM's current system property values. A new <tt class=" ">ModelNode</tt> is returned whose value is the resolved string:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % System.setProperty(&quot;queue.length&quot;, &quot;10&quot;);
bsh % ModelNode resolved = expression.resolve();
bsh % print(resolved.asInt());
10</code></pre>
        </div>
    </div>
            <p>
    Note that the type of the <tt class=" ">ModelNode</tt> returned by <tt class=" ">resolve()</tt> is <tt class=" ">ModelType.STRING</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % print(resolved.getType());
STRING</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">resolved.asInt()</tt> call in the previous example only worked because the string &quot;10&quot; happens to be convertible into the int 10.            </p>
                <p>
    Calling <tt class=" ">resolve()</tt> has no effect on the value of the node on which the method is invoked:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % resolved = expression.resolve();
bsh % print(resolved.toString());
&quot;10&quot;
bsh % print(expression.toString());
expression &quot;${queue.length}&quot;</code></pre>
        </div>
    </div>
            <p>
    If an expression cannot be resolved, <tt class=" ">resolve</tt> just uses the original string. The string can include more than one system property substitution:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % expression.setExpression(&quot;http://${host}:${port}/index.html&quot;);
bsh % resolved = expression.resolve();
bsh % print(resolved.asString());
http://${host}:${port}/index.html</code></pre>
        </div>
    </div>
            <p>
    The expression can optionally include a default value, separated from the name of the system property by a colon:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % expression.setExpression(&quot;http://${host:localhost}:${port:8080}/index.html&quot;);
bsh % resolved = expression.resolve();
bsh % print(resolved.asString());
http://localhost:8080/index.html</code></pre>
        </div>
    </div>
            <p>
    Actually including a system property substitution in the expression is not required:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % expression.setExpression(&quot;no system property&quot;);
bsh % resolved = expression.resolve();
bsh % print(resolved.asString());
no system property
bsh % print(expression.toString());
expression &quot;no system property&quot;</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">resolve</tt> method works on nodes of other types as well; it returns a copy without attempting any real resolution:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode basic = new ModelNode();
bsh % basic.set(10);
bsh % resolved = basic.resolve();
bsh % print(resolved.getType());
INT
bsh % resolved.set(5);
bsh % print(resolved.asInt());
5
bsh % print(basic.asInt());
10</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ModelType.TYPE"  >
        <h5>ModelType.TYPE</h5>
    
            <p>
    You can also pass one of the values of the <tt class=" ">ModelType</tt> enum to <tt class=" ">set</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>bsh % ModelNode type = new ModelNode();
bsh % type.set(ModelType.LIST);
bsh % print(type.getType());
TYPE
bsh % print(type.toString());
LIST</code></pre>
        </div>
    </div>
            <p>
    This is useful when using a <tt class=" ">ModelNode</tt> data structure to describe another <tt class=" ">ModelNode</tt> data structure.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Fulllistof%7B%7BModelNode%7D%7Dtypes"  >
        <h5>Full list of  ModelNode  types</h5>
    
            <p>
    BIG_DECIMAL<br/>BIG_INTEGER<br/>BOOLEAN<br/>BYTES<br/>DOUBLE<br/>EXPRESSION<br/>INT<br/>LIST<br/>LONG<br/>OBJECT<br/>PROPERTY<br/>STRING<br/>TYPE<br/>UNDEFINED            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Textrepresentationofa%7B%7BModelNode%7D%7D"  >
        <h5>Text representation of a  ModelNode</h5>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-JSONrepresentationofa%7B%7BModelNode%7D%7D"  >
        <h5>JSON representation of a  ModelNode</h5>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-DescriptionoftheManagementModel"  >
        <h3>Description of the Management Model</h3>
    
            <p>
    A detailed description of the resources, attributes and operations that make up the management model provided by an individual WildFly instance or by any Domain Controller or slave Host Controller process can be queried using the <tt class=" ">read-resource-description</tt>, <tt class=" ">read-operation-names</tt>, <tt class=" ">read-operation-description</tt> and <tt class=" ">read-child-types</tt> operations described in the <a href="66322742.html">Global operations</a> section. In this section we provide details on what's included in those descriptions.            </p>
        <div class="section-4"  id="66322684_AdminGuide-DescriptionoftheWildFlyManagedResources"  >
        <h4>Description of the WildFly Managed Resources</h4>
    
            <p>
    All portions of the management model exposed by WildFly 8 are addressable via an ordered list of key/value pairs. For each addressable <i class=" "><a href="66322693.html">Management Resource</a></i>, the following descriptive information will be available:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">description</tt> &ndash; String &ndash; text description of this portion of the model            </p>
    </li><li class=" ">            <p>
    <tt class=" ">attributes</tt> &ndash; Map of String (the attribute name) to complex structure &ndash; the configuration attributes available in this portion of the model. See <a href="66322684.html#66322684_AdminGuide-attributedescription">below</a> for the representation of each attribute.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">operations</tt> &ndash; Map of String (the operation name) to complex structure &ndash; the operations that can be targetted at this address. See <a href="66322684.html#66322684_AdminGuide-operationdescription">below</a> for the representation of each operation.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">children</tt> &ndash; Map of String (the type of child) to complex structure &ndash; the relationship of this portion of the model to other addressable portions of the model. See <a href="66322684.html#66322684_AdminGuide-childrendescription">below</a> for the representation of each child relationship.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">head-comment-allowed</tt> &ndash; boolean &ndash; indicates whether this portion of the model can store an XML comment that would be written in the persistent form of the model (e.g. domain.xml) before the start of the XML element that represents this portion of the model. This item is optional, and if not present defaults to true. (Note: storing XML comments in the in-memory model is not currently supported. This description key is for future use.)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">tail-comment-allowed</tt> &ndash; boolean &ndash; similar to <tt class=" ">head-comment-allowed</tt>, but indicates whether a comment just before the close of the XML element is supported. A tail comment can only be supported if the element has child elements, in which case a comment can be inserted between the final child element and the element's closing tag. This item is optional, and if not present defaults to true. (Note: storing XML comments in the in-memory model is not currently supported. This description key is for future use.)            </p>
    </li></ul>            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
     &quot;description =&gt; &quot;A manageable resource&quot;,
     &quot;tail-comment-allowed&quot; =&gt; false,
     &quot;attributes&quot; =&gt; {
          &quot;foo&quot; =&gt; {
               .... details of attribute foo
          }
      },
     &quot;operations&quot; =&gt; {
          &quot;start&quot; =&gt; {
               .... details of the start operation
          }
      },
     &quot;children&quot; =&gt; {
          &quot;bar&quot; =&gt; {
               .... details of the relationship with children of type &quot;bar&quot;
          }
      }
}</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-attributedescription"><a name="66322684_AdminGuide-attributedescription"></a></span>
            </p>
        <div class="section-5"  id="66322684_AdminGuide-DescriptionofanAttribute"  >
        <h5>Description of an Attribute</h5>
    
            <p>
    An attribute is a portion of the management model that is not directly addressable. Instead, it is conceptually a property of an addressable <a href="66322693.html">management resource</a>. For each attribute in the model, the following descriptive information will be available:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">description</tt> &ndash; String &ndash; text description of the attribute            </p>
    </li><li class=" ">            <p>
    <tt class=" ">type</tt> &ndash; <tt class=" ">org.jboss.dmr.ModelType</tt> &ndash; the type of the attribute value. One of the enum values BIG_DECIMAL, BIG_INTEGER, BOOLEAN, BYTES, DOUBLE, INT, LIST, LONG, OBJECT, PROPERTY, STRING. Most of these are self-explanatory. An OBJECT will be represented in the detyped model as a map of string keys to values of some other legal type, conceptually similar to a <tt class=" ">javax.management.openmbean.CompositeData</tt>. A PROPERTY is a single key/value pair, where the key is a string, and the value is of some other legal type.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">value-type</tt> &ndash; ModelType or complex structure &ndash; Only present if type is LIST or OBJECT. If all elements in the LIST or all the values of the OBJECT type are of the same type, this will be one of the ModelType enums BIG_DECIMAL, BIG_INTEGER, BOOLEAN, BYTES, DOUBLE, INT,  LONG, STRING. Otherwise, <tt class=" ">value-type</tt> will detail the structure of the attribute value, enumerating the value's fields and the type of their value.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">expressions-allowed</tt> &ndash; boolean &ndash; indicates whether the value of the attribute may be of type <tt class=" ">ModelType.EXPRESSION</tt>, instead of its standard type (see <tt class=" ">type</tt> and <tt class=" ">value-type</tt> above for discussion of an attribute's standard type.) A value of ModelType.EXPRESSION contains a system-property substitution expression that the server will resolve against the server-side system property map before using the value. For example, an attribute named max-threads may have an expression value of <tt class=" ">${example.pool.max-threads:10</tt>} instead of just 10. Default value if not present is false.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">required</tt> &ndash; boolean &ndash; true if the attribute will always exist in a representation of its portion of the model; false if it may not (implying a null value.) If not present, true is the default.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">storage</tt> &ndash; String &ndash; Either &quot;configuration&quot; or &quot;runtime&quot;. If &quot;configuration&quot;, the attribute's value is stored as part of the persistent configuration (e.g. in domain.xml, host.xml or standalone.xml.) If &quot;runtime&quot; the attribute's value is not stored in the persistent configuration; the value only exists as long as the resource is running.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">access-type</tt> &ndash; String &ndash; One of &quot;read-only&quot;, &quot;read-write&quot; or &quot;metric&quot;. Whether an attribute value can be written, or can only read. A &quot;metric&quot; is a read-only attribute whose value is not stored in the persistent configuration, and whose value may change due to activity on the server. If an attribute is &quot;read-write&quot;, the resource will expose an operation named &quot;write-attribute&quot; whose &quot;name&quot; parameter will accept this attribute's name and whose &quot;value&quot; parameter will accept a valid value for this attribute. That operation will be the standard means of updating this attribute's value.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">restart-required</tt> &ndash; String &ndash; One of &quot;no-services&quot;, &quot;all-services&quot;, &quot;resource-services&quot; or &quot;jvm&quot;. Only relevant to attributes whose access-type is read-write. Indicates whether execution of a write-attribute operation whose name parameter specifies this attribute requires a restart of services (or an entire JVM) in order for the change to take effect in the runtime . See discussion of &quot;<a href="66322684.html#66322684_AdminGuide-applyingruntimeupdates">Applying Updates to Runtime Services</a>&quot; below.  Default value is &quot;no-services&quot;.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">alternatives</tt> &ndash; List of string &ndash; Indicates an exclusive relationship between attributes. If this attribute is defined, the other attributes listed in this descriptor's value should be undefined (even if their required descriptor says true; i.e. the presence of this attribute satisfies the requirement.) Default is undefined; i.e. this does not apply to most attributes.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">requires</tt> &ndash; List of string &ndash; Indicates that if this attribute has a value (other than undefined), the other attributes listed in this descriptor's value must also have a value, even if their required descriptor says false. This would typically be used in conjunction with alternatives. For example, attributes &quot;a&quot; and &quot;b&quot; are required, but are alternatives to each other; &quot;c&quot; and &quot;d&quot; are optional. But &quot;b&quot; requires &quot;c&quot; and &quot;d&quot;, so if &quot;b&quot; is used, &quot;c&quot; and &quot;d&quot; must also be defined. Default is undefined; i.e. this does not apply to most attributes.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">head-comment-allowed</tt> &ndash; boolean &ndash; indicates whether the model can store an XML comment that would be written in the persistent form of the model (e.g. domain.xml) before the start of the XML element that represents this attribute. This item is optional, and if not present defaults to false. (This is a different default from what is used for an entire management resource, since model attributes often map to XML attributes, which don't allow comments.) (Note: storing XML comments in the in-memory model is not currently supported. This description key is for future use.)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">tail-comment-allowed</tt> &ndash; boolean &ndash; similar to head-comment-allowed, but indicates whether a comment just before the close of the XML element is supported. A tail comment can only be supported if the element has child elements, in which case a comment can be inserted between the final child element and the element's closing tag. This item is optional, and if not present defaults to false. (This is a different default from what is used for an entire management resource, since model attributes often map to XML attributes, which don't allow comments.) (Note: storing XML comments in the in-memory model is not currently supported. This description key is for future use.)            </p>
    </li><li class=" ">            <p>
    arbitrary key/value pairs that further describe the attribute value, e.g. &quot;max&quot; =&gt; 2. See &quot;<a href="66322684.html#66322684_AdminGuide-arbitrarydescriptors">Arbitrary Descriptors</a>&quot; below.            </p>
    </li></ul>            <p>
    Some examples:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&quot;foo&quot; =&gt; {
     &quot;description&quot; =&gt; &quot;The foo&quot;,
     &quot;type&quot; =&gt; INT,
     &quot;max&quot; =&gt; 2
}</code></pre>
        </div>
    </div>
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&quot;bar&quot; =&gt; {
     &quot;description&quot; =&gt; &quot;The bar&quot;,
     &quot;type&quot; =&gt; OBJECT,
     &quot;value-type&quot; =&gt; {
          &quot;size&quot; =&gt; INT,
          &quot;color&quot; =&gt; STRING
     }
}</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-operationdescription"><a name="66322684_AdminGuide-operationdescription"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-DescriptionofanOperation"  >
        <h5>Description of an Operation</h5>
    
            <p>
    A management resource may have operations associated with it. The description of an operation will include the following information:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">operation-name</tt> &ndash; String &ndash; the name of the operation            </p>
    </li><li class=" ">            <p>
    <tt class=" ">description</tt> &ndash; String &ndash; text description of the operation            </p>
    </li><li class=" ">            <p>
    <tt class=" ">request-properties</tt> &ndash; Map of String to complex structure &ndash; description of the parameters of the operation. Keys are the names of the parameters, values are descriptions of the parameter value types. See <a href="66322684.html#66322684_AdminGuide-paramdescription">below</a> for details on the description of parameter value types.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">reply-properties</tt> &ndash; complex structure, or empty &ndash; description of the return value of the operation, with an empty node meaning void. See <a href="66322684.html#66322684_AdminGuide-paramdescription">below</a> for details on the description of operation return value types.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">restart-required</tt> &ndash; String &ndash; One of &quot;no-services&quot;, &quot;all-services&quot;, &quot;resource-services&quot; or &quot;jvm&quot;. Indicates whether the operation makes a configuration change that requires a restart of services (or an entire JVM) in order for the change to take effect in the runtime. See discussion of &quot;<a href="66322684.html#66322684_AdminGuide-applyingruntimeupdates">Applying Updates to Runtime Services</a>&quot; below.  Default value is &quot;no-services&quot;.            </p>
    </li></ul>            <p>
        <span id="66322684_AdminGuide-paramdescription"><a name="66322684_AdminGuide-paramdescription"></a></span>
            </p>
        <div class="section-6"  id="66322684_AdminGuide-DescriptionofanOperationParameterorReturnValue"  >
        <h6>Description of an Operation Parameter or Return Value</h6>
    
<ul class=" "><li class=" ">            <p>
    <tt class=" ">description</tt> &ndash; String &ndash; text description of the parameter or return value            </p>
    </li><li class=" ">            <p>
    <tt class=" ">type</tt> &ndash; <tt class=" ">org.jboss.dmr.ModelType</tt> &ndash; the type of the parameter or return value. One of the enum values BIG_DECIMAL, BIG_INTEGER, BOOLEAN, BYTES, DOUBLE, INT, LIST, LONG, OBJECT, PROPERTY, STRING.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">value-type</tt> &ndash; <tt class=" ">ModelType</tt> or complex structure &ndash; Only present if type is LIST or OBJECT. If all elements in the LIST or all the values of the OBJECT type are of the same type, this will be one of the ModelType enums  BIG_DECIMAL, BIG_INTEGER, BOOLEAN, BYTES, DOUBLE, INT, LIST, LONG, PROPERTY, STRING. Otherwise, value-type will detail the structure of the attribute value, enumerating the value's fields and the type of their value.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">expressions-allowed</tt> &ndash; boolean &ndash; indicates whether the value of the the parameter or return value may be of type <tt class=" ">ModelType.EXPRESSION</tt>, instead its standard type (see type and value-type above for discussion of the standard type.) A value of ModelType.EXPRESSION contains a system-property substitution expression that the server will resolve against the server-side system property map before using the value. For example, a parameter named max-threads may have an expression value of <tt class=" ">${example.pool.max-threads:10</tt>} instead of just 10. Default value if not present is false.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">required</tt> &ndash; boolean &ndash; Only relevant to parameters. true if the parameter must be present in the request object used to invoke the operation; false if it can omitted. If not present, true is the default.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">nillable</tt> &ndash; boolean &ndash; true if null is a valid value.  If not present, false is the default.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">restart-required</tt> &ndash; String &ndash; One of &quot;no-services&quot;, &quot;all-services&quot;, &quot;resource-services&quot; or &quot;jvm&quot;. Only relevant to attributes whose access-type is read-write. Indicates whether execution of a write-attribute operation whose name parameter specifies this attribute requires a restart of services (or an entire JVM) in order for the change to take effect in the runtime . See discussion of &quot;<a href="66322684.html#66322684_AdminGuide-applyingruntimeupdates">Applying Updates to Runtime Services</a>&quot; below.  Default value is &quot;no-services&quot;.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">alternatives</tt> &ndash; List of string &ndash; Indicates an exclusive relationship between parameters. If this attribute is defined, the other parameters listed in this descriptor's value should be undefined (even if their required descriptor says true; i.e. the presence of this parameter satisfies the requirement.) Default is undefined; i.e. this does not apply to most parameters.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">requires</tt> &ndash; List of string &ndash; Indicates that if this parameter has a value (other than undefined), the other parameters listed in this descriptor's value must also have a value, even if their required descriptor says false. This would typically be used in conjunction with alternatives. For example, parameters &quot;a&quot; and &quot;b&quot; are required, but are alternatives to each other; &quot;c&quot; and &quot;d&quot; are optional. But &quot;b&quot; requires &quot;c&quot; and &quot;d&quot;, so if &quot;b&quot; is used, &quot;c&quot; and &quot;d&quot; must also be defined. Default is undefined; i.e. this does not apply to most parameters.            </p>
    </li><li class=" ">            <p>
    arbitrary key/value pairs that further describe the attribute value, e.g. &quot;max&quot; =&gt;2. See &quot;<a href="66322684.html#66322684_AdminGuide-arbitrarydescriptors">Arbitrary Descriptors</a>&quot; below.            </p>
    </li></ul>            <p>
        <span id="66322684_AdminGuide-arbitrarydescriptors"><a name="66322684_AdminGuide-arbitrarydescriptors"></a></span>
            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ArbitraryDescriptors"  >
        <h5>Arbitrary Descriptors</h5>
    
            <p>
    The description of an attribute, operation parameter or operation return value type can include arbitrary key/value pairs that provide extra information. Whether a particular key/value pair is present depends on the context, e.g. a pair with key &quot;max&quot; would probably only occur as part of the description of some numeric type.            </p>
                <p>
    Following are standard keys and their expected value type. If descriptor authors want to add an arbitrary key/value pair to some descriptor and the semantic matches the meaning of one of the following items, the standard key/value type must be used.            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">min</tt> &ndash; int &ndash; the minimum value of some numeric type. The absence of this item implies there is no minimum value.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">max</tt> &ndash; int &ndash; the maximum value of some numeric type. The absence of this item implies there is no maximum value.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">min-length</tt> &ndash; int &ndash; the minimum length of some string, list or byte[] type. The absence of this item implies a minimum length of zero.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">max-length</tt> &ndash; int &ndash; the maximum length of some string, list or byte[]. The absence of this item implies there is no maximum value.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">nillable</tt> &ndash; boolean &ndash; whether null or a ModelNode of type <tt class=" ">ModelType.UNDEFINED</tt> is a legal value. The absence of this item implies false; i.e. null/undefined is not a legal value.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">allowed</tt> &ndash; List &ndash; a list of legal values. The type of the elements in the list should match the type of the attribute.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">default</tt> &ndash; the default value for the attribute if not present in the model            </p>
    </li><li class=" ">            <p>
    <tt class=" ">unit</tt> - The unit of the value, if one is applicable - e.g. ns, ms, s, m, h, KB, MB, TB. See the <tt class=" ">org.jboss.as.controller.client.helpers.MeasurementUnit</tt> in the org.jboss.as:jboss-as-controller-client artifact for a listing of legal measurement units..            </p>
    </li></ul>            <p>
    Some examples:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
     &quot;operation-name&quot; =&gt; &quot;incrementFoo&quot;,
     &quot;description&quot; =&gt; &quot;Increase the value of the 'foo' attribute by the given amount&quot;,
     &quot;request-properties&quot; =&gt; {
          &quot;increment&quot; =&gt; {
               &quot;type&quot; =&gt; INT,
               &quot;description&quot; =&gt; &quot;The amount to increment&quot;,
               &quot;required&quot; =&gt; true
     }},
     &quot;reply-properties&quot; =&gt; {
               &quot;type&quot; =&gt; INT,
               &quot;description&quot; =&gt; &quot;The new value&quot;,
     }
}</code></pre>
        </div>
    </div>
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
     &quot;operation-name&quot; =&gt; &quot;start&quot;,
     &quot;description&quot; =&gt; &quot;Starts the thing&quot;,
     &quot;request-properties&quot; =&gt; {},
     &quot;reply-properties&quot; =&gt; {}
}</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-childdescription"><a name="66322684_AdminGuide-childdescription"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-DescriptionofParent%2FChildRelationships"  >
        <h5>Description of Parent/Child Relationships</h5>
    
            <p>
    The address used to target an addressable portion of the model must be an ordered list of key value pairs. The effect of this requirement is the addressable portions of the model naturally form a tree structure, with parent nodes in the tree defining what the valid keys are and the children defining what the valid values are. The parent node also defines the cardinality of the relationship. The description of the parent node includes a children element that describes these relationships:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
     ....
     &quot;children&quot; =&gt; {
          &quot;connector&quot; =&gt; {
               .... description of the relationship with children of type &quot;connector&quot;
          },
          &quot;virtual-host&quot; =&gt; {
               .... description of the relationship with children of type &quot;virtual-host&quot;
          }
}</code></pre>
        </div>
    </div>
            <p>
    The description of each relationship will include the following elements:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">description</tt> &ndash; String &ndash; text description of the relationship            </p>
    </li><li class=" ">            <p>
    <tt class=" ">min-occurs</tt> &ndash; int, either 0 or 1 &ndash; Minimum number of children of this type that must exist in a valid model. If not present, the default value is 0.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">max-occurs</tt> &ndash; int &ndash; Maximum number of children of this type that may exist in a valid model. If not present, the default value is Integer.MAX_VALUE, i.e. there is no limit.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">allowed</tt> &ndash; List of strings &ndash; legal values for children names. If not present, there is no restriction on children names.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">model-description</tt> &ndash; either &quot;undefined&quot; or a complex structure &ndash; This is the full description of the child resource (its text description, attributes, operations, children) as detailed above. This may also be &quot;undefined&quot;, i.e. a null value, if the query that asked for the parent node's description did not include the &quot;recursive&quot; param set to true.            </p>
    </li></ul>            <p>
    Example with if the recursive flag was set to true:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
     &quot;description&quot; =&gt; &quot;The connectors used to handle client connections&quot;,
     &quot;min-occurs&quot; &gt; 1,
     &quot;model-description&quot; =&gt; {
          &quot;description&quot; =&gt; &quot;Handles client connections&quot;,
          &quot;attributes =&gt; {
               ... details of children as documented above
          },
          &quot;operations&quot; =&gt; {
               .... details of operations as documented above
          },
          &quot;children&quot; =&gt; {
               .... details of the children's children
          }
     }
}</code></pre>
        </div>
    </div>
            <p>
    If the recursive flag was false:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
     &quot;description&quot; =&gt; &quot;The connectors used to handle client connections&quot;,
     &quot;min-occurs&quot; &gt; 1,
     &quot;model-description&quot; =&gt; undefined
}</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-applyingruntimeupdates"><a name="66322684_AdminGuide-applyingruntimeupdates"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ApplyingUpdatestoRuntimeServices"  >
        <h5>Applying Updates to Runtime Services</h5>
    
            <p>
    An attribute or operation description may include a &quot;<tt class=" ">restart-required</tt>&quot; descriptor; this section is an explanation of the meaning of that descriptor.            </p>
                <p>
    An operation that changes a management resource's persistent configuration usually can also also affect a runtime service associated with the resource. For example, there is a runtime service associated with any host.xml or standalone.xml <tt class=" ">&lt;interface&gt;</tt> element; other services in the runtime depend on that service to provide the <tt class=" ">InetAddress</tt> associated with the interface. In many cases, an update to a resource's persistent configuration can be immediately applied to the associated runtime service. The runtime service's state is updated to reflect the new value(s).            </p>
                <p>
    However, in many cases the runtime service's state cannot be updated without restarting the service. Restarting a service can have broad effects. A restart of a service A will trigger a restart of other services B, C and D that depend A, triggering a restart of services that depend on B, C and D, etc. Those service restarts may very well disrupt handling of end-user requests.            </p>
                <p>
    Because restarting a service can be disruptive to end-user request handling, the handlers for management operations will not restart any service without some form of explicit instruction from the end user indicating a service restart is desired. In a few cases, simply executing the operation is an indication the user wants services to restart (e.g. a <tt class=" ">/host=master/server-config=server-one:restart</tt> operation in a managed domain, or a <tt class=" ">/:reload</tt> operation on a standalone server.) For all other cases, if an operation (or attribute write) cannot be performed without restarting a service, the metadata describing the operation or attribute will include a &quot;<tt class=" ">restart-required</tt>&quot; descriptor whose value indicates what is necessary for the operation to affect the runtime:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">no-services</tt> &ndash; Applying the operation to the runtime does not require the restart of any services. This value is the default if the restart-required descriptor is not present.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">all-services</tt> &ndash; The operation can only immediately update the persistent configuration; applying the operation to the runtime will require a subsequent restart of all services in the affected VM. Executing the operation will put the server into a &quot;<tt class=" ">reload-required</tt>&quot; state. Until a restart of all services is performed the response to this operation and to any subsequent operation will include a response header &quot;<tt class=" ">process-state&quot; =&gt; &quot;reload-required</tt>&quot;. For a standalone server, a restart of all services can be accomplished by executing the <tt class=" ">/:reload</tt> CLI command. For a server in a managed domain, restarting all services currently requires a full restart of the affected server VM (e.g. <tt class=" ">/host=master/server-config=server-one:restart</tt>).            </p>
    </li><li class=" ">            <p>
    <tt class=" ">jvm</tt> --The operation can only immediately update the persistent configuration; applying the operation to the runtime will require a full process restart (i.e. stop the JVM and launch a new JVM). Executing the operation will put the server into a &quot;<tt class=" ">restart-required</tt>&quot; state. Until a restart is performed the response to this operation and to any subsequent operation will include a response header &quot;<tt class=" ">process-state&quot; =&gt; &quot;restart-required</tt>&quot;. For a standalone server, a full process restart requires first stopping the server via OS-level operations (Ctrl-C, kill) or via the <tt class=" ">/:shutdown</tt> CLI command, and then starting the server again from the command line. For a server in a managed domain, restarting a server requires executing the <tt class=" ">/host=&lt;host&gt;/server-config=&lt;server&gt;:restart</tt> operation.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">resource-services</tt> &ndash; The operation can only immediately update the persistent configuration; applying the operation to the runtime will require a subsequent restart of some services associated with the resource. If the operation includes the request header <tt class=" ">&quot;allow-resource-service-restart&quot; =&gt; true</tt>, the handler for the operation will go ahead and restart the runtime service. Otherwise executing the operation will put the server into a &quot;<tt class=" ">reload-required</tt>&quot; state. (See the discussion of &quot;<tt class=" ">all-services</tt>&quot; above for more on the &quot;<tt class=" ">reload-required</tt>&quot; state.)            </p>
    </li></ul>    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-ThenativemanagementAPI"  >
        <h3>The native management API</h3>
    
            <p>
    A standalone WildFly process, or a managed domain Domain Controller or slave Host Controller process can be configured to listen for remote management requests using its &quot;native management interface&quot;:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;native-interface interface=&quot;management&quot; port=&quot;9999&quot; security-realm=&quot;ManagementRealm&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone.xml or domain/configuration/host.xml)</sub>            </p>
                <p>
    The CLI tool that comes with the application server uses this interface, and user can develop custom clients that use it as well. In this section we'll cover the basics on how to develop such a client. We'll also cover details on the format of low-level management operation requests and responses &ndash; information that should prove useful for users of the CLI tool as well.            </p>
        <div class="section-4"  id="66322684_AdminGuide-NativeManagementClientDependencies"  >
        <h4>Native Management Client Dependencies</h4>
    
            <p>
    The native management interface uses an open protocol based on the JBoss Remoting library. JBoss Remoting is used to establish a communication channel from the client to the process being managed. Once the communication channel is established the primary traffic over the channel is management requests initiated by the client and asynchronous responses from the target process.            </p>
                <p>
    A custom Java-based client should have the maven artifact <tt class=" ">org.jboss.as:jboss-as-controller-client</tt> and its dependencies on the classpath. The other dependencies are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Maven Artifact            </td>
                <td rowspan="1" colspan="1">
    Purpose            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss.remoting:jboss-remoting</tt>            </td>
                <td rowspan="1" colspan="1">
    Remote communication            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss:jboss-dmr</tt>            </td>
                <td rowspan="1" colspan="1">
    <a href="66322745.html">Detyped representation of the management model</a>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss.as:jboss-as-protocol</tt>            </td>
                <td rowspan="1" colspan="1">
    Wire protocol for remote WildFly&nbsp;management            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss.sasl:jboss-sasl</tt>            </td>
                <td rowspan="1" colspan="1">
    SASL authentication            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss.xnio:xnio-api</tt>            </td>
                <td rowspan="1" colspan="1">
    Non-blocking IO            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss.xnio:xnio-nio</tt>            </td>
                <td rowspan="1" colspan="1">
    Non-blocking IO            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss.logging:jboss-logging</tt>            </td>
                <td rowspan="1" colspan="1">
    Logging            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss.threads:jboss-threads</tt>            </td>
                <td rowspan="1" colspan="1">
    Thread management            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">org.jboss.marshalling:jboss-marshalling</tt>            </td>
                <td rowspan="1" colspan="1">
    Marshalling and unmarshalling data to/from streams            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    The client API is entirely within the <tt class=" ">org.jboss.as:jboss-as-controller-client</tt> artifact; the other dependencies are part of the internal implementation of <tt class=" ">org.jboss.as:jboss-as-controller-client</tt> and are not compile-time dependencies of any custom client based on it.            </p>
                <p>
    The management protocol is an open protocol, so a completely custom client could be developed without using these libraries (e.g. using Python or some other language.)            </p>
        </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Workingwitha%7B%7BModelControllerClient%7D%7D"  >
        <h4>Working with a  ModelControllerClient</h4>
    
            <p>
    The <tt class=" ">org.jboss.as.controller.client.ModelControllerClient</tt> class is the main class a custom client would use to manage a WildFly server instance or a Domain Controller or slave Host Controller.            </p>
                <p>
    The custom client must have maven artifact <tt class=" ">org.jboss.as:jboss-as-controller-client</tt> and its dependencies on the classpath.            </p>
        <div class="section-5"  id="66322684_AdminGuide-Creatingthe%7B%7BModelControllerClient%7D%7D"  >
        <h5>Creating the  ModelControllerClient</h5>
    
            <p>
    To create a management client that can connect to your target process's native management socket, simply:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ModelControllerClient client = ModelControllerClient.Factory.create(InetAddress.getByName(&quot;localhost&quot;), 9999);</code></pre>
        </div>
    </div>
            <p>
    The address and port are what is configured in the target process' <tt class=" ">&lt;management&gt;&lt;management-interfaces&gt;&lt;native-interface.../&gt;</tt> element.            </p>
                <p>
    Typically, however, the native management interface will be secured, requiring clients to authenticate. On the client side, the custom client will need to provide the user's authentication credentials, obtained in whatever manner is appropriate for the client (e.g. from a dialog box in a GUI-based client.) Access to these credentials is provided by passing in an implementation of the <tt class=" ">javax.security.auth.callback.CallbackHandler</tt> interface. For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>static ModelControllerClient createClient(final InetAddress host, final int port,
                  final String username, final char[] password, final String securityRealmName) {

    final CallbackHandler callbackHandler = new CallbackHandler() {

        public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
            for (Callback current : callbacks) {
                if (current instanceof NameCallback) {
                    NameCallback ncb = (NameCallback) current;
                    ncb.setName(username);
                } else if (current instanceof PasswordCallback) {
                    PasswordCallback pcb = (PasswordCallback) current;
                    pcb.setPassword(password.toCharArray());
                } else if (current instanceof RealmCallback) {
                    RealmCallback rcb = (RealmCallback) current;
                    rcb.setText(rcb.getDefaultText());
                } else {
                    throw new UnsupportedCallbackException(current);
                }
            }
        }
    };

    return ModelControllerClient.Factory.create(host, port, callbackHandler);
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Creatinganoperationrequestobject"  >
        <h5>Creating an operation request object</h5>
    
            <p>
    Management requests are formulated using the <tt class=" ">org.jboss.dmr.ModelNode</tt> class from the <tt class=" ">jboss-dmr</tt> library. The <tt class=" ">jboss-dmr</tt> library allows the complete WildFly management model to be expressed using a very small number of Java types. See <a href="66322745.html">Detyped management and the jboss-dmr library</a> for full details on using this library.            </p>
                <p>
    Let's show an example of creating an operation request object that can be used to <a href="66322742.html#66322742_Globaloperations-readresourcedescription">read the resource description</a> for the web subsystem's HTTP connector:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ModelNode op = new ModelNode();
op.get(&quot;operation&quot;).set(&quot;read-resource-description&quot;);

ModelNode address = op.get(&quot;address&quot;);
address.add(&quot;subsystem&quot;, &quot;web&quot;);
address.add(&quot;connector&quot;, &quot;http&quot;);

op.get(&quot;recursive&quot;).set(true);
op.get(&quot;operations&quot;).set(true);</code></pre>
        </div>
    </div>
            <p>
    What we've done here is created a ModelNode of type <tt class=" ">ModelType.OBJECT</tt> with the following fields:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">operation</tt> &ndash; the name of the operation to invoke. All operation requests <strong class=" ">must</strong> include this field and its value must be a String.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">address</tt> &ndash; the address of the resource to invoke the operation against. This field's must be of <tt class=" ">ModelType.LIST</tt> with each element in the list being a <tt class=" ">ModelType.PROPERTY</tt>. If this field is omitted the operation will target the root resource. The operation can be targeted at any address in the management model; here we are targeting it at the resource for the web subsystem's http connector.            </p>
    </li></ul>            <p>
    In this case, the request includes two optional parameters:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">recursive</tt> &ndash; true means you want the description of child resources under this resource. Default is false            </p>
    </li><li class=" ">            <p>
    <tt class=" ">operations</tt> &ndash; true means you want the description of operations exposed by the resource to be included. Default is false.            </p>
    </li></ul>            <p>
    Different operations take different parameters, and some take no parameters at all.            </p>
                <p>
    See <a href="66322684.html#66322684_AdminGuide-requestformat">Format of a Detyped Operation Request</a> for full details on the structure of a ModelNode that will represent an operation request.            </p>
                <p>
    The example above produces an operation request ModelNode equivalent to what the CLI produces internally when it parses and executes the following low-level CLI command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[localhost:9999 /] /subsystem=web/connector=http:read-resource-description(recursive=true,operations=true)</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Executetheoperationandmanipulatetheresult%3A"  >
        <h5>Execute the operation and manipulate the result:</h5>
    
            <p>
    The <tt class=" ">execute</tt> method sends the operation request ModelNode to the process being managed and returns a ModelNode the contains the process' response:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ModelNode returnVal = client.execute(op);
System.out.println(returnVal.get(&quot;result&quot;).toString());</code></pre>
        </div>
    </div>
            <p>
    See <a href="66322684.html#66322684_AdminGuide-responseformat">Format of a Detyped Operation Response</a> for general details on the structure of the &quot;returnVal&quot; ModelNode.            </p>
                <p>
    The <tt class=" ">execute</tt> operation shown above will block the calling thread until the response is received from the process being managed. <tt class=" ">ModelControllerClient</tt> also exposes and API allowing asynchronous invocation:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>Future&lt;ModelNode&gt; future = client.executeAsync(op);
. . .  // do other stuff
ModelNode returnVal = future.get();
System.out.println(returnVal.get(&quot;result&quot;).toString());</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-Closethe%7B%7BModelControllerClient%7D%7D"  >
        <h5>Close the  ModelControllerClient</h5>
    
            <p>
    A <tt class=" ">ModelControllerClient</tt> can be reused for multiple requests. Creating a new <tt class=" ">ModelControllerClient</tt> for each request is an anti-pattern. However, when the <tt class=" ">ModelControllerClient</tt> is no longer needed, it should always be explicitly closed, allowing it to close down any connections to the process it was managing and release other resources:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>client.close();</code></pre>
        </div>
    </div>
            <p>
        <span id="66322684_AdminGuide-requestformat"><a name="66322684_AdminGuide-requestformat"></a></span>
            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-FormatofaDetypedOperationRequest"  >
        <h4>Format of a Detyped Operation Request</h4>
    
            <p>
    The basic method a user of the WildFly 8 programmatic management API would use is very simple:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ModelNode execute(ModelNode operation) throws IOException;</code></pre>
        </div>
    </div>
            <p>
    where the return value is the detyped representation of the response, and <tt class=" ">operation</tt> is the detyped representation of the operation being invoked.            </p>
                <p>
    The purpose of this section is to document the structure of <tt class=" ">operation</tt>.            </p>
                <p>
    See <a href="66322684.html#66322684_AdminGuide-responseformat">Format of a Detyped Operation Response</a> for a discussion of the format of the response.            </p>
        <div class="section-5"  id="66322684_AdminGuide-SimpleOperations"  >
        <h5>Simple Operations</h5>
    
            <p>
    A text representation of simple operation would look like this:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;operation&quot; =&gt; &quot;write-attribute&quot;,
    &quot;address&quot; =&gt; [
        (&quot;profile&quot; =&gt; &quot;production&quot;),
        (&quot;subsystem&quot; =&gt; &quot;threads&quot;),
        (&quot;bounded-queue-thread-pool&quot; =&gt; &quot;pool1&quot;)
    ],
    &quot;name&quot; =&gt; &quot;count&quot;,
    &quot;value&quot; =&gt; 20
}</code></pre>
        </div>
    </div>
            <p>
    Java code to produce that output would be:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ModelNode op = new ModelNode();
op.get(&quot;operation&quot;).set(&quot;write-attribute&quot;);
ModelNode addr = op.get(&quot;address&quot;);
addr.add(&quot;profile&quot;, &quot;production&quot;);
addr.add(&quot;subsystem&quot;, &quot;threads&quot;);
addr.add(&quot;bounded-queue-thread-pool&quot;, &quot;pool1&quot;);
op.get(&quot;name&quot;).set(&quot;count&quot;);
op.get(&quot;value&quot;).set(20);
System.out.println(op);</code></pre>
        </div>
    </div>
            <p>
    The order in which the outermost elements appear in the request is not relevant. The required elements are:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">operation</tt> &ndash; String &ndash; The name of the operation being invoked.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">address</tt> &ndash; the address of the managed resource against which the request should be executed. If not set, the address is the root resource. The address is an ordered list of key-value pairs describing where the resource resides in the overall management resource tree. Management resources are organized in a tree, so the order in which elements in the address occur is important.            </p>
    </li></ul>            <p>
    The other key/value pairs are parameter names and their values. The names and values should match what is specified in the <a href="66322746.html#66322746_DescriptionoftheManagementModel-operationdescription">operation's description</a>.            </p>
                <p>
    Parameters may have any name, except for the reserved words <tt class=" ">operation</tt>, <tt class=" ">address</tt> and <tt class=" ">operation-headers</tt>.            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-OperationHeaders"  >
        <h5>Operation Headers</h5>
    
            <p>
    Besides the special operation and address values discussed above, operation requests can also include special &quot;header&quot; values that help control how the operation executes. These headers are created under the special reserved word <tt class=" ">operation-headers</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ModelNode op = new ModelNode();
op.get(&quot;operation&quot;).set(&quot;write-attribute&quot;);
ModelNode addr = op.get(&quot;address&quot;);
addr.add(&quot;base&quot;, &quot;domain&quot;);
addr.add(&quot;profile&quot;, &quot;production&quot;);
addr.add(&quot;subsystem&quot;, &quot;threads&quot;);
addr.add(&quot;bounded-queue-thread-pool&quot;, &quot;pool1&quot;);
op.get(&quot;name&quot;).set(&quot;count&quot;);
op.get(&quot;value&quot;).set(20);
op.get(&quot;operation-headers&quot;, &quot;rollback-on-runtime-failure&quot;).set(false);
System.out.println(op);</code></pre>
        </div>
    </div>
            <p>
    This produces:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;operation&quot; =&gt; &quot;write-attribute&quot;,
    &quot;address&quot; =&gt; [
        (&quot;profile&quot; =&gt; &quot;production&quot;),
        (&quot;subsystem&quot; =&gt; &quot;threads&quot;),
        (&quot;bounded-queue-thread-pool&quot; =&gt; &quot;pool1&quot;)
    ],
    &quot;name&quot; =&gt; &quot;count&quot;,
    &quot;value&quot; =&gt; 20,
    &quot;operation-headers&quot; =&gt; {
        &quot;rollback-on-runtime-failure =&gt; false
    }
}</code></pre>
        </div>
    </div>
            <p>
    The following operation headers are supported:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">rollback-on-runtime-failure</tt> &ndash; boolean, optional, defaults to true. Whether an operation that successfully updates the persistent configuration model should be reverted if it fails to apply to the runtime. Operations that affect the persistent configuration are applied in two stages &ndash; first to the configuration model and then to the actual running services. If there is an error applying to the configuration model the operation will be aborted with no configuration change and no change to running services will be attempted. However, operations are allowed to change the configuration model even if there is a failure to apply the change to the running services &ndash; if and only if this <tt class=" ">rollback-on-runtime-failure</tt> header is set to <tt class=" ">false</tt>.  So, this header only deals with what happens if there is a problem applying an operation to the running state of a server (e.g. actually increasing the size of a runtime thread pool.)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">rollout-plan</tt> &ndash; only relevant to requests made to a Domain Controller or Host Controller. See &quot;<a href="66322684.html#66322684_AdminGuide-rolloutplan">Operations with a Rollout Plan</a>&quot; for details.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">allow-resource-service-restart</tt> &ndash; boolean, optional, defaults to false. Whether an operation that requires restarting some runtime services in order to take effect should do so. See discussion of <tt class=" ">resource-services</tt> in the <a href="66322746.html#66322746_DescriptionoftheManagementModel-applyingruntimeupdates">&quot;Applying Updates to Runtime Services&quot; section of the Description of the Management Model section</a> for further details.            </p>
    </li></ul>            <p>
        <span id="66322684_AdminGuide-compositeoperations"><a name="66322684_AdminGuide-compositeoperations"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-CompositeOperations"  >
        <h5>Composite Operations</h5>
    
            <p>
    The root resource for a Domain or Host Controller or an individual server will expose an operation named &quot;<tt class=" ">composite</tt>&quot;.   This operation executes a list of other operations as an atomic unit (although the atomicity requirement can be <a href="66322684.html#66322684_AdminGuide-rollbackonruntimefailure">relaxed</a>.  The structure of the request for the &quot;<tt class=" ">composite</tt>&quot; operation has the same fundamental structure as a simple operation (i.e. operation name, address, params as key value pairs).            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;operation&quot; =&gt; &quot;composite&quot;,
    &quot;address&quot; =&gt; [],
    &quot;steps&quot; =&gt; [
         {
              &quot;operation&quot; =&gt; &quot;write-attribute&quot;,
              &quot;address&quot; =&gt; [
                   (&quot;profile&quot; =&gt; &quot;production&quot;),
                   (&quot;subsystem&quot; =&gt; &quot;threads&quot;),
                   (&quot;bounded-queue-thread-pool&quot; =&gt; &quot;pool1&quot;)
              ],
              &quot;count&quot; =&gt; &quot;count&quot;,
              &quot;value&quot; =&gt; 20
         },
         {
              &quot;operation&quot; =&gt; &quot;write-attribute&quot;,
              &quot;address&quot; =&gt; [
                   (&quot;profile&quot; =&gt; &quot;production&quot;),
                   (&quot;subsystem&quot; =&gt; &quot;threads&quot;),
                   (&quot;bounded-queue-thread-pool&quot; =&gt; &quot;pool2&quot;)
              ],
              &quot;name&quot; =&gt; &quot;count&quot;,
              &quot;value&quot; =&gt; 10
         }
    ],
    &quot;operation-headers&quot; =&gt; {
        &quot;rollback-on-runtime-failure =&gt; false
    }
}</code></pre>
        </div>
    </div>
            <p>
    The &quot;composite&quot; operation takes a single parameter:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">steps</tt> &ndash; a list, where each item in the list has the same structure as a simple operation request. In the example above each of the two steps is modifying the thread pool configuration for a different pool. There need not be any particular relationship between the steps. Note that the <tt class=" ">rollback-on-runtime-failure</tt> and <tt class=" ">rollout-plan</tt> operation headers are not supported for the individual steps in a composite operation.            </p>
    </li></ul>            <p>
        <span id="66322684_AdminGuide-rollbackonruntimefailure"><a name="66322684_AdminGuide-rollbackonruntimefailure"></a></span>
<br/>The <tt class=" ">rollback-on-runtime-failure</tt> operation header discussed above has a particular meaning when applied to a composite operation, controlling whether steps that successfully execute should be reverted if other steps fail at runtime. Note that if any steps modify the persistent configuration, and any of those steps fail, all steps will be reverted. Partial/incomplete changes to the persistent configuration are not allowed.            </p>
                <p>
        <span id="66322684_AdminGuide-rolloutplan"><a name="66322684_AdminGuide-rolloutplan"></a></span>
            </p>
        </div>
    
    <div class="section-5"  id="66322684_AdminGuide-OperationswithaRolloutPlan"  >
        <h5>Operations with a Rollout Plan</h5>
    
            <p>
    Operations targeted at domain or host level resources can potentially impact multiple servers. Such operations can include a &quot;rollout plan&quot; detailing the sequence in which the operation should be applied to servers as well as policies for detailing whether the operation should be reverted if it fails to execute successfully on some servers.            </p>
                <p>
    If the operation includes a rollout plan, the structure is as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;operation&quot; =&gt; &quot;write-attribute&quot;,
    &quot;address&quot; =&gt; [
        (&quot;profile&quot; =&gt; &quot;production&quot;),
        (&quot;subsystem&quot; =&gt; &quot;threads&quot;),
        (&quot;bounded-queue-thread-pool&quot; =&gt; &quot;pool1&quot;)
    ],
    &quot;name&quot; =&gt; &quot;count&quot;,
    &quot;value&quot; =&gt; 20,
    &quot;operation-headers&quot; =&gt; {
        &quot;rollout-plan&quot; =&gt; {
            &quot;in-series&quot; =&gt; [
                {
                    &quot;concurrent-groups&quot; =&gt; {
                        &quot;groupA&quot; =&gt; {
                            &quot;rolling-to-servers&quot; =&gt; true,
                            &quot;max-failure-percentage&quot; =&gt; 20
                        },
                        &quot;groupB&quot; =&gt; undefined
                    }
                },
                {
                   &quot;server-group&quot; =&gt; {
                        &quot;groupC&quot; =&gt; {
                            &quot;rolling-to-servers&quot; =&gt; false,
                            &quot;max-failed-servers&quot; =&gt; 1
                        }
                    }
                },
                {
                    &quot;concurrent-groups&quot; =&gt; {
                        &quot;groupD&quot; =&gt; {
                            &quot;rolling-to-servers&quot; =&gt; true,
                            &quot;max-failure-percentage&quot; =&gt; 20
                        },
                        &quot;groupE&quot; =&gt; undefined
                    }
                }
            ],
            &quot;rollback-across-groups&quot; =&gt; true
        }
    }
}</code></pre>
        </div>
    </div>
            <p>
    As you can see, the rollout plan is another structure in the operation-headers section. The root node of the structure allows two children:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">in-series</tt> &ndash; a list &ndash; A list of activities that are to be performed in series, with each activity reaching completion before the next step is executed. Each activity involves the application of the operation to the servers in one or more server groups. See below for details on each element in the list.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">rollback-across-groups</tt> &ndash; boolean &ndash; indicates whether the need to rollback the operation on all the servers in one server group should trigger a rollback across all the server groups. This is an optional setting, and defaults to <tt class=" ">false</tt>.            </p>
    </li></ul>            <p>
    Each element in the list under the <tt class=" ">in-series</tt> node must have one or the other of the following structures:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">concurrent-groups</tt> &ndash; a map of server group names to policies controlling how the operation should be applied to that server group. For each server group in the map, the operation may be applied concurrently. See below for details on the per-server-group policy configuration.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">server-group</tt> &ndash; a single key/value mapping of a server group name to a policy controlling how the operation should be applied to that server group. See below for details on the policy configuration. (Note: there is no difference in plan execution between this and a &quot;<tt class=" ">concurrent-groups</tt>&quot; map with a single entry.)            </p>
    </li></ul>            <p>
    The policy controlling how the operation is applied to the servers within a server group has the following elements, each of which is optional:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">rolling-to-servers</tt> &ndash; boolean &ndash; If true, the operation will be applied to each server in the group in series. If false or not specified, the operation will be applied to the servers in the group concurrently.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">max-failed-servers</tt> &ndash; int &ndash; Maximum number of servers in the group that can fail to apply the operation before it should be reverted on all servers in the group. The default value if not specified is zero; i.e. failure on any server triggers rollback across the group.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">max-failure-percentage</tt> &ndash; int between 0 and 100 &ndash; Maximum percentage of the total number of servers in the group that can fail to apply the operation before it should be reverted on all servers in the group. The default value if not specified is zero; i.e. failure on any server triggers rollback across the group.            </p>
    </li></ul>            <p>
    If both <tt class=" ">max-failed-servers</tt> and <tt class=" ">max-failure-percentage</tt> are set, <tt class=" ">max-failure-percentage</tt> takes precedence.            </p>
                <p>
    Looking at the (contrived) example above, application of the operation to the servers in the domain would be done in 3 phases. If the policy for any server group triggers a rollback of the operation across the server group, all other server groups will be rolled back as well. The 3 phases are:            </p>
    <ol class=" "><li class=" ">            <p>
    Server groups groupA and groupB will have the operation applied concurrently. The operation will be applied to the servers in groupA in series, while all servers in groupB will handle the operation concurrently. If more than 20% of the servers in groupA fail to apply the operation, it will be rolled back across that group. If any servers in groupB fail to apply the operation it will be rolled back across that group.            </p>
    </li><li class=" ">            <p>
    Once all servers in groupA and groupB are complete, the operation will be applied to the servers in groupC. Those servers will handle the operation concurrently. If more than one server in groupC fails to apply the operation it will be rolled back across that group.            </p>
    </li><li class=" ">            <p>
    Once all servers in groupC are complete, server groups groupD and groupE will have the operation applied concurrently. The operation will be applied to the servers in groupD in series, while all servers in groupE will handle the operation concurrently. If more than 20% of the servers in groupD fail to apply the operation, it will be rolled back across that group. If any servers in groupE fail to apply the operation it will be rolled back across that group.            </p>
    </li></ol>    <div class="section-6"  id="66322684_AdminGuide-DefaultRolloutPlan"  >
        <h6>Default Rollout Plan</h6>
    
            <p>
    All operations that impact multiple servers will be executed with a rollout plan. However, actually specifying the rollout plan in the operation request is not required. If no <tt class=" ">rollout-plan</tt> operation header is specified, a default plan will be generated. The plan will have the following characteristics:            </p>
    <ul class=" "><li class=" ">            <p>
    There will only be a single high level phase. All server groups affected by the operation will have the operation applied concurrently.            </p>
    </li><li class=" ">            <p>
    Within each server group, the operation will be applied to all servers concurrently.            </p>
    </li><li class=" ">            <p>
    Failure on any server in a server group will cause rollback across the group.            </p>
    </li><li class=" ">            <p>
    Failure of any server group will result in rollback of all other server groups.            </p>
    </li></ul>            <p>
        <span id="66322684_AdminGuide-responseformat"><a name="66322684_AdminGuide-responseformat"></a></span>
            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-FormatofaDetypedOperationResponse"  >
        <h4>Format of a Detyped Operation Response</h4>
    
            <p>
    As noted previously, the basic method a user of the WildFly 8 programmatic management API would use is very simple:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ModelNode execute(ModelNode operation) throws IOException;</code></pre>
        </div>
    </div>
            <p>
    where the return value is the detyped representation of the response, and <tt class=" ">operation</tt> is the detyped representation of the operating being invoked.            </p>
                <p>
    The purpose of this section is to document the structure of the return value.            </p>
                <p>
    For the format of the request, see <a href="66322684.html#66322684_AdminGuide-requestformat">Format of a Detyped Operation Request</a>.            </p>
        <div class="section-5"  id="66322684_AdminGuide-SimpleResponses"  >
        <h5>Simple Responses</h5>
    
            <p>
    Simple responses are provided by the following types of operations:            </p>
    <ul class=" "><li class=" ">            <p>
    Non-composite operations that target a single server. (See below for more on composite operations).            </p>
    </li><li class=" ">            <p>
    Non-composite operations that target a Domain Controller or slave Host Controller and don't require the responder to apply the operation on multiple servers and aggregate their results (e.g. a simple read of a domain configuration property.)            </p>
    </li></ul>            <p>
    The response will always include a simple boolean outcome field, with one of three possible values:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">success</tt> &ndash; the operation executed successfully            </p>
    </li><li class=" ">            <p>
    <tt class=" ">failed</tt> &ndash; the operation failed            </p>
    </li><li class=" ">            <p>
    <tt class=" ">cancelled</tt> &ndash; the execution of the operation was cancelled. (This would be an unusual outcome for a simple operation which would generally very rapidly reach a point in its execution where it couldn't be cancelled.)            </p>
    </li></ul>            <p>
    The other fields in the response will depend on whether the operation was successful.            </p>
                <p>
    The response for a failed operation:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;failed&quot;,
    &quot;failure-description&quot; =&gt; &quot;[JBAS-12345] Some failure message&quot;
}</code></pre>
        </div>
    </div>
            <p>
    A response for a successful operation will include an additional field:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">result</tt> &ndash; the return value, or <tt class=" ">undefined</tt> for void operations or those that return null            </p>
    </li></ul>            <p>
    A non-void result:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;name&quot; =&gt; &quot;Brian&quot;,
        &quot;age&quot; =&gt; 22
    }
}</code></pre>
        </div>
    </div>
            <p>
    A void result:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined
}</code></pre>
        </div>
    </div>
            <p>
    The response for a cancelled operation has no other fields:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;cancelled&quot;
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-ResponseHeaders"  >
        <h5>Response Headers</h5>
    
            <p>
    Besides the standard <tt class=" ">outcome</tt>, <tt class=" ">result</tt> and <tt class=" ">failure-description</tt> fields described above, the response may also include various headers that provide more information about the affect of the operation or about the overall state of the server. The headers will be child element under a field named <tt class=" ">response-headers</tt>. For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;response-headers&quot; =&gt; {
        &quot;operation-requires-reload&quot; =&gt; true,
        &quot;process-state&quot; =&gt; &quot;reload-required&quot;
    }
}</code></pre>
        </div>
    </div>
            <p>
    A response header is typically related to whether an operation could be applied to the targeted runtime without requiring a restart of some or all services, or even of the target process itself. Please see the <a href="66322746.html#66322746_DescriptionoftheManagementModel-applyingruntimeupdates">&quot;Applying Updates to Runtime Services&quot; section of the Description of the Management Model section</a> for a discussion of the basic concepts related to what happens if an operation requires a service restart to be applied.            </p>
                <p>
    The current possible response headers are:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">operation-requires-reload</tt> &ndash; boolean &ndash; indicates that the specific operation that has generated this response requires a restart of all services in the process in order to take effect in the runtime. This would typically only have a value of 'true'; the absence of the header is the same as a value of 'false.'            </p>
    </li><li class=" ">            <p>
    <tt class=" ">operation-requires-restart</tt> &ndash; boolean &ndash; indicates that the specific operation that has generated this response requires a full process restart in order to take effect in the runtime. This would typically only have a value of 'true'; the absence of the header is the same as a value of 'false.'            </p>
    </li><li class=" ">            <p>
    <tt class=" ">process-state</tt> &ndash; enumeration &ndash; Provides information about the overall state of the target process. One of the following values:            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">starting</tt> &ndash; the process is starting            </p>
    </li><li class=" ">            <p>
    <tt class=" ">running</tt> &ndash; the process is in a normal running state. The <tt class=" ">process-state</tt> header would typically not be seen with this value; the absence of the header is the same as a value of 'running'.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">reload-required</tt> &ndash; some operation (not necessarily this one) has executed that requires a restart of all services in order for a configuration change to take effect in the runtime.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">restart-required</tt> &ndash; some operation (not necessarily this one) has executed that requires a full process restart in order for a configuration change to take effect in the runtime.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">stopping</tt> &ndash; the process is stopping            </p>
    </li></ul></li></ul>    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-BasicCompositeOperationResponses"  >
        <h5>Basic Composite Operation Responses</h5>
    
            <p>
    A composite operation is one that incorporates more than one simple operation in a list and executes them atomically. See the <a href="66322684.html#66322684_AdminGuide-compositeoperations">&quot;Composite Operations&quot; section</a> for more information.            </p>
                <p>
    Basic composite responses are provided by the following types of operations:            </p>
    <ul class=" "><li class=" ">            <p>
    Composite operations that target a single server.            </p>
    </li><li class=" ">            <p>
    Composite operations that target a Domain Controller or a slave Host Controller and don't require the responder to apply the operation on multiple servers and aggregate their results (e.g. a list of simple reads of domain configuration properties.)            </p>
    </li></ul>            <p>
    The high level format of a basic composite operation response is largely the same as that of a simple operation response, although there is an important semantic difference. For a composite operation, the meaning of the outcome flag is controlled by the value of the operation request's <tt class=" ">rollback-on-runtime-failure</tt> header field. If that field was <tt class=" ">false</tt> (default is true), the outcome flag will be success if all steps were successfully applied to the persistent configuration even if <strong class=" ">none</strong> of the composite operation's steps was successfully applied to the runtime.            </p>
                <p>
    What's distinctive about a composite operation response is the <tt class=" ">result</tt> field. First, even if the operation was not successful, the <tt class=" ">result</tt> field will usually be present. (It won't be present if there was some sort of immediate failure that prevented the responder from even attempting to execute the individual operations.)  Second, the content of the <tt class=" ">result</tt> field will be a map. Each entry in the map will record the result of an element in the <tt class=" ">steps</tt> parameter of the composite operation request. The key for each item in the map will be the string &quot;<tt class=" ">step-X</tt>&quot; where &quot;X&quot; is the 1-based index of the step's position in the request's <tt class=" ">steps</tt> list. So each individual operation in the composite operation will have its result recorded.            </p>
                <p>
    The individual operation results will have the same basic format as the simple operation results described above. However, there are some differences from the simple operation case when the individual operation's <tt class=" ">outcome</tt> flag is <tt class=" ">failed</tt>.  These relate to the fact that in a composite operation, individual operations can be rolled back or not even attempted.            </p>
                <p>
    If an individual operation was not even attempted (because the overall operation was cancelled or, more likely, a prior operation failed):            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;cancelled&quot;
}</code></pre>
        </div>
    </div>
            <p>
    An individual operation that failed and was rolled back:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;failed&quot;,
    &quot;failure-description&quot; =&gt; &quot;[JBAS-12345] Some failure message&quot;,
    &quot;rolled-back&quot; =&gt; true
}</code></pre>
        </div>
    </div>
            <p>
    An individual operation that itself succeeded but was rolled back due to failure of another operation:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;failed&quot;,
    &quot;result&quot; =&gt; {
        &quot;name&quot; =&gt; &quot;Brian&quot;,
        &quot;age&quot; =&gt; 22
    },
    &quot;rolled-back&quot; =&gt; true
}</code></pre>
        </div>
    </div>
            <p>
    An operation that failed and was rolled back:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;failed&quot;,
    &quot;failure-description&quot; =&gt; &quot;[JBAS-12345] Some failure message&quot;,
    &quot;rolled-back&quot; =&gt; true
}</code></pre>
        </div>
    </div>
            <p>
    Here's an example of the response for a successful 2 step composite operation:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        {
            &quot;outcome&quot; =&gt; &quot;success&quot;,
            &quot;result&quot; =&gt; {
                &quot;name&quot; =&gt; &quot;Brian&quot;,
                &quot;age&quot; =&gt; 22
            }
        },
        {
            &quot;outcome&quot; =&gt; &quot;success&quot;,
            &quot;result&quot; =&gt; undefined
        }
    ]
}</code></pre>
        </div>
    </div>
            <p>
    And for a failed 3 step composite operation, where the first step succeeded and the second failed, triggering cancellation of the 3rd and rollback of the others:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;failed&quot;,
    &quot;failure-description&quot; =&gt; &quot;[JBAS-99999] Composite operation failed; see individual operation results for details&quot;,
    &quot;result&quot; =&gt; [
        {
            &quot;outcome&quot; =&gt; &quot;failed&quot;,
            &quot;result&quot; =&gt; {
                &quot;name&quot; =&gt; &quot;Brian&quot;,
                &quot;age&quot; =&gt; 22
            },
            &quot;rolled-back&quot; =&gt; true
        },
        {
            &quot;outcome&quot; =&gt; &quot;failed&quot;,
            &quot;failure-description&quot; =&gt; &quot;[JBAS-12345] Some failure message&quot;,
            &quot;rolled-back&quot; =&gt; true
        },
        {
            &quot;outcome&quot; =&gt; &quot;cancelled&quot;
        }
    ]
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322684_AdminGuide-MultiServerResponses"  >
        <h5>Multi-Server Responses</h5>
    
            <p>
    Multi-server responses are provided by operations that target a Domain Controller or slave Host Controller and require the responder to apply the operation on multiple servers and aggregate their results (e.g. nearly all domain or host configuration updates.)            </p>
                <p>
    Multi-server operations are executed in several stages.            </p>
                <p>
    First, the operation may need to be applied against the authoritative configuration model maintained by the Domain Controller (for <tt class=" ">domain.xml</tt> confgurations) or a Host Controller (for a <tt class=" ">host.xml</tt> configuration). If there is a failure at this stage, the operation is automatically rolled back, with a response like this:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;failed&quot;,
    &quot;domain-failure-description&quot; =&gt; &quot;[JBAS-33333] Failed to apply X to the domain model&quot;
}</code></pre>
        </div>
    </div>
            <p>
    If the operation was addressed to the domain model, in the next stage the Domain Controller will ask each slave Host Controller to apply it to its local copy of the domain model. If any Host Controller fails to do so, the Domain Controller will tell all Host Controllers to revert the change, and it will revert the change locally as well. The response to the client will look like this:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;failed&quot;,
    &quot;host-failure-descriptions&quot; =&gt; {
        &quot;hostA&quot; =&gt; &quot;[DOM-3333] Failed to apply to the domain model&quot;,
        &quot;hostB&quot; =&gt; &quot;[DOM-3333] Failed to apply to the domain model&quot;
    }
}</code></pre>
        </div>
    </div>
            <p>
    If the preceding stages succeed, the operation will be pushed to all affected servers. If the operation is successful on all servers, the response will look like this (this example operation has a void response, hence the result for each server is undefined):            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;server-groups&quot; =&gt; {
        &quot;groupA&quot; =&gt; {
            &quot;serverA-1&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host1&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined
                }
            },
            &quot;serverA-2&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host2&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined
                }
            }
        },
        &quot;groupB&quot; =&gt; {
            &quot;serverB-1&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host1&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined
                }
            },
            &quot;serverB-2&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host2&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined
                }
            }
        }
    }
}</code></pre>
        </div>
    </div>
            <p>
    The operation need not succeed on all servers in order to get an <tt class=" ">&quot;outcome&quot; =&gt; &quot;success&quot;</tt> result. All that is required is that it succeed on at least one server without the rollback policies in the rollout plan triggering a rollback on that server. An example response in such a situation would look like this:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; undefined,
    &quot;server-groups&quot; =&gt; {
        &quot;groupA&quot; =&gt; {
            &quot;serverA-1&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host1&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined
                }
            },
            &quot;serverA-2&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host2&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined
                }
            }
        },
        &quot;groupB&quot; =&gt; {
            &quot;serverB-1&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host1&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined,
                    &quot;rolled-back&quot; =&gt; true
                }
            },
            &quot;serverB-2&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host2&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined,
                    &quot;rolled-back&quot; =&gt; true
                }
            },
            &quot;serverB-3&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host3&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;failed&quot;,
                    &quot;failure-description&quot; =&gt; &quot;[DOM-4556] Something didn't work right&quot;,
                    &quot;rolled-back&quot; =&gt; true
                }
            }
        }
    }
}</code></pre>
        </div>
    </div>
            <p>
    Finally, if the operation fails or is rolled back on all servers, an example response would look like this:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>{
    &quot;outcome&quot; =&gt; &quot;failed&quot;,
    &quot;server-groups&quot; =&gt; {
        &quot;groupA&quot; =&gt; {
            &quot;serverA-1&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host1&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined
                }
            },
            &quot;serverA-2&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host2&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;success&quot;,
                    &quot;result&quot; =&gt; undefined
                }
            }
        },
        &quot;groupB&quot; =&gt; {
            &quot;serverB-1&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host1&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;failed&quot;,
                    &quot;result&quot; =&gt; undefined,
                    &quot;rolled-back&quot; =&gt; true
                }
            },
            &quot;serverB-2&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host2&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;failed&quot;,
                    &quot;result&quot; =&gt; undefined,
                    &quot;rolled-back&quot; =&gt; true
                }
            },
            &quot;serverB-3&quot; =&gt; {
                &quot;host&quot; =&gt; &quot;host3&quot;,
                &quot;response&quot; =&gt; {
                    &quot;outcome&quot; =&gt; &quot;failed&quot;,
                    &quot;failure-description&quot; =&gt; &quot;[DOM-4556] Something didn't work right&quot;,
                    &quot;rolled-back&quot; =&gt; true
                }
            }
        }
    }
}</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322684_AdminGuide-CLIRecipes"  >
        <h2>CLI Recipes</h2>
    
<ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Properties">Properties</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Adding%2CreadingandremovingsystempropertyusingCLI">Adding, reading and removing system property using CLI</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Overviewofallsystemproperties">Overview of all system properties</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Configuration">Configuration</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ListSubsystems">List Subsystems</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Listdescriptionofavailableattributesandchilds">List description of available attributes and childs</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-ViewconfigurationasXMLfordomainmodelorhostmodel">View configuration as XML for domain model or host model</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Takeasnapshotofwhatthecurrentdomainis">Take a snapshot of what the current domain is</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Takethelatestsnapshotofthehost.xmlforaparticularhost">Take the latest snapshot of the host.xml for a particular host</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Howtogetinterfaceaddress">How to get interface address</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Runtime">Runtime</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-GetallconfigurationandruntimedetailsfromCLI">Get all configuration and runtime details from CLI</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Scripting">Scripting</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Windowsand%22Pressanykeytocontinue...%22issue">Windows and &quot;Press any key to continue ...&quot; issue</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Statistics">Statistics</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322684.html#66322684_AdminGuide-Readstatisticsofactivedatasources">Read statistics of active datasources</a>            </p>
    </li></ul></li></ul>    <div class="section-3"  id="66322684_AdminGuide-Properties2"  >
        <h3>Properties</h3>
    
    <div class="section-4"  id="66322684_AdminGuide-Adding%2CreadingandremovingsystempropertyusingCLI"  >
        <h4>Adding, reading and removing system property using CLI</h4>
    
            <p>
    For standalone mode:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$ ./bin/jboss-cli.sh --connect controller=IP_ADDRESS
[standalone@IP_ADDRESS:9999 /] /system-property=foo:add(value=bar)
[standalone@IP_ADDRESS:9999 /] /system-property=foo:read-resource
{
&nbsp;&nbsp;&nbsp; &quot;outcome&quot;
}
[standalone@IP_ADDRESS:9999 /] /system-property=foo:remove
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    For domain mode the same commands are used, you can add/read/remove system properties for:<br/>All hosts and server instances in domain            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@IP_ADDRESS:9999 /] /system-property=foo:add(value=bar)
[domain@IP_ADDRESS:9999 /] /system-property=foo:read-resource
[domain@IP_ADDRESS:9999 /] /system-property=foo:remove</code></pre>
        </div>
    </div>
            <p>
    Host and its server instances            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@IP_ADDRESS:9999 /] /host=master/system-property=foo:add(value=bar)
[domain@IP_ADDRESS:9999 /] /host=master/system-property=foo:read-resource
[domain@IP_ADDRESS:9999 /] /host=master/system-property=foo:remove</code></pre>
        </div>
    </div>
            <p>
    Just one server instance            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@IP_ADDRESS:9999 /] /host=master/server-config=server-one/system-property=foo:add(value=bar)
[domain@IP_ADDRESS:9999 /] /host=master/server-config=server-one/system-property=foo:read-resource
[domain@IP_ADDRESS:9999 /] /host=master/server-config=server-one/system-property=foo:remove</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Overviewofallsystemproperties"  >
        <h4>Overview of all system properties</h4>
    
            <p>
    Overview of all system properties in WildFly 8 including OS system properties and properties specified on command line using -D, -P or --properties arguments.            </p>
                <p>
    Standalone            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@IP_ADDRESS:9999 /] /core-service=platform-mbean/type=runtime:read-attribute(name=system-properties)</code></pre>
        </div>
    </div>
            <p>
    Domain            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@IP_ADDRESS:9999 /] /host=master/core-service=platform-mbean/type=runtime:read-attribute(name=system-properties)
[domain@IP_ADDRESS:9999 /] /host=master/server=server-one/core-service=platform-mbean/type=runtime:read-attribute(name=system-properties)</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Configuration2"  >
        <h3>Configuration</h3>
    
    <div class="section-4"  id="66322684_AdminGuide-ListSubsystems"  >
        <h4>List Subsystems</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /:read-children-names(child-type=subsystem)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        &quot;batch&quot;,
        &quot;datasources&quot;,
        &quot;deployment-scanner&quot;,
        &quot;ee&quot;,
        &quot;ejb3&quot;,
        &quot;infinispan&quot;,
        &quot;io&quot;,
        &quot;jaxrs&quot;,
        &quot;jca&quot;,
        &quot;jdr&quot;,
        &quot;jmx&quot;,
        &quot;jpa&quot;,
        &quot;jsf&quot;,
        &quot;logging&quot;,
        &quot;mail&quot;,
        &quot;naming&quot;,
        &quot;pojo&quot;,
        &quot;remoting&quot;,
        &quot;resource-adapters&quot;,
        &quot;sar&quot;,
        &quot;security&quot;,
        &quot;threads&quot;,
        &quot;transactions&quot;,
        &quot;undertow&quot;,
        &quot;webservices&quot;,
        &quot;weld&quot;
    ]
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Listdescriptionofavailableattributesandchilds"  >
        <h4>List description of available attributes and childs</h4>
    
            <p>
    Descriptions, possible attribute type and values, permission and whether expressions ( <i class=" ">${ ... }</i> ) are allowed from the underlying model are shown by the read-resource-description command.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=datasources/data-source=ExampleDS:read-resource-description
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;description&quot; =&gt; &quot;A JDBC data-source configuration&quot;,
        &quot;head-comment-allowed&quot; =&gt; true,
        &quot;tail-comment-allowed&quot; =&gt; true,
        &quot;attributes&quot; =&gt; {
            &quot;connection-url&quot; =&gt; {
                &quot;type&quot; =&gt; STRING,
                &quot;description&quot; =&gt; &quot;The JDBC driver connection URL&quot;,
                &quot;expressions-allowed&quot; =&gt; true,
                &quot;nillable&quot; =&gt; false,
                &quot;min-length&quot; =&gt; 1L,
                &quot;max-length&quot; =&gt; 2147483647L,
                &quot;access-type&quot; =&gt; &quot;read-write&quot;,
                &quot;storage&quot; =&gt; &quot;configuration&quot;,
                &quot;restart-required&quot; =&gt; &quot;no-services&quot;
            },
            &quot;driver-class&quot; =&gt; {
                &quot;type&quot; =&gt; STRING,
                &quot;description&quot; =&gt; &quot;The fully qualified name of the JDBC driver class&quot;,
                &quot;expressions-allowed&quot; =&gt; true,
                &quot;nillable&quot; =&gt; true,
                &quot;min-length&quot; =&gt; 1L,
                &quot;max-length&quot; =&gt; 2147483647L,
                &quot;access-type&quot; =&gt; &quot;read-write&quot;,
                &quot;storage&quot; =&gt; &quot;configuration&quot;,
                &quot;restart-required&quot; =&gt; &quot;no-services&quot;
            },
            &quot;datasource-class&quot; =&gt; {
                &quot;type&quot; =&gt; STRING,
                &quot;description&quot; =&gt; &quot;The fully qualified name of the JDBC datasource class&quot;,
                &quot;expressions-allowed&quot; =&gt; true,
                &quot;nillable&quot; =&gt; true,
                &quot;min-length&quot; =&gt; 1L,
                &quot;max-length&quot; =&gt; 2147483647L,
                &quot;access-type&quot; =&gt; &quot;read-write&quot;,
                &quot;storage&quot; =&gt; &quot;configuration&quot;,
                &quot;restart-required&quot; =&gt; &quot;no-services&quot;
            },
            &quot;jndi-name&quot; =&gt; {
                &quot;type&quot; =&gt; STRING,
                &quot;description&quot; =&gt; &quot;Specifies the JNDI name for the datasource&quot;,
                &quot;expressions-allowed&quot; =&gt; true,
                &quot;nillable&quot; =&gt; false,
                &quot;access-type&quot; =&gt; &quot;read-write&quot;,
                &quot;storage&quot; =&gt; &quot;configuration&quot;,
                &quot;restart-required&quot; =&gt; &quot;no-services&quot;
            },
           ...</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-ViewconfigurationasXMLfordomainmodelorhostmodel"  >
        <h4>View configuration as XML for domain model or host model</h4>
    
            <p>
    Assume you have a host that is called master            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=master:read-config-as-xml</code></pre>
        </div>
    </div>
            <p>
    Just for the domain or standalone            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] :read-config-as-xml</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Takeasnapshotofwhatthecurrentdomainis"  >
        <h4>Take a snapshot of what the current domain is</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] :take-snapshot()
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;domain-results&quot; =&gt; {&quot;step-1&quot; =&gt; {&quot;name&quot; =&gt; &quot;JBOSS_HOME/domain/configuration/domain_xml_history/snapshot/20110908-165222603domain.xml&quot;}},
        &quot;server-operations&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Takethelatestsnapshotofthehost.xmlforaparticularhost"  >
        <h4>Take the latest snapshot of the host.xml for a particular host</h4>
    
            <p>
    Assume you have a host that is called master            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /]  /host=master:take-snapshot
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;domain-results&quot; =&gt; {&quot;step-1&quot; =&gt; {&quot;name&quot; =&gt; &quot;JBOSS_HOME/domain/configuration/host_xml_history/snapshot/20110908-165640215host.xml&quot;}},
        &quot;server-operations&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322684_AdminGuide-Howtogetinterfaceaddress"  >
        <h4>How to get interface address</h4>
    
            <p>
    The attribute for interface is named &quot;resolved-address&quot;.  It's a runtime attribute so it does not show up in :read-resource by default. You have to add the &quot;include-runtime&quot; parameter.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>./jboss-cli.sh --connect
Connected to standalone controller at localhost:9999
[standalone@localhost:9999 /] cd interface=public
[standalone@localhost:9999 interface=public] :read-resource(include-runtime=true)
{
     &quot;outcome&quot; =&gt; &quot;success&quot;,
     &quot;result&quot; =&gt; {
         &quot;any&quot; =&gt; undefined,
         &quot;any-address&quot; =&gt; undefined,
         &quot;any-ipv4-address&quot; =&gt; undefined,
         &quot;any-ipv6-address&quot; =&gt; undefined,
         &quot;criteria&quot; =&gt; [(&quot;inet-address&quot; =&gt; expression &quot;${jboss.bind.address:127.0.0.1}&quot;)],
         &quot;inet-address&quot; =&gt; expression &quot;${jboss.bind.address:127.0.0.1}&quot;,
         &quot;link-local-address&quot; =&gt; undefined,
         &quot;loopback&quot; =&gt; undefined,
         &quot;loopback-address&quot; =&gt; undefined,
         &quot;multicast&quot; =&gt; undefined,
         &quot;name&quot; =&gt; &quot;public&quot;,
         &quot;nic&quot; =&gt; undefined,
         &quot;nic-match&quot; =&gt; undefined,
         &quot;not&quot; =&gt; undefined,
         &quot;point-to-point&quot; =&gt; undefined,
         &quot;public-address&quot; =&gt; undefined,
         &quot;resolved-address&quot; =&gt; &quot;127.0.0.1&quot;,
         &quot;site-local-address&quot; =&gt; undefined,
         &quot;subnet-match&quot; =&gt; undefined,
         &quot;up&quot; =&gt; undefined,
         &quot;virtual&quot; =&gt; undefined
     }
}
[standalone@localhost:9999 interface=public] :read-attribute(name=resolved-address)
{
     &quot;outcome&quot; =&gt; &quot;success&quot;,
     &quot;result&quot; =&gt; &quot;127.0.0.1&quot;
}</code></pre>
        </div>
    </div>
            <p>
    It's similar for domain, just specify path to server instance:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=master/server=server-one/interface=public:read-attribute(name=resolved-address)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; &quot;127.0.0.1&quot;
}</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Runtime"  >
        <h3>Runtime</h3>
    
    <div class="section-4"  id="66322684_AdminGuide-GetallconfigurationandruntimedetailsfromCLI"  >
        <h4>Get all configuration and runtime details from CLI</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>./bin/jboss-cli.sh -c command=&quot;:read-resource(include-runtime=true, recursive=true, recursive-depth=10)&quot;</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Scripting"  >
        <h3>Scripting</h3>
    
    <div class="section-4"  id="66322684_AdminGuide-Windowsand%22Pressanykeytocontinue...%22issue"  >
        <h4>Windows and &quot;Press any key to continue ...&quot; issue</h4>
    
            <p>
    WildFly 8 scripts for Windows end with &quot;Press any key to continue ...&quot;. This behavior is useful when script is executed by double clicking the script but not when you need to invoke several commands from custom script (e.g. 'bin/jboss-admin.bat --connect command=:shutdown').            </p>
                <p>
    To avoid &quot;Press any key to continue ...&quot; message you need to specify NOPAUSE variable. Call 'set NOPAUSE=true' in command line before running any WildFly 8&nbsp;.bat script or include it in your custom script before invoking scripts from WildFly 8.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322684_AdminGuide-Statistics"  >
        <h3>Statistics</h3>
    
    <div class="section-4"  id="66322684_AdminGuide-Readstatisticsofactivedatasources"  >
        <h4>Read statistics of active datasources</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=datasources/data-source=ExampleDS/statistics=pool:read-resource(include-runtime=true)
/subsystem=datasources/data-source=ExampleDS/statistics=jdbc:read-resource(include-runtime=true)</code></pre>
        </div>
    </div>
            <p>
    or            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=datasources/data-source=ExampleDS:read-resource(include-runtime=true,recursive=true)</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322684_AdminGuide-AllWildFly8documentation"  >
        <h2>All WildFly 8 documentation</h2>
    
            <p>
    There are several guides in the WildFly 8 documentation series. This list gives an overview of each of the guides:            </p>
                <p>
    *<a href="https://docs.jboss.org/author/display/WFLY8/Getting+Started+Guide">Getting Started Guide</a> - Explains how to download and start WildFly 8.<br/>*<a href="https://docs.jboss.org/author/display/WFLY8/Getting+Started+Developing+Applications+Guide">Getting Started Developing Applications Guide</a> - Talks you through developing your first applications on WildFly 8, and introduces you to JBoss Tools and how to deploy your applications.<br/>*<a href="https://docs.jboss.org/author/display/WFLY8/JavaEE+6+Tutorial">JavaEE 6 Tutorial</a> - A Java EE 6 Tutorial.<br/>*<a href="66322684.html">Admin Guide</a> - Tells you how to configure and manage your WildFly 8 instances.<br/>*<a href="https://docs.jboss.org/author/display/WFLY8/Developer+Guide">Developer Guide</a> - Contains concepts that you need to be aware of when developing applications for WildFly 8. Classloading is explained in depth.<br/>*<a href="https://docs.jboss.org/author/display/WFLY8/High+Availability+Guide">High Availability Guide</a> - Reference guide for how to set up clustered WildFly 8 instances.<br/>*<a href="https://docs.jboss.org/author/display/WFLY8/Extending+WildFly+8">Extending WildFly 8</a> - A guide to adding new functionality to WildFly 8.            </p>
        </div>
    
        </div>
    </div>
</body>
</html>
