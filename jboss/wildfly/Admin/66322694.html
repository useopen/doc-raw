<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Management tasks</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll Wiki Publisher" name="generator"/>
    <link rel="stylesheet" href="css/content-style.css" type="text/css"/>
</head>
<body>
    <div class="container">
        <div id="title" class="prepend-top">
              <h1>Management tasks</h1>
        </div>
        
        <div id="66322694" class="content prepend-top">
    <div class="section-2"  id="66322694_Managementtasks-Interfacesandports"  >
        <h2>Interfaces and ports</h2>
    
    <div class="section-3"  id="66322694_Managementtasks-Interfacedeclarations"  >
        <h3>Interface declarations</h3>
    
            <p>
    WildFly 8 uses named interface references throughout the configuration. A network interface is declared by specifying a logical name and a selection criteria for the physical interface:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :read-children-names(child-type=interface)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [
       &quot;management&quot;,
       &quot;public&quot;
   ]
}</code></pre>
        </div>
    </div>
            <p>
    This means the server in question declares two interfaces: One is referred to as &quot;<i class=" ">management</i>&quot;; the other one &quot;<i class=" ">public</i>&quot;. The &quot;<i class=" ">management</i>&quot; interface is used for all components and services that are required by the management layer (i.e. the HTTP Management Endpoint). The &quot;<i class=" ">public</i>&quot; interface binding is used for any application related network communication (i.e. Web, Messaging, etc). There is nothing special about these names; interfaces can be declared with any name. Other sections of the configuration can then reference those interfaces   by their logical name, rather than having to include the full details  of  the interface (which, on servers in a management domain, may vary on different machines).            </p>
                <p>
    The <tt class=" ">domain.xml</tt>, <tt class=" ">host.xml</tt> and <tt class=" ">standalone.xml</tt> configuration files all include a section where interfaces can be declared.&nbsp; If we take a look at the XML declaration it reveals the selection criteria. The criteria is one of two types: either a single element indicating  that the interface should be bound to a wildcard address, or a set of  one or more characteristics that an interface or address must have in  order to be a valid match. The selection criteria in this example are specific IP addresses for each interface:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
  &lt;interface name=&quot;management&quot;&gt;
   &lt;inet-address value=&quot;127.0.0.1&quot;/&gt;
  &lt;/interface&gt;
  &lt;interface name=&quot;public&quot;&gt;
   &lt;inet-address value=&quot;127.0.0.1&quot;/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    Some other examples:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interface name=&quot;global&quot;&gt;
  &nbsp;&lt;!-- Use the wildcard address --&gt;
  &nbsp;&lt;any-address/&gt;
&lt;/interface&gt;

&lt;interface name=&quot;ipv4-global&quot;&gt;
  &nbsp;&lt;!-- Use the IPv4 wildcard address --&gt;
  &nbsp;&lt;any-ipv4-address/&gt;
&lt;/interface&gt;

&lt;interface name=&quot;ipv6-global&quot;&gt;
  &nbsp;&lt;!-- Use the IPv6 wildcard address --&gt;
  &nbsp;&lt;any-ipv6-address/&gt;
&lt;/interface&gt;

&lt;interface name=&quot;external&quot;&gt;
  &nbsp;&lt;nic name=&quot;eth0&quot;/&gt;
&lt;/interface&gt;

&lt;interface name=&quot;default&quot;&gt;
  &nbsp;&lt;!-- Match any interface/address on the right subnet if it's
       &nbsp;up, supports multicast and isn't point-to-point --&gt;
  &nbsp;&lt;subnet-match value=&quot;192.168.0.0/16&quot;/&gt;
  &nbsp;&lt;up/&gt;
  &nbsp;&lt;multicast/&gt;
  &nbsp;&lt;not&gt;
     &nbsp;&lt;point-to-point/&gt;
  &nbsp;&lt;/not&gt;
&lt;/interface&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-SocketBindingGroups"  >
        <h3>Socket Binding Groups</h3>
    
            <p>
    The socket configuration in WildFly 8 works similar to the interfaces declarations. Sockets are declared using a logical name, by which they will be referenced throughout the configuration. Socket declarations are grouped under a certain name. This allows you to easily reference a particular socket binding group when configuring server groups for instance (Managed Domain). Socket binding groups reference an interface by it's logical name:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;socket-binding-group name=&quot;standard-sockets&quot; default-interface=&quot;public&quot;&gt;
   &lt;socket-binding name=&quot;jndi&quot; port=&quot;1099&quot;/&gt;
   &lt;socket-binding name=&quot;jmx-connector-registry&quot; port=&quot;1090&quot;/&gt;
   &lt;socket-binding name=&quot;jmx-connector-server&quot; port=&quot;1091&quot;/&gt;
   &lt;socket-binding name=&quot;http&quot; port=&quot;8080&quot;/&gt;
   &lt;socket-binding name=&quot;https&quot; port=&quot;8443&quot;/&gt;
   &lt;socket-binding name=&quot;jacorb&quot; port=&quot;3528&quot;/&gt;
   &lt;socket-binding name=&quot;jacorb-ssl&quot; port=&quot;3529&quot;/&gt;
   &lt;socket-binding name=&quot;osgi-http&quot; port=&quot;8090&quot;/&gt;
   &lt;socket-binding name=&quot;remoting&quot; port=&quot;4447&quot;/&gt;
   &lt;socket-binding name=&quot;txn-recovery-environment&quot; port=&quot;4712&quot;/&gt;
   &lt;socket-binding name=&quot;txn-status-manager&quot; port=&quot;4713&quot;/&gt;
   &lt;socket-binding name=&quot;messaging&quot; port=&quot;5445&quot;/&gt;
   &lt;socket-binding name=&quot;messaging-throughput&quot; port=&quot;5455&quot;/&gt;
&lt;/socket-binding-group&gt;</code></pre>
        </div>
    </div>
            <p>
    A socket binding includes the following information:            </p>
    <ul class=" "><li class=" ">            <p>
    name -- logical name of the socket configuration that should be used elsewhere in the configuration            </p>
    </li><li class=" ">            <p>
    port  -- base port to which a socket based on this configuration should be  bound. (Note that servers can be configured to override this base value  by applying an increment or decrement to all port values.)            </p>
    </li><li class=" ">            <p>
    interface (optional) -- logical name (see &quot;Interfaces declarations&quot; above) of the interface to which a socket based on this configuration should be bound. If not defined, the value of the &quot;default-interface&quot; attribute from the enclosing socket binding group will be used.            </p>
    </li><li class=" ">            <p>
    multicast-address (optional) -- if the socket will be used for multicast, the multicast address to use            </p>
    </li><li class=" ">            <p>
    multicast-port (optional) -- if the socket will be used for multicast, the multicast port to use            </p>
    </li><li class=" ">            <p>
    fixed-port (optional, defaults to false) -- if true, declares that the value of port should always be used for the socket and should not be overridden by applying an increment or decrement            </p>
    </li></ul>    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-IPv4versusIPv6"  >
        <h3>IPv4 versus IPv6</h3>
    
            <p>
    WildFly 8 supports the use of both IPv4 and IPv6 addresses. By default, WildFly is configured for use in an IPv4 network and so if you are running in an IPv4 network, no changes are required. If you need to run in an IPv6 network, the changes required are minimal and involve changing the JVM stack and address preferences, and adjusting any interface IP address values specified in the configuration (standalone.xml or domain.xml).            </p>
        <div class="section-4"  id="66322694_Managementtasks-Stackandaddresspreference"  >
        <h4>Stack and address preference</h4>
    
            <p>
    The system properties java.net.preferIPv4Stack and java.net.preferIPv6Addresses are used to configure the JVM for use with IPv4 or IPv6 addresses. With WildFly 8, in order to run using IPv4 addresses, we need to specify java.net.preferIPv4Stack=true; in order to run with IPv6 addresses, we need to specify java.net.preferIPv4Stack=false (the JVM default) and java.net.preferIPv6Addresses=true. The latter ensures that any hostname to IP address conversions always return IPv6 address variants.            </p>
                <p>
    These system properties are conveniently set by the JAVA_OPTS environment variable, defined in the standalone.conf (or domain.conf) file. For example, to change the IP stack preference from its default of IPv4 to IPv6, edit the standalone.conf (or domain.conf) file and change its default IPv4 setting:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>if [ &quot;x$JAVA_OPTS&quot; = &quot;x&quot; ]; then
   JAVA_OPTS=&quot; ... -Djava.net.preferIPv4Stack=true ...&quot;
...</code></pre>
        </div>
    </div>
            <p>
    to an IPv6 suitable setting:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>if [ &quot;x$JAVA_OPTS&quot; = &quot;x&quot; ]; then
   JAVA_OPTS=&quot; ... -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true ...&quot;
...</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-IPaddressliterals"  >
        <h4>IP address literals</h4>
    
            <p>
    To change the IP address literals referenced in standalone.xml (or domain.xml), first visit the interface declarations and ensure that valid IPv6 addresses are being used as interface values. For example, to change the default configuration in which the loopback interface is used as the primary interface, change from the IPv4 loopback address:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
  &lt;interface name=&quot;management&quot;&gt;
    &lt;inet-address value=&quot;${jboss.bind.address.management:127.0.0.1}&quot;/&gt;
  &lt;/interface&gt;
  &lt;interface name=&quot;public&quot;&gt;
    &lt;inet-address value=&quot;${jboss.bind.address:127.0.0.1}&quot;/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    to the IPv6 loopback address:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
  &lt;interface name=&quot;management&quot;&gt;
    &lt;inet-address value=&quot;${jboss.bind.address.management:[::1]}&quot;/&gt;
  &lt;/interface&gt;
  &lt;interface name=&quot;public&quot;&gt;
    &lt;inet-address value=&quot;${jboss.bind.address:[::1]}&quot;/&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    Note that when embedding IPv6 address literals in the substitution expression, square brackets surrounding the IP address literal are used to avoid ambiguity. This follows the convention for the use of IPv6 literals in URLs.            </p>
                <p>
    Over and above making such changes for the interface definitions, you should also check the rest of your configuration file and adjust IP address literals from IPv4 to IPv6 as required.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-ConfigureSecurityRealms"  >
        <h2>Configure Security Realms</h2>
    
            <p>
    Within WildFly 8 we make use of security realms to secure access to the management interfaces, these same realms are used to secure inbound access as exposed by JBoss Remoting such as remote JNDI and EJB access, the realms are also used to define an identity for the server - this identity can be used for both inbound connections to the server and outbound connections being established by the server.            </p>
        <div class="section-3"  id="66322694_Managementtasks-GeneralStructure"  >
        <h3>General Structure</h3>
    
            <p>
    The general structure of a management realm definition is: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ManagementRealm&quot;&gt;
   &lt;plug-ins&gt;&lt;/plug-ins&gt;
   &lt;server-identities&gt;&lt;/server-identities&gt;
   &lt;authentication&gt;&lt;/authentication&gt;
   &lt;authorization&gt;&lt;/authorization&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
<ul class=" "><li class=" ">            <p>
    <tt class=" ">plug-ins</tt> - This is an optional element that is used to define modules what will be searched for security realm PlugInProviders to extend the capabilities of the security realms.            </p>
    </li><li class=" ">            <p>
    <tt class=" ">server-identities</tt> - An optional element to define the identity of the server as visible to the outside world, this applies to both inbound connection to a resource secured by the realm and to outbound connections also associated with the realm.            </p>
    </li></ul>            <p>
    One example is the SSL identity of the server, for inbound connections this will control the identity of the server as the SSL connection is established, for outbound connections this same identity can be used where CLIENT-CERT style authentication is being performed.            </p>
                <p>
    A second example is where the server is establishing an outbound connection that requires username / password authentication - this element can be used to define that password.            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">authentication</tt> - This is probably the most important element that will be used within a security realm definition and mostly applies to inbound connections to the server, this element defines which backing stores will be used to provide the verification of the inbound connection.            </p>
    </li></ul>            <p>
    This element is optional as there are some scenarios where it will not be required such as if a realm is being defined for an outbound connection using a username and password.            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">authorization</tt> - This is the final optional element and is used to define how roles are loaded for an authenticated identity.  At the moment this is more applicable for realms used for access to EE deployments such as web applications or EJBs but this will also become relevant as we add role based authorization checks to the management model.            </p>
    </li></ul>    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-EnablingaRealm"  >
        <h3>Enabling a Realm</h3>
    
            <p>
    After a realm has been defined it needs to be associated with an inbound or outbound connection for it to be used, the following are some examples where these associations are used within the WildFly 8&nbsp;configuration.            </p>
        <div class="section-4"  id="66322694_Managementtasks-InboundConnections"  >
        <h4>Inbound Connections</h4>
    
    <div class="section-5"  id="66322694_Managementtasks-ManagementInterfaces"  >
        <h5>Management Interfaces</h5>
    
            <p>
    Either within the <tt class=" ">standalone.xml</tt> or <tt class=" ">host.xml</tt> configurations the security realms can be associated with the management interfaces as follows: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;native-interface security-realm=&quot;ManagementRealm&quot;&gt;...&lt;/native-interface&gt;
&lt;http-interface security-realm=&quot;ManagementRealm&quot;&gt;...&lt;/http-interface&gt;</code></pre>
        </div>
    </div>
            <p>
    If the <tt class=" ">security-realm</tt> attribute is omitted or removed from the interface definition it means that access to that interface will be unsecured            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    By default we do bind these interfaces to the loopback address so that the interfaces are not accessible remotely out of the box, however do be aware that if these interfaces are then unsecured any other local user will be able to control and administer the WildFly 8&nbsp;installation.            </p>
        </div>
    
    <div class="confbox admonition admonition-tip">
        
            <p>
    Also do note that the <tt class=" ">security-realm</tt> attribute is defined on each interface independently, this means that you could define a different security realm for each - this may be applicable if say you want the administrators to only access over the HTTP interface and leave only local users to access the native interface.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-RemotingSubsystem"  >
        <h5>Remoting Subsystem</h5>
    
            <p>
    The Remoting subsystem exposes a connector to allow for inbound comunications with JNDI and the EJB subsystem by default we associate the <tt class=" ">ApplicationRealm</tt> with this connection.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:1.1&quot;&gt;
  &lt;connector name=&quot;remoting-connector&quot; socket-binding=&quot;remoting&quot; security-realm=&quot;ApplicationRealm&quot;/&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-OutboundConnections"  >
        <h4>Outbound Connections</h4>
    
    <div class="section-5"  id="66322694_Managementtasks-RemotingSubsystem2"  >
        <h5>Remoting Subsystem</h5>
    
            <p>
    Outbound connections can also be defined within the Remoting subsystem, these are typically used for remote EJB invocations from one AS server to another, in this scenario the security realm is used to obtain the server identity either it's password for X.509 certificate and possibly a trust store to verify the certificate of the remote host.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    Even if the referenced realm contains username and password authentication configuration the client side of the connection will NOT use this to verify the remote server.            </p>
        </div>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;remote-outbound-connection name=&quot;remote-ejb-connection&quot;
                            outbound-socket-binding-ref=&quot;binding-remote-ejb-connection&quot;
                            username=&quot;user1&quot;
                            security-realm=&quot;PasswordRealm&quot;&gt;</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-info">
        
            <p>
    The security realm is only used to obtain the password for this example, as you can see here the username is specified separately.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-SlaveHostController"  >
        <h5>Slave Host Controller</h5>
    
            <p>
    When running in domain mode slave host controllers need to establish a connection to the native interface of the master domain controller so these also need a realm for the identity of the slave.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;domain-controller&gt;
  &lt;remote host=&quot;${jboss.domain.master.address}&quot; port=&quot;${jboss.domain.master.port:9999}&quot; security-realm=&quot;ManagementRealm&quot;/&gt;
&lt;/domain-controller&gt;</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
        
            <p>
    By default when a slave host controller authenticates against the master domain controller it uses its configured name as its username. If you want to override the username used for authentication a <tt class=" ">username</tt> attribute can be added to the <tt class=" ">&lt;remote /&gt;</tt> element.            </p>
        </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Authentication"  >
        <h3>Authentication</h3>
    
            <p>
    One of the primary functions of the security realms is to define the user stores that will be used to verify the identity of inbound connections, the actual approach taken at the transport level is based on the capabilities of these backing store definitions.  The security realms are used to secure inbound connections for both the http management interface and for inbound remoting connections for both the native management interface and to access other services exposed over remoting - because of this there are some small differences between how the realm is used for each of these.            </p>
                <p>
    At the transport level we support the following authentication mechanisms.            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    HTTP            </td>
                <td rowspan="1" colspan="1">
    Remoting (SASL)            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    None            </td>
                <td rowspan="1" colspan="1">
    Anonymous            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    N/A            </td>
                <td rowspan="1" colspan="1">
    JBoss Local User            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    Digest            </td>
                <td rowspan="1" colspan="1">
    Digest            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    Basic            </td>
                <td rowspan="1" colspan="1">
    Plain            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    Client Cert            </td>
                <td rowspan="1" colspan="1">
    Client Cert            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    The most notable are the first two in this list as they need some additional explanation - the final 3 are fairly standard mechanisms.            </p>
                <p>
    If either the http interface, the native interface or a remoting connection are difined <strong class=" ">without</strong> a security realm reference then they are effectively unsecured, in the case of the http interface this means that no authentication will be performed on the incoming connection - for the remoting connections however we make use of SASL so require at least one authentication mechanism so make use of the anonymous mechanism to allow a user in without requiring a validated authentication process.            </p>
                <p>
    The next mechanism 'JBoss Local User' is specific to the remoting connections - as we ship WildFly 8 secured by default we wanted a way to allow users to connect to their own AS installation after it is started without mandating that they define a user with a password - to accomplish this we have added the 'JBoss Local User' mechanism.  This mechanism makes the use of tokens exchanged on the filesystem to prove that the client is local to the AS installation and has the appropriate file permissions to read a token written by the AS to file.  As this mechanism is dependent on both server and client implementation details it is only supported for the remoting connections and not the http connections - at some point we may review if we can add support for this to the http interface but we would need to explore the options available with the commony used web browsers that are used to communicate with the http interface.            </p>
                <p>
    The Digest mechanism is simply the HTTP Digest / SASL Digest mechanism that authenticates the user by making use of md5 hashed including nonces to avoid sending passwords in plain text over the network - this is the preferred mechanism for username / password authentication.            </p>
                <p>
    The HTTP Basic / SASL Plain mechanism is made available for times that Digest can not be used but effectively this means that the users password will be sent over the network in the clear unless SSL is enabled.            </p>
                <p>
    The final mechanism Client-Cert allows X.509 certificates to be used to verify the identity of the remote client.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    One point bearing in mind is that it is possible that an association with a realm can mean that a single incoming connection has the ability to choose between one or more authentication mechanisms.  As an example it is possible that an incoming remoting connection could choose between 'Client Cert', A username password mechanism or 'JBoss Local User' for authentication - this would allow say a local user to use the local mechanism, a remote user to supply their username and password whilst a remote script could make a call and authenticate using a certificate.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Authorization"  >
        <h3>Authorization</h3>
    
            <p>
    The actual security realms are not involved in any authorization decisions however they can be configured to load a users roles which will subsequently be used to make authorization decisions - when references to authorization are seen in the context of security realms it is this loading of roles that is being referred to.            </p>
                <p>
    For the loading of roles the process is split out to occur after the authentication step so after a user has been authenticated a second step will occur to load the roles based on the username they used to authenticate with.            </p>
        </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-OutOfTheBoxConfiguration"  >
        <h2>Out Of The Box Configuration</h2>
    
            <p>
    Before describing the complete set of configuration options available within the realms we will look at the default configuration as for most users that is going to be the starting point before customising further.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    The examples here are taken from the standalone configuration however the descriptions are equally applicable to domain mode, one point worth noting is that all security realms defined in the <tt class=" ">host.xml</tt> are available to be referenced within the domain configuration for the servers running on that host controller.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-ManagementRealm"  >
        <h3>Management Realm</h3>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ManagementRealm&quot;&gt;
  &lt;authentication&gt;
    &lt;local default-user=&quot;$local&quot;/&gt;
    &lt;properties path=&quot;mgmt-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;
  &lt;/authentication&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    The realm <tt class=" ">ManagementRealm</tt> is the simplest realm within the default configuration, this realm simply enables two authentication mechanisms, the local mechanism and username/password authentication which will be using Digest authentication.            </p>
    <ul class=" "><li class=" ">            <p>
    local            </p>
    </li></ul>            <p>
    When using the local mechanism it is optional for remote clients to send a username to the server, this configuration specifies that where clients do not send a username it will be assumed that the clients username is <tt class=" ">$local</tt> - the <tt class=" ">&lt;local /&gt;</tt> element can also be configured to allow other usernames to be specified by remote clients however for the default configuration this is not enabled so is not supported.            </p>
    <ul class=" "><li class=" ">            <p>
    properties            </p>
    </li></ul>            <p>
    For username / password authentication the users details will be loaded from the file <tt class=" ">mgmt-users.properties</tt> which is located in {<tt class=" ">jboss.home}/standalone/configuration</tt> or {<tt class=" ">jboss.home}/domain/configuration</tt> depending on the running mode of the server.            </p>
                <p>
    Each user is represented on their own line and the format of each line is <tt class=" ">username=</tt><tt class=" ">HASH</tt> where <tt class=" ">HASH</tt> is a pre-prepared hash of the users password along with their username and the name of the realm which in this case is <tt class=" ">ManagementRealm</tt>.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    You do not need to worry about generating the entries within the properties file as we provide a utility <tt class=" ">add-user.sh</tt> or <tt class=" ">add-user.bat</tt> to add the users, this utility is described in more detail below.            </p>
        </div>
    
    <div class="confbox admonition admonition-warning">
        
            <p>
    By pre-hashing the passwords in the properties file it does mean that if the user has used the same password on different realms then the contents of the file falling into the wrong hands does not nescesarily mean all accounts are compromised. <strong class=" ">HOWEVER</strong> the contents of the files do still need to be protected as they can be used to access any server where the realm name is the same and the user has the same username and password pair.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-ApplicationRealm"  >
        <h3>Application Realm</h3>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ApplicationRealm&quot;&gt;
  &lt;authentication&gt;
    &lt;local default-user=&quot;$local&quot; allowed-users=&quot;*&quot;/&gt;
    &lt;properties path=&quot;application-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;
  &lt;/authentication&gt;
  &lt;authorization&gt;
    &lt;properties path=&quot;application-roles.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;
  &lt;/authorization&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    The realm <tt class=" ">ApplicationRealm</tt> is a slightly more complex realm as this is used for both            </p>
        <div class="section-4"  id="66322694_Managementtasks-Authentication2"  >
        <h4>Authentication</h4>
    
            <p>
    The authentication configuration is very similar to the <tt class=" ">ManagementRealm</tt> in that it enabled both the local mechanism and a username/password based Digest mechanism.            </p>
    <ul class=" "><li class=" ">            <p>
    local            </p>
    </li></ul>            <p>
    The local configuration is similar to the <tt class=" ">ManagementRealm</tt> in that where the remote user does not supply a username it will be assumed that the username is <tt class=" ">$local</tt>, however in addition to this there is now an <tt class=" ">allowed-users</tt> attribute with a value of <tt class=" ">'*'</tt> - this means that the remote user can specify any username and it will be accepted over the local mechanism provided that the local verification is a success.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    To restrict the usernames that can be specified by the remote user a comma separated list of usernames can be specified instead within the <tt class=" ">allowed-users</tt> attribute.            </p>
        </div>
    
<ul class=" "><li class=" ">            <p>
    properties            </p>
    </li></ul>            <p>
    The properties definition works in exactly the same way as the definition for <tt class=" ">ManagementRealm</tt> except now the properties file is called <tt class=" ">application-users.properties</tt>.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-Authorization2"  >
        <h4>Authorization</h4>
    
            <p>
    The contents of the <tt class=" ">Authorization</tt> element are specific to the <tt class=" ">ApplicationRealm</tt>, in this case a properties file is used to load a users roles.            </p>
                <p>
    The properties file is called <tt class=" ">application-roles.properties</tt> and is located in {<tt class=" ">jboss.home}/standalone/configuration</tt> or {<tt class=" ">jboss.home}/domain/configuration</tt> depending on the running mode of the server.  The format of this file is <tt class=" ">username=</tt><tt class=" ">ROLES</tt> where <i class=" ">ROLES</i> is a comma separated list of the users roles.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    As the loading of a users roles is a second step this is where it may be desirable to restrict which users can use the local mechanism so that some users still require username and password authentication for their roles to be loaded.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-othersecuritydomain"  >
        <h4>other security domain</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;
  &lt;authentication&gt;
    &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;
      &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;
    &lt;/login-module&gt;
    &lt;login-module code=&quot;RealmDirect&quot; flag=&quot;required&quot;&gt;
      &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;
    &lt;/login-module&gt;
  &lt;/authentication&gt;
&lt;/security-domain&gt;</code></pre>
        </div>
    </div>
            <p>
    When applications are deployed to the application server they are associated with a security domain within the security subsystem, the <tt class=" ">other</tt> security domain is provided to work with the <tt class=" ">ApplicationRealm</tt>, this domain is defined with a pair of login modules Remoting and RealmDirect.            </p>
    <ul class=" "><li class=" ">            <p>
    Remoting            </p>
    </li></ul>            <p>
    The <tt class=" ">Remoting</tt> login module is used to check if the request currently being authenticated is a request received over a Remoting connection, if so the identity that was created during the authentication process is used and associated with the current request.            </p>
                <p>
    If the request did not arrive over a Remoting connection this module does nothing and allows the JAAS based login to continue to the next module.            </p>
    <ul class=" "><li class=" ">            <p>
    RealmDirect            </p>
    </li></ul>            <p>
    The <tt class=" ">RealmDirect</tt> login module makes use of a security realm to authenticate the current request if that did not occur in the <tt class=" ">Remoting</tt> login module and then use the realm to load the users roles, by default this login module assumes the realm to use is called <tt class=" ">ApplicationRealm</tt> although other names can be overridden using the &quot;realm&quot; module-option.            </p>
                <p>
    The advantage of this approach is that all of the backing store configuration can be left within the realm with the security domain just delegating to the realm.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-adduser.sh"  >
        <h3>user.sh</h3>
    
            <p>
    For use with the default configuration we supply a utility <tt class=" ">add-user</tt> which can be used to manage the properties files for the default realms used to store the users and their roles.            </p>
                <p>
    The add-user utility can be used to manage both the users in the <tt class=" ">ManagementRealm</tt> and the users in the <tt class=" ">ApplicationRealm</tt>, changes made apply to the properties file used both for domain mode and standalone mode.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    After you have installed your application server and decided if you are going to run in standalone mode or domain mode you can delete the parent folder for the mode you are not using, the add-user utility will then only be managing the properties file for the mode in use.            </p>
        </div>
    
            <p>
    The add-user utility is a command line utility however it can be run in both interactive and non-interactive mode.  Depending on your platform the script to run the add-user utility is either <tt class=" ">add-user.sh</tt> or <tt class=" ">add-user.bat</tt> which can be found in {<tt class=" ">jboss.home}/bin</tt>.            </p>
                <p>
    This guide now contains a couple of examples of this utility in use to accomplish the most common tasks.            </p>
        <div class="section-4"  id="66322694_Managementtasks-AddingaUser"  >
        <h4>Adding a User</h4>
    
            <p>
    Adding users to the properties files is the primary purpose of this utility.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    The server caches the contents of the properties files in memory, however the server does check the modified time of the properties files on each authentication request and re-load if the time has been updated - this means all changes made by this utility are immediately applied to any running server.            </p>
        </div>
    
    <div class="section-5"  id="66322694_Managementtasks-AManagementUser"  >
        <h5>A Management User</h5>
    
    <div class="confbox admonition admonition-note">
        
            <p>
    The default name of the realm for management users is <tt class=" ">ManagementRealm</tt>, when the utility prompts for the realm name just accept the default unless you have switched to a different realm.            </p>
        </div>
    
    <div class="section-6"  id="66322694_Managementtasks-InteractiveMode"  >
        <h6>Interactive Mode</h6>
    
            <p>
        <img src="images/author/download/attachments/66322734/415498048.png" alt="images/author/download/attachments/66322734/415498048.png" />
                </p>
                <p>
    Here we have added a new Management User called <tt class=" ">adminUser</tt>, as you can see some of the questions offer default responses so you can just press enter without repeating the default value.            </p>
                <p>
    For now just answer <tt class=" ">n</tt> or <tt class=" ">no</tt> to the final question, adding users to be used by processes is described in more detail in the domain management chapter.            </p>
        </div>
    
    <div class="section-6"  id="66322694_Managementtasks-NonInteractiveMode"  >
        <h6>Interactive Mode</h6>
    
            <p>
    To add a user in non-interactive mode the command <tt class=" ">./add-user.sh {username} {password</tt>} can be used.            </p>
                <p>
        <img src="images/author/download/attachments/66322734/265392448.png" alt="images/author/download/attachments/66322734/265392448.png" />
                </p>
        <div class="confbox admonition admonition-warning">
        
            <p>
    If you add users using this approach there is a risk that any other user that can view the list of running process may see the arguments including the password of the user being added, there is also the risk that the username / password combination will be cached in the history file of the shell you are currently using.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-AnApplicationUser"  >
        <h5>An Application User</h5>
    
            <p>
    When adding application users in addition to adding the user with their pre-hashed password it is also now possible to define the roles of the user.            </p>
        <div class="section-6"  id="66322694_Managementtasks-InteractiveMode2"  >
        <h6>Interactive Mode</h6>
    
            <p>
        <img src="images/author/download/attachments/66322734/-1210289224.png" alt="images/author/download/attachments/66322734/-1210289224.png" />
                </p>
                <p>
    Here a new user called <tt class=" ">appUser</tt> has been added, in this case a comma separated list of roles has also been specified.            </p>
                <p>
    As with adding a management user just answer <tt class=" ">n</tt> or <tt class=" ">no</tt> to the final question until you know you are adding a user that will be establishing a connection from one server to another.            </p>
        </div>
    
    <div class="section-6"  id="66322694_Managementtasks-NonInteractiveMode2"  >
        <h6>Interactive Mode</h6>
    
            <p>
    To add an application user non-interactively use the command <tt class=" ">./add-user.sh -a {username} {password</tt>}.            </p>
                <p>
        <img src="images/author/download/attachments/66322734/-869594696.png" alt="images/author/download/attachments/66322734/-869594696.png" />
                </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    Non-interactive mode does not support defining a list of users, to associate a user with a set of roles you will need to manually edit the <tt class=" ">application-roles.properties</tt> file by hand.            </p>
        </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-UpdatingaUser"  >
        <h4>Updating a User</h4>
    
            <p>
    Within the add-user utility it is also possible to update existing users, in interactive mode you will be prompted to confirm if this is your intention.            </p>
        <div class="section-5"  id="66322694_Managementtasks-AManagementUser2"  >
        <h5>A Management User</h5>
    
    <div class="section-6"  id="66322694_Managementtasks-InteractiveMode3"  >
        <h6>Interactive Mode</h6>
    
            <p>
        <img src="images/author/download/attachments/66322734/-17649304.png" alt="images/author/download/attachments/66322734/-17649304.png" />
                </p>
        </div>
    
    <div class="section-6"  id="66322694_Managementtasks-NonInteractiveMode3"  >
        <h6>Interactive Mode</h6>
    
            <p>
    In non-interactive mode if a user already exists the update is automatic with no confirmation prompt.            </p>
        </div>
    
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-AnApplicationUser2"  >
        <h5>An Application User</h5>
    
    <div class="section-6"  id="66322694_Managementtasks-InteractiveMode4"  >
        <h6>Interactive Mode</h6>
    
            <p>
        <img src="images/author/download/attachments/66322734/-2055545712.png" alt="images/author/download/attachments/66322734/-2055545712.png" />
                </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    On updating a user with roles you will need to re-enter the list of roles assigned to the user.            </p>
        </div>
    
    </div>
    
    <div class="section-6"  id="66322694_Managementtasks-NonInteractiveMode4"  >
        <h6>Interactive Mode</h6>
    
            <p>
    In non-interactive mode if a user already exists the update is automatic with no confirmation prompt.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-CommunityContributions"  >
        <h4>Community Contributions</h4>
    
            <p>
    There are still a few features to add to the add-user utility such as removing users or adding application users with roles in non-interactive mode, if you are interested in contributing to WildFly development the add-user utility is a good place to start as it is a stand alone utility, however it is a part of the AS build so you can become familiar with the AS development processes without needing to delve straight into the internals of the application server.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-JMX"  >
        <h3>JMX</h3>
    
            <p>
    When configuring the security realms remote access to the servers MBeanServer needs a special mention, when running in standalone mode the following is the default configuration: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;native-interface security-realm=&quot;ManagementRealm&quot;&gt;...&lt;/native-interface&gt;</code></pre>
        </div>
    </div>
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:jmx:1.1&quot;&gt;
  ...
  &lt;remoting-connector/&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    With this configuration remote access to JMX is provided over the native management interface, this is secured using the realm <tt class=" ">ManagementRealm</tt>, this means that any user that can connect to the native interface can also use this interface to access the MBeanServer - to disable this just remove the <tt class=" ">&lt;remoting-connector /&gt;</tt> element.            </p>
                <p>
    In domain mode it is slightly more complicates as the native interface is exposed by the host controller process however each application server is running in it's own process so by default remote access to JMX is disabled.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:1.1&quot;&gt;
  &lt;connector name=&quot;remoting-connector&quot; socket-binding=&quot;remoting&quot; security-realm=&quot;ApplicationRealm&quot;/&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:jmx:1.1&quot;&gt;
  ...
  &lt;!--&lt;remoting-connector use-management-endpoint=&quot;false&quot;/&gt;--&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    To enable remote access to JMX uncomment the <tt class=" ">&lt;remoting-connector /&gt;</tt> element however be aware that this will make the MBeanServer accessible over the same Remoting connector used for remote JNDI and EJB access - this means that any user that can authenticate against the realm <tt class=" ">ApplicationRealm</tt> will be able to access the MBeanServer.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    The following Jira issue is currently outstanding to allow access to the individual MBeanServers by proxying through the host controllers native interface <a href="https://issues.jboss.org/browse/AS7-4009">AS7-4009</a>, if this is a feature you would use please add your vote to the issue.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-DetailedConfiguration"  >
        <h2>Detailed Configuration</h2>
    
            <p>
    This section of the documentation describes the various configuration options when defining realms, plug-ins are a slightly special case so the configuration options for plug-ins is within it's own section.            </p>
                <p>
    Within a security realm definition there are four optional elements <tt class=" ">&lt;plug-ins /&gt;</tt>, <tt class=" ">&lt;server-identities /&gt;</tt>, <tt class=" ">&lt;authentication /&gt;</tt>, and <tt class=" ">&lt;authorization /&gt;</tt>, as mentioned above plug-ins is defined within it's own section below so we will begin by looking at the <tt class=" ">&lt;server-identities /&gt;</tt> element.            </p>
        <div class="section-3"  id="66322694_Managementtasks-%7B%7B%3Cserveridentities%2F%3E%7D%7D"  >
        <h3>&lt;server-identities /&gt;</h3>
    
            <p>
    The server identities section of a realm definition is used to define how a server appears to the outside world, currently this element can be used to configure a password to be used when establishing a remote outbound connection and also how to load a X.509 key which can be used for both inbound and outbound SSL connections.            </p>
        <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Cssl%2F%3E%7D%7D"  >
        <h4>&lt;ssl /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;server-identities&gt;
  &lt;ssl protocol=&quot;...&quot;&gt;
    &lt;keystore path=&quot;...&quot; relative-to=&quot;...&quot; keystore-password=&quot;...&quot; alias=&quot;...&quot; key-password=&quot;...&quot; /&gt;
  &lt;/ssl&gt;
&lt;/server-identities&gt;</code></pre>
        </div>
    </div>
<ul class=" "><li class=" ">            <p>
    <strong class=" ">protocol</strong> - By default this is set to TLS and in general does not need to be set.            </p>
    </li></ul>            <p>
    The SSL element then contains the nested <tt class=" ">&lt;keystore /&gt;</tt> element, this is used to define how to load the key from the file based (JKS) keystore.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">path</strong> (mandatory) - This is the path to the keystore, this can be an absolute path or relative to the next attribute.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">relative-to</strong> (optional) - The name of a service representing a path the keystore is relative to.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">keystore-password</strong> (mandatory) - The password required to open the keystore.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">alias</strong> (optional) - The alias of the entry to use from the keystore - for a keystore with multiple entries in practice the first usable entry is used but this should not be relied on and the alias should be set to guarantee which entry is used.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">key-password</strong> (optional) - The password to load the key entry, if omitted the keystore-password will be used instead.            </p>
    </li></ul>    <div class="confbox admonition admonition-tip">
        
            <p>
    If you see the error <tt class=" ">UnrecoverableKeyException: Cannot recover key</tt> the most likely cause that you need to specify a <tt class=" ">key-password</tt> and possible even an <tt class=" ">alias</tt> as well to ensure only one key is loaded.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Csecret%2F%3E%7D%7D"  >
        <h4>&lt;secret /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;server-identities&gt;
  &lt;secret value=&quot;...&quot; /&gt;
&lt;/server-identities&gt;</code></pre>
        </div>
    </div>
<ul class=" "><li class=" ">            <p>
    <strong class=" ">value</strong> (mandatory) - The password to use for outbound connections encoded as Base64, this field also supports a vault expression should stronger protection be required.            </p>
    </li></ul>    <div class="confbox admonition admonition-note">
        
            <p>
    The username for the outbound connection is specified at the point the outbound connection is defined.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-%7B%7B%3Cauthentication%2F%3E%7D%7D"  >
        <h3>&lt;authentication /&gt;</h3>
    
            <p>
    The authentication element is predominantly used to configure the authentication that is performed on an inbound connection, however there is one exception and that is if a trust store is defined - on negotiating an outbound SSL connection the trust store will be used to verify the remote server.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;truststore /&gt;
  &lt;local /&gt;
  &lt;jaas /&gt;
  &lt;ldap /&gt;
  &lt;properties /&gt;
  &lt;users /&gt;
  &lt;plug-in /&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    An authentication definition can have zero or one <tt class=" ">&lt;truststore /&gt;</tt>, it can also have zero or one <tt class=" ">&lt;local /&gt;</tt> and it can also have one of <tt class=" ">&lt;jaas /&gt;</tt>, <tt class=" ">&lt;ldap /&gt;</tt>, <tt class=" ">&lt;properties /&gt;</tt>, <tt class=" ">&lt;users /&gt;</tt>, and <tt class=" ">&lt;plug-in /&gt;</tt> i.e. the local mechanism and a truststore for certificate verification can be independent switched on and off and a single username / password store can be defined.            </p>
        <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Ctruststore%2F%3E%7D%7D"  >
        <h4>&lt;truststore /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;truststore path=&quot;...&quot; relative-to=&quot;...&quot; keystore-password=&quot;...&quot;/&gt; 
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    This element is used to define how to load a key store file that can be used as the trust store within the SSLContext we create internally, the store is then used to verify the certificates of the remote side of the connection be that inbound or outbound.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">path</strong> (mandatory) - This is the path to the keystore, this can be an absolute path or relative to the next attribute.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">relative-to</strong> (optional) - The name of a service representing a path the keystore is relative to.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">keystore-password</strong> (mandatory) - The password required to open the keystore.            </p>
    </li></ul>    <div class="confbox admonition admonition-note">
        
            <p>
    Although this is a definition of a trust store the attribute for the password is <tt class=" ">keystore-password</tt>, this is because the underlying file being opened is still a key store.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Clocal%2F%3E%7D%7D"  >
        <h4>&lt;local /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;local default-user=&quot;...&quot; allowed-users=&quot;...&quot; /&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    This element switches on the local authentication mechanism that allows clients to the server to verify that they are local to the server, at the protocol level it is optional for the remote client to send a user name in the authentication response.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">default-user</strong> (optional) - If the client does not pass in a username this is the assumed username, this value is also automatically added to the list of allowed-users.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">allowed-users</strong> (optional) - This attribute is used to specify a comma separated list of users allowed to authenticate using the local mechanism, alternatively '<tt class=" ">*</tt>' can be specified to allow any username to be specified.            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Cjaas%2F%3E%7D%7D"  >
        <h4>&lt;jaas /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;jaas name=&quot;...&quot; /&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    The jaas element is used to enable username and password based authentication where the supplied username and password are verified by making use of a configured jaas domain.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">name</strong> (mandatory) - The name of the jaas domain to use to verify the supplied username and password.            </p>
    </li></ul>    <div class="confbox admonition admonition-warning">
        
            <p>
    As JAAS authentication works by taking a username and password and verifying these the use of this element means that at the transport level authentication will be forced to send the password in plain text, any interception of the messages exchanged between the client and server without SSL enabled will reveal the users password.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Cldap%2F%3E%7D%7D"  >
        <h4>&lt;ldap /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;ldap connection=&quot;...&quot; base-dn=&quot;...&quot; recursive=&quot;...&quot; user-dn=&quot;...&quot;&gt;
    &lt;username-filter attribute=&quot;...&quot; /&gt;
    &lt;advanced-filter filter=&quot;...&quot; /&gt;
  &lt;/ldap&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    The ldap element is used to define how LDAP searches will be used to authenticate a user, this works by first connecting to LDAP and performing a search using the supplied user name to identity the distinguished name of the user and then a subsequent connection is made to the server using the password supplied by the user - if this second connection is a success then authentication succeeds.            </p>
        <div class="confbox admonition admonition-warning">
        
            <p>
    Due to the verification approach used this configuration causes the authentication mechanisms selected for the protocol to cause the password to be sent from the client in plain text, the following Jira issue is to investigating proxying a Digest authentication with the LDAP server so no plain text password is needed  <a href="https://issues.jboss.org/browse/AS7-4195">AS7-4195</a>.            </p>
        </div>
    
<ul class=" "><li class=" ">            <p>
    <strong class=" ">connection</strong> (mandatory) - The name of the connection to use to connect to LDAP.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">base-dn</strong> (mandatory) - The distinguished name of the context to use to begin the search from.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">recursive</strong> (optional) - Should the filter be executed recursively? Defaults to false.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">user-dn</strong> (optional) - After the user has been found specifies which attribute to read for the users distinguished name, defaults to '<tt class=" ">dn</tt>'.            </p>
    </li></ul>            <p>
    Within the ldap element only one of <tt class=" ">&lt;username-filter /&gt;</tt> or <tt class=" ">&lt;advanced-filter /&gt;</tt> can be specified.            </p>
        <div class="section-5"  id="66322694_Managementtasks-%7B%7B%3Cusernamefilter%2F%3E%7D%7D"  >
        <h5>&lt;username-filter /&gt;</h5>
    
            <p>
    This element is used for a simple filter to match the username specified by the remote user against a single attribute, as an example with Active Directory the match is most likely to be against the '<tt class=" ">sAMAccountName</tt>' attribute.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">attribute</strong> (mandatory) - The name of the field to match the users supplied username against.            </p>
    </li></ul>    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-%7B%7B%3Cadvancedfilter%2F%3E%7D%7D"  >
        <h5>&lt;advanced-filter /&gt;</h5>
    
            <p>
    This element is used where a more advanced filter is required, one example use of this filter is to exclude certain matches by specifying some additional criteria for the filter.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">filter</strong> (mandatory) - The filter to execute to locate the user, this filter should contain '{<tt class=" ">0</tt>}' as a place holder for the username supplied by the user authenticating.            </p>
    </li></ul>    </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Cproperties%2F%3E%7D%7D"  >
        <h4>&lt;properties /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;properties path=&quot;...&quot; relative-to=&quot;...&quot; plain-text=&quot;...&quot; /&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    The properties element is used to reference a properties file to load to read a users password or pre-prepared digest for the authentication process.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">path</strong> (mandatory) - The path to the properties file, either absolute or relative to the path referenced by the relative-to attribute.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">relative-to</strong> (optional) - The name of a path service that the defined path will be relative to.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">plain-text</strong> (optional) - Setting to specify if the passwords are stored as plain text within the properties file, defaults to false.            </p>
    </li></ul>    <div class="confbox admonition admonition-note">
        
            <p>
    By default the properties files are expected to store a pre-prepared hash of the users password in the form HEX( MD5( username ':' realm ':' password))            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Cusers%2F%3E%7D%7D"  >
        <h4>&lt;users /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authentication&gt;
  &lt;users&gt;
    &lt;user username=&quot;...&quot;&gt;
      &lt;password&gt;...&lt;/password&gt;
    &lt;/user&gt;
  &lt;/users&gt;
&lt;/authentication&gt;</code></pre>
        </div>
    </div>
            <p>
    This is a very simple store of a username and password that stores both of these within the domain model, this is only really provided for the provision of simple examples.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">username</strong> (mandatory) - A users username.            </p>
    </li></ul>            <p>
    The <tt class=" ">&lt;password/&gt;</tt> element is then used to define the password for the user.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-%7B%7B%3Cauthorization%2F%3E%7D%7D"  >
        <h3>&lt;authorization /&gt;</h3>
    
            <p>
    The authorization element is used to define how a users roles can be loaded after the authentication process completes, these roles may then be used for subsequent authorization decisions based on the service being accessed.  At the moment only a properties file approach or a custom plug-in are supported - support for loading roles from LDAP or from a database are planned for a subsequent release.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authorization&gt;
  &lt;properties /&gt;
  &lt;plug-in /&gt;
&lt;/authorization&gt;</code></pre>
        </div>
    </div>
    <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Cproperties%2F%3E%7D%7D2"  >
        <h4>&lt;properties /&gt;</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;authorization&gt;
  &lt;properties path=&quot;...&quot; relative-to=&quot;...&quot; /&gt;
&lt;/authorization&gt;</code></pre>
        </div>
    </div>
            <p>
    The format of the properties file is <tt class=" ">username={ROLES</tt>} where {<tt class=" ">ROLES</tt>} is a comma separated list of the users roles.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">path</strong> (mandatory) - The path to the properties file, either absolute or relative to the path referenced by the relative-to attribute.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">relative-to</strong> (optional) - The name of a path service that the defined path will be relative to.            </p>
    </li></ul>    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-%7B%7B%3Coutboundconnection%2F%3E%7D%7D"  >
        <h3>&lt;outbound-connection /&gt;</h3>
    
            <p>
    Strictly speaking these are not a part of the security realm definition, however at the moment they are only used by security realms so the definition of outbound connection is described here.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;management&gt;
  &lt;security-realms /&gt;
  &lt;outbound-connections&gt;
    &lt;ldap /&gt;
  &lt;/outbound-connections&gt;
&lt;/management&gt;</code></pre>
        </div>
    </div>
    <div class="section-4"  id="66322694_Managementtasks-%7B%7B%3Cldap%2F%3E%7D%7D2"  >
        <h4>&lt;ldap /&gt;</h4>
    
            <p>
    At the moment we only support outbound connections to ldap servers for the authentication process - this will later be expanded when we add support for database based authentication.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;outbound-connections&gt;
  &lt;ldap name=&quot;...&quot; url=&quot;...&quot; search-dn=&quot;...&quot; search-credential=&quot;...&quot; initial-context-factory=&quot;...&quot; /&gt;
&lt;/outbound-connections&gt;</code></pre>
        </div>
    </div>
            <p>
    The outbound connections are defined in this section and then referenced by name from the configuration that makes use of them.            </p>
    <ul class=" "><li class=" ">            <p>
    <strong class=" ">name</strong> (mandatory) - The unique name used to reference this connection.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">url</strong> (mandatory) - The URL use to establish the LDAP connection.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">search-dn</strong> (mandatory) - The distinguished name of the user to authenticate as to perform the searches.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">search-credential</strong> (mandatory) - The password required to connect to LDAP as the search-dn.            </p>
    </li><li class=" ">            <p>
    <strong class=" ">initial-context-factory</strong> (optional) - Allows overriding the initial context factory, defaults to '<tt class=" ">com.sun.jndi.ldap.LdapCtxFactory</tt>'            </p>
    </li></ul>    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-PlugIns"  >
        <h2>Plug Ins</h2>
    
            <p>
    Within WildFly 8 for communication with the management interfaces and for other services exposed using Remoting where username / password authentication is used the use of Digest authentication is preferred over the use of HTTP Basic or SASL Plain so that we can avoid the sending of password in the clear over the network.  For validation of the digests to work on the server we either need to be able to retrieve a users plain text password or we need to be able to obtain a ready prepared hash of their password along with the username and realm.            </p>
                <p>
    Previously to allow the addition of custom user stores we have added an option to the realms to call out to a JAAS domain to validate a users username and password, the problem with this approach is that to call JAAS we need the remote user to send in their plain text username and password so that a JAAS LoginModule can perform the validation, this forces us down to use either the HTTP Basic authentication mechanism or the SASL Plain mechanism depending on the transport used which is undesirable as we can not longer use Digest.            </p>
                <p>
    To overcome this we now support plugging in custom user stores to support loading a users password, hash and roles from a custom store to allow different stores to be implemented without forcing the authentication back to plain text variant, this article describes the requirements for a plug in and shows a simple example plug-in for use with WildFly 8.            </p>
                <p>
    When implementing a plug in there are two steps to the authentication process, the first step is to load the users identity and credential from the relevant store - this is then used to verify the user attempting to connect is valid.  After the remote user is validated we then load the users roles in a second step.  For this reason the support for plug-ins is split into the two stages, when providing a plug-in either of these two steps can be implemented but there is no requirement to implement the other side.            </p>
                <p>
    When implementing a plug-in the following interfaces are the bare minimum that need to be implemented so depending on if a plug-in to load a users identity or a plug-in to load a users roles is being implemented you will be implementing one of these interfaces.            </p>
                <p>
    <strong class=" "><i class=" ">Note</i></strong> <i class=" ">- All classes and interfaces of the SPI to be implemented are in the 'org.jboss.as.domain.management.plugin' package which is a part of the 'org.jboss.as.domain-management' module but for simplicity for the rest of this section only the short names will be shown.</i>            </p>
        <div class="section-3"  id="66322694_Managementtasks-AuthenticationPlugIn"  >
        <h3>AuthenticationPlugIn</h3>
    
            <p>
    To implement an <tt class=" ">AuthenticationPlugIn</tt> the following interface needs to be implemened: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface AuthenticationPlugIn&lt;T extends Credential&gt; {
    Identity&lt;T&gt; loadIdentity(final String userName, final String realm) throws IOException;
}</code></pre>
        </div>
    </div>
            <p>
    During the authentication process this method will be called with the user name supplied by the remote user and the name of the realm they are authenticating against, this method call represents that an authentication attempt is occurring but it is the Identity instance that is returned that will be used for the actual authentication to verify the remote user.            </p>
                <p>
    The Identity interface is also an interface you will implement: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface Identity&lt;T extends Credential&gt; {
    String getUserName();
    T getCredential();
}</code></pre>
        </div>
    </div>
            <p>
    Additional information can be contained within the Identity implementation although it will not currently be used, the key piece of information here is the Credential that will be returned - this needs to be one of the following: -            </p>
        <div class="section-4"  id="66322694_Managementtasks-PasswordCredential"  >
        <h4>PasswordCredential</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>public final class PasswordCredential implements Credential {
    public PasswordCredential(final char[] password);
    public char[] getPassword();
    void clear();
}</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">PasswordCredential</tt> is already implemented so use this class if you have the plain text password of the remote user, by using this the secured interfaces will be able to continue using the Digest mechanism for authentication.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-DigestCredential"  >
        <h4>DigestCredential</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>public final class DigestCredential implements Credential {
    public DigestCredential(final String hash);
    public String getHash();
}</code></pre>
        </div>
    </div>
            <p>
    This class is also already implemented and should be returned if instead of the plain text password you already have a pre-prepared hash of the username, realm and password.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ValidatePasswordCredential"  >
        <h4>ValidatePasswordCredential</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface ValidatePasswordCredential extends Credential {
    boolean validatePassword(final char[] password);
}</code></pre>
        </div>
    </div>
            <p>
    This is a special Credential type to use when it is not possible to obtain either a plain text representation of the password or a pre-prepared hash - this is an interface as you will need to provide an implementation to verify a supplied password.  The down side of using this type of Credential is that the authentication mechanism used at the transport level will need to drop down from Digest to either HTTP Basic or SASL Plain which will now mean that the remote client is sending their credential across the network in the clear.            </p>
                <p>
    If you use this type of credential be sure to force the mechanism choice to Plain as described in the configuration section below.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-AuthorizationPlugIn"  >
        <h3>AuthorizationPlugIn</h3>
    
            <p>
    If you are implementing a custom mechanism to load a users roles you need to implement the <tt class=" ">AuthorizationPlugIn</tt>            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface AuthorizationPlugIn {
    String[] loadRoles(final String userName, final String realm) throws IOException;
}</code></pre>
        </div>
    </div>
            <p>
    As with the <tt class=" ">AuthenticationPlugIn</tt> this has a single method that takes a users userName and realm - the return type is an array of Strings with each entry representing a role the user is a member of.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-PlugInConfigurationSupport"  >
        <h3>PlugInConfigurationSupport</h3>
    
            <p>
    In addition to the specific interfaces above there is an additional interface that a plug-in can implement to receive configuration information before the plug-in is used and also to receive a Map instance that can be used to share state between the plug-in instance used for the authentication step of the call and the plug-in instance used for the authorization step.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface PlugInConfigurationSupport {
    void init(final Map&lt;String, String&gt; configuration, final Map&lt;String, Object&gt; sharedState) throws IOException;
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-InstallingandConfiguringaPlugIn"  >
        <h3>Installing and Configuring a Plug-In</h3>
    
            <p>
    The next step of this article describes the steps to implement a plug-in provider and how to make it available within WildFly 8&nbsp;and how to configure it.  Example configuration and an example implementation are shown to illustrate this.            </p>
                <p>
    The following is an example security realm definition which will be used to illustrate this: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;PlugInRealm&quot;&gt;
   &lt;plug-ins&gt;
      &lt;plug-in module=&quot;org.jboss.as.sample.plugin&quot;/&gt;
   &lt;/plug-ins&gt;
   &lt;authentication&gt;
      &lt;plug-in name=&quot;Sample&quot;&gt;
         &lt;properties&gt;
            &lt;property name=&quot;darranl.password&quot; value=&quot;dpd&quot;/&gt;
            &lt;property name=&quot;darranl.roles&quot; value=&quot;Admin,Banker,User&quot;/&gt;
         &lt;/properties&gt;
      &lt;/plug-in&gt;
   &lt;/authentication&gt;
   &lt;authorization&gt;
      &lt;plug-in name=&quot;Delegate&quot; /&gt;
   &lt;/authorization&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    Before looking closely at the packaging and configuration there is one more interface to implement and that is the <tt class=" ">PlugInProvider</tt> interface, that interface is responsible for making PlugIn instances available at runtime to handle the requests.            </p>
        <div class="section-4"  id="66322694_Managementtasks-PlugInProvider"  >
        <h4>PlugInProvider</h4>
    
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>public interface PlugInProvider {
    AuthenticationPlugIn&lt;Credential&gt; loadAuthenticationPlugIn(final String name);
    AuthorizationPlugIn loadAuthorizationPlugIn(final String name);
}</code></pre>
        </div>
    </div>
            <p>
    These methods are called with the name that is supplied in the plug-in elements that are contained within the authentication and authorization elements of the configuration, based on the sample configuration above the loadAuthenticationPlugIn method will be called with a parameter of 'Sample' and the loadAuthorizationPlugIn method will be called with a parameter of 'Delegate'.            </p>
                <p>
    Multiple plug-in providers may be available to the application server so if a <tt class=" ">PlugInProvider</tt> implementation does not recognise a name then it should just return null and the server will continue searching the other providers.  If a <tt class=" ">PlugInProvider</tt> does recognise a name but fails to instantiate the PlugIn then a <tt class=" ">RuntimeException</tt> can be thrown to indicate the failure.            </p>
                <p>
    As a server could have many providers registered it is recommended that a naming convention including some form of hierarchy is used e.g. use package style names to avoid conflicts.            </p>
                <p>
    For the example the implementation is as follows: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public class SamplePluginProvider implements PlugInProvider {

    public AuthenticationPlugIn&lt;Credential&gt; loadAuthenticationPlugIn(String name) {
        if (&quot;Sample&quot;.equals(name)) {
            return new SampleAuthenticationPlugIn();
        }
        return null;
    }

    public AuthorizationPlugIn loadAuthorizationPlugIn(String name) {
        if (&quot;Sample&quot;.equals(name)) {
            return new SampleAuthenticationPlugIn();
        } else if (&quot;Delegate&quot;.equals(name)) {
            return new DelegateAuthorizationPlugIn();
        }
        return null;
    }
}</code></pre>
        </div>
    </div>
            <p>
    The load methods are called for each authentication attempt but it will be an implementation detail of the provider if it decides to return a new instance of the provider each time - in this scenario as we also use configuration and shared state then new instances of the implementations make sense.            </p>
                <p>
    To load the provider use a ServiceLoader so within the META-INF/services folder of the jar this project adds a file called '<tt class=" ">org.jboss.as.domain.management.plugin.PlugInProvider</tt>' - this contains a single entry which is the fully qualified class name of the PlugInProvider implementation class.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>org.jboss.as.sample.SamplePluginProvider</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-PackageasaModule"  >
        <h4>Package as a Module</h4>
    
            <p>
    To make the <tt class=" ">PlugInProvider</tt> available to the application it is bundled as a module and added to the modules already shipped with WildFly 8.            </p>
                <p>
    To add as a module we first need a <tt class=" ">module.xml</tt>: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.jboss.as.sample.plugin&quot;&gt;
    &lt;properties&gt;
    &lt;/properties&gt;

    &lt;resources&gt;
        &lt;resource-root path=&quot;SamplePlugIn.jar&quot;/&gt;
    &lt;/resources&gt;

    &lt;dependencies&gt;
        &lt;module name=&quot;org.jboss.as.domain-management&quot; /&gt;
    &lt;/dependencies&gt;
&lt;/module&gt;</code></pre>
        </div>
    </div>
            <p>
    The interfaces being implemented are in the '<tt class=" ">org.jboss.as.domain-management</tt>' module so a dependency on that module is defined, this <tt class=" ">module.xml</tt> is then placed in the '{<tt class=" ">jboss.home}/modules/org/jboss/as/sample/plugin/main</tt>'.            </p>
                <p>
    The compiled classed and <tt class=" ">META-INF/services</tt> as described above are assembled into a jar called <tt class=" ">SamplePlugIn.jar</tt> and also placed into this folder.            </p>
                <p>
    Looking back at the sample configuration at the top of the realm definition the following element was added: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>   &lt;plug-ins&gt;
      &lt;plug-in module=&quot;org.jboss.as.sample.plugin&quot;/&gt;
   &lt;/plug-ins&gt;</code></pre>
        </div>
    </div>
            <p>
    This element is used to list the modules that should be searched for plug-ins.  As plug-ins are loaded during the server start up this search is a lazy search so don't expect a definition to a non existant module or to a module that does not contain a plug-in to report an error.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-TheAuthenticationPlugIn"  >
        <h4>The AuthenticationPlugIn</h4>
    
            <p>
    The example <tt class=" ">AuthenticationPlugIn</tt> is implemented as: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public class SampleAuthenticationPlugIn extends AbstractPlugIn {

    private static final String PASSWORD_SUFFIX = &quot;.password&quot;;
    private static final String ROLES_SUFFIX = &quot;.roles&quot;;
    private Map&lt;String, String&gt; configuration;

    public void init(Map&lt;String, String&gt; configuration, Map&lt;String, Object&gt; sharedState) throws IOException {
        this.configuration = configuration;
        // This will allow an AuthorizationPlugIn to delegate back to this instance.
        sharedState.put(AuthorizationPlugIn.class.getName(), this);
    }

    public Identity loadIdentity(String userName, String realm) throws IOException {
        String passwordKey = userName + PASSWORD_SUFFIX;
        if (configuration.containsKey(passwordKey)) {
            return new SampleIdentity(userName, configuration.get(passwordKey));
        }
        throw new IOException(&quot;Identity not found.&quot;);
    }

    public String[] loadRoles(String userName, String realm) throws IOException {
        String rolesKey = userName + ROLES_SUFFIX;
        if (configuration.containsKey(rolesKey)) {
            String roles = configuration.get(rolesKey);
            return roles.split(&quot;,&quot;);
        } else {
            return new String[0];
        }
    }

    private static class SampleIdentity implements Identity {
        private final String userName;
        private final Credential credential;

        private SampleIdentity(final String userName, final String password) {
            this.userName = userName;
            this.credential = new PasswordCredential(password.toCharArray());
        }

        public String getUserName() {
            return userName;
        }

        public Credential getCredential() {
            return credential;
        }
    }
}</code></pre>
        </div>
    </div>
            <p>
    As you can see from this implementation there is also an additional class being extended <tt class=" ">AbstractPlugIn</tt> - that is simply an abstract class that implements the <tt class=" ">AuthenticationPlugIn</tt>, <tt class=" ">AuthorizationPlugIn</tt>, and <tt class=" ">PlugInConfigurationSupport</tt> interfaces already.  The properties that were defined in the configuration are passed in as a Map and importantly for this sample the plug-in adds itself to the shared state map.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-TheAuthorizationPlugIn"  >
        <h4>The AuthorizationPlugIn</h4>
    
            <p>
    The example implementation of the authentication plug in is as follows: -            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>public class DelegateAuthorizationPlugIn extends AbstractPlugIn {

    private AuthorizationPlugIn authorizationPlugIn;

    public void init(Map&lt;String, String&gt; configuration, Map&lt;String, Object&gt; sharedState) throws IOException {
        authorizationPlugIn = (AuthorizationPlugIn) sharedState.get(AuthorizationPlugIn.class.getName());
    }

    public String[] loadRoles(String userName, String realm) throws IOException {
        return authorizationPlugIn.loadRoles(userName, realm);
    }

}</code></pre>
        </div>
    </div>
            <p>
    This plug-in illustrates how two plug-ins can work together, by the <tt class=" ">AuthenticationPlugIn</tt> placing itself in the shared state map it is possible for the authorization plug-in to make use of it for the loadRoles implementation.            </p>
                <p>
    Another option to consider to achieve similar behaviour could be to provide an Identity implementation that also contains the roles and place this in the shared state map - the <tt class=" ">AuthorizationPlugIn</tt> can retrieve this and return the roles.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ForcingPlainTextAuthentication"  >
        <h4>Forcing Plain Text Authentication</h4>
    
            <p>
    As mentioned earlier in this article if the <tt class=" ">ValidatePasswordCredential</tt> is going to be used then the authentication used at the transport level needs to be forced from Digest authentication to plain text authentication, this can be achieved by adding a mechanism attribute to the plug-in definition within the authentication element i.e.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;authentication&gt;
    &lt;plug-in name=&quot;Sample&quot; mechanism=&quot;PLAIN&quot;&gt;</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-ExampleConfigurations"  >
        <h2>Example Configurations</h2>
    
            <p>
    This section of the document contains a couple of examples for the most common scenarios likely to be used with the security realms, please feel free to raise Jira issues requesting additional scenarios or if you have configured something not covered here please feel free to add your own examples - this document is editable after all     <img src="images/author/images/icons/emoticons/3649551.gif" alt="images/author/images/icons/emoticons/3649551.gif" />
            </p>
                <p>
    At the moment these examples are making use of the '<tt class=" ">ManagementRealm</tt>' however the same can apply to the '<tt class=" ">ApplicationRealm</tt>' or any custom realm you create for yourselves.            </p>
        <div class="section-3"  id="66322694_Managementtasks-LDAPAuthentication"  >
        <h3>LDAP Authentication</h3>
    
            <p>
    The following example demonstrates an example configuration making use of Active Directory to verify the users username and password.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;management&gt;
  &lt;security-realms&gt;
    &lt;security-realm name=&quot;ManagementRealm&quot;&gt;
      &lt;authentication&gt;
        &lt;ldap connection=&quot;EC2&quot; base-dn=&quot;CN=Users,DC=darranl,DC=jboss,DC=org&quot;&gt;
          &lt;username-filter attribute=&quot;sAMAccountName&quot; /&gt;
        &lt;/ldap&gt;
      &lt;/authentication&gt;
    &lt;/security-realm&gt;

  &lt;/security-realms&gt;

  &lt;outbound-connections&gt;
    &lt;ldap name=&quot;EC2&quot; url=&quot;ldap://127.0.0.1:9797&quot; search-dn=&quot;CN=wf8,CN=Users,DC=darranl,DC=jboss,DC=org&quot; search-credential=&quot;password&quot;/&gt;
  &lt;/outbound-connections&gt;

  ...

&lt;/management&gt;</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
        
            <p>
    For simplicity the <tt class=" ">&lt;local/&gt;</tt> configuration has been removed from this example, however there it is fine to leave that in place for local authentication to remain possible.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-EnableSSL"  >
        <h3>Enable SSL</h3>
    
            <p>
    The first step is the creation of the key, by default this is going to be used for both the native management interface and the http management interface - to create the key we can use the <tt class=" ">keyTool</tt>, the following example will create a key valid for one year.            </p>
                <p>
    Open a terminal window in the folder {<tt class=" ">jboss.home}/standalone/configuration</tt> and enter the following command: -            </p>
                <p>
    <tt class=" ">keytool -genkey -alias server -keyalg RSA -keystore server.keystore -validity 365</tt>            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>Enter keystore password:
Re-enter new password:</code></pre>
        </div>
    </div>
            <p>
    In this example I choose '<tt class=" ">keystore_password</tt>'.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>What is your first and last name?
  [Unknown]:  localhost</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
        
            <p>
    Of all of the questions asked this is the most important and should match the host name that will be entered into the web browser to connect to the admin console.            </p>
        </div>
    
            <p>
    Answer the remaining questions as you see fit and at the end for the purpose of this example I set the key password to '<tt class=" ">key_password</tt>'.            </p>
                <p>
    The following example shows how this newly created keystore will be referenced to enable SSL.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ManagementRealm&quot;&gt;
  &lt;server-identities&gt;
    &lt;ssl&gt;
      &lt;keystore path=&quot;server.keystore&quot; relative-to=&quot;jboss.server.config.dir&quot; keystore-password=&quot;keystore_password&quot; alias=&quot;server&quot; key-password=&quot;key_password&quot; /&gt;
    &lt;/ssl&gt;
  &lt;/server-identities&gt;
  &lt;authentication&gt;
    ...
  &lt;/authentication&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    The contents of the <tt class=" ">&lt;authentication /&gt;</tt> have not been changed in this example so authentication still occurs using either the local mechanism or username/password authentication using Digest.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-AddClientCerttoSSL"  >
        <h3>Add Client-Cert to SSL</h3>
    
            <p>
    To enable Client-Cert style authentication we just now need to add a <tt class=" ">&lt;truststore /&gt;</tt> element to the <tt class=" ">&lt;authentication /&gt;</tt> element referencing a trust store that has had the certificates or trusted clients imported.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;security-realm name=&quot;ManagementRealm&quot;&gt;
  &lt;server-identities&gt;
    &lt;ssl&gt;
      &lt;keystore path=&quot;server.keystore&quot; relative-to=&quot;jboss.server.config.dir&quot; keystore-password=&quot;keystore_password&quot; alias=&quot;server&quot; key-password=&quot;key_password&quot; /&gt;
    &lt;/ssl&gt;
  &lt;/server-identities&gt;
  &lt;authentication&gt;
    &lt;truststore path=&quot;server.truststore&quot; relative-to=&quot;jboss.server.config.dir&quot; keystore-password=&quot;truststore_password&quot; /&gt;
    &lt;local default-user=&quot;$local&quot;/&gt;
    &lt;properties path=&quot;mgmt-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;
  &lt;/authentication&gt;
&lt;/security-realm&gt;</code></pre>
        </div>
    </div>
            <p>
    In this scenario if Client-Cert authentication does not occur clients can fall back to use either the local mechanism or username/password authentication.  To make Client-Cert based authentication mandatory just remove the <tt class=" ">&lt;local /&gt;</tt> and <tt class=" ">&lt;properties /&gt;</tt> elements.            </p>
        </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-JVMsettings"  >
        <h2>JVM settings</h2>
    
            <p>
    Configuration of the JVM settings is different for a managed domain and a standalone server. In a managed domain, the domain controller components are responsible for starting and stoping server processes and hence determine the JVM settings. For a standalone server, it's the responsibility of the process that started the server (e.g. passing them as command line arguments).            </p>
        <div class="section-3"  id="66322694_Managementtasks-ManagedDomain"  >
        <h3>Managed Domain</h3>
    
            <p>
    In a managed domain the JVM settings can be declared at different scopes: For a specific server group, for a host or for a particular server. If not declared, the settings are inherited from the parent scope. This allows you to customize or extend the JVM settings within every layer.            </p>
                <p>
    Let's take a look at the JVM declaration for a server group:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;server-groups&gt;
       &lt;server-group name=&quot;main-server-group&quot; profile=&quot;default&quot;&gt;
           &lt;jvm name=&quot;default&quot;&gt;
               &lt;heap size=&quot;64m&quot; max-size=&quot;512m&quot;/&gt;
           &lt;/jvm&gt;
           &lt;socket-binding-group ref=&quot;standard-sockets&quot;/&gt;
       &lt;/server-group&gt;
       &lt;server-group name=&quot;other-server-group&quot; profile=&quot;default&quot;&gt;
           &lt;jvm name=&quot;default&quot;&gt;
               &lt;heap size=&quot;64m&quot; max-size=&quot;512m&quot;/&gt;
           &lt;/jvm&gt;
           &lt;socket-binding-group ref=&quot;standard-sockets&quot;/&gt;
       &lt;/server-group&gt;
&lt;/server-groups&gt;
</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See</sub> <tt class=" ">domain/configuration/domain.xml</tt><sub class=" ">)</sub>            </p>
                <p>
    In this example the server group &quot;main-server-group&quot; declares a heap size of <tt class=" ">64m</tt> and a maximum heap size of <tt class=" ">512m</tt>. Any server that belongs to this group will inherit these settings. You can change these settings for the group as a whole, or a specific server or host:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;servers&gt;
       &lt;server name=&quot;server-one&quot; group=&quot;main-server-group&quot; auto-start=&quot;true&quot;&gt;
           &lt;jvm name=&quot;default&quot;/&gt;
       &lt;/server&gt;
       &lt;server name=&quot;server-two&quot; group=&quot;main-server-group&quot; auto-start=&quot;true&quot;&gt;
           &lt;jvm name=&quot;default&quot;&gt;
               &lt;heap size=&quot;64m&quot; max-size=&quot;256m&quot;/&gt;
           &lt;/jvm&gt;
           &lt;socket-binding-group ref=&quot;standard-sockets&quot; port-offset=&quot;150&quot;/&gt;
       &lt;/server&gt;
       &lt;server name=&quot;server-three&quot; group=&quot;other-server-group&quot; auto-start=&quot;false&quot;&gt;
           &lt;socket-binding-group ref=&quot;standard-sockets&quot; port-offset=&quot;250&quot;/&gt;
       &lt;/server&gt;
&lt;/servers&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/host.xml)</sub>            </p>
                <p>
    In this case, <i class=" ">server-two</i>, belongs to the <i class=" ">main-server-group</i> and inherits the JVM settings named <i class=" ">default</i>, but declares a lower maximum heap size.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=local/server-config=server-two/jvm=default:read-resource
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; {
       &quot;heap-size&quot; =&gt; &quot;64m&quot;,
       &quot;max-heap-size&quot; =&gt; &quot;256m&quot;,
   }
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-StandaloneServer"  >
        <h3>Standalone Server</h3>
    
            <p>
    For a standalone sever you have to pass in the JVM settings either as command line arguments when executing the <tt class=" ">$JBOSS_HOME/bin/standalone.sh</tt> script, or by declaring them in <tt class=" ">$JBOSS_HOME/bin/standalone.conf</tt>. (For Windows users, the script to execute is <tt class=" ">%JBOSS_HOME%/bin/standalone.bat</tt> while the JVM settings can be declared in <tt class=" ">%JBOSS_HOME%/bin/standalone.conf.bat.)</tt>            </p>
        </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Commandlineparameters"  >
        <h2>Command line parameters</h2>
    
            <p>
    To start up a WildFly 8 managed domain, execute the <tt class=" ">$JBOSS_HOME/bin/domain.sh</tt> script. To start up a standalone server, execute the&nbsp;<tt class=" ">$JBOSS_HOME/bin/standalone.sh</tt>. With no arguments, the default configuration is used. You can override the default configuration by providing arguments on the command line, or in your calling script.            </p>
        <div class="section-3"  id="66322694_Managementtasks-Systemproperties"  >
        <h3>System properties</h3>
    
            <p>
    The standalone and the managed domain modes each use a default configuration which expects various files and writable directories to exist in standard locations. Each of these standard locations is associated with a system property, which has a default value. To override a system property, pass its new value using the standard jvm <tt class=" ">-Dkey=value</tt> options:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -Djboss.home.dir=some/location/WildFly/jboss-as \
    -Djboss.server.config.dir=some/location/WildFly/jboss-as/custom-standalone</code></pre>
        </div>
    </div>
            <p>
    This command starts up a standalone server instance using a non-standard AS home directory and a custom configuration directory. For specific information about system properties, refer to the definitions below.            </p>
                <p>
    Instead of passing the parameters directly, you can put them into a properties file, and pass the properties file to the script, as in the two examples below.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/domain.sh --properties=/some/location/jboss.properties
$JBOSS_HOME/bin/domain.sh -P=/some/location/jboss.properties</code></pre>
        </div>
    </div>
            <p>
    The syntax for passing in parameters and properties files is the same regardless of whether you are running the <tt class=" ">domain.sh</tt>, <tt class=" ">standalone.sh</tt>, or the Microsoft Windows scripts<tt class=" ">domain.bat</tt> or <tt class=" ">standalone.bat</tt>.            </p>
                <p>
    The properties file is a standard Java property file containing <tt class=" ">key=value</tt> pairs:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>jboss.home.dir=/some/location/WildFly/jboss-as
jboss.domain.config.dir=/some/location/WildFly/custom-domain</code></pre>
        </div>
    </div>
            <p>
        <span id="66322694_Managementtasks-standalonesystemproperties"><a name="66322694_Managementtasks-standalonesystemproperties"></a></span>
            </p>
        <div class="section-4"  id="66322694_Managementtasks-Standalone"  >
        <h4>Standalone</h4>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Property name            </td>
                <td rowspan="1" colspan="1">
    Usage            </td>
                <td rowspan="1" colspan="1">
    Default value            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">java.ext.dirs</tt>            </td>
                <td rowspan="1" colspan="1">
    The JDK extension directory paths            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">null</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.home.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The root directory of the WildFly 8 installation.            </td>
                <td rowspan="1" colspan="1">
    Set by <tt class=" ">standalone.sh</tt> to <tt class=" ">$JBOSS_HOME</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The base directory for server content.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.home.dir</tt>/standalone            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.config.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The base configuration directory.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>/configuration            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.data.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used for persistent data file storage.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>/data            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.log.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory containing the <tt class=" ">server.log</tt> file.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>/log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.temp.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used for temporary file storage.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.base.dir</tt>/tmp            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.deploy.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used to store deployed content            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.data.dir</tt>/content            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
        <span id="66322694_Managementtasks-domainsystemproperties"><a name="66322694_Managementtasks-domainsystemproperties"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ManagedDomain2"  >
        <h4>Managed Domain</h4>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Property name            </td>
                <td rowspan="1" colspan="1">
    Usage            </td>
                <td rowspan="1" colspan="1">
    Default value            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.home.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The root directory of the WildFly installation.            </td>
                <td rowspan="1" colspan="1">
    Set by <tt class=" ">domain.sh</tt> to <tt class=" ">$JBOSS_HOME</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The base directory for domain content.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.home.dir</tt>/domain            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.config.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The base configuration directory            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/configuration            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.data.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used for persistent data file storage.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/data            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.log.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory containing the <tt class=" ">host-controller.log</tt> and <tt class=" ">process-controller.log</tt> files            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.temp.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used for temporary file storage            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/tmp            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.deployment.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory used to store deployed content            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/content            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.servers.dir</tt>            </td>
                <td rowspan="1" colspan="1">
    The directory containing the output for the managed server instances            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.base.dir</tt>/servers            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
        <span id="66322694_Managementtasks-parameters"><a name="66322694_Managementtasks-parameters"></a></span>
            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Othercommandlineparameters"  >
        <h3>Other command line parameters</h3>
    
            <p>
    The first acceptable format for command line arguments to the WildFly launch scripts is            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>--name=value</code></pre>
        </div>
    </div>
            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh --server-config=standalone-ha.xml</code></pre>
        </div>
    </div>
            <p>
    If the parameter name is a single character, it is prefixed by a single '-' instead of two. Some parameters have both a long and short option.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>-x=value</code></pre>
        </div>
    </div>
            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -P=/some/location/jboss.properties</code></pre>
        </div>
    </div>
            <p>
    For some command line arguments frequently used in previous major releases of WildFly, replacing the &quot;=&quot; in the above examples with a space is supported, for compatibility.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>-b 192.168.100.10</code></pre>
        </div>
    </div>
            <p>
    If possible, use the <tt class=" ">-x=value</tt> syntax. New parameters will always support this syntax.            </p>
                <p>
    The sections below describe the command line parameter names that are available in standalone and domain mode.            </p>
        <div class="section-4"  id="66322694_Managementtasks-Standalone2"  >
        <h4>Standalone</h4>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Default if absent            </td>
                <td rowspan="1" colspan="1">
    Value            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--server-config</tt><br/><tt class=" ">-c</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.server.config.dir</tt>/standalone.xml            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.server.config.dir</tt>.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--read-only-server-config</tt>            </td>
                <td rowspan="1" colspan="1">
    -            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.server.config.dir</tt>. This is similar to <tt class=" ">--server-config</tt> but it does not overwrite the file used when the management model is changed. However a full versioned history is maintained of the file.            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ManagedDomain3"  >
        <h4>Managed Domain</h4>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Default if absent            </td>
                <td rowspan="1" colspan="1">
    Value            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--domain-config</tt><br/><tt class=" ">-c</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.config.dir</tt>/domain.xml            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.domain.config.dir</tt>.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--read-only-domain-config</tt>            </td>
                <td rowspan="1" colspan="1">
    -            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.domain.config.dir</tt>. This is similar to <tt class=" ">--domain-config</tt> but it does not overwrite the file used when the management model is changed. However a full versioned history is maintained of the file.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--host-config</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">jboss.domain.config.dir</tt>/host.xml            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.domain.config.dir</tt>.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--read-only-host-config</tt>            </td>
                <td rowspan="1" colspan="1">
    -            </td>
                <td rowspan="1" colspan="1">
    A relative path which is interpreted to be relative to <tt class=" ">jboss.domain.config.dir</tt>. This is similar to <tt class=" ">--host-config</tt> but it does not overwrite the file used when the management model is changed. However a full versioned history is maintained of the file.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    The following parameters take no value and are only usable on slave host controllers (i.e. hosts configured to connect to a <tt class=" ">remote</tt> domain controller.)            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name &nbsp; &nbsp;            </td>
                <td rowspan="1" colspan="1">
    Function            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--backup</tt>            </td>
                <td rowspan="1" colspan="1">
    Causes the slave host controller to create and maintain a local copy of the domain configuration file            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--cached-dc</tt>            </td>
                <td rowspan="1" colspan="1">
    If the slave host controller is unable to contact the master domain controller to get its configuration at boot, boot from a local copy previously created using <tt class=" ">--backup</tt>. The slave host controller will not be able make any modifications to the domain configuration, but it will be able to launch servers.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
        <span id="66322694_Managementtasks-commonparameters"><a name="66322694_Managementtasks-commonparameters"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-Commonparameters"  >
        <h4>Common parameters</h4>
    
            <p>
    These parameters apply in both standalone or managed domain mode:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Function            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">-b=&lt;value&gt;</tt>            </td>
                <td rowspan="1" colspan="1">
    Sets system property <tt class=" ">jboss.bind.address</tt> to &lt;value&gt;. See <a href="66322694.html#66322694_Managementtasks-bindaddress">Controlling the Bind Address with -b</a> for further details.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">-b&lt;name&gt;=&lt;value&gt;</tt>            </td>
                <td rowspan="1" colspan="1">
    Sets system property <tt class=" ">jboss.bind.address.&lt;name&gt;</tt> to &lt;value&gt; where <i class=" ">name</i> can vary. See <a href="66322694.html#66322694_Managementtasks-bindaddress">Controlling the Bind Address with -b</a> for further details.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">-u=&lt;value&gt;</tt>            </td>
                <td rowspan="1" colspan="1">
    Sets system property <tt class=" ">jboss.default.multicast.address</tt> to &lt;value&gt;. See <a href="66322694.html#66322694_Managementtasks-defaultmulticastaddress">Controlling the Default Multicast Address with -u</a> for further details.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--version</tt><br/><tt class=" ">-v</tt><br/><tt class=" ">-V</tt>            </td>
                <td rowspan="1" colspan="1">
    Prints the version of WildFly to standard output and exits the JVM.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">--help</tt><br/><tt class=" ">-h</tt>            </td>
                <td rowspan="1" colspan="1">
    Prints a help message explaining the options and exits the JVM.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
        <span id="66322694_Managementtasks-bindaddress"><a name="66322694_Managementtasks-bindaddress"></a></span>
            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-ControllingtheBindAddresswith%5Cb"  >
        <h3>Controlling the Bind Address with -b</h3>
    
            <p>
    WildFly&nbsp;binds sockets to the IP addresses and interfaces contained in the <tt class=" ">&lt;interfaces&gt;</tt> elements in <tt class=" ">standalone.xml</tt>, <tt class=" ">domain.xml</tt> and <tt class=" ">host.xml</tt>. (See <a href="66322692.html#66322692_Generalconfigurationconcepts-interfaces">Interfaces</a> and <a href="66322692.html#66322692_Generalconfigurationconcepts-socketbindings">Socket Bindings</a> for further information on these elements.) The standard configurations that ship with WildFly includes two interface configurations:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interfaces&gt;
    &lt;interface name=&quot;management&quot;&gt;
        &lt;inet-address value=&quot;${jboss.bind.address.management:127.0.0.1}&quot;/&gt;
    &lt;/interface&gt;
    &lt;interface name=&quot;public&quot;&gt;
       &lt;inet-address value=&quot;${jboss.bind.address:127.0.0.1}&quot;/&gt;
    &lt;/interface&gt;
&lt;/interfaces&gt;</code></pre>
        </div>
    </div>
            <p>
    Those configurations use the values of system properties <tt class=" ">jboss.bind.address.management</tt> and <tt class=" ">jboss.bind.address</tt> if they are set. If they are not set, 127.0.0.1 is used for each value.            </p>
                <p>
    As noted in <a href="66322694.html#66322694_Managementtasks-commonparameters">Common Parameters</a>, the AS supports the <tt class=" ">-b</tt> and <tt class=" ">-b&lt;name&gt;</tt> command line switches. The only function of these switches is to set system properties <tt class=" ">jboss.bind.address</tt> and <tt class=" ">jboss.bind.address.&lt;name&gt;</tt> respectively. However, because of the way the standard WildFly configuration files are set up, using the <tt class=" ">-b</tt> switches can indirectly control how the AS binds sockets.            </p>
                <p>
    <i class=" ">If your interface configurations match those shown above</i>, using this as your launch command causes all sockets associated with interface named &quot;public&quot; &nbsp;to be bound to <tt class=" ">192.168.100.10</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -b=192.168.100.10</code></pre>
        </div>
    </div>
            <p>
    In the standard config files, public interfaces are those not associated with server management. Public interfaces handle normal end-user requests.            </p>
        <div class="confbox admonition admonition-info">
            <div class="title">Interface names</div>
        
            <p>
    The interface named &quot;public&quot; is not inherently special. It is provided as a convenience. You can name your interfaces to suit your environment.            </p>
        </div>
    
            <p>
    To bind the public interfaces to all IPv4 addresses (the IPv4 wildcard address), use the following syntax:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -b=0.0.0.0</code></pre>
        </div>
    </div>
            <p>
    You can also bind the management interfaces, as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -bmanagement=192.168.100.10</code></pre>
        </div>
    </div>
            <p>
    In the standard config files, management interfaces are those sockets associated with server management, such as the socket used by the CLI, the HTTP socket used by the admin console, and the JMX connector socket.            </p>
        <div class="confbox admonition admonition-note">
            <div class="title">Be Careful</div>
        
            <p>
    The <tt class=" ">-b</tt> switch only controls the interface bindings because the standard config files that ship with WildFly sets things up that way. If you change the <tt class=" ">&lt;interfaces&gt;</tt> section in your configuration to ignore the system properties controlled by <tt class=" ">-b</tt>, then setting <tt class=" ">-b</tt> in your launch command will have no effect.            </p>
                <p>
    For example, this perfectly valid setting for the &quot;public&quot; interface causes &nbsp;<tt class=" ">-b</tt> to have no effect on the &quot;public&quot; interface:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;interface name=&quot;public&quot;&gt;
   &lt;nic name=&quot;eth0&quot;/&gt;
&lt;/interface&gt;</code></pre>
        </div>
    </div>
            <p>
    The key point is <strong class=" ">the contents of the configuration files determine the configuration. Settings like</strong> <tt class=" ">-b</tt> <strong class=" ">are not overrides of the configuration files.</strong>&nbsp;They only provide a shorter syntax for setting a system properties that may or may not be referenced in the configuration files. They are provided as a convenience, and you can choose to modify your configuration to ignore them.            </p>
        </div>
    
            <p>
        <span id="66322694_Managementtasks-defaultmulticastaddress"><a name="66322694_Managementtasks-defaultmulticastaddress"></a></span>
            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-ControllingtheDefaultMulticastAddresswith%5Cu"  >
        <h3>Controlling the Default Multicast Address with -u</h3>
    
            <p>
    WildFly 8 may use multicast communication for some services, particularly those involving high availability clustering. The multicast addresses and ports used are configured using the <tt class=" ">socket-binding</tt> elements in <tt class=" ">standalone.xml</tt> and <tt class=" ">domain.xml</tt>. (See <a href="66322692.html#66322692_Generalconfigurationconcepts-socketbindings">Socket Bindings</a> for further information on these elements.) The standard HA configurations that ship with WildFly include two socket binding configurations that use a default multicast address:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;socket-binding name=&quot;jgroups-mping&quot; port=&quot;0&quot; multicast-address=&quot;${jboss.default.multicast.address:230.0.0.4}&quot; multicast-port=&quot;45700&quot;/&gt;
&lt;socket-binding name=&quot;jgroups-udp&quot; port=&quot;55200&quot; multicast-address=&quot;${jboss.default.multicast.address:230.0.0.4}&quot; multicast-port=&quot;45688&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    Those configurations use the values of system property <tt class=" ">jboss.default.multicast.address</tt> if it is set. If it is not set, 230.0.0.4 is used for each value. (The configuration may include other socket bindings for multicast-based services that are not meant to use the default multicast address; e.g. a binding the mod-cluster services use to communicate on a separate address/port with Apache httpd servers.)            </p>
                <p>
    As noted in <a href="66322694.html#66322694_Managementtasks-commonparameters">Common Parameters</a>, the AS supports the <tt class=" ">-u</tt> command line switch. The only function of this switch is to set system property <tt class=" ">jboss.default.multicast.address</tt>. However, because of the way the standard AS configuration files are set up, using the <tt class=" ">-u</tt> switches can indirectly control how the AS uses multicast.            </p>
                <p>
    <i class=" ">If your socket binding configurations match those shown above</i>, using this as your launch command causes the service using those sockets configurations to be communicate over multicast address <tt class=" ">230.0.1.2</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>$JBOSS_HOME/bin/standalone.sh -u=230.0.1.2</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
            <div class="title">Be Careful</div>
        
            <p>
    As with the <tt class=" ">-b</tt> switch, the <tt class=" ">-u</tt> switch only controls the multicast address used because the standard config files that ship with WildFly 8&nbsp;sets things up that way. If you change the <tt class=" ">&lt;socket-binding&gt;</tt> sections in your configuration to ignore the system properties controlled by <tt class=" ">-u</tt>, then setting <tt class=" ">-u</tt> in your launch command will have no effect.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Auditlogging"  >
        <h2>Audit logging</h2>
    
            <p>
    WildFly comes with audit logging built in for management operations affecting the management model. By default it is turned off. The information is output as JSON records.            </p>
                <p>
    The default configuration of audit logging in standalone.xml looks as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>    &lt;management&gt;
        &lt;security-realms&gt;
...
        &lt;/security-realms&gt;
        &lt;audit-log&gt;
            &lt;formatters&gt;
                &lt;json-formatter name=&quot;json-formatter&quot;/&gt;
            &lt;/formatters&gt;
            &lt;handlers&gt;
                &lt;file-handler name=&quot;file&quot; formatter=&quot;json-formatter&quot; path=&quot;audit-log.log&quot; relative-to=&quot;jboss.server.data.dir&quot;/&gt;
            &lt;/handlers&gt;
            &lt;logger log-boot=&quot;true&quot; log-read-only=&quot;true&quot; enabled=&quot;false&quot;&gt;
                &lt;handlers&gt;
                    &lt;handler name=&quot;file&quot;/&gt;
                &lt;/handlers&gt;
            &lt;/logger&gt;
        &lt;/audit-log&gt;
...</code></pre>
        </div>
    </div>
            <p>
    Looking at this via the CLI it looks like            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /core-service=management/access=audit:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;file-handler&quot; =&gt; {&quot;file&quot; =&gt; {
            &quot;formatter&quot; =&gt; &quot;json-formatter&quot;,
            &quot;max-failure-count&quot; =&gt; 10,
            &quot;path&quot; =&gt; &quot;audit-log.log&quot;,
            &quot;relative-to&quot; =&gt; &quot;jboss.server.data.dir&quot;
        }},
        &quot;json-formatter&quot; =&gt; {&quot;json-formatter&quot; =&gt; {
            &quot;compact&quot; =&gt; false,
            &quot;date-format&quot; =&gt; &quot;yyyy-MM-dd HH:mm:ss&quot;,
            &quot;date-separator&quot; =&gt; &quot; - &quot;,
            &quot;escape-control-characters&quot; =&gt; false,
            &quot;escape-new-line&quot; =&gt; false,
            &quot;include-date&quot; =&gt; true
        }},
        &quot;logger&quot; =&gt; {&quot;audit-log&quot; =&gt; {
            &quot;enabled&quot; =&gt; false,
            &quot;log-boot&quot; =&gt; true,
            &quot;log-read-only&quot; =&gt; false,
            &quot;handler&quot; =&gt; {&quot;file&quot; =&gt; {}}
        }},
        &quot;syslog-handler&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
        
            <p>
    The audit logging subsystem has a lot of internal dependencies, and it logs operations changing, enabling and disabling its components. When configuring or changing things at runtime it is a good idea to make these changes as part of a CLI batch. For example if you are adding a syslog handler you need to add the handler and its information as one step. Similarly if you are using a file handler, and want to change its <tt class=" ">path</tt> and <tt class=" ">relative-to</tt> attributes, that needs to happen as one step.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-JSONFormatter"  >
        <h3>JSON Formatter</h3>
    
            <p>
    The first thing that needs configuring is the formatter, we currently support outputting log records as JSON. You can define several formatters, for use with different handlers. A log record has the following format, and it is the formatter's job to format the data presented:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>2013-08-12 11:01:12 - {
    &quot;type&quot; : &quot;core&quot;,
    &quot;r/o&quot; : false,
    &quot;booting&quot; : false,
    &quot;version&quot; : &quot;8.0.0.Alpha4&quot;,
    &quot;user&quot; : &quot;$local&quot;,
    &quot;domainUUID&quot; : null,
    &quot;access&quot; : &quot;NATIVE&quot;,
    &quot;remote-address&quot; : &quot;127.0.0.1/127.0.0.1&quot;,
    &quot;success&quot; : true,
    &quot;ops&quot; : [JMX|WFLY8:JMX subsystem configuration],
        &quot;operation&quot; : &quot;write-attribute&quot;,
        &quot;name&quot; : &quot;enabled&quot;,
        &quot;value&quot; : true,
        &quot;operation-headers&quot; : {&quot;caller-type&quot; : &quot;user&quot;}
    }]
}</code></pre>
        </div>
    </div>
            <p>
    It includes an optional timestamp and then the following information in the json record            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Field name            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">type</tt>            </td>
                <td rowspan="1" colspan="1">
    This can have the values <tt class=" ">core</tt>, meaning it is a management operation, or <tt class=" ">jmx</tt> meaning it comes from the jmx subsystem (see the jmx subsystem for configuration of the jmx subsystem's audit logging)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">r/o</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation does not change the management model, <tt class=" ">false</tt> otherwise            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">booting</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation was executed during the bootup process, <tt class=" ">false</tt> if it was executed once the server is up and running            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">version</tt>            </td>
                <td rowspan="1" colspan="1">
    The version number of the WildFly instance            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">user</tt>            </td>
                <td rowspan="1" colspan="1">
    The username of the authenticated user. In this case the operation has been logged via the CLI on the same machine as the running server, so the special <tt class=" ">$local</tt> user is used            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">domainUUID</tt>            </td>
                <td rowspan="1" colspan="1">
    An ID to link together all operations as they are propagated from the Doman Controller to it servers, slave Host Controllers, and slave Host Controller servers            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">access</tt>            </td>
                <td rowspan="1" colspan="1">
    This can have one of the following values:<br/>*<tt class=" ">NATIVE</tt> - The operation came in through the native management interface, for example the CLI<br/>*<tt class=" ">HTTP</tt> - The operation came in through the domain HTTP interface, for example the admin console<br/>*<tt class=" ">JMX</tt> - The operation came in through the JMX subsystem. See <a href="66322718.html">JMX</a> for how to configure audit logging for JMX.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">remote-address</tt>            </td>
                <td rowspan="1" colspan="1">
    The address of the client executing this operation            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">success</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation succeeded, <tt class=" ">false</tt> if it was rolled back            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">ops</tt>            </td>
                <td rowspan="1" colspan="1">
    The operations being executed. This is a list of the operations serialized to JSON. At boot this will be all the operations resulting from parsing the xml. Once booted the list will typically just contain a single entry            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    The json formatter resource has the following attributes:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">include-date</tt>            </td>
                <td rowspan="1" colspan="1">
    Boolan toggling whether or not to include the timestamp in the formatted log records            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">date-separator</tt>            </td>
                <td rowspan="1" colspan="1">
    A string containing characters to separate the date and the rest of the formatted log message. Will be ignored if <tt class=" ">include-date=false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">date-format</tt>            </td>
                <td rowspan="1" colspan="1">
    The date format to use for the timestamp as understood by <tt class=" ">java.text.SimpleDateFormat</tt>. Will be ignored if <tt class=" ">include-date=false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">compact</tt>            </td>
                <td rowspan="1" colspan="1">
    If true will format the JSON on one line. There may still be values containing new lines, so if having the whole record on one line is important, set escape-new-line or escape-control-characters to true            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">escape-control-characters</tt>            </td>
                <td rowspan="1" colspan="1">
    If <tt class=" ">true</tt> it will escape all control characters (ascii entries with a decimal value &lt; 32) with the ascii code in octal, e.g. a new line becomes '#012'. If this is <tt class=" ">true</tt>, it will override <tt class=" ">escape-new-line=false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">escape-new-line</tt>            </td>
                <td rowspan="1" colspan="1">
    If <tt class=" ">true</tt> it will escape all new lines with the ascii code in octal, e.g. &quot;#012&quot;.            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Handlers"  >
        <h3>Handlers</h3>
    
            <p>
    A handler is responsible for taking the formatted data and logging it to a location. There are currently two types of handlers, File and Syslog. You can configure several of each type of handler and use them to log information.            </p>
        <div class="section-4"  id="66322694_Managementtasks-Filehandler"  >
        <h4>File handler</h4>
    
            <p>
    The file handlers log the audit log records to a file on the server. The attributes for the file handler are            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
                <td rowspan="1" colspan="1">
    Read Only            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">formatter</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of a JSON formatter to use to format the log records            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">path</tt>            </td>
                <td rowspan="1" colspan="1">
    The path of the audit log file            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">relative-to</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of another previously named path, or of one of the standard paths provided by the system. If <tt class=" ">relative-to</tt> is provided, the value of the <tt class=" ">path</tt> attribute is treated as relative to the path specified by this attribute            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">failure-count</tt>            </td>
                <td rowspan="1" colspan="1">
    The number of logging failures since the handler was initialized            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">max-failure-count</tt>            </td>
                <td rowspan="1" colspan="1">
    The maximum number of logging failures before disabling this handler            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">disabled-due-to-failure</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if this handler was disabled due to logging failures            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt>            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    In our standard configuration <tt class=" ">path=audit-log.log</tt> and <tt class=" ">relative-to=jboss.server.data.dir</tt>, typically this will be <tt class=" ">$JBOSS_HOME/standalone/data/audit-log.log</tt>            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-Sysloghandler"  >
        <h4>Syslog handler</h4>
    
            <p>
    The default configuration does not have syslog audit logging set up. Syslog is a better choice for audit logging since you can log to a remote syslog server, and secure the authentication to happen over TLS with client certificate authentication. Syslog servers vary a lot in their capabilities so not all settings in this section apply to all syslog servers. We have tested with <a href="http://www.rsyslog.com">rsyslog</a>.            </p>
                <p>
    The address for the syslog handler is <tt class=" ">/core-service=management/access=audit/syslog-handler=*</tt> and just like file handlers you can add as many syslog entries as you like. The syslog handler resources reference the main RFC's for syslog a fair bit, for reference they can be found at:<br/>*<a href="http://www.ietf.org/rfc/rfc3164.txt">http://www.ietf.org/rfc/rfc3164.txt</a><br/>*<a href="http://www.ietf.org/rfc/rfc5424.txt">http://www.ietf.org/rfc/rfc5424.txt</a><br/>*<a href="http://www.ietf.org/rfc/rfc6587.txt">http://www.ietf.org/rfc/rfc6587.txt</a>            </p>
                <p>
    The syslog handler resource has the following attributes:            </p>
        <div class="tablewrap">
        <table>
<thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">formatter</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of a JSON formatter to use to format the log records            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">failure-count</tt>            </td>
                <td rowspan="1" colspan="1">
    The number of logging failures since the handler was initialized            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">max-failure-count</tt>            </td>
                <td rowspan="1" colspan="1">
    The maximum number of logging failures before disabling this handler            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">disabled-due-to-failure</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if this handler was disabled due to logging failures            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">syslog-format</tt>            </td>
                <td rowspan="1" colspan="1">
    Whether to set the syslog format to the one specified in RFC-5424 or RFC-3164            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">max-length</tt>            </td>
                <td rowspan="1" colspan="1">
    The maximum length in bytes a log message, including the header, is allowed to be. If undefined, it will default to 1024 bytes if the syslog-format is RFC3164, or 2048 bytes if the syslog-format is RFC5424.            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">truncate</tt>            </td>
                <td rowspan="1" colspan="1">
    Whether or not a message, including the header, should truncate the message if the length in bytes is greater than the maximum length. If set to false messages will be split and sent with the same header values            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">false</tt>            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    When adding a syslog handler you also need to add the protocol it will use to communicate with the syslog server. The valid choices for protocol are <tt class=" ">UDP</tt>,<tt class=" ">TCP</tt> and <tt class=" ">TLS</tt>. The protocol must be added at the same time as you add the syslog handler, or it will fail. Also, you can only add one protocol for the handler.            </p>
        <div class="section-5"  id="66322694_Managementtasks-UDP"  >
        <h5>UDP</h5>
    
            <p>
    Configures the handler to use UDP to communicate with the syslog server. The address of the <tt class=" ">UDP</tt> resource is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=udp</tt>. The attributes of the <tt class=" ">UDP</tt> resource are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">host</tt>            </td>
                <td rowspan="1" colspan="1">
    The host of the syslog server for the udp requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">port</tt>            </td>
                <td rowspan="1" colspan="1">
    The port of the syslog server listening for the udp requests            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-TCP"  >
        <h5>TCP</h5>
    
            <p>
    Configures the handler to use TCP to communicate with the syslog server. The address of the <tt class=" ">TCP</tt> resource is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=tcp</tt>. The attributes of the <tt class=" ">TCP</tt> resource are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">host</tt>            </td>
                <td rowspan="1" colspan="1">
    The host of the syslog server for the tcp requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">port</tt>            </td>
                <td rowspan="1" colspan="1">
    The port of the syslog server listening for the tcp requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">message-transfer</tt>            </td>
                <td rowspan="1" colspan="1">
    The message transfer setting as described in section 3.4 of RFC-6587. This can either be OCTET_COUNTING as described in section 3.4.1 of RFC-6587, or NON_TRANSPARENT_FRAMING as described in section 3.4.1 of RFC-6587            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-TLS"  >
        <h5>TLS</h5>
    
            <p>
    Configures the handler to use TLC to communicate securely with the syslog server. The address of the <tt class=" ">TLS</tt> resource is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=tls</tt>. The attributes of the <tt class=" ">TLS</tt> resource are the same as for <tt class=" ">TCP</tt>:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">host</tt>            </td>
                <td rowspan="1" colspan="1">
    The host of the syslog server for the tls requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">port</tt>            </td>
                <td rowspan="1" colspan="1">
    The port of the syslog server listening for the tls requests            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">message-transfer</tt>            </td>
                <td rowspan="1" colspan="1">
    The message transfer setting as described in section 3.4 of RFC-6587. This can either be OCTET_COUNTING as described in section 3.4.1 of RFC-6587, or NON_TRANSPARENT_FRAMING as described in section 3.4.1 of RFC-6587            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    If the syslog server's TLS certificate is not signed by a certificate signing authority, you will need to set up a truststore to trust the certificate. The resource for the trust store is a child of the <tt class=" ">TLS</tt> resource, and the full address is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=tls/authentication=truststore</tt>. The attributes of the truststore resource are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-password</tt>            </td>
                <td rowspan="1" colspan="1">
    The password for the truststore            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-path</tt>            </td>
                <td rowspan="1" colspan="1">
    The path of the truststore            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-relative-to</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of another previously named path, or of one of the standard paths provided by the system. If <tt class=" ">keystore-relative-to</tt> is provided, the value of the <tt class=" ">keystore-path</tt> attribute is treated as relative to the path specified by this attribute            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="section-6"  id="66322694_Managementtasks-TLSwithClientcertificateauthentication."  >
        <h6>TLS with Client certificate authentication.</h6>
    
            <p>
    If you have set up the syslog server to require client certificate authentication, when creating your handler you will also need to set up a client certificate store containing the certificate to be presented to the syslog server. The address of the client certificate store resource is <tt class=" ">/core-service=management/access=audit/syslog-handler=*/protocol=tls/authentication=client-certificate-store</tt> and its attributes are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-password</tt>            </td>
                <td rowspan="1" colspan="1">
    The password for the keystore            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">key-password</tt>            </td>
                <td rowspan="1" colspan="1">
    The password for the keystore key            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-path</tt>            </td>
                <td rowspan="1" colspan="1">
    The path of the keystore            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">keystore-relative-to</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of another previously named path, or of one of the standard paths provided by the system. If <tt class=" ">keystore-relative-to</tt> is provided, the value of the <tt class=" ">keystore-path</tt> attribute is treated as relative to the path specified by this attribute            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Loggerconfiguration"  >
        <h3>Logger configuration</h3>
    
            <p>
    The final part that needs configuring is the logger for the management operations. This references one or more handlers and is configured at <tt class=" ">/core-service=management/access=audit/logger=audit-log</tt>. The attributes for this resource are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">enabled</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> to enable logging of the management operations            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">log-boot</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> to log the management operations when booting the server, <tt class=" ">false</tt> otherwise            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">log-read-only</tt>            </td>
                <td rowspan="1" colspan="1">
    If <tt class=" ">true</tt> all operations will be audit logged, if <tt class=" ">false</tt> only operations that change the model will be logged            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    Then which handlers are used to log the management operations are configured as <tt class=" ">handler=*</tt> children of the logger.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-DomainMode%28hostspecificconfiguration%29"  >
        <h3>Domain Mode (host specific configuration)</h3>
    
            <p>
    In domain mode audit logging is configured for each host in its <tt class=" ">host.xml</tt> file. This means that when connecting to the DC, the configuration of the audit logging is under the host's entry, e.g. here is the default configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9990 /] /host=master/core-service=management/access=audit:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;file-handler&quot; =&gt; {
            &quot;host-file&quot; =&gt; {
                &quot;formatter&quot; =&gt; &quot;json-formatter&quot;,
                &quot;max-failure-count&quot; =&gt; 10,
                &quot;path&quot; =&gt; &quot;audit-log.log&quot;,
                &quot;relative-to&quot; =&gt; &quot;jboss.domain.data.dir&quot;
            },
            &quot;server-file&quot; =&gt; {
                &quot;formatter&quot; =&gt; &quot;json-formatter&quot;,
                &quot;max-failure-count&quot; =&gt; 10,
                &quot;path&quot; =&gt; &quot;audit-log.log&quot;,
                &quot;relative-to&quot; =&gt; &quot;jboss.server.data.dir&quot;
            }
        },
        &quot;json-formatter&quot; =&gt; {&quot;json-formatter&quot; =&gt; {
            &quot;compact&quot; =&gt; false,
            &quot;date-format&quot; =&gt; &quot;yyyy-MM-dd HH:mm:ss&quot;,
            &quot;date-separator&quot; =&gt; &quot; - &quot;,
            &quot;escape-control-characters&quot; =&gt; false,
            &quot;escape-new-line&quot; =&gt; false,
            &quot;include-date&quot; =&gt; true
        }},
        &quot;logger&quot; =&gt; {&quot;audit-log&quot; =&gt; {
            &quot;enabled&quot; =&gt; false,
            &quot;log-boot&quot; =&gt; true,
            &quot;log-read-only&quot; =&gt; false,
            &quot;handler&quot; =&gt; {&quot;host-file&quot; =&gt; {}}
        }},
        &quot;server-logger&quot; =&gt; {&quot;audit-log&quot; =&gt; {
            &quot;enabled&quot; =&gt; false,
            &quot;log-boot&quot; =&gt; true,
            &quot;log-read-only&quot; =&gt; false,
            &quot;handler&quot; =&gt; {&quot;server-file&quot; =&gt; {}}
        }},
        &quot;syslog-handler&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
            <p>
    We now have two file handlers, one called <tt class=" ">host-file</tt> used to configure the file to log management operations on the host, and one called <tt class=" ">server-file</tt> used to log management operations executed on the servers. Then <tt class=" ">logger=audit-log</tt> is used to configure the logger for the host controller, referencing the <tt class=" ">host-file</tt> handler. <tt class=" ">server-logger=audit-log</tt> is used to configure the logger for the managed servers, referencing the <tt class=" ">server-file</tt> handler. The attributes for <tt class=" ">server-logger=audit-log</tt> are the same as for <tt class=" ">server-logger=audit-log</tt> in the previous section. Having the host controller and server loggers configured independently means we can control audit logging for managed servers and the host controller independently.&nbsp;            </p>
        </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Subsystemconfiguration"  >
        <h2>Subsystem configuration</h2>
    
            <p>
    The following chapters will focus on the high level management use cases that are available through the CLI and the web interface. For a detailed description of each subsystem configuration property, please consult the respective component reference.            </p>
        <div class="confbox admonition admonition-tip">
            <div class="title">Schema Location</div>
        
            <p>
    The configuration schemas can found in <tt class=" ">$JBOSS_HOME/docs/schema</tt>.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-EESubsystemConfiguration"  >
        <h3>EE Subsystem Configuration</h3>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Overview"  >
        <h2>Overview</h2>
    
            <p>
    The EE subsystem provides common functionality in the Java EE platform, such as the EE Concurrency Utilities (JSR 236) and <tt class=" ">@Resource</tt> injection. The subsystem is also responsible for managing the lifecycle of Java EE application's deployments, that is, <tt class=" ">.ear</tt> files.            </p>
                <p>
    The EE subsystem configuration may be used to:            </p>
    <ul class=" "><li class=" ">            <p>
    customise the deployment of Java EE applications            </p>
    </li><li class=" ">            <p>
    create EE Concurrency Utilities instances            </p>
    </li><li class=" ">            <p>
    define the default bindings            </p>
    </li></ul>            <p>
    The subsystem name is ee and this document covers EE subsystem version <tt class=" ">2.0</tt>, which XML namespace within WildFly XML configurations is&nbsp;<tt class=" ">urn:jboss:domain:ee:2.0</tt>. The path for the subsystem's XML schema, within WildFly's distribution, is <tt class=" ">docs/schema/jboss-as-ee_2_0.xsd</tt>.            </p>
                <p>
    Subsystem XML configuration example with all elements and attributes specified:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:ee:2.0&quot; &gt;
    &lt;global-modules&gt;
        &lt;module name=&quot;org.jboss.logging&quot;
                slot=&quot;main&quot;/&gt;
        &lt;module name=&quot;org.apache.log4j&quot;
                annotations=&quot;true&quot;
                meta-inf=&quot;true&quot;
                services=&quot;false&quot; /&gt;
    &lt;/global-modules&gt;
    &lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;
    &lt;spec-descriptor-property-replacement&gt;false&lt;/spec-descriptor-property-replacement&gt;
    &lt;jboss-descriptor-property-replacement&gt;false&lt;/jboss-descriptor-property-replacement&gt;
    &lt;annotation-property-replacement&gt;false&lt;/annotation-property-replacement&gt;
    &lt;concurrent&gt;
        &lt;context-services&gt;
            &lt;context-service
                    name=&quot;default&quot;
                    jndi-name=&quot;java:jboss/ee/concurrency/context/default&quot;
                    use-transaction-setup-provider=&quot;true&quot; /&gt;
        &lt;/context-services&gt;
        &lt;managed-thread-factories&gt;
            &lt;managed-thread-factory
                    name=&quot;default&quot;
                    jndi-name=&quot;java:jboss/ee/concurrency/factory/default&quot;
                    context-service=&quot;default&quot;
                    priority=&quot;1&quot; /&gt;
        &lt;/managed-thread-factories&gt;
        &lt;managed-executor-services&gt;
            &lt;managed-executor-service
                    name=&quot;default&quot;
                    jndi-name=&quot;java:jboss/ee/concurrency/executor/default&quot;
                    context-service=&quot;default&quot;
                    thread-factory=&quot;default&quot;
                    hung-task-threshold=&quot;60000&quot;
                    core-threads=&quot;5&quot;
                    max-threads=&quot;25&quot;
                    keepalive-time=&quot;5000&quot;
                    queue-length=&quot;1000000&quot;
                    reject-policy=&quot;RETRY_ABORT&quot; /&gt;
        &lt;/managed-executor-services&gt;
        &lt;managed-scheduled-executor-services&gt;
            &lt;managed-scheduled-executor-service
                    name=&quot;default&quot;
                    jndi-name=&quot;java:jboss/ee/concurrency/scheduler/default&quot;
                    context-service=&quot;default&quot;
                    thread-factory=&quot;default&quot;
                    hung-task-threshold=&quot;60000&quot;
                    core-threads=&quot;5&quot;
                    keepalive-time=&quot;5000&quot;
                    reject-policy=&quot;RETRY_ABORT&quot; /&gt;
        &lt;/managed-scheduled-executor-services&gt;
    &lt;/concurrent&gt;
    &lt;default-bindings
            context-service=&quot;java:jboss/ee/concurrency/context/default&quot;
            datasource=&quot;java:jboss/datasources/ExampleDS&quot;
            jms-connection-factory=&quot;java:jboss/DefaultJMSConnectionFactory&quot;
            managed-executor-service=&quot;java:jboss/ee/concurrency/executor/default&quot;
            managed-scheduled-executor-service=&quot;java:jboss/ee/concurrency/scheduler/default&quot;
            managed-thread-factory=&quot;java:jboss/ee/concurrency/factory/default&quot; /&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-JavaEEApplicationDeployment"  >
        <h2>Java EE Application Deployment</h2>
    
            <p>
    The EE subsystem configuration allows the customisation of the deployment behaviour for Java EE Applications.            </p>
        <div class="section-3"  id="66322694_Managementtasks-GlobalModules"  >
        <h3>Global Modules</h3>
    
            <p>
    Global modules is a set of JBoss Modules that will be added as dependencies to the JBoss Module of every Java EE deployment. Such dependencies allows Java EE deployments to see the classes exported by the global modules.            </p>
                <p>
    Each global module is defined through the <tt class=" ">module</tt> resource, an example of its XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;global-modules&gt;
    &lt;module name=&quot;org.jboss.logging&quot; slot=&quot;main&quot;/&gt;
    &lt;module name=&quot;org.apache.log4j&quot; annotations=&quot;true&quot; meta-inf=&quot;true&quot; services=&quot;false&quot; /&gt;
  &lt;/global-modules&gt;</code></pre>
        </div>
    </div>
            <p>
    The only mandatory attribute is the JBoss Module <tt class=" ">name</tt>, the <tt class=" ">slot</tt> attribute defaults to <tt class=" ">main</tt>, and both define the JBoss Module ID to reference.            </p>
                <p>
    The optional <tt class=" ">annotations</tt> attribute, which defaults to <tt class=" ">false</tt>, indicates if a pre-computed annotation index should be imported from META-INF/jandex.idx            </p>
                <p>
    The optional <tt class=" ">services</tt> attribute indicates if any services exposed in META-INF/services should be made available to the deployments class loader, and defaults to <tt class=" ">false</tt>.            </p>
                <p>
    The optional <tt class=" ">meta-inf</tt> attribute, which defaults to <tt class=" ">true</tt>, indicates if the Module's <tt class=" ">META-INF</tt> path should be available to the deployment's class loader.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-EARSubdeploymentsIsolation"  >
        <h3>EAR Subdeployments Isolation</h3>
    
            <p>
    A flag indicating whether each of the subdeployments within a <tt class=" ">.ear</tt> can access classes belonging to another subdeployment within the same <tt class=" ">.ear</tt>. The default value is <tt class=" ">false</tt>, which allows the subdeployments to see classes belonging to other subdeployments within the <tt class=" ">.ear</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;</code></pre>
        </div>
    </div>
            <p>
    For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>myapp.ear
|
|--- web.war
|
|--- ejb1.jar
|
|--- ejb2.jar
</code></pre>
        </div>
    </div>
            <p>
    If the <tt class=" ">ear-subdeployments-isolated</tt> is set to false, then the classes in <tt class=" ">web.war</tt> can access classes belonging to <tt class=" ">ejb1.jar</tt> and <tt class=" ">ejb2.jar</tt>. Similarly, classes from <tt class=" ">ejb1.jar</tt> can access classes from <tt class=" ">ejb2.jar</tt> (and vice-versa).            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    This flag has no effect on the isolated classloader of the <tt class=" ">.war</tt> file(s), i.e. irrespective of whether this flag is set to <tt class=" ">true</tt> or <tt class=" ">false</tt>, the <tt class=" ">.war</tt> within a <tt class=" ">.ear</tt> will have a isolated classloader, and other subdeployments within that <tt class=" ">.ear</tt> will not be able to access classes from that <tt class=" ">.war</tt>. This is as per spec.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-PropertyReplacement"  >
        <h3>Property Replacement</h3>
    
            <p>
    The EE subsystem configuration includes flags to configure whether system property replacement will be done on XML descriptors and Java Annotations, included in Java EE deployments.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    System properties etc are resolved in the security context of the application server itself, not the deployment that contains the file. This means that if you are running with a security manager and enable this property, a deployment can potentially access system properties or environment entries that the security manager would have otherwise prevented.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-SpecDescriptorPropertyReplacement"  >
        <h4>Spec Descriptor Property Replacement</h4>
    
            <p>
    Flag indicating whether system property replacement will be performed on standard Java EE XML descriptors. This defaults to <tt class=" ">true</tt>, however it is disabled in the default configurations.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;spec-descriptor-property-replacement&gt;false&lt;/spec-descriptor-property-replacement&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-JBossDescriptorPropertyReplacement"  >
        <h4>JBoss Descriptor Property Replacement</h4>
    
            <p>
    Flag indicating whether system property replacement will be performed on WildFly proprietary XML descriptors, such as <tt class=" ">jboss-app.xml</tt>. This defaults to <tt class=" ">true</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;jboss-descriptor-property-replacement&gt;false&lt;/jboss-descriptor-property-replacement&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-AnnotationPropertyReplacement"  >
        <h4>Annotation Property Replacement</h4>
    
            <p>
    Flag indicating whether system property replacement will be performed on Java annotations. The default value is&nbsp;<tt class=" ">false</tt>.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;annotation-property-replacement&gt;false&lt;/annotation-property-replacement&gt;</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-EEConcurrencyUtilities"  >
        <h2>EE Concurrency Utilities</h2>
    
            <p>
    EE Concurrency Utilities (JSR 236) were introduced with Java EE 7, to ease the task of writing multithreaded Java EE applications. Instances of these utilities are managed by WildFly, and the related configuration provided by the EE subsystem.            </p>
        <div class="section-3"  id="66322694_Managementtasks-ContextServices"  >
        <h3>Context Services</h3>
    
            <p>
    The Context Service is a concurrency utility which creates contextual proxies from existent objects. WildFly Context Services are also used to propagate the context from a Java EE application invocation thread, to the threads internally used by the other EE Concurrency Utilities. Context Service instances may be created using the subsystem XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;context-services&gt;
    &lt;context-service
	name=&quot;default&quot;
	jndi-name=&quot;java:jboss/ee/concurrency/context/default&quot;
	use-transaction-setup-provider=&quot;true&quot; /&gt;
  &lt;/context-services&gt;</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">name</tt> attribute is mandatory, and it's value should be a unique name within all Context Services.            </p>
                <p>
    The <tt class=" ">jndi-name</tt> attribute is also mandatory, and defines where in the JNDI the Context Service should be placed.            </p>
                <p>
    The optional <tt class=" ">use-trasaction-setup-provider</tt> attribute indicates if the contextual proxies built by the Context Service should suspend transactions in context, when invoking the proxy objects, and its value defaults to true.            </p>
                <p>
    Management clients, such as the WildFly CLI, may also be used to configure Context Service instances. An example to <tt class=" ">add</tt> and <tt class=" ">remove</tt> one named <tt class=" ">other</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=ee/context-service=other:add(jndi-name=java\:jboss\/ee\/concurrency\/other)
/subsystem=ee/context-service=other:remove</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-ManagedThreadFactories"  >
        <h3>Managed Thread Factories</h3>
    
            <p>
    The Managed Thread Factory allows Java EE applications to create new threads. WildFly Managed Thread Factory instances may also, optionally, use a Context Service instance to propagate the Java EE application thread&rsquo;s context to the new threads. Instance creation is done through the EE subsystem, by editing the subsystem XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;managed-thread-factories&gt;
    &lt;managed-thread-factory
	name=&quot;default&quot;
	jndi-name=&quot;java:jboss/ee/concurrency/factory/default&quot;
	context-service=&quot;default&quot;
	priority=&quot;1&quot; /&gt;
  &lt;/managed-thread-factories&gt;</code></pre>
        </div>
    </div>
            <p>
    The&nbsp;<tt class=" ">name</tt>&nbsp;attribute is mandatory, and it's value should be a unique name within all Managed Thread Factories.            </p>
                <p>
    The&nbsp;<tt class=" ">jndi-name</tt>&nbsp;attribute is also mandatory, and defines where in the JNDI the Managed Thread Factory should be placed.            </p>
                <p>
    The optional&nbsp;<tt class=" ">context-service</tt>&nbsp;references an existent Context Service by its <tt class=" ">name</tt>. If specified then thread created by the factory will propagate the invocation context, present when creating the thread.            </p>
                <p>
    The optional&nbsp;<tt class=" ">priority</tt>&nbsp;indicates the priority for new threads created by the factory, and defaults to <tt class=" ">5</tt>.            </p>
                <p>
    Management clients, such as the WildFly CLI, may also be used to configure Managed Thread Factory instances. An example to <tt class=" ">add</tt> and <tt class=" ">remove</tt> one named <tt class=" ">other</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=ee/managed-thread-factory=other:add(jndi-name=java\:jboss\/ee\/factory\/other)
/subsystem=ee/managed-thread-factory=other:remove</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-ManagedExecutorServices"  >
        <h3>Managed Executor Services</h3>
    
            <p>
    The Managed Executor Service is the Java EE adaptation of Java SE Executor Service, providing to Java EE applications the functionality of asynchronous task execution. WildFly is responsible to manage the lifecycle of Managed Executor Service instances, which are specified through the EE subsystem XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;managed-executor-services&gt;
    &lt;managed-executor-service
	name=&quot;default&quot;
	jndi-name=&quot;java:jboss/ee/concurrency/executor/default&quot;
	context-service=&quot;default&quot;
	thread-factory=&quot;default&quot;
	hung-task-threshold=&quot;60000&quot;
	core-threads=&quot;5&quot;
	max-threads=&quot;25&quot;
	keepalive-time=&quot;5000&quot;
	queue-length=&quot;1000000&quot;
	reject-policy=&quot;RETRY_ABORT&quot; /&gt;
  &lt;/managed-executor-services&gt;</code></pre>
        </div>
    </div>
            <p>
    The&nbsp;<tt class=" ">name</tt>&nbsp;attribute is mandatory, and it's value should be a unique name within all Managed Executor Services.            </p>
                <p>
    The&nbsp;<tt class=" ">jndi-name</tt>&nbsp;attribute is also mandatory, and defines where in the JNDI the Managed Executor Service should be placed.            </p>
                <p>
    The optional&nbsp;<tt class=" ">context-service</tt>&nbsp;references an existent Context Service by its&nbsp;<tt class=" ">name</tt>. If specified then the referenced Context Service will capture the invocation context present when submitting a task to the executor, which will then be used when executing the task.            </p>
                <p>
    The optional&nbsp;<tt class=" ">thread-factory</tt>&nbsp;references an existent Managed Thread Factory by its&nbsp;<tt class=" ">name</tt>, to handle the creation of internal threads. If not specified then a Managed Thread Factory with default configuration will be created and used internally.            </p>
                <p>
    The mandatory&nbsp;<tt class=" ">core-threads</tt>&nbsp;provides the number of threads to keep in the executor's pool, even if they are idle. A value of&nbsp;<tt class=" ">0</tt>&nbsp;means there is no limit.            </p>
                <p>
    The optional&nbsp;<tt class=" ">queue-length</tt>&nbsp;indicates the number of tasks that can be stored in the input queue. The default value is <tt class=" ">0</tt>, which means the queue capacity is unlimited.            </p>
                <p>
    The executor&rsquo;s task queue is based on the values of the attributes&nbsp;<tt class=" ">core-threads</tt> and <tt class=" ">queue-length</tt>:            </p>
    <ul class=" "><li class=" ">            <p>
    If <tt class=" ">queue-length</tt> is <tt class=" ">0</tt>, or <tt class=" ">queue-length</tt> is <tt class=" ">Integer.MAX_VALUE (2147483647)</tt> and <tt class=" ">core-threads</tt> is <tt class=" ">0</tt>, direct handoff queuing strategy will be used and a synchronous queue will be created.            </p>
    </li><li class=" ">            <p>
    If <tt class=" ">queue-length</tt> is <tt class=" ">Integer.MAX_VALUE</tt> but <tt class=" ">core-threads</tt> is not <tt class=" ">0</tt>, an unbounded queue will be used.            </p>
    </li><li class=" ">            <p>
    For any other valid value for <tt class=" ">queue-length</tt>, a bounded queue wil be created.            </p>
    </li></ul>            <p>
    The optional&nbsp;<tt class=" ">hung-task-threshold</tt>&nbsp;defines a threshold value, in milliseconds, to hung a possibly blocked task. A value of&nbsp;<tt class=" ">0</tt>&nbsp;will never hung a task, and is the default.            </p>
                <p>
    The optional&nbsp;<tt class=" ">long-running-tasks</tt>&nbsp;is a hint to optimize the execution of long running tasks, and defaults to <tt class=" ">false</tt>.            </p>
                <p>
    The optional&nbsp;<tt class=" ">max-threads</tt>&nbsp;defines the the maximum number of threads used by the executor, which defaults to Integer.MAX_VALUE&nbsp;(2147483647).            </p>
                <p>
    The optional&nbsp;<tt class=" ">keepalive-time</tt>&nbsp;defines the time, in milliseconds, that an internal thread may be idle. The attribute default value is <tt class=" ">60000</tt>.            </p>
                <p>
    The optional&nbsp;reject-policy defines the policy to use when a task is rejected by the executor. The attribute value may be the default <tt class=" ">ABORT</tt>, which means an exception should be thrown, or <tt class=" ">RETRY_ABORT</tt>, which means the executor will try to submit it once more, before throwing an exception.&nbsp;            </p>
                <p>
    Management clients, such as the WildFly CLI, may also be used to configure Managed Executor Service instances. An example to <tt class=" ">add</tt> and <tt class=" ">remove</tt> one named <tt class=" ">other</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=ee/managed-executor-service=other:add(jndi-name=java\:jboss\/ee\/executor\/other, core-threads=2)
/subsystem=ee/managed-executor-service=other:remove</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-ManagedScheduledExecutorServices"  >
        <h3>Managed Scheduled Executor Services</h3>
    
            <p>
    The Managed Scheduled  Executor Service is the Java EE adaptation of Java SE Scheduled Executor Service, providing to Java EE applications the functionality of scheduling task execution. WildFly is responsible to manage the lifecycle of Managed Scheduled  Executor Service instances, which are specified through the EE subsystem XML configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;managed-scheduled-executor-services&gt;
    &lt;managed-scheduled-executor-service
	name=&quot;default&quot;
	jndi-name=&quot;java:jboss/ee/concurrency/scheduler/default&quot;
	context-service=&quot;default&quot;
	thread-factory=&quot;default&quot;
	hung-task-threshold=&quot;60000&quot;
	core-threads=&quot;5&quot;
	keepalive-time=&quot;5000&quot;
	reject-policy=&quot;RETRY_ABORT&quot; /&gt;
  &lt;/managed-scheduled-executor-services&gt;</code></pre>
        </div>
    </div>
            <p>
    The&nbsp;<tt class=" ">name</tt>&nbsp;attribute is mandatory, and it's value should be a unique name within all Managed Scheduled Executor Services.            </p>
                <p>
    The&nbsp;<tt class=" ">jndi-name</tt>&nbsp;attribute is also mandatory, and defines where in the JNDI the Managed Scheduled Executor Service should be placed.            </p>
                <p>
    The optional&nbsp;<tt class=" ">context-service</tt>&nbsp;references an existent Context Service by its&nbsp;<tt class=" ">name</tt>. If specified then the referenced Context Service will capture the invocation context present when submitting a task to the executor, which will then be used when executing the task.            </p>
                <p>
    The optional&nbsp;<tt class=" ">thread-factory</tt>&nbsp;references an existent Managed Thread Factory by its&nbsp;<tt class=" ">name</tt>, to handle the creation of internal threads. If not specified then a Managed Thread Factory with default configuration will be created and used internally.            </p>
                <p>
    The mandatory&nbsp;<tt class=" ">core-threads</tt>&nbsp;provides the number of threads to keep in the executor's pool, even if they are idle. A value of&nbsp;<tt class=" ">0</tt>&nbsp;means there is no limit.            </p>
                <p>
    The optional&nbsp;<tt class=" ">hung-task-threshold</tt>&nbsp;defines a threshold value, in milliseconds, to hung a possibly blocked task. A value of&nbsp;<tt class=" ">0</tt>&nbsp;will never hung a task, and is the default.            </p>
                <p>
    The optional&nbsp;<tt class=" ">long-running-tasks</tt>&nbsp;is a hint to optimize the execution of long running tasks, and defaults to&nbsp;<tt class=" ">false</tt>.            </p>
                <p>
    The optional&nbsp;<tt class=" ">keepalive-time</tt>&nbsp;defines the time, in milliseconds, that an internal thread may be idle. The attribute default value is&nbsp;<tt class=" ">60000</tt>.            </p>
                <p>
    The optional&nbsp;reject-policy defines the policy to use when a task is rejected by the executor. The attribute value may be the default&nbsp;<tt class=" ">ABORT</tt>, which means an exception should be thrown, or<tt class=" ">RETRY_ABORT</tt>, which means the executor will try to submit it once more, before throwing an exception.&nbsp;            </p>
                <p>
    Management clients, such as the WildFly CLI, may also be used to configure Managed Scheduled Executor Service instances. An example to <tt class=" ">add</tt> and <tt class=" ">remove</tt> one named <tt class=" ">other</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=ee/managed-scheduled-executor-service=other:add(jndi-name=java\:jboss\/ee\/scheduler\/other, core-threads=2)
/subsystem=ee/managed-scheduled-executor-service=other:remove</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-DefaultEEBindings"  >
        <h2>Default EE Bindings</h2>
    
            <p>
    The Java EE Specification mandates the existence of a default instance for each of the following resources:            </p>
    <ul class=" "><li class=" ">            <p>
    Context Service            </p>
    </li><li class=" ">            <p>
    Datasource            </p>
    </li><li class=" ">            <p>
    JMS Connection Factory            </p>
    </li><li class=" ">            <p>
    Managed Executor Service            </p>
    </li><li class=" ">            <p>
    Managed Scheduled Executor Service            </p>
    </li><li class=" ">            <p>
    Managed Thread Factory            </p>
    </li></ul>            <p>
    The EE subsystem looks up the default instances from JNDI, using the names in the default bindings configuration, before placing those in the standard JNDI names, such as <tt class=" ">java:comp/DefaultManagedExecutorService</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>  &lt;default-bindings
	context-service=&quot;java:jboss/ee/concurrency/context/default&quot;
	datasource=&quot;java:jboss/datasources/ExampleDS&quot;
	jms-connection-factory=&quot;java:jboss/DefaultJMSConnectionFactory&quot;
	managed-executor-service=&quot;java:jboss/ee/concurrency/executor/default&quot;
	managed-scheduled-executor-service=&quot;java:jboss/ee/concurrency/scheduler/default&quot;
	managed-thread-factory=&quot;java:jboss/ee/concurrency/factory/default&quot; /&gt;</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
        
            <p>
    The default bindings are optional, if the jndi name for a default binding is not configured then the related resource will not be available to Java EE applications.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Datasources"  >
        <h3>Data sources</h3>
    
            <p>
    Datasources are configured through the <i class=" ">datasource</i> subsystem. Declaring a new datasource consists of two separate steps: You would need to provide a JDBC driver and define a datasource that references the driver you installed.&nbsp;            </p>
        <div class="section-4"  id="66322694_Managementtasks-JDBCDriverInstallation"  >
        <h4>JDBC Driver Installation</h4>
    
            <p>
    The recommended way to install a JDBC driver into WildFly 8&nbsp;is to deploy it as a regular JAR deployment.&nbsp; The reason for this is that when you run WildFly 8&nbsp;in domain mode, deployments are automatically propagated to all servers to which the deployment applies; thus distribution of the driver JAR is one less thing for you to worry about!            </p>
                <p>
    Any JDBC 4-compliant driver will automatically be recognized and installed into the system by name and version. A JDBC JAR is identified using the Java service provider mechanism. Such JARs will contain a text a file named <tt class=" ">META-INF/services/java.sql.Driver</tt>, which contains the name of the class(es) of the Drivers which exist in that JAR. If your JDBC driver JAR is not JDBC 4-compliant, it can be made deployable in one of a few ways.            </p>
                <p>
    <strong class=" ">Modify the JAR</strong>            </p>
                <p>
    The most straightforward solution is to simply modify the JAR and add the missing file. You can do this from your command shell by:            </p>
    <ol class=" "><li class=" ">            <p>
    Change to, or create, an empty temporary directory.            </p>
    </li><li class=" ">            <p>
    Create a <tt class=" ">META-INF</tt> subdirectory.            </p>
    </li><li class=" ">            <p>
    Create a <tt class=" ">META-INF/services</tt> subdirectory.            </p>
    </li><li class=" ">            <p>
    Create a <tt class=" ">META-INF/services/java.sql.Driver</tt> file which contains one line - the fully-qualified class name of the JDBC driver.            </p>
    </li><li class=" ">            <p>
    Use the <tt class=" ">jar</tt> command-line tool to update the JAR like this:            </p>
    </li></ol>    <div class="confbox programlisting">
                <div class="content">
        <pre><code>jar \-uf jdbc-driver.jar META-INF/services/java.sql.Driver</code></pre>
        </div>
    </div>
            <p>
    For a detailed explanation how to deploy JDBC 4 compliant driver jar, please refer to the chapter &quot;<a href="https://docs.jboss.org/author/display/AS71/Application+deployment">Application Deployment</a>&quot;.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-DatasourceDefinitions"  >
        <h4>Datasource Definitions</h4>
    
            <p>
    The datasource itself is defined within the subsystem <i class=" ">datasources</i>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:datasources:1.0&quot;&gt;
    &lt;datasources&gt;
        &lt;datasource jndi-name=&quot;java:jboss/datasources/ExampleDS&quot; pool-name=&quot;ExampleDS&quot;&gt;
            &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;
            &lt;driver&gt;h2&lt;/driver&gt;
            &lt;pool&gt;
                &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;
                &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;
                &lt;prefill&gt;true&lt;/prefill&gt;
            &lt;/pool&gt;
            &lt;security&gt;
                &lt;user-name&gt;sa&lt;/user-name&gt;
                &lt;password&gt;sa&lt;/password&gt;
            &lt;/security&gt;
        &lt;/datasource&gt;
        &lt;xa-datasource&nbsp;jndi-name=&quot;java:jboss/datasources/ExampleXADS&quot;&nbsp;pool-name=&quot;ExampleXADS&quot;&gt;
          &nbsp;&lt;driver&gt;h2&lt;/driver&gt;
       &nbsp;&nbsp;&nbsp; &lt;xa-datasource-property&nbsp;name=&quot;URL&quot;&gt;jdbc:h2:mem:test&lt;/xa-datasource-property&gt;
           &lt;xa-pool&gt;
                &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;
                &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;
                &lt;prefill&gt;true&lt;/prefill&gt;
           &lt;/xa-pool&gt;
       &nbsp;&nbsp;&nbsp; &lt;security&gt;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;user-name&gt;sa&lt;/user-name&gt;
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;password&gt;sa&lt;/password&gt;
       &nbsp;&nbsp;&nbsp; &lt;/security&gt;
      &nbsp; &lt;/xa-datasource&gt;
        &lt;drivers&gt;
           &nbsp;&lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;
                &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;
            &lt;/driver&gt;
        &lt;/drivers&gt;
  &lt;/datasources&gt;

&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See</sub> <tt class=" ">standalone/configuration/standalone.xml</tt><sub class=" ">)</sub>            </p>
                <p>
    As you can see the datasource references a driver by it's logical name.            </p>
                <p>
    You can easily query the same information through the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=datasources:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;data-source&quot; =&gt; {&quot;java:/H2DS&quot; =&gt; {
            &quot;connection-url&quot; =&gt; &quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&quot;,
            &quot;jndi-name&quot; =&gt; &quot;java:/H2DS&quot;,
            &quot;driver-name&quot; =&gt; &quot;h2&quot;,
            &quot;pool-name&quot; =&gt; &quot;H2DS&quot;,
            &quot;use-java-context&quot; =&gt; true,
            &quot;enabled&quot; =&gt; true,
            &quot;jta&quot; =&gt; true,
            &quot;pool-prefill&quot; =&gt; true,
            &quot;pool-use-strict-min&quot; =&gt; false,
            &quot;user-name&quot; =&gt; &quot;sa&quot;,
            &quot;password&quot; =&gt; &quot;sa&quot;,
            &quot;flush-strategy&quot; =&gt; &quot;FailingConnectionOnly&quot;,
            &quot;background-validation&quot; =&gt; false,
            &quot;use-fast-fail&quot; =&gt; false,
            &quot;validate-on-match&quot; =&gt; false,
            &quot;use-ccm&quot; =&gt; true
        }},
        &quot;xa-data-source&quot; =&gt; undefined,
        &quot;jdbc-driver&quot; =&gt; {&quot;h2&quot; =&gt; {
            &quot;driver-name&quot; =&gt; &quot;h2&quot;,
            &quot;driver-module-name&quot; =&gt; &quot;com.h2database.h2&quot;,
            &quot;driver-xa-datasource-class-name&quot; =&gt; &quot;org.h2.jdbcx.JdbcDataSource&quot;
        }}
    }
}


[standalone@localhost:9999 /] /subsystem=datasources:installed-drivers-list
{
&nbsp;&nbsp; &nbsp;&quot;outcome&quot; =&gt; &quot;success&quot;,
&nbsp;&nbsp; &nbsp;&quot;result&quot; =&gt; [{
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-name&quot; =&gt; &quot;h2&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;deployment-name&quot; =&gt; undefined,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-module-name&quot; =&gt; &quot;com.h2database.h2&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;module-slot&quot; =&gt; &quot;main&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-xa-datasource-class-name&quot; =&gt; &quot;org.h2.jdbcx.JdbcDataSource&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-class-name&quot; =&gt; &quot;org.h2.Driver&quot;,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-major-version&quot; =&gt; 1,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;driver-minor-version&quot; =&gt; 2,
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;&quot;jdbc-compliant&quot; =&gt; true
&nbsp;&nbsp; &nbsp;}]
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
        
            <p>
    Using the web console or the CLI greatly simplifies the deployment of JDBC drivers and the creation of datasources.            </p>
        </div>
    
            <p>
    The CLI offers a set of commands to create and modify datasources:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] help
Supported commands:

 [...]

 data-source             - allows to add new, modify and remove existing data sources
 xa-data-source          - allows add new, modify and remove existing XA data sources

For a more detailed description of a specific command,
execute the command with '--help' as the argument.</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-Usingsecuritydomains"  >
        <h4>Using security domains</h4>
    
            <p>
    Information can be found at <a href="https://community.jboss.org/wiki/JBossAS7SecurityDomainModel">https://community.jboss.org/wiki/JBossAS7SecurityDomainModel</a>            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-Deploymentof%5Cds.xmlfiles"  >
        <h4>Deployment of -ds.xml files</h4>
    
            <p>
    Starting with WildFly 8, you have the ability to deploy a -ds.xml file following the schema:            </p>
                <p>
    <a href="http://www.ironjacamar.org/doc/schema/datasources_1_1.xsd">http://www.ironjacamar.org/doc/schema/datasources_1_1.xsd</a>            </p>
                <p>
    It is mandatory to use a reference to an already deployed / defined &lt;driver&gt; entry.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    This feature <strong class=" ">is&nbsp;primarily intended for development</strong>, and thus has a few limitations to be aware of. It can not be altered in any of the management interfaces (consle, CLI, etc). Only limited runtime information is available. Also, password vaults and security domains are not deployable, so these can not be bundled with a datasource deployment.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ComponentReference"  >
        <h4>Component Reference</h4>
    
            <p>
    The datasource subsystem is provided by the <a href="http://www.jboss.org/ironjacamar">IronJacamar</a> project. For a detailed description of the available configuration properties, please consult the project documentation.            </p>
        <div class="confbox panel">
    <ul class=" "><li class=" ">            <p>
    IronJacamar homepage: <a href="http://ironjacamar.org/">http://ironjacamar.org/</a>            </p>
    </li><li class=" ">            <p>
    Project Documentation:&nbsp; <a href="http://ironjacamar.org/documentation.html">http://ironjacamar.org/documentation.html</a>            </p>
    </li><li class=" ">            <p>
    Schema description: <a href="http://www.ironjacamar.org/doc/userguide/1.1/en-US/html_single/index.html#deployingds_descriptor">http://www.ironjacamar.org/doc/userguide/1.1/en-US/html_single/index.html#deployingds_descriptor</a>            </p>
    </li></ul>    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Messaging"  >
        <h3>Messaging</h3>
    
<ul class=" "><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-Connectors">Connectors</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-JMSConnectionFactories">JMS Connection Factories</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-JMSQueuesandTopics">JMS Queues and Topics</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-DeadLetter%26Redelivery">Dead Letter &amp; Redelivery</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-SecuritySettingsforHornetQaddressesandJMSdestinations">Security Settings for HornetQ addresses and JMS destinations</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-SecurityDomainforUsers">Security Domain for Users</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-ClusterAuthentication">Cluster Authentication</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-Deploymentof%5Cjms.xmlfiles">Deployment of -jms.xml files</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-JMSBridge">JMS Bridge</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-Modulesforothermessagingbrokers">Modules for other messaging brokers</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-Configuration">Configuration</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-Managementcommands">Management commands</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-ComponentReference">Component Reference</a>            </p>
    </li></ul>            <p>
    The JMS server configuration is done through the <i class=" ">messaging</i> subsystem. In this chapter we are going outline the frequently used configuration options. For a more detailed explanation please consult the HornetQ user guide (See &quot;Component Reference&quot;).&nbsp;            </p>
        <div class="section-4"  id="66322694_Managementtasks-Connectors"  >
        <h4>Connectors</h4>
    
            <p>
    There are three kind of connectors that can be used to connect to WildFly JMS Server            </p>
    <ul class=" "><li class=" ">            <p>
    <tt class=" ">invm-connector</tt> can be used by a local client (i.e. one running in the same JVM as the server)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">netty-connector</tt> can be used by a remote client (and uses Netty over TCP for the communication)            </p>
    </li><li class=" ">            <p>
    <tt class=" ">http-connector</tt> can be used by a remote client (and uses Undertow Web Server to upgrade from a HTTP connection)            </p>
    </li></ul>    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-JMSConnectionFactories"  >
        <h4>JMS Connection Factories</h4>
    
            <p>
    There are three kinds of <i class=" ">basic</i> JMS <tt class=" ">connection-factory</tt> that depends on the type of connectors that is used.            </p>
                <p>
    There is also a <tt class=" ">pooled-connection-factory</tt>&nbsp;which is special in that it is essentially a configuration facade for <i class=" ">both</i>&nbsp;the inbound and outbound connectors of the&nbsp;the&nbsp;HornetQ JCA Resource Adapter. &nbsp;An MDB can be configured to use a <tt class=" ">pooled-connection-factory</tt> (e.g. using <tt class=" ">@ResourceAdapter</tt>). &nbsp;In this context, the MDB leverages the <i class=" ">inbound connector</i>&nbsp;of the HornetQ JCA RA. &nbsp;Other kinds of clients can look up the pooled-connection-factory in JNDI (or inject it) and use it to send messages. &nbsp;In this context, such a client would leverage the <i class=" ">outbound connector</i>&nbsp;of the HornetQ JCA RA. &nbsp;A <tt class=" ">pooled-connection-factory</tt>&nbsp;is also special because:            </p>
    <ul class=" "><li class=" ">            <p>
    It is only available to local clients, although it can be configured to point to a remote server.            </p>
    </li><li class=" ">            <p>
    As the name suggests, it is pooled and therefore provides superior performance to the clients which are able to use it. &nbsp;The pool size can be configured via the <tt class=" ">max-pool-size</tt> and <tt class=" ">min-pool-size</tt> attributes.            </p>
    </li><li class=" ">            <p>
    It should only be used to&nbsp;<i class=" ">send</i>&nbsp;(i.e. produce) messages when looked up in JNDI or injected.            </p>
    </li><li class=" ">            <p>
    It can be configured to use specific security credentials via the <tt class=" ">user</tt> and <tt class=" ">password</tt> attributes. &nbsp;This is useful if the remote server to which it is pointing is secured.            </p>
    </li><li class=" ">            <p>
    Resources acquired from it will be automatically enlisted any on-going JTA transaction. &nbsp;If you want to send a message from an EJB using CMT then this is likely the connection factory you want to use so the send operation will be atomically committed along with the rest of the EJB's transaction operations.            </p>
    </li></ul>            <p>
    To be clear, the <i class=" ">inbound connector</i>&nbsp;of the HornetQ JCA RA (which is for consuming messages) is only used by MDBs and other JCA-based components. &nbsp;It is not available to traditional clients.            </p>
                <p>
    Both a&nbsp;<tt class=" ">connection-factory</tt>&nbsp;and a <tt class=" ">pooled-connection-factory</tt> reference a <tt class=" ">connector</tt> declaration. &nbsp;            </p>
                <p>
    A <tt class=" ">netty-connector</tt> is&nbsp;associated with a <tt class=" ">socket-binding</tt>&nbsp;which tells the client using the <tt class=" ">connection-factory</tt> where to connect.            </p>
    <ul class=" "><li class=" ">            <p>
    A <tt class=" ">connection-factory</tt> referencing a <tt class=" ">netty-connector</tt> is suitable to be used by a&nbsp;<i class=" ">remote</i> client to send messages to or receive messages from the server (assuming the connection-factory has an appropriately exported <tt class=" ">entry</tt>). &nbsp;            </p>
    </li><li class=" ">            <p>
    A <tt class=" ">pooled-connection-factory</tt> looked up in JNDI or injected which is&nbsp;referencing a <tt class=" ">netty-connector</tt> is suitable to be used by a <i class=" ">local</i> client to send messages to a remote server granted the <tt class=" ">socket-binding</tt>&nbsp;references an <tt class=" ">outbound-socket-binding</tt> pointing to the remote server in question.            </p>
    </li><li class=" ">            <p>
    A&nbsp;<tt class=" ">pooled-connection-factory</tt>&nbsp;used by an MDB which is&nbsp;referencing a&nbsp;<tt class=" ">netty-connector</tt>&nbsp;is suitable to consume&nbsp;messages from a remote server granted the&nbsp;<tt class=" ">socket-binding</tt>&nbsp;references an&nbsp;<tt class=" ">outbound-socket-binding</tt>&nbsp;pointing to the remote server in question.            </p>
    </li></ul>            <p>
    An <tt class=" ">in-vm-connector</tt> is associated with a <tt class=" ">server-id</tt> which tells the client using the <tt class=" ">connection-factory</tt> where to connect (since multiple HornetQ servers can run in a single JVM).            </p>
    <ul class=" "><li class=" ">            <p>
    A&nbsp;<tt class=" ">connection-factory</tt> referencing an <tt class=" ">in-vm-connector</tt> is suitable to be used by a <i class=" ">local</i> client to either send messages to or receive messages from a local server. &nbsp;            </p>
    </li><li class=" ">            <p>
    A&nbsp;<tt class=" ">pooled-connection-factory</tt>&nbsp;looked up in JNDI or injected which is referencing an <tt class=" ">in-vm-connector</tt> is suitable to be used by a <i class=" ">local</i> client only to send messages to a local server.            </p>
    </li><li class=" ">            <p>
    A&nbsp;<tt class=" ">pooled-connection-factory</tt>&nbsp;used by an MDB which is referencing an&nbsp;<tt class=" ">in-vm-connector</tt>&nbsp;is suitable only to consume messages from a local server.            </p>
    </li></ul>            <p>
    A <tt class=" ">http-connector</tt> is associated with the <tt class=" ">socket-binding</tt> that represents the HTTP socket (by default, named <tt class=" ">http</tt>).            </p>
    <ul class=" "><li class=" ">            <p>
    A <tt class=" ">connection-factory</tt> referencing a <tt class=" ">http-connector</tt> is suitable to be used by a remote client to send messages to or receive messages from the server by connecting to its HTTP port before upgrading to the messaging protocol.            </p>
    </li><li class=" ">            <p>
    A <tt class=" ">pooled-connection-factory</tt> referencing a <tt class=" ">http-connector</tt> is suitable to be used by a local client to send messages&nbsp;to a remote server &nbsp;granted the&nbsp;<tt class=" ">socket-binding</tt>&nbsp;references an&nbsp;<tt class=" ">outbound-socket-binding</tt>&nbsp;pointing to the remote server in question.            </p>
    </li><li class=" ">            <p>
    A&nbsp;<tt class=" ">pooled-connection-factory</tt>&nbsp;used by an MDB which is referencing a&nbsp;<tt class=" ">http-connector</tt>&nbsp;is suitable&nbsp;only to consume messages from&nbsp;a remote server&nbsp;granted the&nbsp;<tt class=" ">socket-binding</tt>&nbsp;references an&nbsp;<tt class=" ">outbound-socket-binding</tt>&nbsp;pointing to the remote server in question.            </p>
    </li></ul>            <p>
    The <tt class=" ">entry</tt> declaration of a <tt class=" ">connection-factory</tt> or a <tt class=" ">pooled-connection-factory</tt> specifies the JNDI name under which the factory will be exposed. &nbsp;Only JNDI names bound in the <tt class=" ">&quot;java:jboss/exported&quot;</tt> namespace are available to remote clients. &nbsp;If a <tt class=" ">connection-factory</tt> has an entry bound in the&nbsp;<tt class=" ">&quot;java:jboss/exported&quot;</tt> namespace a remote client would look-up the <tt class=" ">connection-factory</tt> using the text <i class=" ">after</i>&nbsp;<tt class=" ">&quot;java:jboss/exported&quot;</tt>. &nbsp;For example, the &quot;<tt class=" ">RemoteConnectionFactory</tt>&quot; is bound by default to&nbsp;<tt class=" ">&quot;java:jboss/exported/jms/RemoteConnectionFactory&quot;</tt> which means a remote client would look-up this <tt class=" ">connection-factory</tt> using &quot;<tt class=" ">jms/RemoteConnectionFactory</tt>&quot;. &nbsp;A <tt class=" ">pooled-connection-factory</tt> should <i class=" ">not</i> have any <tt class=" ">entry</tt> bound in the&nbsp;&quot;<tt class=" ">java:jboss/exported</tt>&quot; namespace because a <tt class=" ">pooled-connection-factory</tt> is not suitable for remote clients.            </p>
                <p>
    Since JMS 2.0, a default JMS connection factory is accessible to EE application&nbsp;under the JNDI name <tt class=" ">java:comp/DefaultJMSConnectionFactory.</tt> WildFly messaging subsystem defines a&nbsp;<tt class=" ">pooled-connection-factory</tt> that is used to provide this default connection factory. Any parameter change on this <tt class=" ">pooled-connection-factory</tt> will be take into account by any EE application looking the default JMS provider&nbsp;under the JNDI name&nbsp;<tt class=" ">java:comp/DefaultJMSConnectionFactory.</tt>            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
&nbsp; &nbsp; &nbsp; &lt;connectors&gt;
         &lt;http-connector name=&quot;http-connector&quot; socket-binding=&quot;http&quot;&gt;
            &lt;param key=&quot;http-upgrade-endpoint&quot; value=&quot;http-acceptor&quot;/&gt;
         &lt;/http-connector&gt;
         &lt;http-connector name=&quot;http-connector-throughput&quot; socket-binding=&quot;http&quot;&gt;
            &lt;param key=&quot;http-upgrade-endpoint&quot; value=&quot;http-acceptor-throughput&quot;/&gt;
            &lt;param key=&quot;batch-delay&quot; value=&quot;50&quot;/&gt;
         &lt;/http-connector&gt;
         &lt;in-vm-connector name=&quot;in-vm&quot; server-id=&quot;0&quot;/&gt;
      &lt;/connectors&gt;
      [...]
      &lt;jms-connection-factories&gt;
         &lt;connection-factory name=&quot;InVmConnectionFactory&quot;&gt;
            &lt;connectors&gt;
               &lt;connector-ref connector-name=&quot;in-vm&quot;/&gt;
            &lt;/connectors&gt;
            &lt;entries&gt;
               &lt;entry name=&quot;java:/ConnectionFactory&quot;/&gt;&nbsp;
            &lt;/entries&gt;
         &lt;/connection-factory&gt;&nbsp;
         &lt;connection-factory name=&quot;RemoteConnectionFactory&quot;&gt;
            &lt;connectors&gt;
               &lt;connector-ref connector-name=&quot;http-connector&quot;/&gt;
            &lt;/connectors&gt;
            &lt;entries&gt;
               &lt;entry name=&quot;java:jboss/exported/jms/RemoteConnectionFactory&quot;/&gt;
            &lt;/entries&gt;
         &lt;/connection-factory&gt;
         &lt;pooled-connection-factory name=&quot;hornetq-ra&quot;&gt;
            &lt;transaction mode=&quot;xa&quot;/&gt;
            &lt;connectors&gt;
               &lt;connector-ref connector-name=&quot;in-vm&quot;/&gt;
            &lt;/connectors&gt;
            &lt;entries&gt;
               &lt;entry name=&quot;java:/JmsXA&quot;/&gt;
               &lt;!-- Global JNDI entry used to provide a default JMS Connection factory to EE application --&gt;
               &lt;entry name=&quot;java:jboss/DefaultJMSConnectionFactory&quot;/&gt;
            &lt;/entries&gt;
         &lt;/pooled-connection-factory&gt;
      &lt;/jms-connection-factories&gt;
      [...]
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone-full.xml)</sub>            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-JMSQueuesandTopics"  >
        <h4>JMS Queues and Topics</h4>
    
            <p>
    JMS queues and topics are sub resources of the messaging subsystem. &nbsp;They are defined in the <tt class=" ">jms-destinations</tt> section. &nbsp;One can define either a <tt class=" ">jms-queue</tt> or <tt class=" ">jms-topic</tt>. &nbsp;Each destination <i class=" ">must</i> be given a <tt class=" ">name</tt> and contain at least one <tt class=" ">entry</tt> element.            </p>
                <p>
    Each <tt class=" ">entry</tt> refers to a JNDI name of the queue or topic. &nbsp;Keep in mind that any <tt class=" ">jms-queue</tt>&nbsp;or&nbsp;<tt class=" ">jms-topic</tt>&nbsp;which needs to be accessed by a remote client needs to have an <tt class=" ">entry</tt> in the &quot;java:jboss/exported&quot; namespace. &nbsp;As with connection factories, if a&nbsp;<tt class=" ">jms-queue</tt>&nbsp;or&nbsp;<tt class=" ">jms-topic</tt>&nbsp;has an <tt class=" ">entry</tt> bound in the&nbsp;&quot;java:jboss/exported&quot; namespace a remote client would look it up using the text&nbsp;<i class=" ">after</i>&nbsp;&quot;java:jboss/exported&quot;. &nbsp;For example, the following&nbsp;<tt class=" ">jms-queue</tt> &quot;testQueue&quot; is bound to&nbsp;&quot;java:jboss/exported/jms/queue/test&quot; which means a remote client would look-up this&nbsp;<tt class=" ">jms-queue</tt>&nbsp;using &quot;jms/queue/test&quot;. &nbsp;A local client could look it up using &quot;java:jboss/exported/jms/queue/test&quot;, &quot;java:jms/queue/test&quot;, or more simply &quot;jms/queue/test&quot;:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
      &lt;jms-destinations&gt;
         &lt;jms-queue name=&quot;testQueue&quot;&gt;
             &lt;entry name=&quot;jms/queue/test&quot;/&gt;
             &lt;entry name=&quot;java:jboss/exported/jms/queue/test&quot;/&gt;
         &lt;/jms-queue&gt;
         &lt;jms-topic name=&quot;testTopic&quot;&gt;
            &lt;entry name=&quot;jms/topic/test&quot;/&gt;
            &lt;entry name=&quot;java:jboss/exported/jms/topic/test&quot;/&gt;
         &lt;/jms-topic&gt;
      &lt;/jms-destinations&gt;
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone-full.xml)</sub>            </p>
                <p>
    JMS endpoints can easily be created through the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] jms-queue add --queue-address=myQueue --entries=queues/myQueue</code></pre>
        </div>
    </div>
    <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=messaging/hornetq-server=default/jms-queue=myQueue:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;durable&quot; =&gt; true,
        &quot;entries&quot; =&gt; [&quot;queues/myQueue&quot;],
        &quot;selector&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
            <p>
    A number of additional commands to maintain the JMS subsystem are available as well:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] jms-queue --help --commands
add
...
remove
To read the description of a specific command execute 'jms-queue command_name --help'.</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-DeadLetter%26Redelivery"  >
        <h4>Dead Letter &amp; Redelivery</h4>
    
            <p>
    Some of the settings are applied against an address wild card instead of a specific messaging destination. The dead letter queue and redelivery settings belong into this group:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
      &lt;address-settings&gt;
         &lt;address-setting match=&quot;#&quot;&gt;
            &lt;dead-letter-address&gt;jms.queue.DLQ&lt;/dead-letter-address&gt;
            &lt;expiry-address&gt;jms.queue.ExpiryQueue&lt;/expiry-address&gt;
            &lt;redelivery-delay&gt;0&lt;/redelivery-delay&gt;
            [...]
         &lt;/address-setting&gt;
      &lt;/address-settings&gt;
      [...]
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone-full.xml)</sub>            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-SecuritySettingsforHornetQaddressesandJMSdestinations"  >
        <h4>Security Settings for HornetQ addresses and JMS destinations</h4>
    
            <p>
    Security constraints are matched against an address wildcard, similar to the DLQ and redelivery settings. &nbsp;<strong class=" ">Note</strong>: Multiple roles are separated by spaces.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
      &lt;security-settings&gt;
         &lt;security-setting match=&quot;#&quot;&gt;
            &lt;permission type=&quot;send&quot; roles=&quot;guest&quot;/&gt;
            &lt;permission type=&quot;consume&quot; roles=&quot;guest&quot;/&gt;
            &lt;permission type=&quot;createNonDurableQueue&quot; roles=&quot;role1&quot;/&gt;
            &lt;permission type=&quot;deleteNonDurableQueue&quot; roles=&quot;role1 role2&quot;/&gt;
         &lt;/security-setting&gt;
      &lt;/security-settings&gt;
      [...]
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See standalone/configuration/standalone-full.xml)</sub>            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-SecurityDomainforUsers"  >
        <h4>Security Domain for Users</h4>
    
            <p>
    By default, HornetQ will use the &quot;<tt class=" ">other</tt>&quot; JAAS security domain. &nbsp;This domain is used to authenticate users making connections to HornetQ and then they are authorized to perform specific functions based on their role(s) and the <tt class=" ">security-settings</tt> described above. &nbsp;This domain can be changed by using&nbsp;<tt class=" ">security-domain</tt>, e.g.:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;hornetq-server&gt;
      [...]
      &lt;security-domain&gt;mySecurityDomain&lt;/security-domain&gt;
      [...]
   &lt;/hornetq-server&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ClusterAuthentication"  >
        <h4>Cluster Authentication</h4>
    
            <p>
        <span style="color: #333333;">
If the HornetQ server is configured to be clustered (    </span>
    <span style="color: #333333;">
<tt class=" ">&lt;clustered&gt;true&lt;/clustered&gt;</tt>    </span>
    <span style="color: #333333;">
), it will use the    </span>
     <span style="color: #333333;">
<tt class=" ">&lt;cluster-user&gt;</tt>    </span>
     <span style="color: #333333;">
and    </span>
     <span style="color: #333333;">
<tt class=" ">&lt;cluster-password&gt;</tt>    </span>
     <span style="color: #333333;">
attributes to connect to other HornetQ nodes in the cluster.    </span>
            </p>
                <p>
    If you do not change the default value of &lt;cluster-password&gt;, HornetQ will fail to authenticate with the error:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>HQ224018: Failed to create session: HornetQExceptionerrorType=CLUSTER_SECURITY_EXCEPTION message=HQ119099: Unable to authenticate cluster user: HORNETQ.CLUSTER.ADMIN.USER</code></pre>
        </div>
    </div>
            <p>
    To prevent this error, you must specify a value for&nbsp;<tt class=" ">&lt;cluster-password&gt;</tt>.&nbsp;It is possible to encrypt this value&nbsp;by following <a href="https://access.redhat.com/site/documentation/en-US/JBoss_Enterprise_Application_Platform/6.1/html/Security_Guide/sect-Password_Vaults_for_Sensitive_Strings.html">this guide</a>.            </p>
                <p>
    Alternatively,&nbsp;you&nbsp;can use the system property&nbsp;jboss.messaging.cluster.password to specify the cluster password from the command line.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-Deploymentof%5Cjms.xmlfiles"  >
        <h4>Deployment of -jms.xml files</h4>
    
            <p>
    Starting with WildFly 8,&nbsp;you have the ability to deploy a -jms.xml file defining JMS destinations, e.g.:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;messaging-deployment xmlns=&quot;urn:jboss:messaging-deployment:1.0&quot;&gt;
   &lt;hornetq-server&gt;
      &lt;jms-destinations&gt;
         &lt;jms-queue name=&quot;sample&quot;&gt;
            &lt;entry name=&quot;jms/queue/sample&quot;/&gt;
            &lt;entry name=&quot;java:jboss/exported/jms/queue/sample&quot;/&gt;
         &lt;/jms-queue&gt;
      &lt;/jms-destinations&gt;
   &lt;/hornetq-server&gt;
&lt;/messaging-deployment&gt;</code></pre>
        </div>
    </div>
    <div class="tablewrap">
        <table>
<thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
        <img src="images/author/images/icons/emoticons/1124446108.gif" alt="images/author/images/icons/emoticons/1124446108.gif" />
                </td>
                <td rowspan="1" colspan="1">
    This feature&nbsp;<strong class=" ">is&nbsp;primarily intended for development</strong>&nbsp;as destinations deployed this way can not be managed with any of the provided management tools (e.g. console, CLI, etc).            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-JMSBridge"  >
        <h4>JMS Bridge</h4>
    
            <p>
    The function of a JMS bridge is to consume messages from a source JMS destination, and send them to a target JMS destination. Typically either the source or the target destinations are on different servers.<br/>The bridge can also be used to bridge messages from other non HornetQ JMS servers, as long as they are JMS 1.1 compliant.            </p>
                <p>
    The JMS Bridge is provided by the HornetQ project. Fo a detailed description of the available configuration properties, please consult the project documentation.            </p>
        <div class="section-5"  id="66322694_Managementtasks-Modulesforothermessagingbrokers"  >
        <h5>Modules for other messaging brokers</h5>
    
            <p>
    Source and target JMS resources (destination and connection factories) are looked up using JNDI.<br/>If either the source or the target resources are managed by another messaging server than WildFly, the required client classes must be bundled in a module. The name of the module must then be declared when the JMS Bridge is configured.            </p>
                <p>
    The use of a JMS bridges with any messaging provider will require to create a module containing the jar of this provider.            </p>
                <p>
    Let's suppose we want to use an hypothetical messaging provider named AcmeMQ. We want to bridge messages coming from a source AcmeMQ destination to a target destination on the local WildFly messaging server.&nbsp;To lookup AcmeMQ resources from JNDI, 2 jars are required, acmemq-1.2.3.jar, mylogapi-0.0.1.jar (please note these jars do not exist, this is just for the example purpose). We must <i class=" ">not</i> include a JMS jar since it will be provided by a WildFly module directly.            </p>
                <p>
    To use these resources in a JMS bridge, we must bundle them in a WildFly&nbsp;module:            </p>
                <p>
    in JBOSS_HOME/modules, we create the layout:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>modules/
`-- org
    `-- acmemq
        `-- main
            |-- acmemq-1.2.3.jar
            |-- mylogapi-0.0.1.jar
            `-- module.xml</code></pre>
        </div>
    </div>
            <p>
    We define the module in <tt class=" ">module.xml</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.acmemq&quot;&gt;
    &lt;properties&gt;
        &lt;property name=&quot;jboss.api&quot; value=&quot;private&quot;/&gt;
    &lt;/properties&gt;


    &lt;resources&gt;
        &lt;!-- insert resources required to connect to the source or target   --&gt;
        &lt;!-- messaging brokers if it not another WildFly instance           --&gt;
        &lt;resource-root path=&quot;acmemq-1.2.3.jar&quot; /&gt;
        &lt;resource-root path=&quot;mylogapi-0.0.1.jar&quot; /&gt;
    &lt;/resources&gt;


    &lt;dependencies&gt;
       &lt;!-- add the dependencies required by JMS Bridge code                --&gt;
       &lt;module name=&quot;javax.api&quot; /&gt;
       &lt;module name=&quot;javax.jms.api&quot; /&gt;
       &lt;module name=&quot;javax.transaction.api&quot;/&gt;
       &lt;module name=&quot;org.jboss.remote-naming&quot;/&gt;
       &lt;!-- we depend on org.hornetq module since we will send messages to  --&gt;
       &lt;!-- the HornetQ server embedded in the local WildFly instance       --&gt;
       &lt;module name=&quot;org.hornetq&quot; /&gt;
    &lt;/dependencies&gt;
&lt;/module&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-Configuration"  >
        <h5>Configuration</h5>
    
            <p>
    A JMS bridge is defined inside a <tt class=" ">jms-bridge</tt> section of the `messaging` subsystem in the XML configuration files.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:messaging:2.0&quot;&gt;
   &lt;jms-bridge name=&quot;myBridge&quot; module=&quot;org.acmemq&quot;&gt;
      &lt;source&gt;
         &lt;connection-factory name=&quot;ConnectionFactory&quot;/&gt;
         &lt;destination name=&quot;sourceQ&quot;/&gt;
         &lt;user&gt;user1&lt;/user&gt;
         &lt;password&gt;pwd1&lt;/password&gt;
         &lt;context&gt;
            &lt;property key=&quot;java.naming.factory.initial&quot; value=&quot;org.acmemq.jndi.AcmeMQInitialContextFactory&quot;/&gt;
            &lt;property key=&quot;java.naming.provider.url&quot;    value=&quot;tcp://127.0.0.1:9292&quot;/&gt;
         &lt;/context&gt;
      &lt;/source&gt;
      &lt;target&gt;
         &lt;connection-factory name=&quot;/jms/invmTargetCF&quot;/&gt;
         &lt;destination name=&quot;/jms/targetQ&quot;/&gt;
      &lt;/target&gt;
      &lt;quality-of-service&gt;AT_MOST_ONCE&lt;/quality-of-service&gt;
      &lt;failure-retry-interval&gt;500&lt;/failure-retry-interval&gt;
      &lt;max-retries&gt;1&lt;/max-retries&gt;
      &lt;max-batch-size&gt;500&lt;/max-batch-size&gt;
      &lt;max-batch-time&gt;500&lt;/max-batch-time&gt;
      &lt;add-messageID-in-header&gt;true&lt;/add-messageID-in-header&gt;
   &lt;/jms-bridge&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    The <tt class=" ">source</tt> and <tt class=" ">target</tt> sections contain the name of the JMS resource (<tt class=" ">connection-factory</tt> and <tt class=" ">destination</tt>) that will be looked up in JNDI.<br/>It optionally defines the <tt class=" ">user</tt> and <tt class=" ">password</tt> credentials. If they are set, they will be passed as arguments when creating the JMS connection from the looked up ConnectionFactory.<br/>It is also possible to define JNDI context properties in the <tt class=" ">context</tt> section. If the <tt class=" ">context</tt> section is absent, the JMS resources will be looked up in the local WildFly instance (as it is the case in the <tt class=" ">target</tt> section in the example above).            </p>
        </div>
    
    <div class="section-5"  id="66322694_Managementtasks-Managementcommands"  >
        <h5>Management commands</h5>
    
            <p>
    A JMS Bridge can also be managed using the WildFly&nbsp;command line interface:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=messaging/jms-bridge=myBridge/:add(module=&quot;org.acmemq&quot;,      \
      source-destination=&quot;sourceQ&quot;,                                                                   \
      source-connection-factory=&quot;ConnectionFactory&quot;,                                                  \
      source-user=&quot;user1&quot;,                                                                            \
      source-password=&quot;pwd1&quot;,                                                                         \
      source-context={&quot;java.naming.factory.initial&quot; =&gt; &quot;org.acmemq.jndi.AcmeMQInitialContextFactory&quot;, \
                      &quot;java.naming.provider.url&quot; =&gt; &quot;tcp://127.0.0.1:9292&quot;},                          \
      target-destination=&quot;/jms/targetQ&quot;,                                                              \
      target-connection-factory=&quot;/jms/invmTargetCF&quot;,                                                  \
      quality-of-service=AT_MOST_ONCE,                                                                \
      failure-retry-interval=500,                                                                     \
      max-retries=1,                                                                                  \
      max-batch-size=500,                                                                             \
      max-batch-time=500,                                                                             \
      add-messageID-in-header=true)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    You can also see the complete JMS Bridge resource description from the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=messaging/jms-bridge=*/:read-resource-description
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [{
        &quot;address&quot; =&gt; [
            (&quot;subsystem&quot; =&gt; &quot;messaging&quot;),
            (&quot;jms-bridge&quot; =&gt; &quot;*&quot;)
        ],
        &quot;outcome&quot; =&gt; &quot;success&quot;,
        &quot;result&quot; =&gt; {
            &quot;description&quot; =&gt; &quot;A JMS bridge instance.&quot;,
            &quot;attributes&quot; =&gt; {
                ...
        }
    }]
}</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ComponentReference2"  >
        <h4>Component Reference</h4>
    
            <p>
    The messaging subsystem is provided by the HornetQ project. For a detailed description of the available configuration properties, please consult the project documentation.            </p>
        <div class="confbox panel">
    <ul class=" "><li class=" ">            <p>
    HornetQ homepage:&nbsp;<a href="http://www.jboss.org/hornetq">http://www.jboss.org/hornetq</a>            </p>
    </li><li class=" ">            <p>
    Project Documentation: &nbsp;<a href="http://www.jboss.org/hornetq/docs">http://www.jboss.org/hornetq/docs</a>            </p>
    </li></ul>    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Web"  >
        <h3>Web</h3>
    
<div class=" error">            <p>
    Couldn't find a page to include called: <a href="https://docs.jboss.org/author/pages/createpage.action?spaceKey=WFLY8&amp;title=Web+subsystem+configuration&amp;linkCreation=true&amp;fromPageId=66322700">Web subsystem configuration</a>            </p>
    </div>    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Webservices"  >
        <h3>Web services</h3>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Domainmanagement"  >
        <h2>Domain management</h2>
    
            <p>
    JBossWS components are provided to the application server through the webservices subsystem.&nbsp; JBossWS components handle the processing of WS endpoints.&nbsp; The subsystem supports the configuration of published endpoint addresses, and endpoint handler chains.&nbsp; A default webservice subsystem is provided in the server's domain and standalone configuration files.            </p>
        <div class="section-3"  id="66322694_Managementtasks-Structureofthewebservicessubsystem"  >
        <h3>Structure of the webservices subsystem</h3>
    
    <div class="section-4"  id="66322694_Managementtasks-Publishedendpointaddress"  >
        <h4>Published endpoint address</h4>
    
            <p>
    JBossWS supports the rewriting of the <tt class=" ">&lt;soap:address&gt;</tt>&nbsp;element of endpoints published in WSDL contracts.&nbsp; This feature is useful for controlling the server address that is advertised to clients for each endpoint.            </p>
                <p>
    The following elements are available and can be modified (all are optional and require server restart upon modification):            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Type            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    modify-wsdl-address            </td>
                <td rowspan="1" colspan="1">
    boolean            </td>
                <td rowspan="1" colspan="1">
    This boolean enables and disables the address rewrite functionality.<br/><br/>When modify-wsdl-address is set to true and the content of &lt;soap:address&gt; is a valid URL, JBossWS will rewrite the URL using the values of wsdl-host and wsdl-port or wsdl-secure-port.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>When modify-wsdl-address is set to false and the content of &lt;soap:address&gt; is a valid URL, JBossWS will not rewrite the URL.&nbsp; The &lt;soap:address&gt; URL will be used.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br/>When the content of &lt;soap:address&gt; is not a valid URL, JBossWS will rewrite it no matter what the setting of modify-wsdl-address.<br/><br/>If modify-wsdl-address is set to true and wsdl-host is not defined or explicitly set to <i class=" ">'</i><tt class=" ">jbossws.undefined.host</tt><i class=" ">'&nbsp;</i> the content of &lt;soap:address&gt; URL is use.&nbsp; JBossWS uses the requester's host when rewriting the &lt;soap:address&gt;<br/><br/>When modify-wsdl-address is not defined JBossWS uses a default value of true.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    wsdl-host            </td>
                <td rowspan="1" colspan="1">
    string            </td>
                <td rowspan="1" colspan="1">
    The hostname / IP address to be used for rewriting <tt class=" ">&lt;soap:address&gt;</tt>.<br/>If&nbsp;<tt class=" ">wsdl-host</tt>&nbsp;is set to&nbsp;<tt class=" ">jbossws.undefined.host</tt>, JBossWS uses the requester's host when rewriting the&nbsp;<tt class=" ">&lt;soap:address&gt;</tt><br/>When wsdl-host is not defined JBossWS uses a default value of '<tt class=" ">jbossws.undefined.host</tt>'.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    wsdl-port            </td>
                <td rowspan="1" colspan="1">
    int            </td>
                <td rowspan="1" colspan="1">
    Set this property to explicitly define the HTTP port that will be used for rewriting the SOAP address.<br/>Otherwise the HTTP port will be identified by querying the list of installed HTTP connectors.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    wsdl-secure-port            </td>
                <td rowspan="1" colspan="1">
    int            </td>
                <td rowspan="1" colspan="1">
    Set this property to explicitly define the HTTPS port that will be used for rewriting the SOAP address.<br/>Otherwise the HTTPS port will be identified by querying the list of installed HTTPS connectors.            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-Predefinedendpointconfigurations"  >
        <h4>Predefined endpoint configurations</h4>
    
            <p>
    JBossWS enables extra setup configuration data to be predefined and associated with an endpoint implementation.&nbsp; Predefined endpoint configurations can be used for JAX-WS client and JAX-WS endpoint setup.&nbsp; Endpoint configurations can include JAX-WS handlers and key/value properties declarations.&nbsp; This feature provides a convenient way to add handlers to WS endpoints and to set key/value properties that control JBossWS and Apache CXF internals (<a href="https://docs.jboss.org/author/display/JBWS/Apache+CXF+integration#ApacheCXFintegration-Deploymentdescriptorproperties">see Apache CXF configuration</a>).            </p>
                <p>
    The webservices subsystem provides <a href="http://www.jboss.org/schema/jbossas/jboss-as-webservices_1_2.xsd">schema</a> to support the definition of named sets of endpoint configuration data.&nbsp; Annotation, <i class=" ">org.jboss.ws.api.annotation.EndpointConfig</i> is provided to map the named configuration to the endpoint implementation.            </p>
                <p>
    There is no limit to the number of endpoint configurations that can be defined within the webservices subsystem.&nbsp; Each endpoint configuration must have a name that is unique within the webservices subsystem.&nbsp; Endpoint configurations defined in the webservices subsystem are available for reference by name through the annotation to any endpoint in a deployed application.            </p>
                <p>
    WildFly ships with two predefined endpoint configurations.&nbsp; Standard-Endpoint-Config is the default configuration.&nbsp; Recording-Endpoint-Config is an example of custom endpoint configuration and includes a recording handler.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;endpoint&quot; =&gt; {},
        &quot;modify-wsdl-address&quot; =&gt; true,
        &quot;wsdl-host&quot; =&gt; expression &quot;${jboss.bind.address:127.0.0.1}&quot;,
        &quot;endpoint-config&quot; =&gt; {
            &quot;Standard-Endpoint-Config&quot; =&gt; undefined,
            &quot;Recording-Endpoint-Config&quot; =&gt; undefined
        }
    }
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-info">
        
            <p>
    The <tt class=" ">Standard-Endpoint-Config</tt> is a special endpoint configuration.&nbsp; It is used for any endpoint that does not have an explicitly assigned endpoint configuration.            </p>
        </div>
    
    <div class="section-5"  id="66322694_Managementtasks-Endpointconfigs"  >
        <h5>Endpoint configs</h5>
    
            <p>
    Endpoint configs are defined using <tt class=" ">the endpoint-config</tt> element.&nbsp; Each endpoint configuration may include properties and handlers set to the endpoints associated to the configuration.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=Recording-Endpoint-Config:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;post-handler-chain&quot; =&gt; undefined,
        &quot;property&quot; =&gt; undefined,
        &quot;pre-handler-chain&quot; =&gt; {&quot;recording-handlers&quot; =&gt; undefined}
    }
}</code></pre>
        </div>
    </div>
            <p>
    A new endpoint configuration can be added as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=My-Endpoint-Config:add
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;response-headers&quot; =&gt; {
        &quot;operation-requires-restart&quot; =&gt; true,
        &quot;process-state&quot; =&gt; &quot;restart-required&quot;
    }
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-Handlerchains"  >
        <h5>Handler chains</h5>
    
            <p>
    Each endpoint configuration may be associated with zero or more PRE and POST handler chains.&nbsp; Each handler chain may include JAXWS handlers.&nbsp; For outbound messages the PRE handler chains are executed before any handler that is attached to the endpoint using the standard means, such as with annotation @HandlerChain, and POST handler chains are executed after those objects have executed.&nbsp; For inbound messages the POST handler chains are executed before any handler that is attached to the endpoint using the standard means and the PRE handler chains are executed after those objects have executed.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>* Server inbound messages
Client --&gt; ... --&gt; POST HANDLER --&gt; ENDPOINT HANDLERS --&gt; PRE HANDLERS --&gt; Endpoint

* Server outbound messages
Endpoint --&gt; PRE HANDLER --&gt; ENDPOINT HANDLERS --&gt; POST HANDLERS --&gt; ... --&gt; Client</code></pre>
        </div>
    </div>
            <p>
    The protocol-binding attribute must be used to set the protocols for which the chain will be triggered.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=Recording-Endpoint-Config/pre-handler-chain=recording-handlers:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;protocol-bindings&quot; =&gt; &quot;##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM&quot;,
        &quot;handler&quot; =&gt; {&quot;RecordingHandler&quot; =&gt; undefined}
    },
    &quot;response-headers&quot; =&gt; {&quot;process-state&quot; =&gt; &quot;restart-required&quot;}
}</code></pre>
        </div>
    </div>
            <p>
    A new handler chain can be added as follows:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=My-Endpoint-Config/post-handler-chain=my-handlers:add(protocol-bindings=&quot;##SOAP11_HTTP&quot;)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;response-headers&quot; =&gt; {
        &quot;operation-requires-restart&quot; =&gt; true,
        &quot;process-state&quot; =&gt; &quot;restart-required&quot;
    }
}
[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=My-Endpoint-Config/post-handler-chain=my-handlers:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;handler&quot; =&gt; undefined,
        &quot;protocol-bindings&quot; =&gt; &quot;##SOAP11_HTTP&quot;
    },
    &quot;response-headers&quot; =&gt; {&quot;process-state&quot; =&gt; &quot;restart-required&quot;}
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-5"  id="66322694_Managementtasks-Handlers2"  >
        <h5>Handlers</h5>
    
            <p>
    JAXWS handler can be added in handler chains:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=Recording-Endpoint-Config/pre-handler-chain=recording-handlers/handler=RecordingHandler:read-resource
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {&quot;class&quot; =&gt; &quot;org.jboss.ws.common.invocation.RecordingServerHandler&quot;},
    &quot;response-headers&quot; =&gt; {&quot;process-state&quot; =&gt; &quot;restart-required&quot;}
}
[standalone@localhost:9999 /] /subsystem=webservices/endpoint-config=My-Endpoint-Config/post-handler-chain=my-handlers/handler=foo-handler:add(class=&quot;org.jboss.ws.common.invocation.RecordingServerHandler&quot;)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;response-headers&quot; =&gt; {
        &quot;operation-requires-restart&quot; =&gt; true,
        &quot;process-state&quot; =&gt; &quot;restart-required&quot;
    }
}</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-note">
            <div class="title">Endpoint-config handler classloading</div>
        
            <p>
    The <tt class=" ">class</tt> attribute is used to provide the fully qualified class name of the handler.&nbsp; At deploy time, an instance of the class is created for each referencing deployment.&nbsp; For class creation to succeed, either the deployment classloader or the classloader for module, <tt class=" ">org.jboss.as.webservices.server.integration,</tt> must to be able to load the handler class.            </p>
        </div>
    
    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Runtimeinformation"  >
        <h2>Runtime information</h2>
    
            <p>
    Each web service endpoint is exposed through the deployment that provides the endpoint implementation. Each endpoint can be queried as a deployment resource. For further information please consult the chapter &quot;Application Deployment&quot;. Each web service endpoint specifies a web context and a WSDL Url:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /deployment=&quot;*&quot;/subsystem=webservices/endpoint=&quot;*&quot;:read-resource
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [{
       &quot;address&quot; =&gt; [
           (&quot;deployment&quot; =&gt; &quot;jaxws-samples-handlerchain.war&quot;),
           (&quot;subsystem&quot; =&gt; &quot;webservices&quot;),
           (&quot;endpoint&quot; =&gt; &quot;jaxws-samples-handlerchain:TestService&quot;)
       ],
       &quot;outcome&quot; =&gt; &quot;success&quot;,
       &quot;result&quot; =&gt; {
           &quot;class&quot; =&gt; &quot;org.jboss.test.ws.jaxws.samples.handlerchain.EndpointImpl&quot;,
           &quot;context&quot; =&gt; &quot;jaxws-samples-handlerchain&quot;,
           &quot;name&quot; =&gt; &quot;TestService&quot;,
           &quot;type&quot; =&gt; &quot;JAXWS_JSE&quot;,
           &quot;wsdl-url&quot; =&gt; &quot;http://localhost:8080/jaxws-samples-handlerchain?wsdl&quot;
       }
   }]
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-ComponentReference3"  >
        <h2>Component Reference</h2>
    
            <p>
        <span style="color: #333333;">
The web service subsystem is provided by the JBossWS project. For a detailed description of the available configuration properties, please consult the project documentation.    </span>
            </p>
        <div class="confbox panel">
    <ul class=" "><li class=" ">            <p>
    JBossWS homepage:&nbsp;<a href="http://www.jboss.org/jbossws">http://www.jboss.org/jbossws</a>            </p>
    </li><li class=" ">            <p>
    Project Documentation: &nbsp;<a href="https://docs.jboss.org/author/display/JBWS">https://docs.jboss.org/author/display/JBWS</a>            </p>
    </li></ul>    </div>
    <div class="section-3"  id="66322694_Managementtasks-Logging"  >
        <h3>Logging</h3>
    
<ul class=" "><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-Overview">Overview</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-Attributes">Attributes</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-%7B%7Baddloggingapidependencies%7D%7D"> <tt class=" ">add-logging-api-dependencies</tt></a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-%7B%7Busedeploymentloggingconfig%7D%7D"> <tt class=" ">use-deployment-logging-config</tt></a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-PerdeploymentLogging">Per-deployment Logging</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-LoggingProfiles">Logging Profiles</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-DefaultLogFileLocations">Default Log File Locations</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-ManagedDomain">Managed Domain</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-StandaloneServer">Standalone Server</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-FilterExpressions">Filter Expressions</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-ListLogFilesandReadingLogFiles">List Log Files and Reading Log Files</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-ListLogFiles">List Log Files</a>            </p>
    </li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-ReadLogFile">Read Log File</a>            </p>
    </li></ul></li><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-FAQ">FAQ</a>            </p>
    <ul class=" "><li class=" ">            <p>
    <a href="66322694.html#66322694_Managementtasks-Whyistherea%7B%7Blogging.properties%7D%7Dfile%3F">Why is there a <tt class=" ">logging.properties</tt> file?</a>            </p>
    </li></ul></li></ul>            <p>
                </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Overview2"  >
        <h3>Overview</h3>
    
            <p>
    The overall server logging configuration is represented by the logging subsystem. It consists of four notable parts: <tt class=" ">handler</tt> configurations, <tt class=" ">logger</tt>, the <tt class=" ">root logger</tt> declarations (aka log categories) and logging profiles. Each logger does reference a handler (or set of handlers). Each handler declares the log format and output:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:logging:1.0&quot;&gt;
   &lt;console-handler name=&quot;CONSOLE&quot; autoflush=&quot;true&quot;&gt;
       &lt;level name=&quot;DEBUG&quot;/&gt;
       &lt;formatter&gt;
           &lt;pattern-formatter pattern=&quot;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n&quot;/&gt;
       &lt;/formatter&gt;
   &lt;/console-handler&gt;
   &lt;periodic-rotating-file-handler name=&quot;FILE&quot; autoflush=&quot;true&quot;&gt;
       &lt;formatter&gt;
           &lt;pattern-formatter pattern=&quot;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n&quot;/&gt;
       &lt;/formatter&gt;
       &lt;file relative-to=&quot;jboss.server.log.dir&quot; path=&quot;server.log&quot;/&gt;
       &lt;suffix value=&quot;.yyyy-MM-dd&quot;/&gt;
   &lt;/periodic-rotating-file-handler&gt;
   &lt;logger category=&quot;com.arjuna&quot;&gt;
       &lt;level name=&quot;WARN&quot;/&gt;
   &lt;/logger&gt;
   [...]
   &lt;root-logger&gt;
       &lt;level name=&quot;DEBUG&quot;/&gt;
       &lt;handlers&gt;
           &lt;handler name=&quot;CONSOLE&quot;/&gt;
           &lt;handler name=&quot;FILE&quot;/&gt;
       &lt;/handlers&gt;
   &lt;/root-logger&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
                </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Attributes"  >
        <h3>Attributes</h3>
    
            <p>
    The root resource contains two notable attributes <tt class=" ">add-logging-api-dependencies</tt> and <tt class=" ">use-deployment-logging-config</tt>.            </p>
        <div class="section-4"  id="66322694_Managementtasks-%7B%7Baddloggingapidependencies%7D%7D"  >
        <h4>logging-api-dependencies</h4>
    
            <p>
    The <tt class=" ">add-logging-api-dependencies</tt> controls whether or not the container adds <a href="https://docs.jboss.org/author/display/WFLY8/Implicit+module+dependencies+for+deployments#Implicitmoduledependenciesfordeployments-ImplicitmoduledependenciesfordeploymentsWhicha...">implicit</a> logging API dependencies to your deployments. If set to <tt class=" ">true</tt>, the default, all the implicit logging API dependencies are added. If set to <tt class=" ">false</tt> the dependencies are not added to your deployments.            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-%7B%7Busedeploymentloggingconfig%7D%7D"  >
        <h4>deployment-logging-config</h4>
    
            <p>
    The <tt class=" ">use-deployment-logging-config</tt> controls whether or not your deployment is scanned for <a href="66322694.html#66322694_Managementtasks-PerdeploymentLogging">per-deployment logging</a>. If set to <tt class=" ">true</tt>, the default, <a href="66322694.html#66322694_Managementtasks-PerdeploymentLogging">per-deployment logging</a> is enabled. Set to <tt class=" ">false</tt> to disable this feature.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-PerdeploymentLogging"  >
        <h3>deployment Logging</h3>
    
            <p>
    Per-deployment logging allows you to add a logging configuration file to your deployment and have the logging for that deployment configured according to the configuration file. In an EAR the configuration should be in the <tt class=" ">META-INF</tt> directory. In a WAR or JAR deployment the configuration file can be in either the <tt class=" ">META-INF</tt> or <tt class=" ">WEB-INF</tt> directories.            </p>
                <p>
    The following configuration files are allowed:            </p>
    <ul class=" "><li class=" ">            <p>
    logging.properties            </p>
    </li><li class=" ">            <p>
    jboss-logging.properties            </p>
    </li><li class=" ">            <p>
    log4j.properties            </p>
    </li><li class=" ">            <p>
    log4j.xml            </p>
    </li><li class=" ">            <p>
    jboss-log4j.xml            </p>
    </li></ul>            <p>
    You can also disable this functionality by changing the <tt class=" ">use-deployment-logging-config</tt> attribute to <tt class=" ">false</tt>.            </p>
                <p>
                </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-LoggingProfiles"  >
        <h3>Logging Profiles</h3>
    
            <p>
    Logging profiles are like additional logging subsystems. Each logging profile constists of three of the four notable parts listed above: <tt class=" ">handler</tt> configurations, <tt class=" ">logger</tt> and the <tt class=" ">root logger</tt> declarations.            </p>
                <p>
    You can assign a logging profile to a deployment via the deployments manifest. Add a <tt class=" ">Logging-Profile</tt> entry to the <tt class=" ">MANIFEST.MF</tt> file with a value of the logging profile id. For example a logging profile defined on <tt class=" ">/subsystem=logging/logging-profile=ejbs</tt> the MANIFEST.MF would look like:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>Manifest-Version: 1.0
Logging-Profile: ejbs</code></pre>
        </div>
    </div>
            <p>
    A logging profile can be assigned to any number of deployments. Using a logging profile also allows for runtime changes to the configuration. This is an advantage over the per-deployment logging configuration as the redeploy is not required for logging changes to take affect.            </p>
                <p>
                </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-DefaultLogFileLocations"  >
        <h3>Default Log File Locations</h3>
    
    <div class="section-4"  id="66322694_Managementtasks-ManagedDomain4"  >
        <h4>Managed Domain</h4>
    
            <p>
    In a managed domain two types of log files do exist: Controller and server logs. The controller components govern the domain as whole. It's their responsibility to start/stop server instances and execute managed operations throughout the domain. Server logs contain the logging information for a particular server instance. They are co-located with the host the server is running on.            </p>
                <p>
    For the sake of simplicity we look at the default setup for managed domain. In this case, both the domain controller components and the servers are located on the same host:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Process            </td>
                <td rowspan="1" colspan="1">
    Log File            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Host Controller            </td>
                <td rowspan="1" colspan="1">
    ./domain/log/host-controller.log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    Process Controller            </td>
                <td rowspan="1" colspan="1">
    ./domain/log/process-controller.log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    &quot;Server One&quot;            </td>
                <td rowspan="1" colspan="1">
    ./domain/servers/server-one/log/server.log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    &quot;Server Two&quot;            </td>
                <td rowspan="1" colspan="1">
    ./domain/servers/server-two/log/server.log            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    &quot;Server Three&quot;            </td>
                <td rowspan="1" colspan="1">
    ./domain/servers/server-three/log/server.log            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-StandaloneServer2"  >
        <h4>Standalone Server</h4>
    
            <p>
    The default log files for a standalone server can be found in the log subdirectory of the distribution:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Process            </td>
                <td rowspan="1" colspan="1">
    Log File            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Server            </td>
                <td rowspan="1" colspan="1">
    ./standalone/log/server.log            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
                </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-FilterExpressions"  >
        <h3>Filter Expressions</h3>
    
    <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Filter Type            </td>
                <td rowspan="1" colspan="1">
    Expression            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
                <td rowspan="1" colspan="1">
    Parameter(s)            </td>
                <td rowspan="1" colspan="1">
    Examples            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    accept            </td>
                <td rowspan="1" colspan="1">
    accept            </td>
                <td rowspan="1" colspan="1">
    Accepts all log messages.            </td>
                <td rowspan="1" colspan="1">
    None            </td>
                <td rowspan="1" colspan="1">
    accept            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    deny            </td>
                <td rowspan="1" colspan="1">
    deny            </td>
                <td rowspan="1" colspan="1">
    enies all log messages.            </td>
                <td rowspan="1" colspan="1">
    None            </td>
                <td rowspan="1" colspan="1">
    deny            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    not            </td>
                <td rowspan="1" colspan="1">
    not(filterExpression)            </td>
                <td rowspan="1" colspan="1">
    Accepts a filter as an argument and inverts the returned value.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a single filter for it's argument.            </td>
                <td rowspan="1" colspan="1">
    not(match(&quot;JBAS&quot;))            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    all            </td>
                <td rowspan="1" colspan="1">
    all(filterExpressions)            </td>
                <td rowspan="1" colspan="1">
    A filter consisting of several filters in a chain. If any filter find the log message to be unloggable, the message will not be logged and subsequent filters will not be checked.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a comma delimited list of filters for it's argument.            </td>
                <td rowspan="1" colspan="1">
    all(match(&quot;JBAS&quot;), match(&quot;WELD&quot;))            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    any            </td>
                <td rowspan="1" colspan="1">
    any(filterExpressions)            </td>
                <td rowspan="1" colspan="1">
    A filter consisting of several filters in a chain. If any filter fins the log message to be loggable, the message will be logged and the subsequent filters will not be checked.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a comma delimited list of filters for it's argument.            </td>
                <td rowspan="1" colspan="1">
    any(match(&quot;JBAS&quot;), match(&quot;WELD&quot;))            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    levelChange            </td>
                <td rowspan="1" colspan="1">
    levelChange(level)            </td>
                <td rowspan="1" colspan="1">
    A filter which modifies the log record with a new level.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a single string based level for it's argument.            </td>
                <td rowspan="1" colspan="1">
    levelChange(&quot;WARN&quot;)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    levels            </td>
                <td rowspan="1" colspan="1">
    levels(levels)            </td>
                <td rowspan="1" colspan="1">
    A filter which includes log messages with a level that is listed in the list of levels.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a comma delimited list of string based levels for it's argument.            </td>
                <td rowspan="1" colspan="1">
    levels(&quot;DEBUG&quot;, &quot;INFO&quot;, &quot;WARN&quot;, &quot;ERROR&quot;)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    levelRange            </td>
                <td rowspan="1" colspan="1">
    levelRange([minLevel,maxLevel])            </td>
                <td rowspan="1" colspan="1">
    A filter which logs records that are within the level range.            </td>
                <td rowspan="1" colspan="1">
    The filter expression uses a &quot;[&quot; to indicate a minimum inclusive level and a &quot;]&quot; to indicate a maximum inclusive level. Otherwise use &quot;(&quot; or &quot;)&quot; respectively indicate exclusive. The first argument for the expression is the minimum level allowed, the second argument is the maximum level allowed.            </td>
                <td rowspan="1" colspan="1">
    <ul class="alternate "><li class=" ">            <p>
    minimum level must be less than ERROR and the maximum level must be greater than DEBUG<br/><br/>levelRange(&quot;ERROR&quot;, &quot;DEBUG&quot;)            </p>
    </li><li class=" ">            <p>
    minimum level must be less than or equal to ERROR and the maximum level must be greater than DEBUG<br/><br/>levelRange[&quot;ERROR&quot;, &quot;DEBUG&quot;)            </p>
    </li><li class=" ">            <p>
    minimum level must be less than or equal to ERROR and the maximum level must be greater or equal to INFO<br/><br/>levelRange[&quot;ERROR&quot;, &quot;INFO&quot;]            </p>
    </li></ul>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    match            </td>
                <td rowspan="1" colspan="1">
    match(&quot;pattern&quot;)            </td>
                <td rowspan="1" colspan="1">
    A regular-expression based filter. The raw unformatted message is used against the pattern.            </td>
                <td rowspan="1" colspan="1">
    The expression takes a regular expression for it's argument. match(&quot;JBAS\d+&quot;)            </td>
                <td rowspan="1" colspan="1">
                </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    substitute            </td>
                <td rowspan="1" colspan="1">
    substitute(&quot;pattern&quot;, &quot;replacement value&quot;)            </td>
                <td rowspan="1" colspan="1">
    A filter which replaces the first match to the pattern with the replacement value.            </td>
                <td rowspan="1" colspan="1">
    The first argument for the expression is the pattern the second argument is the replacement text.            </td>
                <td rowspan="1" colspan="1">
    substitute(&quot;JBAS&quot;, &quot;EAP&quot;)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    substituteAll            </td>
                <td rowspan="1" colspan="1">
    substituteAll(&quot;pattern&quot;, &quot;replacement value&quot;)            </td>
                <td rowspan="1" colspan="1">
    A filter which replaces all matches of the pattern with the replacement value.            </td>
                <td rowspan="1" colspan="1">
    The first argument for the expression is the pattern the second argument is the replacement text.            </td>
                <td rowspan="1" colspan="1">
    substituteAll(&quot;JBAS&quot;, &quot;EAP&quot;)            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-ListLogFilesandReadingLogFiles"  >
        <h3>List Log Files and Reading Log Files</h3>
    
            <p>
    Log files can be listed and viewed via management operations. The log files allowed to be listed and/or viewed is intentionally limited to files that exist in the <tt class=" ">jboss.server.log.dir</tt> and are associated with a known file handler. Known file handler types include <tt class=" ">file-handler</tt>, <tt class=" ">periodic-rotating-file-handler</tt> and <tt class=" ">size-rotating-file-handler</tt>. The operations are valid in both standalone and domain modes.            </p>
        <div class="section-4"  id="66322694_Managementtasks-ListLogFiles"  >
        <h4>List Log Files</h4>
    
            <p>
    The <tt class=" ">list-log-files</tt> operation is available on the root logging resource, <tt class=" ">/subsystem=logging</tt> in standalone CLI syntax. The files listed are the only files allowed to be read by the <tt class=" ">read-log-file</tt> operation.            </p>
        <div class="confbox programlisting">
                    <div class="title">CLI command and output</div>
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=logging:list-log-files
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        {
            &quot;file-name&quot; =&gt; &quot;server.log&quot;,
            &quot;file-size&quot; =&gt; 10973L,
            &quot;last-modified-date&quot; =&gt; &quot;2014-02-14T14:16:49.000-0800&quot;
        },
        {
            &quot;file-name&quot; =&gt; &quot;server.log.2014-02-12&quot;,
            &quot;file-size&quot; =&gt; 27688L,
            &quot;last-modified-date&quot; =&gt; &quot;2014-02-12T11:20:35.000-0800&quot;
        },
        {
            &quot;file-name&quot; =&gt; &quot;server.log.2014-02-13&quot;,
            &quot;file-size&quot; =&gt; 359154L,
            &quot;last-modified-date&quot; =&gt; &quot;2014-02-13T20:43:49.000-0800&quot;
        }
    ]
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ReadLogFile"  >
        <h4>Read Log File</h4>
    
            <p>
    The <tt class=" ">read-log-file</tt> operation is available on the root logging resource, <tt class=" ">/subsystem=logging</tt> in standalone CLI syntax. Only files available in the <tt class=" ">list-log-files</tt> operation are allowed to be read. This operation has one required parameters and 4 additional parameters.            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    name (required)            </td>
                <td rowspan="1" colspan="1">
    the name of the log file to be read            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    encoding            </td>
                <td rowspan="1" colspan="1">
    the encoding the file should be read in            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    lines            </td>
                <td rowspan="1" colspan="1">
    the number of lines from the file. A value of -1 indicates all lines should be read.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    skip            </td>
                <td rowspan="1" colspan="1">
    the number of lines to skip before reading.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    tail            </td>
                <td rowspan="1" colspan="1">
    true to read from the end of the file up or false to read top down.            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="confbox programlisting">
                    <div class="title">CLI command and output</div>
                <div class="content">
        <pre><code>[standalone@localhost:9990 /] /subsystem=logging:read-log-file(name=server.log)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; [
        &quot;2014-02-14 14:16:48,781 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-11) JBAS015012: Started FileSystemDeploymentService for directory /home/jperkins/servers/wildfly-8.0.0.Final/standalone/deployments&quot;,
        &quot;2014-02-14 14:16:48,782 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-8) JBAS010400: Bound data source [java:jboss/myDs]&quot;,
        &quot;2014-02-14 14:16:48,782 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-15) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]&quot;,
        &quot;2014-02-14 14:16:48,786 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-9) JBAS015876: Starting deployment of \&quot;simple-servlet.war\&quot; (runtime-name: \&quot;simple-servlet.war\&quot;)&quot;,
        &quot;2014-02-14 14:16:48,978 INFO  [org.jboss.ws.common.management] (MSC service thread 1-10) JBWS022052: Starting JBoss Web Services - Stack CXF Server 4.2.3.Final&quot;,
        &quot;2014-02-14 14:16:49,160 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-16) JBAS017534: Registered web context: /simple-servlet&quot;,
        &quot;2014-02-14 14:16:49,189 INFO  [org.jboss.as.server] (Controller Boot Thread) JBAS018559: Deployed \&quot;simple-servlet.war\&quot; (runtime-name : \&quot;simple-servlet.war\&quot;)&quot;,
        &quot;2014-02-14 14:16:49,224 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015961: Http management interface listening on http://127.0.0.1:9990/management&quot;,
        &quot;2014-02-14 14:16:49,224 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990&quot;,
        &quot;2014-02-14 14:16:49,225 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: WildFly 8.0.0.Final \&quot;WildFly\&quot; started in 1906ms - Started 258 of 312 services (90 services are lazy, passive or on-demand)&quot;
    ]
}</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-FAQ"  >
        <h3>FAQ</h3>
    
    <div class="section-4"  id="66322694_Managementtasks-Whyistherea%7B%7Blogging.properties%7D%7Dfile%3F"  >
        <h4>Why is there a  logging.properties  file?</h4>
    
            <p>
    You may have noticed that there is a <tt class=" ">logging.properties</tt> file in the configuration directory. This logging configuration is used when the server boots up until the logging subsystem kicks in. If the logging subsystem is not included in your configuration, then this would act as the logging configuration for the entire server.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    The <tt class=" ">logging.properties</tt> file is overwritten at boot and with each change to the logging subsystem. Any changes made to the file are not persisted. Any changes made to the XML configuration or via management operations will be persisted to the <tt class=" ">logging.properties</tt> file and used on the next boot.            </p>
        </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-JMX2"  >
        <h3>JMX</h3>
    
            <p>
    The JMX subsystem registers a service with the Remoting endpoint so that remote access to JMX can be obtained over the exposed Remoting connector.            </p>
                <p>
    This is switched on by default in standalone mode and accessible over port 9990 but in domain mode is switched off so needs to be enabled - in domain mode the port will be the port of the Remoting connector for the WildFly 8&nbsp;instance to be monitored.            </p>
                <p>
    To use the connector you can access it in the standard way using a <tt class=" ">service:jmx</tt> URL:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>import javax.management.MBeanServerConnection;
import javax.management.remote.JMXConnector;
import javax.management.remote.JMXConnectorFactory;
import javax.management.remote.JMXServiceURL;

public class JMXExample {

    public static void main(String[] args) throws Exception {
        //Get a connection to the WildFly 8 MBean server on localhost
        String host = &quot;localhost&quot;;
        int port = 9990;  // management-web port
        String urlString =
            System.getProperty(&quot;jmx.service.url&quot;,&quot;service:jmx:http-remoting-jmx://&quot; + host + &quot;:&quot; + port);
        JMXServiceURL serviceURL = new JMXServiceURL(urlString);
        JMXConnector jmxConnector = JMXConnectorFactory.connect(serviceURL, null);
        MBeanServerConnection connection = jmxConnector.getMBeanServerConnection();

        //Invoke on the WildFly 8 MBean server
        int count = connection.getMBeanCount();
        System.out.println(count);
       &nbsp;jmxConnector.close();
    }
}</code></pre>
        </div>
    </div>
            <p>
    You also need to set your classpath when running the above example.&nbsp; The following script covers Linux.&nbsp; If your environment is much different, paste your script when you have it working.            </p>
        <div class="confbox panel">
                <p>
    !/bin/bash            </p>
                <p>
    # specify your WildFly 8&nbsp;folder<br/>export YOUR_JBOSS_HOME=~/WildFly8            </p>
                <p>
    java -classpath $YOUR_JBOSS_HOME/bin/client/jboss-client.jar:./ JMXExample            </p>
        </div>
            <p>
    You can also connect using jconsole.            </p>
        <div class="confbox admonition admonition-note">
        
            <p>
    If using jconsole use the <tt class=" ">jconsole.sh</tt> and <tt class=" ">jconsole.bat</tt> scripts included in the /bin directory of the WildFly 8&nbsp;distribution as these set the classpath as required to connect over Remoting.            </p>
        </div>
    
            <p>
    In addition to the standard JVM MBeans, the WildFly 8&nbsp;MBean server contains the following MBeans:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    JMX ObjectName            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.msc:type=container,name=jboss-as</tt>            </td>
                <td rowspan="1" colspan="1">
    Exposes management operations on the JBoss Modular Service Container, which is the dependency injection framework at the heart of WildFly 8. It is useful for debugging dependency problems, for example if you are integrating your own subsystems, as it exposes operations to dump all services and their current states            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.naming:type=JNDIView</tt>            </td>
                <td rowspan="1" colspan="1">
    Shows what is bound in JNDI            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">jboss.modules:type=ModuleLoader,name=*</tt>            </td>
                <td rowspan="1" colspan="1">
    This collection of MBeans exposes management operations on JBoss Modules classloading layer. It is useful for debugging dependency problems arising from missing module dependencies            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Auditlogging2"  >
        <h3>Audit logging</h3>
    
            <p>
    Audit logging for the JMX MBean server managed by the JMX subsystem. The resource is at <tt class=" ">/subsystem=jmx/configuration=audit-log</tt> and its attributes are similar to the ones mentioned for <tt class=" ">/core-service=management/access=audit/logger=audit-log</tt> in <a href="69536296.html">Audit logging</a>.            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Attribute            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">enabled</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> to enable logging of the JMX operations            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">log-boot</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> to log the JMX operations when booting the server, <tt class=" ">false</tt> otherwise            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">log-read-only</tt>            </td>
                <td rowspan="1" colspan="1">
    If <tt class=" ">true</tt> all operations will be audit logged, if <tt class=" ">false</tt> only operations that change the model will be logged            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    Then which handlers are used to log the management operations are configured as <tt class=" ">handler=*</tt> children of the logger. These handlers and their formatters are defined in the global <tt class=" ">/core-service=management/access=audit</tt> section mentioned in <a href="69536296.html">Audit logging</a>.            </p>
        <div class="section-4"  id="66322694_Managementtasks-JSONFormatter2"  >
        <h4>JSON Formatter</h4>
    
            <p>
    The same JSON Formatter is used as described in <a href="69536296.html">Audit logging</a>. However the records for MBean Server invocations have slightly different fields from those logged for the core management layer.            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>2013-08-29 18:26:29 - {
    &quot;type&quot; : &quot;jmx&quot;,
    &quot;r/o&quot; : false,
    &quot;booting&quot; : false,
    &quot;version&quot; : &quot;8.0.0.Beta1-SNAPSHOT&quot;,
    &quot;user&quot; : &quot;$local&quot;,
    &quot;domainUUID&quot; : null,
    &quot;access&quot; : &quot;JMX&quot;,
    &quot;remote-address&quot; : &quot;127.0.0.1/127.0.0.1&quot;,
    &quot;method&quot; : &quot;invoke&quot;,
    &quot;sig&quot; : [
        &quot;javax.management.ObjectName&quot;,
        &quot;java.lang.String&quot;,
        &quot;[Ljava.lang.Object;&quot;,
        &quot;[Ljava.lang.String;&quot;
    ],
    &quot;params&quot; : [
        &quot;java.lang:type=Threading&quot;,
        &quot;getThreadInfo&quot;,
        &quot;[Ljava.lang.Object;@5e6c33c&quot;,
        &quot;[Ljava.lang.String;@4b681c69&quot;
    ]
}</code></pre>
        </div>
    </div>
            <p>
    It includes an optional timestamp and then the following information in the json record            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Field name            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">type</tt>            </td>
                <td rowspan="1" colspan="1">
    This will have the value <tt class=" ">jmx</tt> meaning it comes from the jmx subsystem            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">r/o</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation has read only impact on the MBean(s)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">booting</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">true</tt> if the operation was executed during the bootup process, <tt class=" ">false</tt> if it was executed once the server is up and running            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">version</tt>            </td>
                <td rowspan="1" colspan="1">
    The version number of the WildFly instance            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">user</tt>            </td>
                <td rowspan="1" colspan="1">
    The username of the authenticated user.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">domainUUID</tt>            </td>
                <td rowspan="1" colspan="1">
    This is not currently populated for JMX operations            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">access</tt>            </td>
                <td rowspan="1" colspan="1">
    This can have one of the following values:<br/>*<tt class=" ">NATIVE</tt> - The operation came in through the native management interface, for example the CLI<br/>*<tt class=" ">HTTP</tt> - The operation came in through the domain HTTP interface, for example the admin console<br/>*<tt class=" ">JMX</tt> - The operation came in through the JMX subsystem. See <a href="66322718.html">JMX</a> for how to configure audit logging for JMX.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">remote-address</tt>            </td>
                <td rowspan="1" colspan="1">
    The address of the client executing this operation            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">method</tt>            </td>
                <td rowspan="1" colspan="1">
    The name of the called MBeanServer method            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">sig</tt>            </td>
                <td rowspan="1" colspan="1">
    The signature of the called called MBeanServer method            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">params</tt>            </td>
                <td rowspan="1" colspan="1">
    The actual parameters passed in to the MBeanServer method, a simple <tt class=" ">Object.toString()</tt> is called on each parameter.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">error</tt>            </td>
                <td rowspan="1" colspan="1">
    If calling the MBeanServer method resulted in an error, this field will be populated with <tt class=" ">Throwable.getMessage()</tt>            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-OSGi"  >
        <h3>OSGi</h3>
    
            <p>
    OSGi functionality in WildFly 8&nbsp;is provided through the OSGi subsystem.            </p>
                <p>
    The documentation of this functionality can be found at the <a href="https://docs.jboss.org/author/display/JBOSGI/JBoss+OSGi+Home">JBoss OSGi documentation pages</a>.            </p>
                <p>
    Integration with WildFly&nbsp;and reference the the OSGi subsystem in the WildFly&nbsp;XML configuration file can be found in the <a href="https://docs.jboss.org/author/display/JBOSGI/Application+Server+Integration">Application Server Integration</a> section.            </p>
        <div class="confbox admonition admonition-tip">
        
            <p>
    More information on the OSGi component in WildFly&nbsp;can be found on the <a href="http://www.jboss.org/jbossas/osgi">JBoss OSGi project pages</a>.            </p>
        </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-DeploymentScanner"  >
        <h3>Deployment Scanner</h3>
    
            <p>
    The deployment scanner is only used in standalone mode. Its job is to monitor a directory for new files and to deploy those files. It can be found in <tt class=" ">standalone.xml</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:deployment-scanner:1.0&quot;&gt;
   &lt;deployment-scanner scan-interval=&quot;5000&quot;
      relative-to=&quot;jboss.server.base.dir&quot; path=&quot;deployments&quot; /&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    You can define more <tt class=" ">deployment-scanner</tt> entries to scan for deployments from more locations. The configuration showed will scan the <tt class=" ">JBOSS_HOME/standalone/deployments</tt> directory every five seconds. The runtime model is shown below, and uses default values for attributes not specified in the xml:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=deployment-scanner:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {&quot;scanner&quot; =&gt; {&quot;default&quot; =&gt; {
        &quot;auto-deploy-exploded&quot; =&gt; false,
        &quot;auto-deploy-zipped&quot; =&gt; true,
        &quot;deployment-timeout&quot; =&gt; 60L,
        &quot;name&quot; =&gt; &quot;default&quot;,
        &quot;path&quot; =&gt; &quot;deployments&quot;,
        &quot;relative-to&quot; =&gt; &quot;jboss.server.base.dir&quot;,
        &quot;scan-enabled&quot; =&gt; true,
        &quot;scan-interval&quot; =&gt; 5000
    }}}
}</code></pre>
        </div>
    </div>
            <p>
    The attributes are            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Type            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">name</tt>            </td>
                <td rowspan="1" colspan="1">
    STRING            </td>
                <td rowspan="1" colspan="1">
    The name of the scanner. <tt class=" ">default</tt> is used if not specified            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">path</tt>            </td>
                <td rowspan="1" colspan="1">
    STRING            </td>
                <td rowspan="1" colspan="1">
    The actual filesystem path to be scanned. Treated as an absolute path, unless the 'relative-to' attribute is specified, in which case the value is treated as relative to that path.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">relative-to</tt>            </td>
                <td rowspan="1" colspan="1">
    STRING            </td>
                <td rowspan="1" colspan="1">
    Reference to a filesystem path defined in the &quot;paths&quot; section of the server configuration, or one of the system properties specified on startup. In the example above <tt class=" ">jboss.server.base.dir</tt> resolves to&nbsp;<tt class=" ">JBOSS_HOME/standalone</tt>            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">scan-enabled</tt>            </td>
                <td rowspan="1" colspan="1">
    BOOLEAN            </td>
                <td rowspan="1" colspan="1">
    If true scanning is enabled            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">scan-interval</tt>            </td>
                <td rowspan="1" colspan="1">
    INT            </td>
                <td rowspan="1" colspan="1">
    Periodic interval, in milliseconds, at which the repository should be scanned for changes. A value of less than 1 indicates the repository should only be scanned at initial startup.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">auto-deploy-zipped</tt>            </td>
                <td rowspan="1" colspan="1">
    BOOLEAN            </td>
                <td rowspan="1" colspan="1">
    Controls whether zipped deployment content should be automatically deployed by the scanner without requiring the user to add a .dodeploy marker file.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">auto-deploy-exploded</tt>            </td>
                <td rowspan="1" colspan="1">
    BOOLEAN            </td>
                <td rowspan="1" colspan="1">
    Controls whether exploded deployment content should be automatically deployed by the scanner without requiring the user to add a .dodeploy marker file. Setting this to 'true' is not recommended for anything but basic development scenarios,  as there is no way to ensure that deployment will not occur in the middle of changes to the content.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">deployment-timeout</tt>            </td>
                <td rowspan="1" colspan="1">
    LONG            </td>
                <td rowspan="1" colspan="1">
    Timeout, in seconds, a deployment is allows to execute before being canceled.  The default is 60 seconds.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    Deployment scanners can be added by modifying <tt class=" ">standalone.xml</tt> before starting up the server or they can be added and removed at runtime using the CLI            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=deployment-scanner/scanner=new:add(scan-interval=10000,relative-to=&quot;jboss.server.base.dir&quot;,path=&quot;other-deployments&quot;)
{&quot;outcome&quot; =&gt; &quot;success&quot;}
[standalone@localhost:9999 /] /subsystem=deployment-scanner/scanner=new:remove
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    You can also change the attributes at runtime, so for example to turn off scanning you can do            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /subsystem=deployment-scanner/scanner=default:write-attribute(name=&quot;scan-enabled&quot;,value=false)
{&quot;outcome&quot; =&gt; &quot;success&quot;}
[standalone@localhost:9999 /] /subsystem=deployment-scanner:read-resource(recursive=true)
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {&quot;scanner&quot; =&gt; {&quot;default&quot; =&gt; {
        &quot;auto-deploy-exploded&quot; =&gt; false,
        &quot;auto-deploy-zipped&quot; =&gt; true,
        &quot;deployment-timeout&quot; =&gt; 60L,
        &quot;name&quot; =&gt; &quot;default&quot;,
        &quot;path&quot; =&gt; &quot;deployments&quot;,
        &quot;relative-to&quot; =&gt; &quot;jboss.server.base.dir&quot;,
        &quot;scan-enabled&quot; =&gt; false,
        &quot;scan-interval&quot; =&gt; 5000
    }}}
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Threadssubsystemconfiguration"  >
        <h3>Threads subsystem configuration</h3>
    
    <div class="section-4"  id="66322694_Managementtasks-Definingthreadpools"  >
        <h4>Defining thread pools</h4>
    
            <p>
    Subsystems can reference thread  pools defined by the threading subsystem. Externalizing thread pool in  this way has the additional advantage of being able to manage the thread  pools via native WildFly management mechanisms, and allows you to  share thread pools across subsystems. For example:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:threads:1.0&quot;&gt;
    &lt;thread-factory name=&quot;infinispan-factory&quot; priority=&quot;1&quot;/&gt;
    &lt;bounded-queue-thread-pool name=&quot;infinispan-transport&quot;&gt;
        &lt;core-threads count=&quot;1&quot;/&gt;
        &lt;queue-length count=&quot;100000&quot;/&gt;
        &lt;max-threads count=&quot;25&quot;/&gt;
        &lt;thread-factory name=&quot;infinispan-factory&quot;/&gt;
    &lt;/bounded-queue-thread-pool&gt;
    &lt;bounded-queue-thread-pool name=&quot;infinispan-listener&quot;&gt;
        &lt;core-threads count=&quot;1&quot;/&gt;
        &lt;queue-length count=&quot;100000&quot;/&gt;
        &lt;max-threads count=&quot;1&quot;/&gt;
        &lt;thread-factory name=&quot;infinispan-factory&quot;/&gt;
    &lt;/bounded-queue-thread-pool&gt;
    &lt;scheduled-thread-pool name=&quot;infinispan-eviction&quot;&gt;
        &lt;max-threads count=&quot;1&quot;/&gt;
        &lt;thread-factory name=&quot;infinispan-factory&quot;/&gt;
    &lt;/scheduled-thread-pool&gt;
    &lt;scheduled-thread-pool name=&quot;infinispan-repl-queue&quot;&gt;
        &lt;max-threads count=&quot;1&quot;/&gt;
        &lt;thread-factory name=&quot;infinispan-factory&quot;/&gt;
    &lt;/scheduled-thread-pool&gt;
&lt;/subsystem&gt;</code></pre>
        </div>
    </div>
            <p>
    Infinispan configuration:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;cache-container name=&quot;web&quot; default-cache=&quot;repl&quot; listener-executor=&quot;infinispan-listener&quot; eviction-executor=&quot;infinispan-eviction&quot; replication-queue-executor=&quot;infinispan-repl-queue&quot;&gt;
    &lt;transport executor=&quot;infinispan-transport&quot;/&gt;
    &lt;replicated-cache name=&quot;repl&quot; mode=&quot;ASYNC&quot; batching=&quot;true&quot;&gt;
        &lt;locking isolation=&quot;REPEATABLE_READ&quot;/&gt;
        &lt;file-store/&gt;
    &lt;/replicated-cache&gt;
&lt;/cache-container&gt;</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-Operationrequestexamples"  >
        <h4>Operation request examples</h4>
    
            <p>
    &#65279;            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/profile=production/subsystem=threads/bounded-queue-thread-pool=pool1:write-core-threads (count=0, per-cpu=20)</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Simpleconfigurationsubsystems"  >
        <h3>Simple configuration subsystems</h3>
    
            <p>
    The following subsystems currently have no configuration beyond its root element in the configuration            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;subsystem xmlns=&quot;urn:jboss:domain:ejb3:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:jaxrs:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:sar:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:threads:1.0&quot;/&gt;
&lt;subsystem xmlns=&quot;urn:jboss:domain:weld:1.0&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    The presence of each of these turns on a piece of functionality:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Name            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">EJB3</tt>            </td>
                <td rowspan="1" colspan="1">
    Enables the deployment and functionality of EJB 3.1 applications.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">JAXRS</tt>            </td>
                <td rowspan="1" colspan="1">
    Enables the deployment and functionality of JAX-RS applications. This is implemented by the RestEasy project            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">Remoting</tt>            </td>
                <td rowspan="1" colspan="1">
    Turns on the remoting subsystem, which is used for the management communication and will be what underlies remote JNDI lookups and remote EJB calls in a future release.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">Sar</tt>            </td>
                <td rowspan="1" colspan="1">
    Enables the deployment of .SAR archives containing MBean services, as supported by previous versions of&nbsp;WildFly            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">Threads</tt>            </td>
                <td rowspan="1" colspan="1">
    This subsystem is being deprecated and will not be part of the next release            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">Weld</tt>            </td>
                <td rowspan="1" colspan="1">
    Enables the deployment and functionality of CDI applications            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Configurationfilehistory"  >
        <h2>Configuration file history</h2>
    
            <p>
    The management operations may modify the model. When this occurs the xml backing the model is written out again reflecting the latest changes. In addition a full history of the file is maintained. The history of the file goes in a separate directory under the configuration directory.            </p>
                <p>
    As mentioned in <a href="https://docs.jboss.org/author/display/AS7/Command+line+parameters#Commandlineparameters-parameters">Command line parameters#parameters</a> the default configuration file can be selected using a command-line parameter. For a standalone server instance the history of the active <tt class=" ">standalone.xml</tt> is kept in <tt class=" ">jboss.server.config.dir</tt>/standalone_xml_history (See <a href="https://docs.jboss.org/author/display/AS7/Command+line+parameters#Commandlineparameters-standalonesystemproperties">Command line parameters#standalone_system_properties</a> for more details). For a domain the active <tt class=" ">domain.xml</tt> and <tt class=" ">host.xml</tt> histories are kept in <tt class=" ">jboss.domain.config.dir</tt>/domain_xml_history and <tt class=" ">jboss.domain.config.dir</tt>/host_xml_history.            </p>
                <p>
    The rest of this section will only discuss the history for <tt class=" ">standalone.xml</tt>. The concepts are exactly the same for <tt class=" ">domain.xml</tt> and <tt class=" ">host.xml</tt>.            </p>
                <p>
    Within <tt class=" ">standalone_xml_history</tt> itself following a successful first time boot we end up with three new files:<br/>*<tt class=" ">standalone.initial.xml</tt> - This contains the original configuration that was used the first time we successfully booted. This file will never be overwritten. You may of course delete the history directory and any files in it at any stage.<br/>*<tt class=" ">standalone.boot.xml</tt> - This contains the original configuration that was used for the last successful boot of the server. This gets overwritten every time we boot the server successfully.<br/>*<tt class=" ">standalone.last.xml</tt> - At this stage the contents will be identical to <tt class=" ">standalone.boot.xml.&nbsp; This file gets overwritten each time the server successfully writes the configuration, if there was an unexpected failure writing the configuration this file is the last known successful write.</tt>            </p>
                <p>
    <tt class=" ">standalone_xml_history</tt> contains a directory called <tt class=" ">current</tt> which should be empty. Now if we execute a management operation that modifies the model, for example adding a new system property using the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] /system-property=test:add(value=&quot;test123&quot;)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    What happens is:            </p>
    <ul class=" "><li class=" ">            <p>
    The original configuration file is backed up to <tt class=" ">standalone_xml_history/current/standalone.v1.xml</tt>. The next change to the model would result in a file called <tt class=" ">standalone.v2.xml</tt> etc. The 100 most recent of these files are kept.            </p>
    </li><li class=" ">            <p>
    The change is applied to the original configuration file            </p>
    </li><li class=" ">            <p>
    The changed original configuration file is copied to <tt class=" ">standalone.last.xml</tt>            </p>
    </li></ul>            <p>
    When restarting the server, any existing <tt class=" ">standalone_xml_history/current</tt> directory is moved to a new timestamped folder within the <tt class=" ">standalone_xml_history</tt>, and a new <tt class=" ">current</tt> folder is created. These timestamped folders are kept for 30 days.            </p>
        <div class="section-3"  id="66322694_Managementtasks-Snapshots"  >
        <h3>Snapshots</h3>
    
            <p>
    In addition to the backups taken by the server as described above you can manually take take snapshots which will be stored in the <tt class=" ">snapshot</tt> folder under the <tt class=" ">_xml_history</tt> folder, the automatic backups described above are subject to automatic house keeping so will eventually be automatically removed, the snapshots on the other hand can be entirely managed by the administrator.            </p>
                <p>
    You may also take your own snapshots using the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :take-snapshot
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {&quot;name&quot; =&gt; &quot;/Users/kabir/jboss-7.0.0.CR1/standalone/configuration/standalone_xml_history/snapshot/20110630-172258657standalone.xml&quot;}
}</code></pre>
        </div>
    </div>
            <p>
    You can also use the CLI to list all the snapshots            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :list-snapshots
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;directory&quot; =&gt; &quot;/Users/kabir/jboss-7.0.0.CR1/standalone/configuration/standalone_xml_history/snapshot&quot;,
        &quot;names&quot; =&gt; [
            &quot;20110630-165714239standalone.xml&quot;,
            &quot;20110630-165821795standalone.xml&quot;,
            &quot;20110630-170113581standalone.xml&quot;,
            &quot;20110630-171411463standalone.xml&quot;,
            &quot;20110630-171908397standalone.xml&quot;,
            &quot;20110630-172258657standalone.xml&quot;
        ]
    }
}</code></pre>
        </div>
    </div>
            <p>
    &nbsp;To delete a particular snapshot:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :delete-snapshot(name=&quot;20110630-165714239standalone.xml&quot;)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    and to delete all snapshots:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] :delete-snapshot(name=&quot;all&quot;)
{&quot;outcome&quot; =&gt; &quot;success&quot;}</code></pre>
        </div>
    </div>
            <p>
    In domain mode executing the snapshot operations against the root node will work against the domain model. To do this for a host model you need to navigate to the host in question:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=master:list-snapshots
{
    &quot;outcome&quot; =&gt; &quot;success&quot;,
    &quot;result&quot; =&gt; {
        &quot;domain-results&quot; =&gt; {&quot;step-1&quot; =&gt; {
            &quot;directory&quot; =&gt; &quot;/Users/kabir/jboss-7.0.0.CR1/domain/configuration/host_xml_history/snapshot&quot;,
            &quot;names&quot; =&gt; [
                &quot;20110630-141129571host.xml&quot;,
                &quot;20110630-172522225host.xml&quot;
            ]
        }},
        &quot;server-operations&quot; =&gt; undefined
    }
}</code></pre>
        </div>
    </div>
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-SubsequentStarts"  >
        <h3>Subsequent Starts</h3>
    
            <p>
    For subsequent server starts it may be desirable to take the state of the server back to one of the previously known states, for a number of items an abbreviated reverence to the file can be used: -            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    Abreviation            </td>
                <td rowspan="1" colspan="1">
    Parameter            </td>
                <td rowspan="1" colspan="1">
    Description            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">initial</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=initial</tt>            </td>
                <td rowspan="1" colspan="1">
    This will start the server using the initial configuration first used to start the server.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">boot</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=boot</tt>            </td>
                <td rowspan="1" colspan="1">
    This will use the configuration from the last successful boot of the server.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">last</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=last</tt>            </td>
                <td rowspan="1" colspan="1">
    This will start the server using the configuration backed up from the last successful save.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">v?</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=v?</tt>            </td>
                <td rowspan="1" colspan="1">
    This will server the _xml_history/current folder for the configuration where ? is the number of the backup to use.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    <tt class=" ">????</tt>    <cite>
<tt class=" "></tt>    </cite>
<tt class=" ">-</tt>    <cite>
<tt class=" "></tt>    </cite>
<tt class=" ">?????</tt>            </td>
                <td rowspan="1" colspan="1">
    <tt class=" ">--server-config=????</tt>    <cite>
<tt class=" "></tt>    </cite>
<tt class=" ">-</tt>    <cite>
<tt class=" "></tt>    </cite>
<tt class=" ">?????</tt>            </td>
                <td rowspan="1" colspan="1">
    The server will be started after searching the snapshot folder for the configuration which matches this prefix.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    In addition to this the <tt class=" ">--server-config</tt> parameter can always be used to specify a configuration relative to the <tt class=" ">jboss.server.config.dir</tt> and finally if no matching configuration is found an attempt to locate the configuration as an absolute path will be made.            </p>
        </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Starting%26stoppingServersinaManagedDomain"  >
        <h2>Starting &amp; stopping Servers in a Managed Domain</h2>
    
            <p>
    Starting a standalone server is done through the <tt class=" ">bin/standalone.sh</tt> script. However in a managed domain server instances are managed by the domain controller and need to be started through the management layer:            </p>
                <p>
    First of all, get to know which <tt class=" ">servers</tt> are configured on a particular <tt class=" ">host</tt>:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] :read-children-names(child-type=host)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [&quot;local&quot;]
}


[domain@localhost:9999 /] /host=local:read-children-names(child-type=server-config)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [
       &quot;my-server&quot;,
       &quot;server-one&quot;,
       &quot;server-three&quot;
   ]
}
</code></pre>
        </div>
    </div>
            <p>
    Now that we know, that there are two <tt class=" ">servers</tt> configured on <tt class=" ">host</tt> &quot;<i class=" ">local</i>&quot;, we can go ahead and check their status:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=local/server-config=server-one:read-resource(include-runtime=true)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; {
       &quot;auto-start&quot; =&gt; true,
       &quot;group&quot; =&gt; &quot;main-server-group&quot;,
       &quot;interface&quot; =&gt; undefined,
       &quot;name&quot; =&gt; &quot;server-one&quot;,
       &quot;path&quot; =&gt; undefined,
       &quot;socket-binding-group&quot; =&gt; undefined,
       &quot;socket-binding-port-offset&quot; =&gt; undefined,
       &quot;status&quot; =&gt; &quot;STARTED&quot;,
       &quot;system-property&quot; =&gt; undefined,
       &quot;jvm&quot; =&gt; {&quot;default&quot; =&gt; undefined}
   }
}</code></pre>
        </div>
    </div>
            <p>
    You can change the server state through the &quot;<i class=" ">start</i>&quot; and &quot;<i class=" ">stop</i>&quot; operations            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] /host=local/server-config=server-one:stop
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; &quot;STOPPING&quot;
}
</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
        
            <p>
    Navigating through the domain topology is much more simple when you use the web interface.            </p>
        </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-Applicationdeployment"  >
        <h2>Application deployment</h2>
    
    <div class="section-3"  id="66322694_Managementtasks-ManagedDomain5"  >
        <h3>Managed Domain</h3>
    
            <p>
    In a managed domain, deployments are associated with a <tt class=" ">server group</tt> (see &#65279;<a href="66322690.html">Core management concepts</a>). Any server within the server group will then be provided with that deployment.            </p>
                <p>
    The domain and host controller components manage the distribution of binaries across network boundaries.            </p>
        <div class="section-4"  id="66322694_Managementtasks-DeploymentCommands"  >
        <h4>Deployment Commands</h4>
    
            <p>
    Distributing deployment binaries involves two steps: uploading the deployment to the repository the domain controller will use to distribute its contents, and then assigning the deployment to one or more server groups.            </p>
                <p>
    You can do this in one sweep with the CLI:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] deploy ~/Desktop/test-application.war
Either --all-server-groups or --server-groups must be specified.

[domain@localhost:9999 /] deploy ~/Desktop/test-application.war --all-server-groups
'test-application.war' deployed successfully.

[domain@localhost:9999 /] deploy --help
[...]</code></pre>
        </div>
    </div>
            <p>
    After you've uploaded the binary using the <tt class=" ">deploy</tt> command, it will be available to the domain controller, and assigned to a server group:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] :read-children-names(child-type=deployment)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; [
       &quot;mysql-connector-java-5.1.15.jar&quot;,
       &quot;test-application.war&quot;
   ]
}

[domain@localhost:9999 /] /server-group=main-server-group/deployment=test-application.war:read-resource
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; {
       &quot;enabled&quot; =&gt; true,
       &quot;name&quot; =&gt; &quot;test-application.war&quot;,
       &quot;runtime-name&quot; =&gt; &quot;test-application.war&quot;
   }
}
</code></pre>
        </div>
    </div>
            <p>
    You can remove binaries from server groups with the <tt class=" ">undeploy</tt> command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[domain@localhost:9999 /] undeploy test-application.war --all-relevant-server-groups
Successfully undeployed test-application.war.

[domain@localhost:9999 /] /server-group=main-server-group:read-children-names(child-type=deployment)
{
   &quot;outcome&quot; =&gt; &quot;success&quot;,
   &quot;result&quot; =&gt; []
}
</code></pre>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
        
            <p>
    Managing deployments through the web interface provides an alternate, sometimes simpler approach.            </p>
        </div>
    
    </div>
    
    <div class="section-4"  id="66322694_Managementtasks-ContentRepository"  >
        <h4>Content Repository</h4>
    
            <p>
    Deployments are referenced in the domain configuration file, and co-located with the domain controller:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[...]
&lt;deployments&gt;
   &lt;deployment name=&quot;test-application.war&quot;
               runtime-name=&quot;test-application.war&quot;&gt;
       &lt;content sha1=&quot;dda9881fa7811b22f1424b4c5acccb13c71202bd&quot;/&gt;
   &lt;/deployment&gt;
&lt;/deployments&gt;
[...]
&lt;server-groups&gt;
   &lt;server-group name=&quot;main-server-group&quot; profile=&quot;default&quot;&gt;
       [...]
       &lt;deployments&gt;
           &lt;deployment name=&quot;test-application.war&quot; runtime-name=&quot;test-application.war&quot;/&gt;
       &lt;/deployments&gt;
   &lt;/server-group&gt;
&lt;/server-groups&gt;
[...]</code></pre>
        </div>
    </div>
            <p>
    <sub class=" ">(See domain/configuration/domain.xml)</sub>            </p>
                <p>
    The actual binaries are stored in the content subdirectory:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>ls domain/content/
  |---/47
  |-----95cc29338b5049e238941231b36b3946952991
  |---/dd
  |-----a9881fa7811b22f1424b4c5acccb13c71202bd</code></pre>
        </div>
    </div>
    </div>
    
    </div>
    
    <div class="section-3"  id="66322694_Managementtasks-StandaloneServer3"  >
        <h3>Standalone Server</h3>
    
            <p>
    Deployments on a standalone server work in a similar way to those on managed domains. The main difference is that there are no server group associations.            </p>
        <div class="section-4"  id="66322694_Managementtasks-DeploymentCommands2"  >
        <h4>Deployment Commands</h4>
    
            <p>
    The same CLI commands used for managed domains work for standalone servers when deploying and removing an application:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>[standalone@localhost:9999 /] deploy ~/Desktop/test-application.war
'test-application.war' deployed successfully.

[standalone@localhost:9999 /] undeploy test-application.war
Successfully undeployed test-application.war.</code></pre>
        </div>
    </div>
            <p>
        <span id="66322694_Managementtasks-filesystemdeployments"><a name="66322694_Managementtasks-filesystemdeployments"></a></span>
            </p>
        </div>
    
    <div class="section-4"  id="66322694_Managementtasks-FileSystemDeployments"  >
        <h4>File System Deployments</h4>
    
            <p>
    Deployment content (for example, war, ear, jar, and sar files) can be placed in the standalone/deployments directory of the WildFly 8 distribution, in order to be automatically deployed into the server runtime.            </p>
        <div class="confbox admonition admonition-info">
        
            <p>
    Users are encouraged to use the WildFly 8 management APIs to upload and deploy deployment content instead of relying on the deployment scanner that periodically scans the directory, particularly if running production systems.            </p>
        </div>
    
    <div class="section-5"  id="66322694_Managementtasks-DeploymentModes"  >
        <h5>Deployment Modes</h5>
    
            <p>
    The WildFly 8 filesystem deployment scanner operates in one of two different modes, depending on whether it will directly monitor the deployment content in order to decide to deploy or redeploy it.            </p>
                <p>
    <u class=" ">Auto-deploy mode</u>:            </p>
                <p>
    The scanner will directly monitor the deployment content, automatically deploying new content and redeploying content whose timestamp has changed. This is similiar to the behavior of previous AS releases, although there are differences:            </p>
    <ul class=" "><li class=" ">            <p>
    A change in any file in an exploded deployment triggers redeploy. Because EE 6 applications do not require deployment descriptors,<br/>there is no attempt to monitor deployment descriptors and only redeploy when a deployment descriptor changes.            </p>
    </li><li class=" ">            <p>
    The scanner will place marker files in this directory as an indication of the status of its attempts to deploy or undeploy content. These are detailed below.            </p>
    </li></ul>            <p>
    <u class=" ">Manual deploy mode</u>:            </p>
                <p>
    The scanner will not attempt to directly monitor the  deployment content and decide if or when the end user wishes the content to be deployed. Instead, the scanner relies on a system of marker  files, with the user's addition or removal of a marker file serving as a sort of command telling the scanner to deploy, undeploy or redeploy content.            </p>
                <p>
    Auto-deploy mode and manual deploy mode can be independently configured for  zipped deployment content and exploded deployment content. This is done via the &quot;auto-deploy&quot; attribute on the deployment-scanner element in the standalone.xml configuration file:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>&lt;deployment-scanner scan-interval=&quot;5000&quot; relative-to=&quot;jboss.server.base.dir&quot;
   path=&quot;deployments&quot; auto-deploy-zipped=&quot;true&quot; auto-deploy-exploded=&quot;false&quot;/&gt;</code></pre>
        </div>
    </div>
            <p>
    By default, auto-deploy of zipped content is enabled, and auto-deploy of exploded content is disabled. Manual deploy mode is strongly recommended for exploded content, as exploded content is inherently vulnerable to the scanner trying to auto-deploy partially copied content.            </p>
        </div>
    
    <div class="section-5"  id="66322694_Managementtasks-MarkerFiles"  >
        <h5>Marker Files</h5>
    
            <p>
    The marker files always have the same name as the deployment content to which they relate, but with an additional file suffix appended. For example, the marker file to indicate the example.war file should be deployed is named example.war.dodeploy. Different marker file suffixes have different meanings.            </p>
                <p>
    The relevant marker file types are:            </p>
        <div class="tablewrap">
        <table>
<thead class=" ">    <tr>
            <td rowspan="1" colspan="1">
    File            </td>
                <td rowspan="1" colspan="1">
    Purpose            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td rowspan="1" colspan="1">
    .dodeploy            </td>
                <td rowspan="1" colspan="1">
    Placed by the user to indicate that the given content should<br/>be deployed into the runtime (or redeployed if already<br/>deployed in the runtime.)            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .skipdeploy            </td>
                <td rowspan="1" colspan="1">
    Disables auto-deploy of the content for as long as the file<br/>is present. Most useful for allowing updates to exploded<br/>content without having the scanner initiate redeploy in the<br/>middle of the update. Can be used with zipped content as<br/>well, although the scanner will detect in-progress changes<br/>to zipped content and wait until changes are complete.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .isdeploying            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that it<br/>has noticed a .dodeploy file or new or updated auto-deploy<br/>mode content and is in the process of deploying the content.<br/>This marker file will be deleted when the deployment process<br/>completes.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .deployed            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that the<br/>given content has been deployed into the runtime. If an end<br/>user deletes this file, the content will be undeployed.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .failed            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that the<br/>given content failed to deploy into the runtime. The content<br/>of the file will include some information about the cause of<br/>the failure. Note that with auto-deploy mode, removing this<br/>file will make the deployment eligible for deployment again.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .isundeploying            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that it<br/>has noticed a .deployed file has been deleted and the<br/>content is being undeployed. This marker file will be deleted<br/>when the undeployment process completes.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .undeployed            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that the<br/>given content has been undeployed from the runtime. If an end<br/>user deletes this file, it has no impact.            </td>
        </tr>
    <tr>
            <td rowspan="1" colspan="1">
    .pending            </td>
                <td rowspan="1" colspan="1">
    Placed by the deployment scanner service to indicate that it<br/>has noticed the need to deploy content but has not yet<br/>instructed the server to deploy it. This file is created if<br/>the scanner detects that some auto-deploy content is still in<br/>the process of being copied or if there is some problem that<br/>prevents auto-deployment. The scanner will not instruct the<br/>server to deploy or undeploy any content (not just the<br/>directly affected content) as long as this condition holds.            </td>
        </tr>
</tbody>        </table>
            </div>
            <p>
    <strong class=" ">Basic workflows:</strong><br/>All examples assume variable $JBOSS_HOME points to the root of the WildFly 8 distribution.            </p>
                <p>
    A) Add new zipped content and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    cp target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    (Manual mode only) touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    B) Add new unzipped content and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    cp -r target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    (Manual mode only) touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    C) Undeploy currently deployed content:            </p>
    <ol class=" "><li class=" ">            <p>
    rm $JBOSS_HOME/standalone/deployments/example.war.deployed            </p>
    </li></ol>            <p>
    D) Auto-deploy mode only: Undeploy currently deployed content:            </p>
    <ol class=" "><li class=" ">            <p>
    rm $JBOSS_HOME/standalone/deployments/example.war            </p>
    </li></ol>            <p>
    E) Replace currently deployed zipped content with a new version and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    cp target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    (Manual mode only) touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    F) Manual mode only: Replace currently deployed unzipped content with a new version and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    rm $AS/standalone/deployments/example.war.deployed            </p>
    </li><li class=" ">            <p>
    wait for $JBOSS_HOME/standalone/deployments/example.war.undeployed file to appear            </p>
    </li><li class=" ">            <p>
    cp -r target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    G) Auto-deploy mode only: Replace currently deployed unzipped content with a new version and deploy it:            </p>
    <ol class=" "><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war.skipdeploy            </p>
    </li><li class=" ">            <p>
    cp -r target/example.war/ $JBOSS_HOME/standalone/deployments            </p>
    </li><li class=" ">            <p>
    rm $JBOSS_HOME/standalone/deployments/example.war.skipdeploy            </p>
    </li></ol>            <p>
    H) Manual mode only: Live replace portions of currently deployed unzipped content without redeploying:            </p>
    <ol class=" "><li class=" ">            <p>
    cp -r target/example.war/foo.html $JBOSS_HOME/standalone/deployments/example.war            </p>
    </li></ol>            <p>
    I) Auto-deploy mode only: Live replace portions of currently deployed unzipped content without redeploying:            </p>
    <ol class=" "><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war.skipdeploy            </p>
    </li><li class=" ">            <p>
    cp -r target/example.war/foo.html $JBOSS_HOME/standalone/deployments/example.war            </p>
    </li></ol>            <p>
    J) Manual or auto-deploy mode: Redeploy currently deployed content (i.e. bounce it with no content change):            </p>
    <ol class=" "><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war.dodeploy            </p>
    </li></ol>            <p>
    K) Auto-deploy mode only: Redeploy currently deployed content (i.e. bounce it with no content change):            </p>
    <ol class=" "><li class=" ">            <p>
    touch $JBOSS_HOME/standalone/deployments/example.war            </p>
    </li></ol>    <div class="confbox admonition admonition-info">
        
            <p>
    The above examples use Unix shell commands. Windows equivalents are:            </p>
                <p>
    cp src dest --&gt; xcopy /y src dest<br/>cp -r src dest --&gt; xcopy /e /s /y src dest<br/>rm afile --&gt; del afile<br/>touch afile --&gt; echo&gt;&gt; afile            </p>
                <p>
    Note that the behavior of 'touch' and 'echo' are different but the differences are not relevant to the usages in the examples above.            </p>
        </div>
    
    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="66322694_Managementtasks-GettingServerspecificMetricsinaManagedDomain"  >
        <h2>Getting Server-specific Metrics in a Managed Domain</h2>
    
            <p>
    In a managed domain, with one or more server groups deployed, we may wish to view server-specific subsystem metrics for a given subsystem resource. In other words, for a given host and a server deployed on that host, we may wish to view metrics defined for a particular subsystem which reflect the run-time behaviour of that particular subsystem on that particular server instance.&nbsp;            </p>
                <p>
    For example, we may have a server group of consisting of two servers using the full-ha profile, so forming a cluster, and a distributed application deployed on that cluster. The values for runtime metrics for distributed cache management on each server would reflect the processing activity at that particular server.            </p>
        <div class="section-3"  id="66322694_Managementtasks-Standalonemode"  >
        <h3>Standalone mode</h3>
    
            <p>
    In standalone mode, such resources could be accessed by using the CLI to connect to the standalone instance and executing the command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/subsystem=infinispan/cache-container=web/distributed-cache=dist:read-resource(include-runtime=true)
</code></pre>
        </div>
    </div>
            <p>
    The fact that we have used the CLI to connect to a specific server instance allows us to choose the server we wish to read the metrics from.            </p>
        </div>
    
    <div class="section-3"  id="66322694_Managementtasks-Domainmode"  >
        <h3>Domain mode</h3>
    
            <p>
    In domain mode, the same resources could be accessed by using the CLI to connect to the domain controller of the domain and executing the command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/host=&lt;host&gt;/server=&lt;server&gt;/subsystem=infinispan/cache-container=web/distributed-cache=dist:read-resource(include-runtime=true)
</code></pre>
        </div>
    </div>
            <p>
    where &lt;host&gt; is the name of the host on which the server resides and &lt;server&gt; is the name of the server of interest.&nbsp;            </p>
                <p>
    Note that the command:            </p>
        <div class="confbox programlisting">
                <div class="content">
        <pre><code>/profile=full-ha/subsystem=infinispan/cache-container=web/distributed-cache=dist:read-resource(include-runtime=true)</code></pre>
        </div>
    </div>
            <p>
    does not return run-time information concerning specific servers, but rather the configuration of the full-ha profile used in the domain. Any run-time metrics will be marked as undefined.            </p>
        </div>
    
    </div>
    
        </div>
    </div>
</body>
</html>
